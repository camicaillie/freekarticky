(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function Iw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Op={exports:{}},Xl={},Mp={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0;function Tj(){if(i0)return Oe;i0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),k=Symbol.iterator;function _(L){return L===null||typeof L!="object"?null:(L=k&&L[k]||L["@@iterator"],typeof L=="function"?L:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,N={};function M(L,$,me){this.props=L,this.context=$,this.refs=N,this.updater=me||S}M.prototype.isReactComponent={},M.prototype.setState=function(L,$){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,$,"setState")},M.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function q(){}q.prototype=M.prototype;function G(L,$,me){this.props=L,this.context=$,this.refs=N,this.updater=me||S}var Q=G.prototype=new q;Q.constructor=G,C(Q,M.prototype),Q.isPureReactComponent=!0;var re=Array.isArray,ee=Object.prototype.hasOwnProperty,se={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function z(L,$,me){var Ne,ze={},Me=null,Be=null;if($!=null)for(Ne in $.ref!==void 0&&(Be=$.ref),$.key!==void 0&&(Me=""+$.key),$)ee.call($,Ne)&&!P.hasOwnProperty(Ne)&&(ze[Ne]=$[Ne]);var We=arguments.length-2;if(We===1)ze.children=me;else if(1<We){for(var tt=Array(We),Tt=0;Tt<We;Tt++)tt[Tt]=arguments[Tt+2];ze.children=tt}if(L&&L.defaultProps)for(Ne in We=L.defaultProps,We)ze[Ne]===void 0&&(ze[Ne]=We[Ne]);return{$$typeof:n,type:L,key:Me,ref:Be,props:ze,_owner:se.current}}function j(L,$){return{$$typeof:n,type:L.type,key:$,ref:L.ref,props:L.props,_owner:L._owner}}function A(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function V(L){var $={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(me){return $[me]})}var O=/\/+/g;function I(L,$){return typeof L=="object"&&L!==null&&L.key!=null?V(""+L.key):$.toString(36)}function Qe(L,$,me,Ne,ze){var Me=typeof L;(Me==="undefined"||Me==="boolean")&&(L=null);var Be=!1;if(L===null)Be=!0;else switch(Me){case"string":case"number":Be=!0;break;case"object":switch(L.$$typeof){case n:case e:Be=!0}}if(Be)return Be=L,ze=ze(Be),L=Ne===""?"."+I(Be,0):Ne,re(ze)?(me="",L!=null&&(me=L.replace(O,"$&/")+"/"),Qe(ze,$,me,"",function(Tt){return Tt})):ze!=null&&(A(ze)&&(ze=j(ze,me+(!ze.key||Be&&Be.key===ze.key?"":(""+ze.key).replace(O,"$&/")+"/")+L)),$.push(ze)),1;if(Be=0,Ne=Ne===""?".":Ne+":",re(L))for(var We=0;We<L.length;We++){Me=L[We];var tt=Ne+I(Me,We);Be+=Qe(Me,$,me,tt,ze)}else if(tt=_(L),typeof tt=="function")for(L=tt.call(L),We=0;!(Me=L.next()).done;)Me=Me.value,tt=Ne+I(Me,We++),Be+=Qe(Me,$,me,tt,ze);else if(Me==="object")throw $=String(L),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return Be}function rt(L,$,me){if(L==null)return L;var Ne=[],ze=0;return Qe(L,Ne,"","",function(Me){return $.call(me,Me,ze++)}),Ne}function Ve(L){if(L._status===-1){var $=L._result;$=$(),$.then(function(me){(L._status===0||L._status===-1)&&(L._status=1,L._result=me)},function(me){(L._status===0||L._status===-1)&&(L._status=2,L._result=me)}),L._status===-1&&(L._status=0,L._result=$)}if(L._status===1)return L._result.default;throw L._result}var ve={current:null},Z={transition:null},ge={ReactCurrentDispatcher:ve,ReactCurrentBatchConfig:Z,ReactCurrentOwner:se};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:rt,forEach:function(L,$,me){rt(L,function(){$.apply(this,arguments)},me)},count:function(L){var $=0;return rt(L,function(){$++}),$},toArray:function(L){return rt(L,function($){return $})||[]},only:function(L){if(!A(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Oe.Component=M,Oe.Fragment=t,Oe.Profiler=i,Oe.PureComponent=G,Oe.StrictMode=r,Oe.Suspense=h,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Oe.act=ae,Oe.cloneElement=function(L,$,me){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Ne=C({},L.props),ze=L.key,Me=L.ref,Be=L._owner;if($!=null){if($.ref!==void 0&&(Me=$.ref,Be=se.current),$.key!==void 0&&(ze=""+$.key),L.type&&L.type.defaultProps)var We=L.type.defaultProps;for(tt in $)ee.call($,tt)&&!P.hasOwnProperty(tt)&&(Ne[tt]=$[tt]===void 0&&We!==void 0?We[tt]:$[tt])}var tt=arguments.length-2;if(tt===1)Ne.children=me;else if(1<tt){We=Array(tt);for(var Tt=0;Tt<tt;Tt++)We[Tt]=arguments[Tt+2];Ne.children=We}return{$$typeof:n,type:L.type,key:ze,ref:Me,props:Ne,_owner:Be}},Oe.createContext=function(L){return L={$$typeof:l,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:a,_context:L},L.Consumer=L},Oe.createElement=z,Oe.createFactory=function(L){var $=z.bind(null,L);return $.type=L,$},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(L){return{$$typeof:c,render:L}},Oe.isValidElement=A,Oe.lazy=function(L){return{$$typeof:y,_payload:{_status:-1,_result:L},_init:Ve}},Oe.memo=function(L,$){return{$$typeof:p,type:L,compare:$===void 0?null:$}},Oe.startTransition=function(L){var $=Z.transition;Z.transition={};try{L()}finally{Z.transition=$}},Oe.unstable_act=ae,Oe.useCallback=function(L,$){return ve.current.useCallback(L,$)},Oe.useContext=function(L){return ve.current.useContext(L)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(L){return ve.current.useDeferredValue(L)},Oe.useEffect=function(L,$){return ve.current.useEffect(L,$)},Oe.useId=function(){return ve.current.useId()},Oe.useImperativeHandle=function(L,$,me){return ve.current.useImperativeHandle(L,$,me)},Oe.useInsertionEffect=function(L,$){return ve.current.useInsertionEffect(L,$)},Oe.useLayoutEffect=function(L,$){return ve.current.useLayoutEffect(L,$)},Oe.useMemo=function(L,$){return ve.current.useMemo(L,$)},Oe.useReducer=function(L,$,me){return ve.current.useReducer(L,$,me)},Oe.useRef=function(L){return ve.current.useRef(L)},Oe.useState=function(L){return ve.current.useState(L)},Oe.useSyncExternalStore=function(L,$,me){return ve.current.useSyncExternalStore(L,$,me)},Oe.useTransition=function(){return ve.current.useTransition()},Oe.version="18.3.1",Oe}var s0;function mv(){return s0||(s0=1,Mp.exports=Tj()),Mp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0;function zj(){if(a0)return Xl;a0=1;var n=mv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,p){var y,k={},_=null,S=null;p!==void 0&&(_=""+p),h.key!==void 0&&(_=""+h.key),h.ref!==void 0&&(S=h.ref);for(y in h)r.call(h,y)&&!a.hasOwnProperty(y)&&(k[y]=h[y]);if(c&&c.defaultProps)for(y in h=c.defaultProps,h)k[y]===void 0&&(k[y]=h[y]);return{$$typeof:e,type:c,key:_,ref:S,props:k,_owner:i.current}}return Xl.Fragment=t,Xl.jsx=l,Xl.jsxs=l,Xl}var l0;function Sj(){return l0||(l0=1,Op.exports=zj()),Op.exports}var E=Sj(),te=mv();const xj=Iw(te);var Ed={},Lp={exports:{}},bn={},Fp={exports:{}},Up={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function jj(){return u0||(u0=1,function(n){function e(Z,ge){var ae=Z.length;Z.push(ge);e:for(;0<ae;){var L=ae-1>>>1,$=Z[L];if(0<i($,ge))Z[L]=ge,Z[ae]=$,ae=L;else break e}}function t(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var ge=Z[0],ae=Z.pop();if(ae!==ge){Z[0]=ae;e:for(var L=0,$=Z.length,me=$>>>1;L<me;){var Ne=2*(L+1)-1,ze=Z[Ne],Me=Ne+1,Be=Z[Me];if(0>i(ze,ae))Me<$&&0>i(Be,ze)?(Z[L]=Be,Z[Me]=ae,L=Me):(Z[L]=ze,Z[Ne]=ae,L=Ne);else if(Me<$&&0>i(Be,ae))Z[L]=Be,Z[Me]=ae,L=Me;else break e}}return ge}function i(Z,ge){var ae=Z.sortIndex-ge.sortIndex;return ae!==0?ae:Z.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],p=[],y=1,k=null,_=3,S=!1,C=!1,N=!1,M=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(Z){for(var ge=t(p);ge!==null;){if(ge.callback===null)r(p);else if(ge.startTime<=Z)r(p),ge.sortIndex=ge.expirationTime,e(h,ge);else break;ge=t(p)}}function re(Z){if(N=!1,Q(Z),!C)if(t(h)!==null)C=!0,Ve(ee);else{var ge=t(p);ge!==null&&ve(re,ge.startTime-Z)}}function ee(Z,ge){C=!1,N&&(N=!1,q(z),z=-1),S=!0;var ae=_;try{for(Q(ge),k=t(h);k!==null&&(!(k.expirationTime>ge)||Z&&!V());){var L=k.callback;if(typeof L=="function"){k.callback=null,_=k.priorityLevel;var $=L(k.expirationTime<=ge);ge=n.unstable_now(),typeof $=="function"?k.callback=$:k===t(h)&&r(h),Q(ge)}else r(h);k=t(h)}if(k!==null)var me=!0;else{var Ne=t(p);Ne!==null&&ve(re,Ne.startTime-ge),me=!1}return me}finally{k=null,_=ae,S=!1}}var se=!1,P=null,z=-1,j=5,A=-1;function V(){return!(n.unstable_now()-A<j)}function O(){if(P!==null){var Z=n.unstable_now();A=Z;var ge=!0;try{ge=P(!0,Z)}finally{ge?I():(se=!1,P=null)}}else se=!1}var I;if(typeof G=="function")I=function(){G(O)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,rt=Qe.port2;Qe.port1.onmessage=O,I=function(){rt.postMessage(null)}}else I=function(){M(O,0)};function Ve(Z){P=Z,se||(se=!0,I())}function ve(Z,ge){z=M(function(){Z(n.unstable_now())},ge)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_continueExecution=function(){C||S||(C=!0,Ve(ee))},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(Z){switch(_){case 1:case 2:case 3:var ge=3;break;default:ge=_}var ae=_;_=ge;try{return Z()}finally{_=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Z,ge){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ae=_;_=Z;try{return ge()}finally{_=ae}},n.unstable_scheduleCallback=function(Z,ge,ae){var L=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?L+ae:L):ae=L,Z){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ae+$,Z={id:y++,callback:ge,priorityLevel:Z,startTime:ae,expirationTime:$,sortIndex:-1},ae>L?(Z.sortIndex=ae,e(p,Z),t(h)===null&&Z===t(p)&&(N?(q(z),z=-1):N=!0,ve(re,ae-L))):(Z.sortIndex=$,e(h,Z),C||S||(C=!0,Ve(ee))),Z},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(Z){var ge=_;return function(){var ae=_;_=ge;try{return Z.apply(this,arguments)}finally{_=ae}}}}(Up)),Up}var c0;function Ij(){return c0||(c0=1,Fp.exports=jj()),Fp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d0;function Pj(){if(d0)return bn;d0=1;var n=mv(),e=Ij();function t(o){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+o,u=1;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(o,s){l(o,s),l(o+"Capture",s)}function l(o,s){for(i[o]=s,o=0;o<s.length;o++)r.add(s[o])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},k={};function _(o){return h.call(k,o)?!0:h.call(y,o)?!1:p.test(o)?k[o]=!0:(y[o]=!0,!1)}function S(o,s,u,m){if(u!==null&&u.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return m?!1:u!==null?!u.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function C(o,s,u,m){if(s===null||typeof s>"u"||S(o,s,u,m))return!0;if(m)return!1;if(u!==null)switch(u.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function N(o,s,u,m,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=m,this.attributeNamespace=f,this.mustUseProperty=u,this.propertyName=o,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){M[o]=new N(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var s=o[0];M[s]=new N(s,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){M[o]=new N(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){M[o]=new N(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){M[o]=new N(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){M[o]=new N(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){M[o]=new N(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){M[o]=new N(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){M[o]=new N(o,5,!1,o.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function G(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var s=o.replace(q,G);M[s]=new N(s,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var s=o.replace(q,G);M[s]=new N(s,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var s=o.replace(q,G);M[s]=new N(s,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){M[o]=new N(o,1,!1,o.toLowerCase(),null,!1,!1)}),M.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){M[o]=new N(o,1,!1,o.toLowerCase(),null,!0,!0)});function Q(o,s,u,m){var f=M.hasOwnProperty(s)?M[s]:null;(f!==null?f.type!==0:m||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(C(s,u,f,m)&&(u=null),m||f===null?_(s)&&(u===null?o.removeAttribute(s):o.setAttribute(s,""+u)):f.mustUseProperty?o[f.propertyName]=u===null?f.type===3?!1:"":u:(s=f.attributeName,m=f.attributeNamespace,u===null?o.removeAttribute(s):(f=f.type,u=f===3||f===4&&u===!0?"":""+u,m?o.setAttributeNS(m,s,u):o.setAttribute(s,u))))}var re=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ee=Symbol.for("react.element"),se=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),V=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),Qe=Symbol.for("react.suspense_list"),rt=Symbol.for("react.memo"),Ve=Symbol.for("react.lazy"),ve=Symbol.for("react.offscreen"),Z=Symbol.iterator;function ge(o){return o===null||typeof o!="object"?null:(o=Z&&o[Z]||o["@@iterator"],typeof o=="function"?o:null)}var ae=Object.assign,L;function $(o){if(L===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);L=s&&s[1]||""}return`
`+L+o}var me=!1;function Ne(o,s){if(!o||me)return"";me=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(K){var m=K}Reflect.construct(o,[],s)}else{try{s.call()}catch(K){m=K}o.call(s.prototype)}else{try{throw Error()}catch(K){m=K}o()}}catch(K){if(K&&m&&typeof K.stack=="string"){for(var f=K.stack.split(`
`),g=m.stack.split(`
`),w=f.length-1,x=g.length-1;1<=w&&0<=x&&f[w]!==g[x];)x--;for(;1<=w&&0<=x;w--,x--)if(f[w]!==g[x]){if(w!==1||x!==1)do if(w--,x--,0>x||f[w]!==g[x]){var R=`
`+f[w].replace(" at new "," at ");return o.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",o.displayName)),R}while(1<=w&&0<=x);break}}}finally{me=!1,Error.prepareStackTrace=u}return(o=o?o.displayName||o.name:"")?$(o):""}function ze(o){switch(o.tag){case 5:return $(o.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return o=Ne(o.type,!1),o;case 11:return o=Ne(o.type.render,!1),o;case 1:return o=Ne(o.type,!0),o;default:return""}}function Me(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case P:return"Fragment";case se:return"Portal";case j:return"Profiler";case z:return"StrictMode";case I:return"Suspense";case Qe:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case V:return(o.displayName||"Context")+".Consumer";case A:return(o._context.displayName||"Context")+".Provider";case O:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case rt:return s=o.displayName||null,s!==null?s:Me(o.type)||"Memo";case Ve:s=o._payload,o=o._init;try{return Me(o(s))}catch{}}return null}function Be(o){var s=o.type;switch(o.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=s.render,o=o.displayName||o.name||"",s.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Me(s);case 8:return s===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function We(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function tt(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Tt(o){var s=tt(o)?"checked":"value",u=Object.getOwnPropertyDescriptor(o.constructor.prototype,s),m=""+o[s];if(!o.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,g=u.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){m=""+w,g.call(this,w)}}),Object.defineProperty(o,s,{enumerable:u.enumerable}),{getValue:function(){return m},setValue:function(w){m=""+w},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function Nn(o){o._valueTracker||(o._valueTracker=Tt(o))}function Dn(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var u=s.getValue(),m="";return o&&(m=tt(o)?o.checked?"true":"false":o.value),o=m,o!==u?(s.setValue(o),!0):!1}function yr(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Lr(o,s){var u=s.checked;return ae({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??o._wrapperState.initialChecked})}function vo(o,s){var u=s.defaultValue==null?"":s.defaultValue,m=s.checked!=null?s.checked:s.defaultChecked;u=We(s.value!=null?s.value:u),o._wrapperState={initialChecked:m,initialValue:u,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function go(o,s){s=s.checked,s!=null&&Q(o,"checked",s,!1)}function ce(o,s){go(o,s);var u=We(s.value),m=s.type;if(u!=null)m==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+u):o.value!==""+u&&(o.value=""+u);else if(m==="submit"||m==="reset"){o.removeAttribute("value");return}s.hasOwnProperty("value")?Ee(o,s.type,u):s.hasOwnProperty("defaultValue")&&Ee(o,s.type,We(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(o.defaultChecked=!!s.defaultChecked)}function we(o,s,u){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var m=s.type;if(!(m!=="submit"&&m!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+o._wrapperState.initialValue,u||s===o.value||(o.value=s),o.defaultValue=s}u=o.name,u!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,u!==""&&(o.name=u)}function Ee(o,s,u){(s!=="number"||yr(o.ownerDocument)!==o)&&(u==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+u&&(o.defaultValue=""+u))}var Te=Array.isArray;function He(o,s,u,m){if(o=o.options,s){s={};for(var f=0;f<u.length;f++)s["$"+u[f]]=!0;for(u=0;u<o.length;u++)f=s.hasOwnProperty("$"+o[u].value),o[u].selected!==f&&(o[u].selected=f),f&&m&&(o[u].defaultSelected=!0)}else{for(u=""+We(u),s=null,f=0;f<o.length;f++){if(o[f].value===u){o[f].selected=!0,m&&(o[f].defaultSelected=!0);return}s!==null||o[f].disabled||(s=o[f])}s!==null&&(s.selected=!0)}}function Ut(o,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},s,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function yo(o,s){var u=s.value;if(u==null){if(u=s.children,s=s.defaultValue,u!=null){if(s!=null)throw Error(t(92));if(Te(u)){if(1<u.length)throw Error(t(93));u=u[0]}s=u}s==null&&(s=""),u=s}o._wrapperState={initialValue:We(u)}}function Es(o,s){var u=We(s.value),m=We(s.defaultValue);u!=null&&(u=""+u,u!==o.value&&(o.value=u),s.defaultValue==null&&o.defaultValue!==u&&(o.defaultValue=u)),m!=null&&(o.defaultValue=""+m)}function ll(o){var s=o.textContent;s===o._wrapperState.initialValue&&s!==""&&s!==null&&(o.value=s)}function It(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pt(o,s){return o==null||o==="http://www.w3.org/1999/xhtml"?It(s):o==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Fr,ul=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,u,m,f){MSApp.execUnsafeLocalFunction(function(){return o(s,u,m,f)})}:o}(function(o,s){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=s;else{for(Fr=Fr||document.createElement("div"),Fr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Fr.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;s.firstChild;)o.appendChild(s.firstChild)}});function ko(o,s){if(s){var u=o.firstChild;if(u&&u===o.lastChild&&u.nodeType===3){u.nodeValue=s;return}}o.textContent=s}var fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vi=["Webkit","ms","Moz","O"];Object.keys(fi).forEach(function(o){vi.forEach(function(s){s=s+o.charAt(0).toUpperCase()+o.substring(1),fi[s]=fi[o]})});function cl(o,s,u){return s==null||typeof s=="boolean"||s===""?"":u||typeof s!="number"||s===0||fi.hasOwnProperty(o)&&fi[o]?(""+s).trim():s+"px"}function dl(o,s){o=o.style;for(var u in s)if(s.hasOwnProperty(u)){var m=u.indexOf("--")===0,f=cl(u,s[u],m);u==="float"&&(u="cssFloat"),m?o.setProperty(u,f):o[u]=f}}var hl=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ml(o,s){if(s){if(hl[o]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function pl(o,s){if(o.indexOf("-")===-1)return typeof s.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gi=null;function Ts(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var zs=null,On=null,kr=null;function Ss(o){if(o=Ml(o)){if(typeof zs!="function")throw Error(t(280));var s=o.stateNode;s&&(s=Mc(s),zs(o.stateNode,o.type,s))}}function br(o){On?kr?kr.push(o):kr=[o]:On=o}function fl(){if(On){var o=On,s=kr;if(kr=On=null,Ss(o),s)for(o=0;o<s.length;o++)Ss(s[o])}}function yi(o,s){return o(s)}function vl(){}var Ur=!1;function gl(o,s,u){if(Ur)return o(s,u);Ur=!0;try{return yi(o,s,u)}finally{Ur=!1,(On!==null||kr!==null)&&(vl(),fl())}}function _t(o,s){var u=o.stateNode;if(u===null)return null;var m=Mc(u);if(m===null)return null;u=m[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(u&&typeof u!="function")throw Error(t(231,s,typeof u));return u}var xs=!1;if(c)try{var Yn={};Object.defineProperty(Yn,"passive",{get:function(){xs=!0}}),window.addEventListener("test",Yn,Yn),window.removeEventListener("test",Yn,Yn)}catch{xs=!1}function ki(o,s,u,m,f,g,w,x,R){var K=Array.prototype.slice.call(arguments,3);try{s.apply(u,K)}catch(X){this.onError(X)}}var bi=!1,js=null,Xn=!1,yl=null,dm={onError:function(o){bi=!0,js=o}};function Is(o,s,u,m,f,g,w,x,R){bi=!1,js=null,ki.apply(dm,arguments)}function uc(o,s,u,m,f,g,w,x,R){if(Is.apply(this,arguments),bi){if(bi){var K=js;bi=!1,js=null}else throw Error(t(198));Xn||(Xn=!0,yl=K)}}function er(o){var s=o,u=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(u=s.return),o=s.return;while(o)}return s.tag===3?u:null}function _i(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function tr(o){if(er(o)!==o)throw Error(t(188))}function cc(o){var s=o.alternate;if(!s){if(s=er(o),s===null)throw Error(t(188));return s!==o?null:o}for(var u=o,m=s;;){var f=u.return;if(f===null)break;var g=f.alternate;if(g===null){if(m=f.return,m!==null){u=m;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===u)return tr(f),o;if(g===m)return tr(f),s;g=g.sibling}throw Error(t(188))}if(u.return!==m.return)u=f,m=g;else{for(var w=!1,x=f.child;x;){if(x===u){w=!0,u=f,m=g;break}if(x===m){w=!0,m=f,u=g;break}x=x.sibling}if(!w){for(x=g.child;x;){if(x===u){w=!0,u=g,m=f;break}if(x===m){w=!0,m=g,u=f;break}x=x.sibling}if(!w)throw Error(t(189))}}if(u.alternate!==m)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?o:s}function kl(o){return o=cc(o),o!==null?Ps(o):null}function Ps(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var s=Ps(o);if(s!==null)return s;o=o.sibling}return null}var As=e.unstable_scheduleCallback,bl=e.unstable_cancelCallback,dc=e.unstable_shouldYield,hm=e.unstable_requestPaint,ot=e.unstable_now,hc=e.unstable_getCurrentPriorityLevel,wi=e.unstable_ImmediatePriority,bo=e.unstable_UserBlockingPriority,Mn=e.unstable_NormalPriority,_l=e.unstable_LowPriority,mc=e.unstable_IdlePriority,Ei=null,Tn=null;function pc(o){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(Ei,o,void 0,(o.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:vc,wl=Math.log,fc=Math.LN2;function vc(o){return o>>>=0,o===0?32:31-(wl(o)/fc|0)|0}var Cs=64,Rs=4194304;function _o(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Ti(o,s){var u=o.pendingLanes;if(u===0)return 0;var m=0,f=o.suspendedLanes,g=o.pingedLanes,w=u&268435455;if(w!==0){var x=w&~f;x!==0?m=_o(x):(g&=w,g!==0&&(m=_o(g)))}else w=u&~f,w!==0?m=_o(w):g!==0&&(m=_o(g));if(m===0)return 0;if(s!==0&&s!==m&&(s&f)===0&&(f=m&-m,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((m&4)!==0&&(m|=u&16),s=o.entangledLanes,s!==0)for(o=o.entanglements,s&=m;0<s;)u=31-on(s),f=1<<u,m|=o[u],s&=~f;return m}function mm(o,s){switch(o){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Br(o,s){for(var u=o.suspendedLanes,m=o.pingedLanes,f=o.expirationTimes,g=o.pendingLanes;0<g;){var w=31-on(g),x=1<<w,R=f[w];R===-1?((x&u)===0||(x&m)!==0)&&(f[w]=mm(x,s)):R<=s&&(o.expiredLanes|=x),g&=~x}}function zn(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function zi(){var o=Cs;return Cs<<=1,(Cs&4194240)===0&&(Cs=64),o}function wo(o){for(var s=[],u=0;31>u;u++)s.push(o);return s}function Eo(o,s,u){o.pendingLanes|=s,s!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,s=31-on(s),o[s]=u}function nt(o,s){var u=o.pendingLanes&~s;o.pendingLanes=s,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=s,o.mutableReadLanes&=s,o.entangledLanes&=s,s=o.entanglements;var m=o.eventTimes;for(o=o.expirationTimes;0<u;){var f=31-on(u),g=1<<f;s[f]=0,m[f]=-1,o[f]=-1,u&=~g}}function To(o,s){var u=o.entangledLanes|=s;for(o=o.entanglements;u;){var m=31-on(u),f=1<<m;f&s|o[m]&s&&(o[m]|=s),u&=~f}}var Ue=0;function zo(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var gc,Vs,yc,kc,bc,El=!1,_r=[],Bt=null,nr=null,rr=null,So=new Map,Ln=new Map,wr=[],pm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _c(o,s){switch(o){case"focusin":case"focusout":Bt=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":So.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ln.delete(s.pointerId)}}function mn(o,s,u,m,f,g){return o===null||o.nativeEvent!==g?(o={blockedOn:s,domEventName:u,eventSystemFlags:m,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Ml(s),s!==null&&Vs(s)),o):(o.eventSystemFlags|=m,s=o.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),o)}function fm(o,s,u,m,f){switch(s){case"focusin":return Bt=mn(Bt,o,s,u,m,f),!0;case"dragenter":return nr=mn(nr,o,s,u,m,f),!0;case"mouseover":return rr=mn(rr,o,s,u,m,f),!0;case"pointerover":var g=f.pointerId;return So.set(g,mn(So.get(g)||null,o,s,u,m,f)),!0;case"gotpointercapture":return g=f.pointerId,Ln.set(g,mn(Ln.get(g)||null,o,s,u,m,f)),!0}return!1}function wc(o){var s=Pi(o.target);if(s!==null){var u=er(s);if(u!==null){if(s=u.tag,s===13){if(s=_i(u),s!==null){o.blockedOn=s,bc(o.priority,function(){yc(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){o.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Hr(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var u=Ns(o.domEventName,o.eventSystemFlags,s[0],o.nativeEvent);if(u===null){u=o.nativeEvent;var m=new u.constructor(u.type,u);gi=m,u.target.dispatchEvent(m),gi=null}else return s=Ml(u),s!==null&&Vs(s),o.blockedOn=u,!1;s.shift()}return!0}function Si(o,s,u){Hr(o)&&u.delete(s)}function Ec(){El=!1,Bt!==null&&Hr(Bt)&&(Bt=null),nr!==null&&Hr(nr)&&(nr=null),rr!==null&&Hr(rr)&&(rr=null),So.forEach(Si),Ln.forEach(Si)}function or(o,s){o.blockedOn===s&&(o.blockedOn=null,El||(El=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ec)))}function ir(o){function s(f){return or(f,o)}if(0<_r.length){or(_r[0],o);for(var u=1;u<_r.length;u++){var m=_r[u];m.blockedOn===o&&(m.blockedOn=null)}}for(Bt!==null&&or(Bt,o),nr!==null&&or(nr,o),rr!==null&&or(rr,o),So.forEach(s),Ln.forEach(s),u=0;u<wr.length;u++)m=wr[u],m.blockedOn===o&&(m.blockedOn=null);for(;0<wr.length&&(u=wr[0],u.blockedOn===null);)wc(u),u.blockedOn===null&&wr.shift()}var Kr=re.ReactCurrentBatchConfig,xo=!0;function ut(o,s,u,m){var f=Ue,g=Kr.transition;Kr.transition=null;try{Ue=1,Tl(o,s,u,m)}finally{Ue=f,Kr.transition=g}}function vm(o,s,u,m){var f=Ue,g=Kr.transition;Kr.transition=null;try{Ue=4,Tl(o,s,u,m)}finally{Ue=f,Kr.transition=g}}function Tl(o,s,u,m){if(xo){var f=Ns(o,s,u,m);if(f===null)xm(o,s,m,xi,u),_c(o,m);else if(fm(f,o,s,u,m))m.stopPropagation();else if(_c(o,m),s&4&&-1<pm.indexOf(o)){for(;f!==null;){var g=Ml(f);if(g!==null&&gc(g),g=Ns(o,s,u,m),g===null&&xm(o,s,m,xi,u),g===f)break;f=g}f!==null&&m.stopPropagation()}else xm(o,s,m,null,u)}}var xi=null;function Ns(o,s,u,m){if(xi=null,o=Ts(m),o=Pi(o),o!==null)if(s=er(o),s===null)o=null;else if(u=s.tag,u===13){if(o=_i(s),o!==null)return o;o=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null);return xi=o,null}function zl(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hc()){case wi:return 1;case bo:return 4;case Mn:case _l:return 16;case mc:return 536870912;default:return 16}default:return 16}}var Sn=null,Ds=null,pn=null;function Sl(){if(pn)return pn;var o,s=Ds,u=s.length,m,f="value"in Sn?Sn.value:Sn.textContent,g=f.length;for(o=0;o<u&&s[o]===f[o];o++);var w=u-o;for(m=1;m<=w&&s[u-m]===f[g-m];m++);return pn=f.slice(o,1<m?1-m:void 0)}function Os(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function Er(){return!0}function xl(){return!1}function Ht(o){function s(u,m,f,g,w){this._reactName=u,this._targetInst=f,this.type=m,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var x in o)o.hasOwnProperty(x)&&(u=o[x],this[x]=u?u(g):g[x]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Er:xl,this.isPropagationStopped=xl,this}return ae(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Er)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Er)},persist:function(){},isPersistent:Er}),s}var sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ms=Ht(sr),Tr=ae({},sr,{view:0,detail:0}),gm=Ht(Tr),Ls,$r,jo,ji=ae({},Tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zr,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==jo&&(jo&&o.type==="mousemove"?(Ls=o.screenX-jo.screenX,$r=o.screenY-jo.screenY):$r=Ls=0,jo=o),Ls)},movementY:function(o){return"movementY"in o?o.movementY:$r}}),Fs=Ht(ji),jl=ae({},ji,{dataTransfer:0}),Tc=Ht(jl),Us=ae({},Tr,{relatedTarget:0}),Bs=Ht(Us),zc=ae({},sr,{animationName:0,elapsedTime:0,pseudoElement:0}),Wr=Ht(zc),Sc=ae({},sr,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),xc=Ht(Sc),jc=ae({},sr,{data:0}),Il=Ht(jc),Hs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ic={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pc(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=Ic[o])?!!s[o]:!1}function zr(){return Pc}var d=ae({},Tr,{key:function(o){if(o.key){var s=Hs[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=Os(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?sn[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zr,charCode:function(o){return o.type==="keypress"?Os(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Os(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),v=Ht(d),b=ae({},ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Ht(b),F=ae({},Tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zr}),W=Ht(F),le=ae({},sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ze=Ht(le),At=ae({},ji,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Ke=Ht(At),Dt=[9,13,27,32],zt=c&&"CompositionEvent"in window,Fn=null;c&&"documentMode"in document&&(Fn=document.documentMode);var xn=c&&"TextEvent"in window&&!Fn,Ii=c&&(!zt||Fn&&8<Fn&&11>=Fn),Ks=" ",Xg=!1;function ey(o,s){switch(o){case"keyup":return Dt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ty(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var $s=!1;function _x(o,s){switch(o){case"compositionend":return ty(s);case"keypress":return s.which!==32?null:(Xg=!0,Ks);case"textInput":return o=s.data,o===Ks&&Xg?null:o;default:return null}}function wx(o,s){if($s)return o==="compositionend"||!zt&&ey(o,s)?(o=Sl(),pn=Ds=Sn=null,$s=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ii&&s.locale!=="ko"?null:s.data;default:return null}}var Ex={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ny(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!Ex[o.type]:s==="textarea"}function ry(o,s,u,m){br(m),s=Nc(s,"onChange"),0<s.length&&(u=new Ms("onChange","change",null,u,m),o.push({event:u,listeners:s}))}var Pl=null,Al=null;function Tx(o){_y(o,0)}function Ac(o){var s=Js(o);if(Dn(s))return o}function zx(o,s){if(o==="change")return s}var oy=!1;if(c){var ym;if(c){var km="oninput"in document;if(!km){var iy=document.createElement("div");iy.setAttribute("oninput","return;"),km=typeof iy.oninput=="function"}ym=km}else ym=!1;oy=ym&&(!document.documentMode||9<document.documentMode)}function sy(){Pl&&(Pl.detachEvent("onpropertychange",ay),Al=Pl=null)}function ay(o){if(o.propertyName==="value"&&Ac(Al)){var s=[];ry(s,Al,o,Ts(o)),gl(Tx,s)}}function Sx(o,s,u){o==="focusin"?(sy(),Pl=s,Al=u,Pl.attachEvent("onpropertychange",ay)):o==="focusout"&&sy()}function xx(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Ac(Al)}function jx(o,s){if(o==="click")return Ac(s)}function Ix(o,s){if(o==="input"||o==="change")return Ac(s)}function Px(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var ar=typeof Object.is=="function"?Object.is:Px;function Cl(o,s){if(ar(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var u=Object.keys(o),m=Object.keys(s);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var f=u[m];if(!h.call(s,f)||!ar(o[f],s[f]))return!1}return!0}function ly(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function uy(o,s){var u=ly(o);o=0;for(var m;u;){if(u.nodeType===3){if(m=o+u.textContent.length,o<=s&&m>=s)return{node:u,offset:s-o};o=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=ly(u)}}function cy(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?cy(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function dy(){for(var o=window,s=yr();s instanceof o.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)o=s.contentWindow;else break;s=yr(o.document)}return s}function bm(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}function Ax(o){var s=dy(),u=o.focusedElem,m=o.selectionRange;if(s!==u&&u&&u.ownerDocument&&cy(u.ownerDocument.documentElement,u)){if(m!==null&&bm(u)){if(s=m.start,o=m.end,o===void 0&&(o=s),"selectionStart"in u)u.selectionStart=s,u.selectionEnd=Math.min(o,u.value.length);else if(o=(s=u.ownerDocument||document)&&s.defaultView||window,o.getSelection){o=o.getSelection();var f=u.textContent.length,g=Math.min(m.start,f);m=m.end===void 0?g:Math.min(m.end,f),!o.extend&&g>m&&(f=m,m=g,g=f),f=uy(u,g);var w=uy(u,m);f&&w&&(o.rangeCount!==1||o.anchorNode!==f.node||o.anchorOffset!==f.offset||o.focusNode!==w.node||o.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),o.removeAllRanges(),g>m?(o.addRange(s),o.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),o.addRange(s)))}}for(s=[],o=u;o=o.parentNode;)o.nodeType===1&&s.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<s.length;u++)o=s[u],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Cx=c&&"documentMode"in document&&11>=document.documentMode,Ws=null,_m=null,Rl=null,wm=!1;function hy(o,s,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;wm||Ws==null||Ws!==yr(m)||(m=Ws,"selectionStart"in m&&bm(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Rl&&Cl(Rl,m)||(Rl=m,m=Nc(_m,"onSelect"),0<m.length&&(s=new Ms("onSelect","select",null,s,u),o.push({event:s,listeners:m}),s.target=Ws)))}function Cc(o,s){var u={};return u[o.toLowerCase()]=s.toLowerCase(),u["Webkit"+o]="webkit"+s,u["Moz"+o]="moz"+s,u}var Gs={animationend:Cc("Animation","AnimationEnd"),animationiteration:Cc("Animation","AnimationIteration"),animationstart:Cc("Animation","AnimationStart"),transitionend:Cc("Transition","TransitionEnd")},Em={},my={};c&&(my=document.createElement("div").style,"AnimationEvent"in window||(delete Gs.animationend.animation,delete Gs.animationiteration.animation,delete Gs.animationstart.animation),"TransitionEvent"in window||delete Gs.transitionend.transition);function Rc(o){if(Em[o])return Em[o];if(!Gs[o])return o;var s=Gs[o],u;for(u in s)if(s.hasOwnProperty(u)&&u in my)return Em[o]=s[u];return o}var py=Rc("animationend"),fy=Rc("animationiteration"),vy=Rc("animationstart"),gy=Rc("transitionend"),yy=new Map,ky="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Io(o,s){yy.set(o,s),a(s,[o])}for(var Tm=0;Tm<ky.length;Tm++){var zm=ky[Tm],Rx=zm.toLowerCase(),Vx=zm[0].toUpperCase()+zm.slice(1);Io(Rx,"on"+Vx)}Io(py,"onAnimationEnd"),Io(fy,"onAnimationIteration"),Io(vy,"onAnimationStart"),Io("dblclick","onDoubleClick"),Io("focusin","onFocus"),Io("focusout","onBlur"),Io(gy,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vl));function by(o,s,u){var m=o.type||"unknown-event";o.currentTarget=u,uc(m,s,void 0,o),o.currentTarget=null}function _y(o,s){s=(s&4)!==0;for(var u=0;u<o.length;u++){var m=o[u],f=m.event;m=m.listeners;e:{var g=void 0;if(s)for(var w=m.length-1;0<=w;w--){var x=m[w],R=x.instance,K=x.currentTarget;if(x=x.listener,R!==g&&f.isPropagationStopped())break e;by(f,x,K),g=R}else for(w=0;w<m.length;w++){if(x=m[w],R=x.instance,K=x.currentTarget,x=x.listener,R!==g&&f.isPropagationStopped())break e;by(f,x,K),g=R}}}if(Xn)throw o=yl,Xn=!1,yl=null,o}function at(o,s){var u=s[Rm];u===void 0&&(u=s[Rm]=new Set);var m=o+"__bubble";u.has(m)||(wy(s,o,2,!1),u.add(m))}function Sm(o,s,u){var m=0;s&&(m|=4),wy(u,o,m,s)}var Vc="_reactListening"+Math.random().toString(36).slice(2);function Nl(o){if(!o[Vc]){o[Vc]=!0,r.forEach(function(u){u!=="selectionchange"&&(Nx.has(u)||Sm(u,!1,o),Sm(u,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[Vc]||(s[Vc]=!0,Sm("selectionchange",!1,s))}}function wy(o,s,u,m){switch(zl(s)){case 1:var f=ut;break;case 4:f=vm;break;default:f=Tl}u=f.bind(null,s,u,o),f=void 0,!xs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),m?f!==void 0?o.addEventListener(s,u,{capture:!0,passive:f}):o.addEventListener(s,u,!0):f!==void 0?o.addEventListener(s,u,{passive:f}):o.addEventListener(s,u,!1)}function xm(o,s,u,m,f){var g=m;if((s&1)===0&&(s&2)===0&&m!==null)e:for(;;){if(m===null)return;var w=m.tag;if(w===3||w===4){var x=m.stateNode.containerInfo;if(x===f||x.nodeType===8&&x.parentNode===f)break;if(w===4)for(w=m.return;w!==null;){var R=w.tag;if((R===3||R===4)&&(R=w.stateNode.containerInfo,R===f||R.nodeType===8&&R.parentNode===f))return;w=w.return}for(;x!==null;){if(w=Pi(x),w===null)return;if(R=w.tag,R===5||R===6){m=g=w;continue e}x=x.parentNode}}m=m.return}gl(function(){var K=g,X=Ts(u),ne=[];e:{var Y=yy.get(o);if(Y!==void 0){var he=Ms,fe=o;switch(o){case"keypress":if(Os(u)===0)break e;case"keydown":case"keyup":he=v;break;case"focusin":fe="focus",he=Bs;break;case"focusout":fe="blur",he=Bs;break;case"beforeblur":case"afterblur":he=Bs;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Fs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Tc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=W;break;case py:case fy:case vy:he=Wr;break;case gy:he=Ze;break;case"scroll":he=gm;break;case"wheel":he=Ke;break;case"copy":case"cut":case"paste":he=xc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=T}var ke=(s&4)!==0,wt=!ke&&o==="scroll",B=ke?Y!==null?Y+"Capture":null:Y;ke=[];for(var D=K,H;D!==null;){H=D;var ie=H.stateNode;if(H.tag===5&&ie!==null&&(H=ie,B!==null&&(ie=_t(D,B),ie!=null&&ke.push(Dl(D,ie,H)))),wt)break;D=D.return}0<ke.length&&(Y=new he(Y,fe,null,u,X),ne.push({event:Y,listeners:ke}))}}if((s&7)===0){e:{if(Y=o==="mouseover"||o==="pointerover",he=o==="mouseout"||o==="pointerout",Y&&u!==gi&&(fe=u.relatedTarget||u.fromElement)&&(Pi(fe)||fe[Gr]))break e;if((he||Y)&&(Y=X.window===X?X:(Y=X.ownerDocument)?Y.defaultView||Y.parentWindow:window,he?(fe=u.relatedTarget||u.toElement,he=K,fe=fe?Pi(fe):null,fe!==null&&(wt=er(fe),fe!==wt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(he=null,fe=K),he!==fe)){if(ke=Fs,ie="onMouseLeave",B="onMouseEnter",D="mouse",(o==="pointerout"||o==="pointerover")&&(ke=T,ie="onPointerLeave",B="onPointerEnter",D="pointer"),wt=he==null?Y:Js(he),H=fe==null?Y:Js(fe),Y=new ke(ie,D+"leave",he,u,X),Y.target=wt,Y.relatedTarget=H,ie=null,Pi(X)===K&&(ke=new ke(B,D+"enter",fe,u,X),ke.target=H,ke.relatedTarget=wt,ie=ke),wt=ie,he&&fe)t:{for(ke=he,B=fe,D=0,H=ke;H;H=qs(H))D++;for(H=0,ie=B;ie;ie=qs(ie))H++;for(;0<D-H;)ke=qs(ke),D--;for(;0<H-D;)B=qs(B),H--;for(;D--;){if(ke===B||B!==null&&ke===B.alternate)break t;ke=qs(ke),B=qs(B)}ke=null}else ke=null;he!==null&&Ey(ne,Y,he,ke,!1),fe!==null&&wt!==null&&Ey(ne,wt,fe,ke,!0)}}e:{if(Y=K?Js(K):window,he=Y.nodeName&&Y.nodeName.toLowerCase(),he==="select"||he==="input"&&Y.type==="file")var be=zx;else if(ny(Y))if(oy)be=Ix;else{be=xx;var xe=Sx}else(he=Y.nodeName)&&he.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(be=jx);if(be&&(be=be(o,K))){ry(ne,be,u,X);break e}xe&&xe(o,Y,K),o==="focusout"&&(xe=Y._wrapperState)&&xe.controlled&&Y.type==="number"&&Ee(Y,"number",Y.value)}switch(xe=K?Js(K):window,o){case"focusin":(ny(xe)||xe.contentEditable==="true")&&(Ws=xe,_m=K,Rl=null);break;case"focusout":Rl=_m=Ws=null;break;case"mousedown":wm=!0;break;case"contextmenu":case"mouseup":case"dragend":wm=!1,hy(ne,u,X);break;case"selectionchange":if(Cx)break;case"keydown":case"keyup":hy(ne,u,X)}var je;if(zt)e:{switch(o){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else $s?ey(o,u)&&(Ae="onCompositionEnd"):o==="keydown"&&u.keyCode===229&&(Ae="onCompositionStart");Ae&&(Ii&&u.locale!=="ko"&&($s||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&$s&&(je=Sl()):(Sn=X,Ds="value"in Sn?Sn.value:Sn.textContent,$s=!0)),xe=Nc(K,Ae),0<xe.length&&(Ae=new Il(Ae,o,null,u,X),ne.push({event:Ae,listeners:xe}),je?Ae.data=je:(je=ty(u),je!==null&&(Ae.data=je)))),(je=xn?_x(o,u):wx(o,u))&&(K=Nc(K,"onBeforeInput"),0<K.length&&(X=new Il("onBeforeInput","beforeinput",null,u,X),ne.push({event:X,listeners:K}),X.data=je))}_y(ne,s)})}function Dl(o,s,u){return{instance:o,listener:s,currentTarget:u}}function Nc(o,s){for(var u=s+"Capture",m=[];o!==null;){var f=o,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=_t(o,u),g!=null&&m.unshift(Dl(o,g,f)),g=_t(o,s),g!=null&&m.push(Dl(o,g,f))),o=o.return}return m}function qs(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Ey(o,s,u,m,f){for(var g=s._reactName,w=[];u!==null&&u!==m;){var x=u,R=x.alternate,K=x.stateNode;if(R!==null&&R===m)break;x.tag===5&&K!==null&&(x=K,f?(R=_t(u,g),R!=null&&w.unshift(Dl(u,R,x))):f||(R=_t(u,g),R!=null&&w.push(Dl(u,R,x)))),u=u.return}w.length!==0&&o.push({event:s,listeners:w})}var Dx=/\r\n?/g,Ox=/\u0000|\uFFFD/g;function Ty(o){return(typeof o=="string"?o:""+o).replace(Dx,`
`).replace(Ox,"")}function Dc(o,s,u){if(s=Ty(s),Ty(o)!==s&&u)throw Error(t(425))}function Oc(){}var jm=null,Im=null;function Pm(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Am=typeof setTimeout=="function"?setTimeout:void 0,Mx=typeof clearTimeout=="function"?clearTimeout:void 0,zy=typeof Promise=="function"?Promise:void 0,Lx=typeof queueMicrotask=="function"?queueMicrotask:typeof zy<"u"?function(o){return zy.resolve(null).then(o).catch(Fx)}:Am;function Fx(o){setTimeout(function(){throw o})}function Cm(o,s){var u=s,m=0;do{var f=u.nextSibling;if(o.removeChild(u),f&&f.nodeType===8)if(u=f.data,u==="/$"){if(m===0){o.removeChild(f),ir(s);return}m--}else u!=="$"&&u!=="$?"&&u!=="$!"||m++;u=f}while(u);ir(s)}function Po(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return o}function Sy(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var u=o.data;if(u==="$"||u==="$!"||u==="$?"){if(s===0)return o;s--}else u==="/$"&&s++}o=o.previousSibling}return null}var Qs=Math.random().toString(36).slice(2),Sr="__reactFiber$"+Qs,Ol="__reactProps$"+Qs,Gr="__reactContainer$"+Qs,Rm="__reactEvents$"+Qs,Ux="__reactListeners$"+Qs,Bx="__reactHandles$"+Qs;function Pi(o){var s=o[Sr];if(s)return s;for(var u=o.parentNode;u;){if(s=u[Gr]||u[Sr]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(o=Sy(o);o!==null;){if(u=o[Sr])return u;o=Sy(o)}return s}o=u,u=o.parentNode}return null}function Ml(o){return o=o[Sr]||o[Gr],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Js(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function Mc(o){return o[Ol]||null}var Vm=[],Zs=-1;function Ao(o){return{current:o}}function lt(o){0>Zs||(o.current=Vm[Zs],Vm[Zs]=null,Zs--)}function it(o,s){Zs++,Vm[Zs]=o.current,o.current=s}var Co={},Qt=Ao(Co),fn=Ao(!1),Ai=Co;function Ys(o,s){var u=o.type.contextTypes;if(!u)return Co;var m=o.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===s)return m.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in u)f[g]=s[g];return m&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=s,o.__reactInternalMemoizedMaskedChildContext=f),f}function vn(o){return o=o.childContextTypes,o!=null}function Lc(){lt(fn),lt(Qt)}function xy(o,s,u){if(Qt.current!==Co)throw Error(t(168));it(Qt,s),it(fn,u)}function jy(o,s,u){var m=o.stateNode;if(s=s.childContextTypes,typeof m.getChildContext!="function")return u;m=m.getChildContext();for(var f in m)if(!(f in s))throw Error(t(108,Be(o)||"Unknown",f));return ae({},u,m)}function Fc(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Co,Ai=Qt.current,it(Qt,o),it(fn,fn.current),!0}function Iy(o,s,u){var m=o.stateNode;if(!m)throw Error(t(169));u?(o=jy(o,s,Ai),m.__reactInternalMemoizedMergedChildContext=o,lt(fn),lt(Qt),it(Qt,o)):lt(fn),it(fn,u)}var qr=null,Uc=!1,Nm=!1;function Py(o){qr===null?qr=[o]:qr.push(o)}function Hx(o){Uc=!0,Py(o)}function Ro(){if(!Nm&&qr!==null){Nm=!0;var o=0,s=Ue;try{var u=qr;for(Ue=1;o<u.length;o++){var m=u[o];do m=m(!0);while(m!==null)}qr=null,Uc=!1}catch(f){throw qr!==null&&(qr=qr.slice(o+1)),As(wi,Ro),f}finally{Ue=s,Nm=!1}}return null}var Xs=[],ea=0,Bc=null,Hc=0,Un=[],Bn=0,Ci=null,Qr=1,Jr="";function Ri(o,s){Xs[ea++]=Hc,Xs[ea++]=Bc,Bc=o,Hc=s}function Ay(o,s,u){Un[Bn++]=Qr,Un[Bn++]=Jr,Un[Bn++]=Ci,Ci=o;var m=Qr;o=Jr;var f=32-on(m)-1;m&=~(1<<f),u+=1;var g=32-on(s)+f;if(30<g){var w=f-f%5;g=(m&(1<<w)-1).toString(32),m>>=w,f-=w,Qr=1<<32-on(s)+f|u<<f|m,Jr=g+o}else Qr=1<<g|u<<f|m,Jr=o}function Dm(o){o.return!==null&&(Ri(o,1),Ay(o,1,0))}function Om(o){for(;o===Bc;)Bc=Xs[--ea],Xs[ea]=null,Hc=Xs[--ea],Xs[ea]=null;for(;o===Ci;)Ci=Un[--Bn],Un[Bn]=null,Jr=Un[--Bn],Un[Bn]=null,Qr=Un[--Bn],Un[Bn]=null}var jn=null,In=null,ct=!1,lr=null;function Cy(o,s){var u=Wn(5,null,null,0);u.elementType="DELETED",u.stateNode=s,u.return=o,s=o.deletions,s===null?(o.deletions=[u],o.flags|=16):s.push(u)}function Ry(o,s){switch(o.tag){case 5:var u=o.type;return s=s.nodeType!==1||u.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(o.stateNode=s,jn=o,In=Po(s.firstChild),!0):!1;case 6:return s=o.pendingProps===""||s.nodeType!==3?null:s,s!==null?(o.stateNode=s,jn=o,In=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(u=Ci!==null?{id:Qr,overflow:Jr}:null,o.memoizedState={dehydrated:s,treeContext:u,retryLane:1073741824},u=Wn(18,null,null,0),u.stateNode=s,u.return=o,o.child=u,jn=o,In=null,!0):!1;default:return!1}}function Mm(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Lm(o){if(ct){var s=In;if(s){var u=s;if(!Ry(o,s)){if(Mm(o))throw Error(t(418));s=Po(u.nextSibling);var m=jn;s&&Ry(o,s)?Cy(m,u):(o.flags=o.flags&-4097|2,ct=!1,jn=o)}}else{if(Mm(o))throw Error(t(418));o.flags=o.flags&-4097|2,ct=!1,jn=o}}}function Vy(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;jn=o}function Kc(o){if(o!==jn)return!1;if(!ct)return Vy(o),ct=!0,!1;var s;if((s=o.tag!==3)&&!(s=o.tag!==5)&&(s=o.type,s=s!=="head"&&s!=="body"&&!Pm(o.type,o.memoizedProps)),s&&(s=In)){if(Mm(o))throw Ny(),Error(t(418));for(;s;)Cy(o,s),s=Po(s.nextSibling)}if(Vy(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,s=0;o;){if(o.nodeType===8){var u=o.data;if(u==="/$"){if(s===0){In=Po(o.nextSibling);break e}s--}else u!=="$"&&u!=="$!"&&u!=="$?"||s++}o=o.nextSibling}In=null}}else In=jn?Po(o.stateNode.nextSibling):null;return!0}function Ny(){for(var o=In;o;)o=Po(o.nextSibling)}function ta(){In=jn=null,ct=!1}function Fm(o){lr===null?lr=[o]:lr.push(o)}var Kx=re.ReactCurrentBatchConfig;function Ll(o,s,u){if(o=u.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var m=u.stateNode}if(!m)throw Error(t(147,o));var f=m,g=""+o;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var x=f.refs;w===null?delete x[g]:x[g]=w},s._stringRef=g,s)}if(typeof o!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,o))}return o}function $c(o,s){throw o=Object.prototype.toString.call(s),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o))}function Dy(o){var s=o._init;return s(o._payload)}function Oy(o){function s(B,D){if(o){var H=B.deletions;H===null?(B.deletions=[D],B.flags|=16):H.push(D)}}function u(B,D){if(!o)return null;for(;D!==null;)s(B,D),D=D.sibling;return null}function m(B,D){for(B=new Map;D!==null;)D.key!==null?B.set(D.key,D):B.set(D.index,D),D=D.sibling;return B}function f(B,D){return B=Uo(B,D),B.index=0,B.sibling=null,B}function g(B,D,H){return B.index=H,o?(H=B.alternate,H!==null?(H=H.index,H<D?(B.flags|=2,D):H):(B.flags|=2,D)):(B.flags|=1048576,D)}function w(B){return o&&B.alternate===null&&(B.flags|=2),B}function x(B,D,H,ie){return D===null||D.tag!==6?(D=Ap(H,B.mode,ie),D.return=B,D):(D=f(D,H),D.return=B,D)}function R(B,D,H,ie){var be=H.type;return be===P?X(B,D,H.props.children,ie,H.key):D!==null&&(D.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Ve&&Dy(be)===D.type)?(ie=f(D,H.props),ie.ref=Ll(B,D,H),ie.return=B,ie):(ie=fd(H.type,H.key,H.props,null,B.mode,ie),ie.ref=Ll(B,D,H),ie.return=B,ie)}function K(B,D,H,ie){return D===null||D.tag!==4||D.stateNode.containerInfo!==H.containerInfo||D.stateNode.implementation!==H.implementation?(D=Cp(H,B.mode,ie),D.return=B,D):(D=f(D,H.children||[]),D.return=B,D)}function X(B,D,H,ie,be){return D===null||D.tag!==7?(D=Ui(H,B.mode,ie,be),D.return=B,D):(D=f(D,H),D.return=B,D)}function ne(B,D,H){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Ap(""+D,B.mode,H),D.return=B,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ee:return H=fd(D.type,D.key,D.props,null,B.mode,H),H.ref=Ll(B,null,D),H.return=B,H;case se:return D=Cp(D,B.mode,H),D.return=B,D;case Ve:var ie=D._init;return ne(B,ie(D._payload),H)}if(Te(D)||ge(D))return D=Ui(D,B.mode,H,null),D.return=B,D;$c(B,D)}return null}function Y(B,D,H,ie){var be=D!==null?D.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return be!==null?null:x(B,D,""+H,ie);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case ee:return H.key===be?R(B,D,H,ie):null;case se:return H.key===be?K(B,D,H,ie):null;case Ve:return be=H._init,Y(B,D,be(H._payload),ie)}if(Te(H)||ge(H))return be!==null?null:X(B,D,H,ie,null);$c(B,H)}return null}function he(B,D,H,ie,be){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return B=B.get(H)||null,x(D,B,""+ie,be);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case ee:return B=B.get(ie.key===null?H:ie.key)||null,R(D,B,ie,be);case se:return B=B.get(ie.key===null?H:ie.key)||null,K(D,B,ie,be);case Ve:var xe=ie._init;return he(B,D,H,xe(ie._payload),be)}if(Te(ie)||ge(ie))return B=B.get(H)||null,X(D,B,ie,be,null);$c(D,ie)}return null}function fe(B,D,H,ie){for(var be=null,xe=null,je=D,Ae=D=0,Lt=null;je!==null&&Ae<H.length;Ae++){je.index>Ae?(Lt=je,je=null):Lt=je.sibling;var qe=Y(B,je,H[Ae],ie);if(qe===null){je===null&&(je=Lt);break}o&&je&&qe.alternate===null&&s(B,je),D=g(qe,D,Ae),xe===null?be=qe:xe.sibling=qe,xe=qe,je=Lt}if(Ae===H.length)return u(B,je),ct&&Ri(B,Ae),be;if(je===null){for(;Ae<H.length;Ae++)je=ne(B,H[Ae],ie),je!==null&&(D=g(je,D,Ae),xe===null?be=je:xe.sibling=je,xe=je);return ct&&Ri(B,Ae),be}for(je=m(B,je);Ae<H.length;Ae++)Lt=he(je,B,Ae,H[Ae],ie),Lt!==null&&(o&&Lt.alternate!==null&&je.delete(Lt.key===null?Ae:Lt.key),D=g(Lt,D,Ae),xe===null?be=Lt:xe.sibling=Lt,xe=Lt);return o&&je.forEach(function(Bo){return s(B,Bo)}),ct&&Ri(B,Ae),be}function ke(B,D,H,ie){var be=ge(H);if(typeof be!="function")throw Error(t(150));if(H=be.call(H),H==null)throw Error(t(151));for(var xe=be=null,je=D,Ae=D=0,Lt=null,qe=H.next();je!==null&&!qe.done;Ae++,qe=H.next()){je.index>Ae?(Lt=je,je=null):Lt=je.sibling;var Bo=Y(B,je,qe.value,ie);if(Bo===null){je===null&&(je=Lt);break}o&&je&&Bo.alternate===null&&s(B,je),D=g(Bo,D,Ae),xe===null?be=Bo:xe.sibling=Bo,xe=Bo,je=Lt}if(qe.done)return u(B,je),ct&&Ri(B,Ae),be;if(je===null){for(;!qe.done;Ae++,qe=H.next())qe=ne(B,qe.value,ie),qe!==null&&(D=g(qe,D,Ae),xe===null?be=qe:xe.sibling=qe,xe=qe);return ct&&Ri(B,Ae),be}for(je=m(B,je);!qe.done;Ae++,qe=H.next())qe=he(je,B,Ae,qe.value,ie),qe!==null&&(o&&qe.alternate!==null&&je.delete(qe.key===null?Ae:qe.key),D=g(qe,D,Ae),xe===null?be=qe:xe.sibling=qe,xe=qe);return o&&je.forEach(function(Ej){return s(B,Ej)}),ct&&Ri(B,Ae),be}function wt(B,D,H,ie){if(typeof H=="object"&&H!==null&&H.type===P&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case ee:e:{for(var be=H.key,xe=D;xe!==null;){if(xe.key===be){if(be=H.type,be===P){if(xe.tag===7){u(B,xe.sibling),D=f(xe,H.props.children),D.return=B,B=D;break e}}else if(xe.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Ve&&Dy(be)===xe.type){u(B,xe.sibling),D=f(xe,H.props),D.ref=Ll(B,xe,H),D.return=B,B=D;break e}u(B,xe);break}else s(B,xe);xe=xe.sibling}H.type===P?(D=Ui(H.props.children,B.mode,ie,H.key),D.return=B,B=D):(ie=fd(H.type,H.key,H.props,null,B.mode,ie),ie.ref=Ll(B,D,H),ie.return=B,B=ie)}return w(B);case se:e:{for(xe=H.key;D!==null;){if(D.key===xe)if(D.tag===4&&D.stateNode.containerInfo===H.containerInfo&&D.stateNode.implementation===H.implementation){u(B,D.sibling),D=f(D,H.children||[]),D.return=B,B=D;break e}else{u(B,D);break}else s(B,D);D=D.sibling}D=Cp(H,B.mode,ie),D.return=B,B=D}return w(B);case Ve:return xe=H._init,wt(B,D,xe(H._payload),ie)}if(Te(H))return fe(B,D,H,ie);if(ge(H))return ke(B,D,H,ie);$c(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,D!==null&&D.tag===6?(u(B,D.sibling),D=f(D,H),D.return=B,B=D):(u(B,D),D=Ap(H,B.mode,ie),D.return=B,B=D),w(B)):u(B,D)}return wt}var na=Oy(!0),My=Oy(!1),Wc=Ao(null),Gc=null,ra=null,Um=null;function Bm(){Um=ra=Gc=null}function Hm(o){var s=Wc.current;lt(Wc),o._currentValue=s}function Km(o,s,u){for(;o!==null;){var m=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,m!==null&&(m.childLanes|=s)):m!==null&&(m.childLanes&s)!==s&&(m.childLanes|=s),o===u)break;o=o.return}}function oa(o,s){Gc=o,Um=ra=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&s)!==0&&(gn=!0),o.firstContext=null)}function Hn(o){var s=o._currentValue;if(Um!==o)if(o={context:o,memoizedValue:s,next:null},ra===null){if(Gc===null)throw Error(t(308));ra=o,Gc.dependencies={lanes:0,firstContext:o}}else ra=ra.next=o;return s}var Vi=null;function $m(o){Vi===null?Vi=[o]:Vi.push(o)}function Ly(o,s,u,m){var f=s.interleaved;return f===null?(u.next=u,$m(s)):(u.next=f.next,f.next=u),s.interleaved=u,Zr(o,m)}function Zr(o,s){o.lanes|=s;var u=o.alternate;for(u!==null&&(u.lanes|=s),u=o,o=o.return;o!==null;)o.childLanes|=s,u=o.alternate,u!==null&&(u.childLanes|=s),u=o,o=o.return;return u.tag===3?u.stateNode:null}var Vo=!1;function Wm(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fy(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Yr(o,s){return{eventTime:o,lane:s,tag:0,payload:null,callback:null,next:null}}function No(o,s,u){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(Ge&2)!==0){var f=m.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),m.pending=s,Zr(o,u)}return f=m.interleaved,f===null?(s.next=s,$m(m)):(s.next=f.next,f.next=s),m.interleaved=s,Zr(o,u)}function qc(o,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194240)!==0)){var m=s.lanes;m&=o.pendingLanes,u|=m,s.lanes=u,To(o,u)}}function Uy(o,s){var u=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var f=null,g=null;if(u=u.firstBaseUpdate,u!==null){do{var w={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};g===null?f=g=w:g=g.next=w,u=u.next}while(u!==null);g===null?f=g=s:g=g.next=s}else f=g=s;u={baseState:m.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:m.shared,effects:m.effects},o.updateQueue=u;return}o=u.lastBaseUpdate,o===null?u.firstBaseUpdate=s:o.next=s,u.lastBaseUpdate=s}function Qc(o,s,u,m){var f=o.updateQueue;Vo=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,x=f.shared.pending;if(x!==null){f.shared.pending=null;var R=x,K=R.next;R.next=null,w===null?g=K:w.next=K,w=R;var X=o.alternate;X!==null&&(X=X.updateQueue,x=X.lastBaseUpdate,x!==w&&(x===null?X.firstBaseUpdate=K:x.next=K,X.lastBaseUpdate=R))}if(g!==null){var ne=f.baseState;w=0,X=K=R=null,x=g;do{var Y=x.lane,he=x.eventTime;if((m&Y)===Y){X!==null&&(X=X.next={eventTime:he,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var fe=o,ke=x;switch(Y=s,he=u,ke.tag){case 1:if(fe=ke.payload,typeof fe=="function"){ne=fe.call(he,ne,Y);break e}ne=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=ke.payload,Y=typeof fe=="function"?fe.call(he,ne,Y):fe,Y==null)break e;ne=ae({},ne,Y);break e;case 2:Vo=!0}}x.callback!==null&&x.lane!==0&&(o.flags|=64,Y=f.effects,Y===null?f.effects=[x]:Y.push(x))}else he={eventTime:he,lane:Y,tag:x.tag,payload:x.payload,callback:x.callback,next:null},X===null?(K=X=he,R=ne):X=X.next=he,w|=Y;if(x=x.next,x===null){if(x=f.shared.pending,x===null)break;Y=x,x=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);if(X===null&&(R=ne),f.baseState=R,f.firstBaseUpdate=K,f.lastBaseUpdate=X,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);Oi|=w,o.lanes=w,o.memoizedState=ne}}function By(o,s,u){if(o=s.effects,s.effects=null,o!==null)for(s=0;s<o.length;s++){var m=o[s],f=m.callback;if(f!==null){if(m.callback=null,m=u,typeof f!="function")throw Error(t(191,f));f.call(m)}}}var Fl={},xr=Ao(Fl),Ul=Ao(Fl),Bl=Ao(Fl);function Ni(o){if(o===Fl)throw Error(t(174));return o}function Gm(o,s){switch(it(Bl,s),it(Ul,o),it(xr,Fl),o=s.nodeType,o){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Pt(null,"");break;default:o=o===8?s.parentNode:s,s=o.namespaceURI||null,o=o.tagName,s=Pt(s,o)}lt(xr),it(xr,s)}function ia(){lt(xr),lt(Ul),lt(Bl)}function Hy(o){Ni(Bl.current);var s=Ni(xr.current),u=Pt(s,o.type);s!==u&&(it(Ul,o),it(xr,u))}function qm(o){Ul.current===o&&(lt(xr),lt(Ul))}var mt=Ao(0);function Jc(o){for(var s=o;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Qm=[];function Jm(){for(var o=0;o<Qm.length;o++)Qm[o]._workInProgressVersionPrimary=null;Qm.length=0}var Zc=re.ReactCurrentDispatcher,Zm=re.ReactCurrentBatchConfig,Di=0,pt=null,Ct=null,Ot=null,Yc=!1,Hl=!1,Kl=0,$x=0;function Jt(){throw Error(t(321))}function Ym(o,s){if(s===null)return!1;for(var u=0;u<s.length&&u<o.length;u++)if(!ar(o[u],s[u]))return!1;return!0}function Xm(o,s,u,m,f,g){if(Di=g,pt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Zc.current=o===null||o.memoizedState===null?Qx:Jx,o=u(m,f),Hl){g=0;do{if(Hl=!1,Kl=0,25<=g)throw Error(t(301));g+=1,Ot=Ct=null,s.updateQueue=null,Zc.current=Zx,o=u(m,f)}while(Hl)}if(Zc.current=td,s=Ct!==null&&Ct.next!==null,Di=0,Ot=Ct=pt=null,Yc=!1,s)throw Error(t(300));return o}function ep(){var o=Kl!==0;return Kl=0,o}function jr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?pt.memoizedState=Ot=o:Ot=Ot.next=o,Ot}function Kn(){if(Ct===null){var o=pt.alternate;o=o!==null?o.memoizedState:null}else o=Ct.next;var s=Ot===null?pt.memoizedState:Ot.next;if(s!==null)Ot=s,Ct=o;else{if(o===null)throw Error(t(310));Ct=o,o={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Ot===null?pt.memoizedState=Ot=o:Ot=Ot.next=o}return Ot}function $l(o,s){return typeof s=="function"?s(o):s}function tp(o){var s=Kn(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=o;var m=Ct,f=m.baseQueue,g=u.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}m.baseQueue=f=g,u.pending=null}if(f!==null){g=f.next,m=m.baseState;var x=w=null,R=null,K=g;do{var X=K.lane;if((Di&X)===X)R!==null&&(R=R.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),m=K.hasEagerState?K.eagerState:o(m,K.action);else{var ne={lane:X,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};R===null?(x=R=ne,w=m):R=R.next=ne,pt.lanes|=X,Oi|=X}K=K.next}while(K!==null&&K!==g);R===null?w=m:R.next=x,ar(m,s.memoizedState)||(gn=!0),s.memoizedState=m,s.baseState=w,s.baseQueue=R,u.lastRenderedState=m}if(o=u.interleaved,o!==null){f=o;do g=f.lane,pt.lanes|=g,Oi|=g,f=f.next;while(f!==o)}else f===null&&(u.lanes=0);return[s.memoizedState,u.dispatch]}function np(o){var s=Kn(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=o;var m=u.dispatch,f=u.pending,g=s.memoizedState;if(f!==null){u.pending=null;var w=f=f.next;do g=o(g,w.action),w=w.next;while(w!==f);ar(g,s.memoizedState)||(gn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),u.lastRenderedState=g}return[g,m]}function Ky(){}function $y(o,s){var u=pt,m=Kn(),f=s(),g=!ar(m.memoizedState,f);if(g&&(m.memoizedState=f,gn=!0),m=m.queue,rp(qy.bind(null,u,m,o),[o]),m.getSnapshot!==s||g||Ot!==null&&Ot.memoizedState.tag&1){if(u.flags|=2048,Wl(9,Gy.bind(null,u,m,f,s),void 0,null),Mt===null)throw Error(t(349));(Di&30)!==0||Wy(u,s,f)}return f}function Wy(o,s,u){o.flags|=16384,o={getSnapshot:s,value:u},s=pt.updateQueue,s===null?(s={lastEffect:null,stores:null},pt.updateQueue=s,s.stores=[o]):(u=s.stores,u===null?s.stores=[o]:u.push(o))}function Gy(o,s,u,m){s.value=u,s.getSnapshot=m,Qy(s)&&Jy(o)}function qy(o,s,u){return u(function(){Qy(s)&&Jy(o)})}function Qy(o){var s=o.getSnapshot;o=o.value;try{var u=s();return!ar(o,u)}catch{return!0}}function Jy(o){var s=Zr(o,1);s!==null&&hr(s,o,1,-1)}function Zy(o){var s=jr();return typeof o=="function"&&(o=o()),s.memoizedState=s.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:o},s.queue=o,o=o.dispatch=qx.bind(null,pt,o),[s.memoizedState,o]}function Wl(o,s,u,m){return o={tag:o,create:s,destroy:u,deps:m,next:null},s=pt.updateQueue,s===null?(s={lastEffect:null,stores:null},pt.updateQueue=s,s.lastEffect=o.next=o):(u=s.lastEffect,u===null?s.lastEffect=o.next=o:(m=u.next,u.next=o,o.next=m,s.lastEffect=o)),o}function Yy(){return Kn().memoizedState}function Xc(o,s,u,m){var f=jr();pt.flags|=o,f.memoizedState=Wl(1|s,u,void 0,m===void 0?null:m)}function ed(o,s,u,m){var f=Kn();m=m===void 0?null:m;var g=void 0;if(Ct!==null){var w=Ct.memoizedState;if(g=w.destroy,m!==null&&Ym(m,w.deps)){f.memoizedState=Wl(s,u,g,m);return}}pt.flags|=o,f.memoizedState=Wl(1|s,u,g,m)}function Xy(o,s){return Xc(8390656,8,o,s)}function rp(o,s){return ed(2048,8,o,s)}function ek(o,s){return ed(4,2,o,s)}function tk(o,s){return ed(4,4,o,s)}function nk(o,s){if(typeof s=="function")return o=o(),s(o),function(){s(null)};if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function rk(o,s,u){return u=u!=null?u.concat([o]):null,ed(4,4,nk.bind(null,s,o),u)}function op(){}function ok(o,s){var u=Kn();s=s===void 0?null:s;var m=u.memoizedState;return m!==null&&s!==null&&Ym(s,m[1])?m[0]:(u.memoizedState=[o,s],o)}function ik(o,s){var u=Kn();s=s===void 0?null:s;var m=u.memoizedState;return m!==null&&s!==null&&Ym(s,m[1])?m[0]:(o=o(),u.memoizedState=[o,s],o)}function sk(o,s,u){return(Di&21)===0?(o.baseState&&(o.baseState=!1,gn=!0),o.memoizedState=u):(ar(u,s)||(u=zi(),pt.lanes|=u,Oi|=u,o.baseState=!0),s)}function Wx(o,s){var u=Ue;Ue=u!==0&&4>u?u:4,o(!0);var m=Zm.transition;Zm.transition={};try{o(!1),s()}finally{Ue=u,Zm.transition=m}}function ak(){return Kn().memoizedState}function Gx(o,s,u){var m=Lo(o);if(u={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null},lk(o))uk(s,u);else if(u=Ly(o,s,u,m),u!==null){var f=ln();hr(u,o,m,f),ck(u,s,m)}}function qx(o,s,u){var m=Lo(o),f={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null};if(lk(o))uk(s,f);else{var g=o.alternate;if(o.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,x=g(w,u);if(f.hasEagerState=!0,f.eagerState=x,ar(x,w)){var R=s.interleaved;R===null?(f.next=f,$m(s)):(f.next=R.next,R.next=f),s.interleaved=f;return}}catch{}finally{}u=Ly(o,s,f,m),u!==null&&(f=ln(),hr(u,o,m,f),ck(u,s,m))}}function lk(o){var s=o.alternate;return o===pt||s!==null&&s===pt}function uk(o,s){Hl=Yc=!0;var u=o.pending;u===null?s.next=s:(s.next=u.next,u.next=s),o.pending=s}function ck(o,s,u){if((u&4194240)!==0){var m=s.lanes;m&=o.pendingLanes,u|=m,s.lanes=u,To(o,u)}}var td={readContext:Hn,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},Qx={readContext:Hn,useCallback:function(o,s){return jr().memoizedState=[o,s===void 0?null:s],o},useContext:Hn,useEffect:Xy,useImperativeHandle:function(o,s,u){return u=u!=null?u.concat([o]):null,Xc(4194308,4,nk.bind(null,s,o),u)},useLayoutEffect:function(o,s){return Xc(4194308,4,o,s)},useInsertionEffect:function(o,s){return Xc(4,2,o,s)},useMemo:function(o,s){var u=jr();return s=s===void 0?null:s,o=o(),u.memoizedState=[o,s],o},useReducer:function(o,s,u){var m=jr();return s=u!==void 0?u(s):s,m.memoizedState=m.baseState=s,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:s},m.queue=o,o=o.dispatch=Gx.bind(null,pt,o),[m.memoizedState,o]},useRef:function(o){var s=jr();return o={current:o},s.memoizedState=o},useState:Zy,useDebugValue:op,useDeferredValue:function(o){return jr().memoizedState=o},useTransition:function(){var o=Zy(!1),s=o[0];return o=Wx.bind(null,o[1]),jr().memoizedState=o,[s,o]},useMutableSource:function(){},useSyncExternalStore:function(o,s,u){var m=pt,f=jr();if(ct){if(u===void 0)throw Error(t(407));u=u()}else{if(u=s(),Mt===null)throw Error(t(349));(Di&30)!==0||Wy(m,s,u)}f.memoizedState=u;var g={value:u,getSnapshot:s};return f.queue=g,Xy(qy.bind(null,m,g,o),[o]),m.flags|=2048,Wl(9,Gy.bind(null,m,g,u,s),void 0,null),u},useId:function(){var o=jr(),s=Mt.identifierPrefix;if(ct){var u=Jr,m=Qr;u=(m&~(1<<32-on(m)-1)).toString(32)+u,s=":"+s+"R"+u,u=Kl++,0<u&&(s+="H"+u.toString(32)),s+=":"}else u=$x++,s=":"+s+"r"+u.toString(32)+":";return o.memoizedState=s},unstable_isNewReconciler:!1},Jx={readContext:Hn,useCallback:ok,useContext:Hn,useEffect:rp,useImperativeHandle:rk,useInsertionEffect:ek,useLayoutEffect:tk,useMemo:ik,useReducer:tp,useRef:Yy,useState:function(){return tp($l)},useDebugValue:op,useDeferredValue:function(o){var s=Kn();return sk(s,Ct.memoizedState,o)},useTransition:function(){var o=tp($l)[0],s=Kn().memoizedState;return[o,s]},useMutableSource:Ky,useSyncExternalStore:$y,useId:ak,unstable_isNewReconciler:!1},Zx={readContext:Hn,useCallback:ok,useContext:Hn,useEffect:rp,useImperativeHandle:rk,useInsertionEffect:ek,useLayoutEffect:tk,useMemo:ik,useReducer:np,useRef:Yy,useState:function(){return np($l)},useDebugValue:op,useDeferredValue:function(o){var s=Kn();return Ct===null?s.memoizedState=o:sk(s,Ct.memoizedState,o)},useTransition:function(){var o=np($l)[0],s=Kn().memoizedState;return[o,s]},useMutableSource:Ky,useSyncExternalStore:$y,useId:ak,unstable_isNewReconciler:!1};function ur(o,s){if(o&&o.defaultProps){s=ae({},s),o=o.defaultProps;for(var u in o)s[u]===void 0&&(s[u]=o[u]);return s}return s}function ip(o,s,u,m){s=o.memoizedState,u=u(m,s),u=u==null?s:ae({},s,u),o.memoizedState=u,o.lanes===0&&(o.updateQueue.baseState=u)}var nd={isMounted:function(o){return(o=o._reactInternals)?er(o)===o:!1},enqueueSetState:function(o,s,u){o=o._reactInternals;var m=ln(),f=Lo(o),g=Yr(m,f);g.payload=s,u!=null&&(g.callback=u),s=No(o,g,f),s!==null&&(hr(s,o,f,m),qc(s,o,f))},enqueueReplaceState:function(o,s,u){o=o._reactInternals;var m=ln(),f=Lo(o),g=Yr(m,f);g.tag=1,g.payload=s,u!=null&&(g.callback=u),s=No(o,g,f),s!==null&&(hr(s,o,f,m),qc(s,o,f))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var u=ln(),m=Lo(o),f=Yr(u,m);f.tag=2,s!=null&&(f.callback=s),s=No(o,f,m),s!==null&&(hr(s,o,m,u),qc(s,o,m))}};function dk(o,s,u,m,f,g,w){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,g,w):s.prototype&&s.prototype.isPureReactComponent?!Cl(u,m)||!Cl(f,g):!0}function hk(o,s,u){var m=!1,f=Co,g=s.contextType;return typeof g=="object"&&g!==null?g=Hn(g):(f=vn(s)?Ai:Qt.current,m=s.contextTypes,g=(m=m!=null)?Ys(o,f):Co),s=new s(u,g),o.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=nd,o.stateNode=s,s._reactInternals=o,m&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=f,o.__reactInternalMemoizedMaskedChildContext=g),s}function mk(o,s,u,m){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,m),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,m),s.state!==o&&nd.enqueueReplaceState(s,s.state,null)}function sp(o,s,u,m){var f=o.stateNode;f.props=u,f.state=o.memoizedState,f.refs={},Wm(o);var g=s.contextType;typeof g=="object"&&g!==null?f.context=Hn(g):(g=vn(s)?Ai:Qt.current,f.context=Ys(o,g)),f.state=o.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(ip(o,s,g,u),f.state=o.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&nd.enqueueReplaceState(f,f.state,null),Qc(o,u,f,m),f.state=o.memoizedState),typeof f.componentDidMount=="function"&&(o.flags|=4194308)}function sa(o,s){try{var u="",m=s;do u+=ze(m),m=m.return;while(m);var f=u}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:o,source:s,stack:f,digest:null}}function ap(o,s,u){return{value:o,source:null,stack:u??null,digest:s??null}}function lp(o,s){try{console.error(s.value)}catch(u){setTimeout(function(){throw u})}}var Yx=typeof WeakMap=="function"?WeakMap:Map;function pk(o,s,u){u=Yr(-1,u),u.tag=3,u.payload={element:null};var m=s.value;return u.callback=function(){ud||(ud=!0,Ep=m),lp(o,s)},u}function fk(o,s,u){u=Yr(-1,u),u.tag=3;var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var f=s.value;u.payload=function(){return m(f)},u.callback=function(){lp(o,s)}}var g=o.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(u.callback=function(){lp(o,s),typeof m!="function"&&(Oo===null?Oo=new Set([this]):Oo.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),u}function vk(o,s,u){var m=o.pingCache;if(m===null){m=o.pingCache=new Yx;var f=new Set;m.set(s,f)}else f=m.get(s),f===void 0&&(f=new Set,m.set(s,f));f.has(u)||(f.add(u),o=hj.bind(null,o,s,u),s.then(o,o))}function gk(o){do{var s;if((s=o.tag===13)&&(s=o.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return o;o=o.return}while(o!==null);return null}function yk(o,s,u,m,f){return(o.mode&1)===0?(o===s?o.flags|=65536:(o.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(s=Yr(-1,1),s.tag=2,No(u,s,1))),u.lanes|=1),o):(o.flags|=65536,o.lanes=f,o)}var Xx=re.ReactCurrentOwner,gn=!1;function an(o,s,u,m){s.child=o===null?My(s,null,u,m):na(s,o.child,u,m)}function kk(o,s,u,m,f){u=u.render;var g=s.ref;return oa(s,f),m=Xm(o,s,u,m,g,f),u=ep(),o!==null&&!gn?(s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~f,Xr(o,s,f)):(ct&&u&&Dm(s),s.flags|=1,an(o,s,m,f),s.child)}function bk(o,s,u,m,f){if(o===null){var g=u.type;return typeof g=="function"&&!Pp(g)&&g.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(s.tag=15,s.type=g,_k(o,s,g,m,f)):(o=fd(u.type,null,m,s,s.mode,f),o.ref=s.ref,o.return=s,s.child=o)}if(g=o.child,(o.lanes&f)===0){var w=g.memoizedProps;if(u=u.compare,u=u!==null?u:Cl,u(w,m)&&o.ref===s.ref)return Xr(o,s,f)}return s.flags|=1,o=Uo(g,m),o.ref=s.ref,o.return=s,s.child=o}function _k(o,s,u,m,f){if(o!==null){var g=o.memoizedProps;if(Cl(g,m)&&o.ref===s.ref)if(gn=!1,s.pendingProps=m=g,(o.lanes&f)!==0)(o.flags&131072)!==0&&(gn=!0);else return s.lanes=o.lanes,Xr(o,s,f)}return up(o,s,u,m,f)}function wk(o,s,u){var m=s.pendingProps,f=m.children,g=o!==null?o.memoizedState:null;if(m.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(la,Pn),Pn|=u;else{if((u&1073741824)===0)return o=g!==null?g.baseLanes|u:u,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:o,cachePool:null,transitions:null},s.updateQueue=null,it(la,Pn),Pn|=o,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=g!==null?g.baseLanes:u,it(la,Pn),Pn|=m}else g!==null?(m=g.baseLanes|u,s.memoizedState=null):m=u,it(la,Pn),Pn|=m;return an(o,s,f,u),s.child}function Ek(o,s){var u=s.ref;(o===null&&u!==null||o!==null&&o.ref!==u)&&(s.flags|=512,s.flags|=2097152)}function up(o,s,u,m,f){var g=vn(u)?Ai:Qt.current;return g=Ys(s,g),oa(s,f),u=Xm(o,s,u,m,g,f),m=ep(),o!==null&&!gn?(s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~f,Xr(o,s,f)):(ct&&m&&Dm(s),s.flags|=1,an(o,s,u,f),s.child)}function Tk(o,s,u,m,f){if(vn(u)){var g=!0;Fc(s)}else g=!1;if(oa(s,f),s.stateNode===null)od(o,s),hk(s,u,m),sp(s,u,m,f),m=!0;else if(o===null){var w=s.stateNode,x=s.memoizedProps;w.props=x;var R=w.context,K=u.contextType;typeof K=="object"&&K!==null?K=Hn(K):(K=vn(u)?Ai:Qt.current,K=Ys(s,K));var X=u.getDerivedStateFromProps,ne=typeof X=="function"||typeof w.getSnapshotBeforeUpdate=="function";ne||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==m||R!==K)&&mk(s,w,m,K),Vo=!1;var Y=s.memoizedState;w.state=Y,Qc(s,m,w,f),R=s.memoizedState,x!==m||Y!==R||fn.current||Vo?(typeof X=="function"&&(ip(s,u,X,m),R=s.memoizedState),(x=Vo||dk(s,u,x,m,Y,R,K))?(ne||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=m,s.memoizedState=R),w.props=m,w.state=R,w.context=K,m=x):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),m=!1)}else{w=s.stateNode,Fy(o,s),x=s.memoizedProps,K=s.type===s.elementType?x:ur(s.type,x),w.props=K,ne=s.pendingProps,Y=w.context,R=u.contextType,typeof R=="object"&&R!==null?R=Hn(R):(R=vn(u)?Ai:Qt.current,R=Ys(s,R));var he=u.getDerivedStateFromProps;(X=typeof he=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==ne||Y!==R)&&mk(s,w,m,R),Vo=!1,Y=s.memoizedState,w.state=Y,Qc(s,m,w,f);var fe=s.memoizedState;x!==ne||Y!==fe||fn.current||Vo?(typeof he=="function"&&(ip(s,u,he,m),fe=s.memoizedState),(K=Vo||dk(s,u,K,m,Y,fe,R)||!1)?(X||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(m,fe,R),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(m,fe,R)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||x===o.memoizedProps&&Y===o.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===o.memoizedProps&&Y===o.memoizedState||(s.flags|=1024),s.memoizedProps=m,s.memoizedState=fe),w.props=m,w.state=fe,w.context=R,m=K):(typeof w.componentDidUpdate!="function"||x===o.memoizedProps&&Y===o.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===o.memoizedProps&&Y===o.memoizedState||(s.flags|=1024),m=!1)}return cp(o,s,u,m,g,f)}function cp(o,s,u,m,f,g){Ek(o,s);var w=(s.flags&128)!==0;if(!m&&!w)return f&&Iy(s,u,!1),Xr(o,s,g);m=s.stateNode,Xx.current=s;var x=w&&typeof u.getDerivedStateFromError!="function"?null:m.render();return s.flags|=1,o!==null&&w?(s.child=na(s,o.child,null,g),s.child=na(s,null,x,g)):an(o,s,x,g),s.memoizedState=m.state,f&&Iy(s,u,!0),s.child}function zk(o){var s=o.stateNode;s.pendingContext?xy(o,s.pendingContext,s.pendingContext!==s.context):s.context&&xy(o,s.context,!1),Gm(o,s.containerInfo)}function Sk(o,s,u,m,f){return ta(),Fm(f),s.flags|=256,an(o,s,u,m),s.child}var dp={dehydrated:null,treeContext:null,retryLane:0};function hp(o){return{baseLanes:o,cachePool:null,transitions:null}}function xk(o,s,u){var m=s.pendingProps,f=mt.current,g=!1,w=(s.flags&128)!==0,x;if((x=w)||(x=o!==null&&o.memoizedState===null?!1:(f&2)!==0),x?(g=!0,s.flags&=-129):(o===null||o.memoizedState!==null)&&(f|=1),it(mt,f&1),o===null)return Lm(s),o=s.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((s.mode&1)===0?s.lanes=1:o.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=m.children,o=m.fallback,g?(m=s.mode,g=s.child,w={mode:"hidden",children:w},(m&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=vd(w,m,0,null),o=Ui(o,m,u,null),g.return=s,o.return=s,g.sibling=o,s.child=g,s.child.memoizedState=hp(u),s.memoizedState=dp,o):mp(s,w));if(f=o.memoizedState,f!==null&&(x=f.dehydrated,x!==null))return ej(o,s,w,m,x,f,u);if(g){g=m.fallback,w=s.mode,f=o.child,x=f.sibling;var R={mode:"hidden",children:m.children};return(w&1)===0&&s.child!==f?(m=s.child,m.childLanes=0,m.pendingProps=R,s.deletions=null):(m=Uo(f,R),m.subtreeFlags=f.subtreeFlags&14680064),x!==null?g=Uo(x,g):(g=Ui(g,w,u,null),g.flags|=2),g.return=s,m.return=s,m.sibling=g,s.child=m,m=g,g=s.child,w=o.child.memoizedState,w=w===null?hp(u):{baseLanes:w.baseLanes|u,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=o.childLanes&~u,s.memoizedState=dp,m}return g=o.child,o=g.sibling,m=Uo(g,{mode:"visible",children:m.children}),(s.mode&1)===0&&(m.lanes=u),m.return=s,m.sibling=null,o!==null&&(u=s.deletions,u===null?(s.deletions=[o],s.flags|=16):u.push(o)),s.child=m,s.memoizedState=null,m}function mp(o,s){return s=vd({mode:"visible",children:s},o.mode,0,null),s.return=o,o.child=s}function rd(o,s,u,m){return m!==null&&Fm(m),na(s,o.child,null,u),o=mp(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function ej(o,s,u,m,f,g,w){if(u)return s.flags&256?(s.flags&=-257,m=ap(Error(t(422))),rd(o,s,w,m)):s.memoizedState!==null?(s.child=o.child,s.flags|=128,null):(g=m.fallback,f=s.mode,m=vd({mode:"visible",children:m.children},f,0,null),g=Ui(g,f,w,null),g.flags|=2,m.return=s,g.return=s,m.sibling=g,s.child=m,(s.mode&1)!==0&&na(s,o.child,null,w),s.child.memoizedState=hp(w),s.memoizedState=dp,g);if((s.mode&1)===0)return rd(o,s,w,null);if(f.data==="$!"){if(m=f.nextSibling&&f.nextSibling.dataset,m)var x=m.dgst;return m=x,g=Error(t(419)),m=ap(g,m,void 0),rd(o,s,w,m)}if(x=(w&o.childLanes)!==0,gn||x){if(m=Mt,m!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(m.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Zr(o,f),hr(m,o,f,-1))}return Ip(),m=ap(Error(t(421))),rd(o,s,w,m)}return f.data==="$?"?(s.flags|=128,s.child=o.child,s=mj.bind(null,o),f._reactRetry=s,null):(o=g.treeContext,In=Po(f.nextSibling),jn=s,ct=!0,lr=null,o!==null&&(Un[Bn++]=Qr,Un[Bn++]=Jr,Un[Bn++]=Ci,Qr=o.id,Jr=o.overflow,Ci=s),s=mp(s,m.children),s.flags|=4096,s)}function jk(o,s,u){o.lanes|=s;var m=o.alternate;m!==null&&(m.lanes|=s),Km(o.return,s,u)}function pp(o,s,u,m,f){var g=o.memoizedState;g===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=m,g.tail=u,g.tailMode=f)}function Ik(o,s,u){var m=s.pendingProps,f=m.revealOrder,g=m.tail;if(an(o,s,m.children,u),m=mt.current,(m&2)!==0)m=m&1|2,s.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&jk(o,u,s);else if(o.tag===19)jk(o,u,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}m&=1}if(it(mt,m),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(u=s.child,f=null;u!==null;)o=u.alternate,o!==null&&Jc(o)===null&&(f=u),u=u.sibling;u=f,u===null?(f=s.child,s.child=null):(f=u.sibling,u.sibling=null),pp(s,!1,f,u,g);break;case"backwards":for(u=null,f=s.child,s.child=null;f!==null;){if(o=f.alternate,o!==null&&Jc(o)===null){s.child=f;break}o=f.sibling,f.sibling=u,u=f,f=o}pp(s,!0,u,null,g);break;case"together":pp(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function od(o,s){(s.mode&1)===0&&o!==null&&(o.alternate=null,s.alternate=null,s.flags|=2)}function Xr(o,s,u){if(o!==null&&(s.dependencies=o.dependencies),Oi|=s.lanes,(u&s.childLanes)===0)return null;if(o!==null&&s.child!==o.child)throw Error(t(153));if(s.child!==null){for(o=s.child,u=Uo(o,o.pendingProps),s.child=u,u.return=s;o.sibling!==null;)o=o.sibling,u=u.sibling=Uo(o,o.pendingProps),u.return=s;u.sibling=null}return s.child}function tj(o,s,u){switch(s.tag){case 3:zk(s),ta();break;case 5:Hy(s);break;case 1:vn(s.type)&&Fc(s);break;case 4:Gm(s,s.stateNode.containerInfo);break;case 10:var m=s.type._context,f=s.memoizedProps.value;it(Wc,m._currentValue),m._currentValue=f;break;case 13:if(m=s.memoizedState,m!==null)return m.dehydrated!==null?(it(mt,mt.current&1),s.flags|=128,null):(u&s.child.childLanes)!==0?xk(o,s,u):(it(mt,mt.current&1),o=Xr(o,s,u),o!==null?o.sibling:null);it(mt,mt.current&1);break;case 19:if(m=(u&s.childLanes)!==0,(o.flags&128)!==0){if(m)return Ik(o,s,u);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),it(mt,mt.current),m)break;return null;case 22:case 23:return s.lanes=0,wk(o,s,u)}return Xr(o,s,u)}var Pk,fp,Ak,Ck;Pk=function(o,s){for(var u=s.child;u!==null;){if(u.tag===5||u.tag===6)o.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},fp=function(){},Ak=function(o,s,u,m){var f=o.memoizedProps;if(f!==m){o=s.stateNode,Ni(xr.current);var g=null;switch(u){case"input":f=Lr(o,f),m=Lr(o,m),g=[];break;case"select":f=ae({},f,{value:void 0}),m=ae({},m,{value:void 0}),g=[];break;case"textarea":f=Ut(o,f),m=Ut(o,m),g=[];break;default:typeof f.onClick!="function"&&typeof m.onClick=="function"&&(o.onclick=Oc)}ml(u,m);var w;u=null;for(K in f)if(!m.hasOwnProperty(K)&&f.hasOwnProperty(K)&&f[K]!=null)if(K==="style"){var x=f[K];for(w in x)x.hasOwnProperty(w)&&(u||(u={}),u[w]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(i.hasOwnProperty(K)?g||(g=[]):(g=g||[]).push(K,null));for(K in m){var R=m[K];if(x=f!=null?f[K]:void 0,m.hasOwnProperty(K)&&R!==x&&(R!=null||x!=null))if(K==="style")if(x){for(w in x)!x.hasOwnProperty(w)||R&&R.hasOwnProperty(w)||(u||(u={}),u[w]="");for(w in R)R.hasOwnProperty(w)&&x[w]!==R[w]&&(u||(u={}),u[w]=R[w])}else u||(g||(g=[]),g.push(K,u)),u=R;else K==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,x=x?x.__html:void 0,R!=null&&x!==R&&(g=g||[]).push(K,R)):K==="children"?typeof R!="string"&&typeof R!="number"||(g=g||[]).push(K,""+R):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(i.hasOwnProperty(K)?(R!=null&&K==="onScroll"&&at("scroll",o),g||x===R||(g=[])):(g=g||[]).push(K,R))}u&&(g=g||[]).push("style",u);var K=g;(s.updateQueue=K)&&(s.flags|=4)}},Ck=function(o,s,u,m){u!==m&&(s.flags|=4)};function Gl(o,s){if(!ct)switch(o.tailMode){case"hidden":s=o.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?o.tail=null:u.sibling=null;break;case"collapsed":u=o.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function Zt(o){var s=o.alternate!==null&&o.alternate.child===o.child,u=0,m=0;if(s)for(var f=o.child;f!==null;)u|=f.lanes|f.childLanes,m|=f.subtreeFlags&14680064,m|=f.flags&14680064,f.return=o,f=f.sibling;else for(f=o.child;f!==null;)u|=f.lanes|f.childLanes,m|=f.subtreeFlags,m|=f.flags,f.return=o,f=f.sibling;return o.subtreeFlags|=m,o.childLanes=u,s}function nj(o,s,u){var m=s.pendingProps;switch(Om(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(s),null;case 1:return vn(s.type)&&Lc(),Zt(s),null;case 3:return m=s.stateNode,ia(),lt(fn),lt(Qt),Jm(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(Kc(s)?s.flags|=4:o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,lr!==null&&(Sp(lr),lr=null))),fp(o,s),Zt(s),null;case 5:qm(s);var f=Ni(Bl.current);if(u=s.type,o!==null&&s.stateNode!=null)Ak(o,s,u,m,f),o.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!m){if(s.stateNode===null)throw Error(t(166));return Zt(s),null}if(o=Ni(xr.current),Kc(s)){m=s.stateNode,u=s.type;var g=s.memoizedProps;switch(m[Sr]=s,m[Ol]=g,o=(s.mode&1)!==0,u){case"dialog":at("cancel",m),at("close",m);break;case"iframe":case"object":case"embed":at("load",m);break;case"video":case"audio":for(f=0;f<Vl.length;f++)at(Vl[f],m);break;case"source":at("error",m);break;case"img":case"image":case"link":at("error",m),at("load",m);break;case"details":at("toggle",m);break;case"input":vo(m,g),at("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!g.multiple},at("invalid",m);break;case"textarea":yo(m,g),at("invalid",m)}ml(u,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var x=g[w];w==="children"?typeof x=="string"?m.textContent!==x&&(g.suppressHydrationWarning!==!0&&Dc(m.textContent,x,o),f=["children",x]):typeof x=="number"&&m.textContent!==""+x&&(g.suppressHydrationWarning!==!0&&Dc(m.textContent,x,o),f=["children",""+x]):i.hasOwnProperty(w)&&x!=null&&w==="onScroll"&&at("scroll",m)}switch(u){case"input":Nn(m),we(m,g,!0);break;case"textarea":Nn(m),ll(m);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(m.onclick=Oc)}m=f,s.updateQueue=m,m!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=It(u)),o==="http://www.w3.org/1999/xhtml"?u==="script"?(o=w.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof m.is=="string"?o=w.createElement(u,{is:m.is}):(o=w.createElement(u),u==="select"&&(w=o,m.multiple?w.multiple=!0:m.size&&(w.size=m.size))):o=w.createElementNS(o,u),o[Sr]=s,o[Ol]=m,Pk(o,s,!1,!1),s.stateNode=o;e:{switch(w=pl(u,m),u){case"dialog":at("cancel",o),at("close",o),f=m;break;case"iframe":case"object":case"embed":at("load",o),f=m;break;case"video":case"audio":for(f=0;f<Vl.length;f++)at(Vl[f],o);f=m;break;case"source":at("error",o),f=m;break;case"img":case"image":case"link":at("error",o),at("load",o),f=m;break;case"details":at("toggle",o),f=m;break;case"input":vo(o,m),f=Lr(o,m),at("invalid",o);break;case"option":f=m;break;case"select":o._wrapperState={wasMultiple:!!m.multiple},f=ae({},m,{value:void 0}),at("invalid",o);break;case"textarea":yo(o,m),f=Ut(o,m),at("invalid",o);break;default:f=m}ml(u,f),x=f;for(g in x)if(x.hasOwnProperty(g)){var R=x[g];g==="style"?dl(o,R):g==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&ul(o,R)):g==="children"?typeof R=="string"?(u!=="textarea"||R!=="")&&ko(o,R):typeof R=="number"&&ko(o,""+R):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(i.hasOwnProperty(g)?R!=null&&g==="onScroll"&&at("scroll",o):R!=null&&Q(o,g,R,w))}switch(u){case"input":Nn(o),we(o,m,!1);break;case"textarea":Nn(o),ll(o);break;case"option":m.value!=null&&o.setAttribute("value",""+We(m.value));break;case"select":o.multiple=!!m.multiple,g=m.value,g!=null?He(o,!!m.multiple,g,!1):m.defaultValue!=null&&He(o,!!m.multiple,m.defaultValue,!0);break;default:typeof f.onClick=="function"&&(o.onclick=Oc)}switch(u){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Zt(s),null;case 6:if(o&&s.stateNode!=null)Ck(o,s,o.memoizedProps,m);else{if(typeof m!="string"&&s.stateNode===null)throw Error(t(166));if(u=Ni(Bl.current),Ni(xr.current),Kc(s)){if(m=s.stateNode,u=s.memoizedProps,m[Sr]=s,(g=m.nodeValue!==u)&&(o=jn,o!==null))switch(o.tag){case 3:Dc(m.nodeValue,u,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Dc(m.nodeValue,u,(o.mode&1)!==0)}g&&(s.flags|=4)}else m=(u.nodeType===9?u:u.ownerDocument).createTextNode(m),m[Sr]=s,s.stateNode=m}return Zt(s),null;case 13:if(lt(mt),m=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(ct&&In!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Ny(),ta(),s.flags|=98560,g=!1;else if(g=Kc(s),m!==null&&m.dehydrated!==null){if(o===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Sr]=s}else ta(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Zt(s),g=!1}else lr!==null&&(Sp(lr),lr=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=u,s):(m=m!==null,m!==(o!==null&&o.memoizedState!==null)&&m&&(s.child.flags|=8192,(s.mode&1)!==0&&(o===null||(mt.current&1)!==0?Rt===0&&(Rt=3):Ip())),s.updateQueue!==null&&(s.flags|=4),Zt(s),null);case 4:return ia(),fp(o,s),o===null&&Nl(s.stateNode.containerInfo),Zt(s),null;case 10:return Hm(s.type._context),Zt(s),null;case 17:return vn(s.type)&&Lc(),Zt(s),null;case 19:if(lt(mt),g=s.memoizedState,g===null)return Zt(s),null;if(m=(s.flags&128)!==0,w=g.rendering,w===null)if(m)Gl(g,!1);else{if(Rt!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(w=Jc(o),w!==null){for(s.flags|=128,Gl(g,!1),m=w.updateQueue,m!==null&&(s.updateQueue=m,s.flags|=4),s.subtreeFlags=0,m=u,u=s.child;u!==null;)g=u,o=m,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=o,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,o=w.dependencies,g.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),u=u.sibling;return it(mt,mt.current&1|2),s.child}o=o.sibling}g.tail!==null&&ot()>ua&&(s.flags|=128,m=!0,Gl(g,!1),s.lanes=4194304)}else{if(!m)if(o=Jc(w),o!==null){if(s.flags|=128,m=!0,u=o.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),Gl(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!ct)return Zt(s),null}else 2*ot()-g.renderingStartTime>ua&&u!==1073741824&&(s.flags|=128,m=!0,Gl(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(u=g.last,u!==null?u.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=ot(),s.sibling=null,u=mt.current,it(mt,m?u&1|2:u&1),s):(Zt(s),null);case 22:case 23:return jp(),m=s.memoizedState!==null,o!==null&&o.memoizedState!==null!==m&&(s.flags|=8192),m&&(s.mode&1)!==0?(Pn&1073741824)!==0&&(Zt(s),s.subtreeFlags&6&&(s.flags|=8192)):Zt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function rj(o,s){switch(Om(s),s.tag){case 1:return vn(s.type)&&Lc(),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return ia(),lt(fn),lt(Qt),Jm(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 5:return qm(s),null;case 13:if(lt(mt),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(t(340));ta()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return lt(mt),null;case 4:return ia(),null;case 10:return Hm(s.type._context),null;case 22:case 23:return jp(),null;case 24:return null;default:return null}}var id=!1,Yt=!1,oj=typeof WeakSet=="function"?WeakSet:Set,pe=null;function aa(o,s){var u=o.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(m){yt(o,s,m)}else u.current=null}function vp(o,s,u){try{u()}catch(m){yt(o,s,m)}}var Rk=!1;function ij(o,s){if(jm=xo,o=dy(),bm(o)){if("selectionStart"in o)var u={start:o.selectionStart,end:o.selectionEnd};else e:{u=(u=o.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var f=m.anchorOffset,g=m.focusNode;m=m.focusOffset;try{u.nodeType,g.nodeType}catch{u=null;break e}var w=0,x=-1,R=-1,K=0,X=0,ne=o,Y=null;t:for(;;){for(var he;ne!==u||f!==0&&ne.nodeType!==3||(x=w+f),ne!==g||m!==0&&ne.nodeType!==3||(R=w+m),ne.nodeType===3&&(w+=ne.nodeValue.length),(he=ne.firstChild)!==null;)Y=ne,ne=he;for(;;){if(ne===o)break t;if(Y===u&&++K===f&&(x=w),Y===g&&++X===m&&(R=w),(he=ne.nextSibling)!==null)break;ne=Y,Y=ne.parentNode}ne=he}u=x===-1||R===-1?null:{start:x,end:R}}else u=null}u=u||{start:0,end:0}}else u=null;for(Im={focusedElem:o,selectionRange:u},xo=!1,pe=s;pe!==null;)if(s=pe,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,pe=o;else for(;pe!==null;){s=pe;try{var fe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var ke=fe.memoizedProps,wt=fe.memoizedState,B=s.stateNode,D=B.getSnapshotBeforeUpdate(s.elementType===s.type?ke:ur(s.type,ke),wt);B.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var H=s.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ie){yt(s,s.return,ie)}if(o=s.sibling,o!==null){o.return=s.return,pe=o;break}pe=s.return}return fe=Rk,Rk=!1,fe}function ql(o,s,u){var m=s.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var f=m=m.next;do{if((f.tag&o)===o){var g=f.destroy;f.destroy=void 0,g!==void 0&&vp(s,u,g)}f=f.next}while(f!==m)}}function sd(o,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&o)===o){var m=u.create;u.destroy=m()}u=u.next}while(u!==s)}}function gp(o){var s=o.ref;if(s!==null){var u=o.stateNode;switch(o.tag){case 5:o=u;break;default:o=u}typeof s=="function"?s(o):s.current=o}}function Vk(o){var s=o.alternate;s!==null&&(o.alternate=null,Vk(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&(delete s[Sr],delete s[Ol],delete s[Rm],delete s[Ux],delete s[Bx])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Nk(o){return o.tag===5||o.tag===3||o.tag===4}function Dk(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Nk(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function yp(o,s,u){var m=o.tag;if(m===5||m===6)o=o.stateNode,s?u.nodeType===8?u.parentNode.insertBefore(o,s):u.insertBefore(o,s):(u.nodeType===8?(s=u.parentNode,s.insertBefore(o,u)):(s=u,s.appendChild(o)),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=Oc));else if(m!==4&&(o=o.child,o!==null))for(yp(o,s,u),o=o.sibling;o!==null;)yp(o,s,u),o=o.sibling}function kp(o,s,u){var m=o.tag;if(m===5||m===6)o=o.stateNode,s?u.insertBefore(o,s):u.appendChild(o);else if(m!==4&&(o=o.child,o!==null))for(kp(o,s,u),o=o.sibling;o!==null;)kp(o,s,u),o=o.sibling}var Kt=null,cr=!1;function Do(o,s,u){for(u=u.child;u!==null;)Ok(o,s,u),u=u.sibling}function Ok(o,s,u){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(Ei,u)}catch{}switch(u.tag){case 5:Yt||aa(u,s);case 6:var m=Kt,f=cr;Kt=null,Do(o,s,u),Kt=m,cr=f,Kt!==null&&(cr?(o=Kt,u=u.stateNode,o.nodeType===8?o.parentNode.removeChild(u):o.removeChild(u)):Kt.removeChild(u.stateNode));break;case 18:Kt!==null&&(cr?(o=Kt,u=u.stateNode,o.nodeType===8?Cm(o.parentNode,u):o.nodeType===1&&Cm(o,u),ir(o)):Cm(Kt,u.stateNode));break;case 4:m=Kt,f=cr,Kt=u.stateNode.containerInfo,cr=!0,Do(o,s,u),Kt=m,cr=f;break;case 0:case 11:case 14:case 15:if(!Yt&&(m=u.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){f=m=m.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&vp(u,s,w),f=f.next}while(f!==m)}Do(o,s,u);break;case 1:if(!Yt&&(aa(u,s),m=u.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=u.memoizedProps,m.state=u.memoizedState,m.componentWillUnmount()}catch(x){yt(u,s,x)}Do(o,s,u);break;case 21:Do(o,s,u);break;case 22:u.mode&1?(Yt=(m=Yt)||u.memoizedState!==null,Do(o,s,u),Yt=m):Do(o,s,u);break;default:Do(o,s,u)}}function Mk(o){var s=o.updateQueue;if(s!==null){o.updateQueue=null;var u=o.stateNode;u===null&&(u=o.stateNode=new oj),s.forEach(function(m){var f=pj.bind(null,o,m);u.has(m)||(u.add(m),m.then(f,f))})}}function dr(o,s){var u=s.deletions;if(u!==null)for(var m=0;m<u.length;m++){var f=u[m];try{var g=o,w=s,x=w;e:for(;x!==null;){switch(x.tag){case 5:Kt=x.stateNode,cr=!1;break e;case 3:Kt=x.stateNode.containerInfo,cr=!0;break e;case 4:Kt=x.stateNode.containerInfo,cr=!0;break e}x=x.return}if(Kt===null)throw Error(t(160));Ok(g,w,f),Kt=null,cr=!1;var R=f.alternate;R!==null&&(R.return=null),f.return=null}catch(K){yt(f,s,K)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Lk(s,o),s=s.sibling}function Lk(o,s){var u=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(dr(s,o),Ir(o),m&4){try{ql(3,o,o.return),sd(3,o)}catch(ke){yt(o,o.return,ke)}try{ql(5,o,o.return)}catch(ke){yt(o,o.return,ke)}}break;case 1:dr(s,o),Ir(o),m&512&&u!==null&&aa(u,u.return);break;case 5:if(dr(s,o),Ir(o),m&512&&u!==null&&aa(u,u.return),o.flags&32){var f=o.stateNode;try{ko(f,"")}catch(ke){yt(o,o.return,ke)}}if(m&4&&(f=o.stateNode,f!=null)){var g=o.memoizedProps,w=u!==null?u.memoizedProps:g,x=o.type,R=o.updateQueue;if(o.updateQueue=null,R!==null)try{x==="input"&&g.type==="radio"&&g.name!=null&&go(f,g),pl(x,w);var K=pl(x,g);for(w=0;w<R.length;w+=2){var X=R[w],ne=R[w+1];X==="style"?dl(f,ne):X==="dangerouslySetInnerHTML"?ul(f,ne):X==="children"?ko(f,ne):Q(f,X,ne,K)}switch(x){case"input":ce(f,g);break;case"textarea":Es(f,g);break;case"select":var Y=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var he=g.value;he!=null?He(f,!!g.multiple,he,!1):Y!==!!g.multiple&&(g.defaultValue!=null?He(f,!!g.multiple,g.defaultValue,!0):He(f,!!g.multiple,g.multiple?[]:"",!1))}f[Ol]=g}catch(ke){yt(o,o.return,ke)}}break;case 6:if(dr(s,o),Ir(o),m&4){if(o.stateNode===null)throw Error(t(162));f=o.stateNode,g=o.memoizedProps;try{f.nodeValue=g}catch(ke){yt(o,o.return,ke)}}break;case 3:if(dr(s,o),Ir(o),m&4&&u!==null&&u.memoizedState.isDehydrated)try{ir(s.containerInfo)}catch(ke){yt(o,o.return,ke)}break;case 4:dr(s,o),Ir(o);break;case 13:dr(s,o),Ir(o),f=o.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(wp=ot())),m&4&&Mk(o);break;case 22:if(X=u!==null&&u.memoizedState!==null,o.mode&1?(Yt=(K=Yt)||X,dr(s,o),Yt=K):dr(s,o),Ir(o),m&8192){if(K=o.memoizedState!==null,(o.stateNode.isHidden=K)&&!X&&(o.mode&1)!==0)for(pe=o,X=o.child;X!==null;){for(ne=pe=X;pe!==null;){switch(Y=pe,he=Y.child,Y.tag){case 0:case 11:case 14:case 15:ql(4,Y,Y.return);break;case 1:aa(Y,Y.return);var fe=Y.stateNode;if(typeof fe.componentWillUnmount=="function"){m=Y,u=Y.return;try{s=m,fe.props=s.memoizedProps,fe.state=s.memoizedState,fe.componentWillUnmount()}catch(ke){yt(m,u,ke)}}break;case 5:aa(Y,Y.return);break;case 22:if(Y.memoizedState!==null){Bk(ne);continue}}he!==null?(he.return=Y,pe=he):Bk(ne)}X=X.sibling}e:for(X=null,ne=o;;){if(ne.tag===5){if(X===null){X=ne;try{f=ne.stateNode,K?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(x=ne.stateNode,R=ne.memoizedProps.style,w=R!=null&&R.hasOwnProperty("display")?R.display:null,x.style.display=cl("display",w))}catch(ke){yt(o,o.return,ke)}}}else if(ne.tag===6){if(X===null)try{ne.stateNode.nodeValue=K?"":ne.memoizedProps}catch(ke){yt(o,o.return,ke)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===o)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===o)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===o)break e;X===ne&&(X=null),ne=ne.return}X===ne&&(X=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:dr(s,o),Ir(o),m&4&&Mk(o);break;case 21:break;default:dr(s,o),Ir(o)}}function Ir(o){var s=o.flags;if(s&2){try{e:{for(var u=o.return;u!==null;){if(Nk(u)){var m=u;break e}u=u.return}throw Error(t(160))}switch(m.tag){case 5:var f=m.stateNode;m.flags&32&&(ko(f,""),m.flags&=-33);var g=Dk(o);kp(o,g,f);break;case 3:case 4:var w=m.stateNode.containerInfo,x=Dk(o);yp(o,x,w);break;default:throw Error(t(161))}}catch(R){yt(o,o.return,R)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function sj(o,s,u){pe=o,Fk(o)}function Fk(o,s,u){for(var m=(o.mode&1)!==0;pe!==null;){var f=pe,g=f.child;if(f.tag===22&&m){var w=f.memoizedState!==null||id;if(!w){var x=f.alternate,R=x!==null&&x.memoizedState!==null||Yt;x=id;var K=Yt;if(id=w,(Yt=R)&&!K)for(pe=f;pe!==null;)w=pe,R=w.child,w.tag===22&&w.memoizedState!==null?Hk(f):R!==null?(R.return=w,pe=R):Hk(f);for(;g!==null;)pe=g,Fk(g),g=g.sibling;pe=f,id=x,Yt=K}Uk(o)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,pe=g):Uk(o)}}function Uk(o){for(;pe!==null;){var s=pe;if((s.flags&8772)!==0){var u=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Yt||sd(5,s);break;case 1:var m=s.stateNode;if(s.flags&4&&!Yt)if(u===null)m.componentDidMount();else{var f=s.elementType===s.type?u.memoizedProps:ur(s.type,u.memoizedProps);m.componentDidUpdate(f,u.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&By(s,g,m);break;case 3:var w=s.updateQueue;if(w!==null){if(u=null,s.child!==null)switch(s.child.tag){case 5:u=s.child.stateNode;break;case 1:u=s.child.stateNode}By(s,w,u)}break;case 5:var x=s.stateNode;if(u===null&&s.flags&4){u=x;var R=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&u.focus();break;case"img":R.src&&(u.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var K=s.alternate;if(K!==null){var X=K.memoizedState;if(X!==null){var ne=X.dehydrated;ne!==null&&ir(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Yt||s.flags&512&&gp(s)}catch(Y){yt(s,s.return,Y)}}if(s===o){pe=null;break}if(u=s.sibling,u!==null){u.return=s.return,pe=u;break}pe=s.return}}function Bk(o){for(;pe!==null;){var s=pe;if(s===o){pe=null;break}var u=s.sibling;if(u!==null){u.return=s.return,pe=u;break}pe=s.return}}function Hk(o){for(;pe!==null;){var s=pe;try{switch(s.tag){case 0:case 11:case 15:var u=s.return;try{sd(4,s)}catch(R){yt(s,u,R)}break;case 1:var m=s.stateNode;if(typeof m.componentDidMount=="function"){var f=s.return;try{m.componentDidMount()}catch(R){yt(s,f,R)}}var g=s.return;try{gp(s)}catch(R){yt(s,g,R)}break;case 5:var w=s.return;try{gp(s)}catch(R){yt(s,w,R)}}}catch(R){yt(s,s.return,R)}if(s===o){pe=null;break}var x=s.sibling;if(x!==null){x.return=s.return,pe=x;break}pe=s.return}}var aj=Math.ceil,ad=re.ReactCurrentDispatcher,bp=re.ReactCurrentOwner,$n=re.ReactCurrentBatchConfig,Ge=0,Mt=null,St=null,$t=0,Pn=0,la=Ao(0),Rt=0,Ql=null,Oi=0,ld=0,_p=0,Jl=null,yn=null,wp=0,ua=1/0,eo=null,ud=!1,Ep=null,Oo=null,cd=!1,Mo=null,dd=0,Zl=0,Tp=null,hd=-1,md=0;function ln(){return(Ge&6)!==0?ot():hd!==-1?hd:hd=ot()}function Lo(o){return(o.mode&1)===0?1:(Ge&2)!==0&&$t!==0?$t&-$t:Kx.transition!==null?(md===0&&(md=zi()),md):(o=Ue,o!==0||(o=window.event,o=o===void 0?16:zl(o.type)),o)}function hr(o,s,u,m){if(50<Zl)throw Zl=0,Tp=null,Error(t(185));Eo(o,u,m),((Ge&2)===0||o!==Mt)&&(o===Mt&&((Ge&2)===0&&(ld|=u),Rt===4&&Fo(o,$t)),kn(o,m),u===1&&Ge===0&&(s.mode&1)===0&&(ua=ot()+500,Uc&&Ro()))}function kn(o,s){var u=o.callbackNode;Br(o,s);var m=Ti(o,o===Mt?$t:0);if(m===0)u!==null&&bl(u),o.callbackNode=null,o.callbackPriority=0;else if(s=m&-m,o.callbackPriority!==s){if(u!=null&&bl(u),s===1)o.tag===0?Hx($k.bind(null,o)):Py($k.bind(null,o)),Lx(function(){(Ge&6)===0&&Ro()}),u=null;else{switch(zo(m)){case 1:u=wi;break;case 4:u=bo;break;case 16:u=Mn;break;case 536870912:u=mc;break;default:u=Mn}u=Xk(u,Kk.bind(null,o))}o.callbackPriority=s,o.callbackNode=u}}function Kk(o,s){if(hd=-1,md=0,(Ge&6)!==0)throw Error(t(327));var u=o.callbackNode;if(ca()&&o.callbackNode!==u)return null;var m=Ti(o,o===Mt?$t:0);if(m===0)return null;if((m&30)!==0||(m&o.expiredLanes)!==0||s)s=pd(o,m);else{s=m;var f=Ge;Ge|=2;var g=Gk();(Mt!==o||$t!==s)&&(eo=null,ua=ot()+500,Li(o,s));do try{cj();break}catch(x){Wk(o,x)}while(!0);Bm(),ad.current=g,Ge=f,St!==null?s=0:(Mt=null,$t=0,s=Rt)}if(s!==0){if(s===2&&(f=zn(o),f!==0&&(m=f,s=zp(o,f))),s===1)throw u=Ql,Li(o,0),Fo(o,m),kn(o,ot()),u;if(s===6)Fo(o,m);else{if(f=o.current.alternate,(m&30)===0&&!lj(f)&&(s=pd(o,m),s===2&&(g=zn(o),g!==0&&(m=g,s=zp(o,g))),s===1))throw u=Ql,Li(o,0),Fo(o,m),kn(o,ot()),u;switch(o.finishedWork=f,o.finishedLanes=m,s){case 0:case 1:throw Error(t(345));case 2:Fi(o,yn,eo);break;case 3:if(Fo(o,m),(m&130023424)===m&&(s=wp+500-ot(),10<s)){if(Ti(o,0)!==0)break;if(f=o.suspendedLanes,(f&m)!==m){ln(),o.pingedLanes|=o.suspendedLanes&f;break}o.timeoutHandle=Am(Fi.bind(null,o,yn,eo),s);break}Fi(o,yn,eo);break;case 4:if(Fo(o,m),(m&4194240)===m)break;for(s=o.eventTimes,f=-1;0<m;){var w=31-on(m);g=1<<w,w=s[w],w>f&&(f=w),m&=~g}if(m=f,m=ot()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*aj(m/1960))-m,10<m){o.timeoutHandle=Am(Fi.bind(null,o,yn,eo),m);break}Fi(o,yn,eo);break;case 5:Fi(o,yn,eo);break;default:throw Error(t(329))}}}return kn(o,ot()),o.callbackNode===u?Kk.bind(null,o):null}function zp(o,s){var u=Jl;return o.current.memoizedState.isDehydrated&&(Li(o,s).flags|=256),o=pd(o,s),o!==2&&(s=yn,yn=u,s!==null&&Sp(s)),o}function Sp(o){yn===null?yn=o:yn.push.apply(yn,o)}function lj(o){for(var s=o;;){if(s.flags&16384){var u=s.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var m=0;m<u.length;m++){var f=u[m],g=f.getSnapshot;f=f.value;try{if(!ar(g(),f))return!1}catch{return!1}}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Fo(o,s){for(s&=~_p,s&=~ld,o.suspendedLanes|=s,o.pingedLanes&=~s,o=o.expirationTimes;0<s;){var u=31-on(s),m=1<<u;o[u]=-1,s&=~m}}function $k(o){if((Ge&6)!==0)throw Error(t(327));ca();var s=Ti(o,0);if((s&1)===0)return kn(o,ot()),null;var u=pd(o,s);if(o.tag!==0&&u===2){var m=zn(o);m!==0&&(s=m,u=zp(o,m))}if(u===1)throw u=Ql,Li(o,0),Fo(o,s),kn(o,ot()),u;if(u===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=s,Fi(o,yn,eo),kn(o,ot()),null}function xp(o,s){var u=Ge;Ge|=1;try{return o(s)}finally{Ge=u,Ge===0&&(ua=ot()+500,Uc&&Ro())}}function Mi(o){Mo!==null&&Mo.tag===0&&(Ge&6)===0&&ca();var s=Ge;Ge|=1;var u=$n.transition,m=Ue;try{if($n.transition=null,Ue=1,o)return o()}finally{Ue=m,$n.transition=u,Ge=s,(Ge&6)===0&&Ro()}}function jp(){Pn=la.current,lt(la)}function Li(o,s){o.finishedWork=null,o.finishedLanes=0;var u=o.timeoutHandle;if(u!==-1&&(o.timeoutHandle=-1,Mx(u)),St!==null)for(u=St.return;u!==null;){var m=u;switch(Om(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Lc();break;case 3:ia(),lt(fn),lt(Qt),Jm();break;case 5:qm(m);break;case 4:ia();break;case 13:lt(mt);break;case 19:lt(mt);break;case 10:Hm(m.type._context);break;case 22:case 23:jp()}u=u.return}if(Mt=o,St=o=Uo(o.current,null),$t=Pn=s,Rt=0,Ql=null,_p=ld=Oi=0,yn=Jl=null,Vi!==null){for(s=0;s<Vi.length;s++)if(u=Vi[s],m=u.interleaved,m!==null){u.interleaved=null;var f=m.next,g=u.pending;if(g!==null){var w=g.next;g.next=f,m.next=w}u.pending=m}Vi=null}return o}function Wk(o,s){do{var u=St;try{if(Bm(),Zc.current=td,Yc){for(var m=pt.memoizedState;m!==null;){var f=m.queue;f!==null&&(f.pending=null),m=m.next}Yc=!1}if(Di=0,Ot=Ct=pt=null,Hl=!1,Kl=0,bp.current=null,u===null||u.return===null){Rt=1,Ql=s,St=null;break}e:{var g=o,w=u.return,x=u,R=s;if(s=$t,x.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var K=R,X=x,ne=X.tag;if((X.mode&1)===0&&(ne===0||ne===11||ne===15)){var Y=X.alternate;Y?(X.updateQueue=Y.updateQueue,X.memoizedState=Y.memoizedState,X.lanes=Y.lanes):(X.updateQueue=null,X.memoizedState=null)}var he=gk(w);if(he!==null){he.flags&=-257,yk(he,w,x,g,s),he.mode&1&&vk(g,K,s),s=he,R=K;var fe=s.updateQueue;if(fe===null){var ke=new Set;ke.add(R),s.updateQueue=ke}else fe.add(R);break e}else{if((s&1)===0){vk(g,K,s),Ip();break e}R=Error(t(426))}}else if(ct&&x.mode&1){var wt=gk(w);if(wt!==null){(wt.flags&65536)===0&&(wt.flags|=256),yk(wt,w,x,g,s),Fm(sa(R,x));break e}}g=R=sa(R,x),Rt!==4&&(Rt=2),Jl===null?Jl=[g]:Jl.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var B=pk(g,R,s);Uy(g,B);break e;case 1:x=R;var D=g.type,H=g.stateNode;if((g.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Oo===null||!Oo.has(H)))){g.flags|=65536,s&=-s,g.lanes|=s;var ie=fk(g,x,s);Uy(g,ie);break e}}g=g.return}while(g!==null)}Qk(u)}catch(be){s=be,St===u&&u!==null&&(St=u=u.return);continue}break}while(!0)}function Gk(){var o=ad.current;return ad.current=td,o===null?td:o}function Ip(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),Mt===null||(Oi&268435455)===0&&(ld&268435455)===0||Fo(Mt,$t)}function pd(o,s){var u=Ge;Ge|=2;var m=Gk();(Mt!==o||$t!==s)&&(eo=null,Li(o,s));do try{uj();break}catch(f){Wk(o,f)}while(!0);if(Bm(),Ge=u,ad.current=m,St!==null)throw Error(t(261));return Mt=null,$t=0,Rt}function uj(){for(;St!==null;)qk(St)}function cj(){for(;St!==null&&!dc();)qk(St)}function qk(o){var s=Yk(o.alternate,o,Pn);o.memoizedProps=o.pendingProps,s===null?Qk(o):St=s,bp.current=null}function Qk(o){var s=o;do{var u=s.alternate;if(o=s.return,(s.flags&32768)===0){if(u=nj(u,s,Pn),u!==null){St=u;return}}else{if(u=rj(u,s),u!==null){u.flags&=32767,St=u;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Rt=6,St=null;return}}if(s=s.sibling,s!==null){St=s;return}St=s=o}while(s!==null);Rt===0&&(Rt=5)}function Fi(o,s,u){var m=Ue,f=$n.transition;try{$n.transition=null,Ue=1,dj(o,s,u,m)}finally{$n.transition=f,Ue=m}return null}function dj(o,s,u,m){do ca();while(Mo!==null);if((Ge&6)!==0)throw Error(t(327));u=o.finishedWork;var f=o.finishedLanes;if(u===null)return null;if(o.finishedWork=null,o.finishedLanes=0,u===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var g=u.lanes|u.childLanes;if(nt(o,g),o===Mt&&(St=Mt=null,$t=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||cd||(cd=!0,Xk(Mn,function(){return ca(),null})),g=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||g){g=$n.transition,$n.transition=null;var w=Ue;Ue=1;var x=Ge;Ge|=4,bp.current=null,ij(o,u),Lk(u,o),Ax(Im),xo=!!jm,Im=jm=null,o.current=u,sj(u),hm(),Ge=x,Ue=w,$n.transition=g}else o.current=u;if(cd&&(cd=!1,Mo=o,dd=f),g=o.pendingLanes,g===0&&(Oo=null),pc(u.stateNode),kn(o,ot()),s!==null)for(m=o.onRecoverableError,u=0;u<s.length;u++)f=s[u],m(f.value,{componentStack:f.stack,digest:f.digest});if(ud)throw ud=!1,o=Ep,Ep=null,o;return(dd&1)!==0&&o.tag!==0&&ca(),g=o.pendingLanes,(g&1)!==0?o===Tp?Zl++:(Zl=0,Tp=o):Zl=0,Ro(),null}function ca(){if(Mo!==null){var o=zo(dd),s=$n.transition,u=Ue;try{if($n.transition=null,Ue=16>o?16:o,Mo===null)var m=!1;else{if(o=Mo,Mo=null,dd=0,(Ge&6)!==0)throw Error(t(331));var f=Ge;for(Ge|=4,pe=o.current;pe!==null;){var g=pe,w=g.child;if((pe.flags&16)!==0){var x=g.deletions;if(x!==null){for(var R=0;R<x.length;R++){var K=x[R];for(pe=K;pe!==null;){var X=pe;switch(X.tag){case 0:case 11:case 15:ql(8,X,g)}var ne=X.child;if(ne!==null)ne.return=X,pe=ne;else for(;pe!==null;){X=pe;var Y=X.sibling,he=X.return;if(Vk(X),X===K){pe=null;break}if(Y!==null){Y.return=he,pe=Y;break}pe=he}}}var fe=g.alternate;if(fe!==null){var ke=fe.child;if(ke!==null){fe.child=null;do{var wt=ke.sibling;ke.sibling=null,ke=wt}while(ke!==null)}}pe=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,pe=w;else e:for(;pe!==null;){if(g=pe,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:ql(9,g,g.return)}var B=g.sibling;if(B!==null){B.return=g.return,pe=B;break e}pe=g.return}}var D=o.current;for(pe=D;pe!==null;){w=pe;var H=w.child;if((w.subtreeFlags&2064)!==0&&H!==null)H.return=w,pe=H;else e:for(w=D;pe!==null;){if(x=pe,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:sd(9,x)}}catch(be){yt(x,x.return,be)}if(x===w){pe=null;break e}var ie=x.sibling;if(ie!==null){ie.return=x.return,pe=ie;break e}pe=x.return}}if(Ge=f,Ro(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(Ei,o)}catch{}m=!0}return m}finally{Ue=u,$n.transition=s}}return!1}function Jk(o,s,u){s=sa(u,s),s=pk(o,s,1),o=No(o,s,1),s=ln(),o!==null&&(Eo(o,1,s),kn(o,s))}function yt(o,s,u){if(o.tag===3)Jk(o,o,u);else for(;s!==null;){if(s.tag===3){Jk(s,o,u);break}else if(s.tag===1){var m=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Oo===null||!Oo.has(m))){o=sa(u,o),o=fk(s,o,1),s=No(s,o,1),o=ln(),s!==null&&(Eo(s,1,o),kn(s,o));break}}s=s.return}}function hj(o,s,u){var m=o.pingCache;m!==null&&m.delete(s),s=ln(),o.pingedLanes|=o.suspendedLanes&u,Mt===o&&($t&u)===u&&(Rt===4||Rt===3&&($t&130023424)===$t&&500>ot()-wp?Li(o,0):_p|=u),kn(o,s)}function Zk(o,s){s===0&&((o.mode&1)===0?s=1:(s=Rs,Rs<<=1,(Rs&130023424)===0&&(Rs=4194304)));var u=ln();o=Zr(o,s),o!==null&&(Eo(o,s,u),kn(o,u))}function mj(o){var s=o.memoizedState,u=0;s!==null&&(u=s.retryLane),Zk(o,u)}function pj(o,s){var u=0;switch(o.tag){case 13:var m=o.stateNode,f=o.memoizedState;f!==null&&(u=f.retryLane);break;case 19:m=o.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(s),Zk(o,u)}var Yk;Yk=function(o,s,u){if(o!==null)if(o.memoizedProps!==s.pendingProps||fn.current)gn=!0;else{if((o.lanes&u)===0&&(s.flags&128)===0)return gn=!1,tj(o,s,u);gn=(o.flags&131072)!==0}else gn=!1,ct&&(s.flags&1048576)!==0&&Ay(s,Hc,s.index);switch(s.lanes=0,s.tag){case 2:var m=s.type;od(o,s),o=s.pendingProps;var f=Ys(s,Qt.current);oa(s,u),f=Xm(null,s,m,o,f,u);var g=ep();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,vn(m)?(g=!0,Fc(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Wm(s),f.updater=nd,s.stateNode=f,f._reactInternals=s,sp(s,m,o,u),s=cp(null,s,m,!0,g,u)):(s.tag=0,ct&&g&&Dm(s),an(null,s,f,u),s=s.child),s;case 16:m=s.elementType;e:{switch(od(o,s),o=s.pendingProps,f=m._init,m=f(m._payload),s.type=m,f=s.tag=vj(m),o=ur(m,o),f){case 0:s=up(null,s,m,o,u);break e;case 1:s=Tk(null,s,m,o,u);break e;case 11:s=kk(null,s,m,o,u);break e;case 14:s=bk(null,s,m,ur(m.type,o),u);break e}throw Error(t(306,m,""))}return s;case 0:return m=s.type,f=s.pendingProps,f=s.elementType===m?f:ur(m,f),up(o,s,m,f,u);case 1:return m=s.type,f=s.pendingProps,f=s.elementType===m?f:ur(m,f),Tk(o,s,m,f,u);case 3:e:{if(zk(s),o===null)throw Error(t(387));m=s.pendingProps,g=s.memoizedState,f=g.element,Fy(o,s),Qc(s,m,null,u);var w=s.memoizedState;if(m=w.element,g.isDehydrated)if(g={element:m,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=sa(Error(t(423)),s),s=Sk(o,s,m,u,f);break e}else if(m!==f){f=sa(Error(t(424)),s),s=Sk(o,s,m,u,f);break e}else for(In=Po(s.stateNode.containerInfo.firstChild),jn=s,ct=!0,lr=null,u=My(s,null,m,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ta(),m===f){s=Xr(o,s,u);break e}an(o,s,m,u)}s=s.child}return s;case 5:return Hy(s),o===null&&Lm(s),m=s.type,f=s.pendingProps,g=o!==null?o.memoizedProps:null,w=f.children,Pm(m,f)?w=null:g!==null&&Pm(m,g)&&(s.flags|=32),Ek(o,s),an(o,s,w,u),s.child;case 6:return o===null&&Lm(s),null;case 13:return xk(o,s,u);case 4:return Gm(s,s.stateNode.containerInfo),m=s.pendingProps,o===null?s.child=na(s,null,m,u):an(o,s,m,u),s.child;case 11:return m=s.type,f=s.pendingProps,f=s.elementType===m?f:ur(m,f),kk(o,s,m,f,u);case 7:return an(o,s,s.pendingProps,u),s.child;case 8:return an(o,s,s.pendingProps.children,u),s.child;case 12:return an(o,s,s.pendingProps.children,u),s.child;case 10:e:{if(m=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,it(Wc,m._currentValue),m._currentValue=w,g!==null)if(ar(g.value,w)){if(g.children===f.children&&!fn.current){s=Xr(o,s,u);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var x=g.dependencies;if(x!==null){w=g.child;for(var R=x.firstContext;R!==null;){if(R.context===m){if(g.tag===1){R=Yr(-1,u&-u),R.tag=2;var K=g.updateQueue;if(K!==null){K=K.shared;var X=K.pending;X===null?R.next=R:(R.next=X.next,X.next=R),K.pending=R}}g.lanes|=u,R=g.alternate,R!==null&&(R.lanes|=u),Km(g.return,u,s),x.lanes|=u;break}R=R.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=u,x=w.alternate,x!==null&&(x.lanes|=u),Km(w,u,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}an(o,s,f.children,u),s=s.child}return s;case 9:return f=s.type,m=s.pendingProps.children,oa(s,u),f=Hn(f),m=m(f),s.flags|=1,an(o,s,m,u),s.child;case 14:return m=s.type,f=ur(m,s.pendingProps),f=ur(m.type,f),bk(o,s,m,f,u);case 15:return _k(o,s,s.type,s.pendingProps,u);case 17:return m=s.type,f=s.pendingProps,f=s.elementType===m?f:ur(m,f),od(o,s),s.tag=1,vn(m)?(o=!0,Fc(s)):o=!1,oa(s,u),hk(s,m,f),sp(s,m,f,u),cp(null,s,m,!0,o,u);case 19:return Ik(o,s,u);case 22:return wk(o,s,u)}throw Error(t(156,s.tag))};function Xk(o,s){return As(o,s)}function fj(o,s,u,m){this.tag=o,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(o,s,u,m){return new fj(o,s,u,m)}function Pp(o){return o=o.prototype,!(!o||!o.isReactComponent)}function vj(o){if(typeof o=="function")return Pp(o)?1:0;if(o!=null){if(o=o.$$typeof,o===O)return 11;if(o===rt)return 14}return 2}function Uo(o,s){var u=o.alternate;return u===null?(u=Wn(o.tag,s,o.key,o.mode),u.elementType=o.elementType,u.type=o.type,u.stateNode=o.stateNode,u.alternate=o,o.alternate=u):(u.pendingProps=s,u.type=o.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=o.flags&14680064,u.childLanes=o.childLanes,u.lanes=o.lanes,u.child=o.child,u.memoizedProps=o.memoizedProps,u.memoizedState=o.memoizedState,u.updateQueue=o.updateQueue,s=o.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=o.sibling,u.index=o.index,u.ref=o.ref,u}function fd(o,s,u,m,f,g){var w=2;if(m=o,typeof o=="function")Pp(o)&&(w=1);else if(typeof o=="string")w=5;else e:switch(o){case P:return Ui(u.children,f,g,s);case z:w=8,f|=8;break;case j:return o=Wn(12,u,s,f|2),o.elementType=j,o.lanes=g,o;case I:return o=Wn(13,u,s,f),o.elementType=I,o.lanes=g,o;case Qe:return o=Wn(19,u,s,f),o.elementType=Qe,o.lanes=g,o;case ve:return vd(u,f,g,s);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case A:w=10;break e;case V:w=9;break e;case O:w=11;break e;case rt:w=14;break e;case Ve:w=16,m=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return s=Wn(w,u,s,f),s.elementType=o,s.type=m,s.lanes=g,s}function Ui(o,s,u,m){return o=Wn(7,o,m,s),o.lanes=u,o}function vd(o,s,u,m){return o=Wn(22,o,m,s),o.elementType=ve,o.lanes=u,o.stateNode={isHidden:!1},o}function Ap(o,s,u){return o=Wn(6,o,null,s),o.lanes=u,o}function Cp(o,s,u){return s=Wn(4,o.children!==null?o.children:[],o.key,s),s.lanes=u,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}function gj(o,s,u,m,f){this.tag=s,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wo(0),this.expirationTimes=wo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wo(0),this.identifierPrefix=m,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Rp(o,s,u,m,f,g,w,x,R){return o=new gj(o,s,u,x,R),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Wn(3,null,null,s),o.current=g,g.stateNode=o,g.memoizedState={element:m,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wm(g),o}function yj(o,s,u){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:se,key:m==null?null:""+m,children:o,containerInfo:s,implementation:u}}function e0(o){if(!o)return Co;o=o._reactInternals;e:{if(er(o)!==o||o.tag!==1)throw Error(t(170));var s=o;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(vn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(o.tag===1){var u=o.type;if(vn(u))return jy(o,u,s)}return s}function t0(o,s,u,m,f,g,w,x,R){return o=Rp(u,m,!0,o,f,g,w,x,R),o.context=e0(null),u=o.current,m=ln(),f=Lo(u),g=Yr(m,f),g.callback=s??null,No(u,g,f),o.current.lanes=f,Eo(o,f,m),kn(o,m),o}function gd(o,s,u,m){var f=s.current,g=ln(),w=Lo(f);return u=e0(u),s.context===null?s.context=u:s.pendingContext=u,s=Yr(g,w),s.payload={element:o},m=m===void 0?null:m,m!==null&&(s.callback=m),o=No(f,s,w),o!==null&&(hr(o,f,w,g),qc(o,f,w)),w}function yd(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function n0(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var u=o.retryLane;o.retryLane=u!==0&&u<s?u:s}}function Vp(o,s){n0(o,s),(o=o.alternate)&&n0(o,s)}function kj(){return null}var r0=typeof reportError=="function"?reportError:function(o){console.error(o)};function Np(o){this._internalRoot=o}kd.prototype.render=Np.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(t(409));gd(o,s,null,null)},kd.prototype.unmount=Np.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;Mi(function(){gd(null,o,null,null)}),s[Gr]=null}};function kd(o){this._internalRoot=o}kd.prototype.unstable_scheduleHydration=function(o){if(o){var s=kc();o={blockedOn:null,target:o,priority:s};for(var u=0;u<wr.length&&s!==0&&s<wr[u].priority;u++);wr.splice(u,0,o),u===0&&wc(o)}};function Dp(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function bd(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function o0(){}function bj(o,s,u,m,f){if(f){if(typeof m=="function"){var g=m;m=function(){var K=yd(w);g.call(K)}}var w=t0(s,m,o,0,null,!1,!1,"",o0);return o._reactRootContainer=w,o[Gr]=w.current,Nl(o.nodeType===8?o.parentNode:o),Mi(),w}for(;f=o.lastChild;)o.removeChild(f);if(typeof m=="function"){var x=m;m=function(){var K=yd(R);x.call(K)}}var R=Rp(o,0,!1,null,null,!1,!1,"",o0);return o._reactRootContainer=R,o[Gr]=R.current,Nl(o.nodeType===8?o.parentNode:o),Mi(function(){gd(s,R,u,m)}),R}function _d(o,s,u,m,f){var g=u._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var x=f;f=function(){var R=yd(w);x.call(R)}}gd(s,w,o,f)}else w=bj(u,s,o,f,m);return yd(w)}gc=function(o){switch(o.tag){case 3:var s=o.stateNode;if(s.current.memoizedState.isDehydrated){var u=_o(s.pendingLanes);u!==0&&(To(s,u|1),kn(s,ot()),(Ge&6)===0&&(ua=ot()+500,Ro()))}break;case 13:Mi(function(){var m=Zr(o,1);if(m!==null){var f=ln();hr(m,o,1,f)}}),Vp(o,1)}},Vs=function(o){if(o.tag===13){var s=Zr(o,134217728);if(s!==null){var u=ln();hr(s,o,134217728,u)}Vp(o,134217728)}},yc=function(o){if(o.tag===13){var s=Lo(o),u=Zr(o,s);if(u!==null){var m=ln();hr(u,o,s,m)}Vp(o,s)}},kc=function(){return Ue},bc=function(o,s){var u=Ue;try{return Ue=o,s()}finally{Ue=u}},zs=function(o,s,u){switch(s){case"input":if(ce(o,u),s=u.name,u.type==="radio"&&s!=null){for(u=o;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<u.length;s++){var m=u[s];if(m!==o&&m.form===o.form){var f=Mc(m);if(!f)throw Error(t(90));Dn(m),ce(m,f)}}}break;case"textarea":Es(o,u);break;case"select":s=u.value,s!=null&&He(o,!!u.multiple,s,!1)}},yi=xp,vl=Mi;var _j={usingClientEntryPoint:!1,Events:[Ml,Js,Mc,br,fl,xp]},Yl={findFiberByHostInstance:Pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wj={bundleType:Yl.bundleType,version:Yl.version,rendererPackageName:Yl.rendererPackageName,rendererConfig:Yl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:re.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=kl(o),o===null?null:o.stateNode},findFiberByHostInstance:Yl.findFiberByHostInstance||kj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wd.isDisabled&&wd.supportsFiber)try{Ei=wd.inject(wj),Tn=wd}catch{}}return bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_j,bn.createPortal=function(o,s){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dp(s))throw Error(t(200));return yj(o,s,null,u)},bn.createRoot=function(o,s){if(!Dp(o))throw Error(t(299));var u=!1,m="",f=r0;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(m=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Rp(o,1,!1,null,null,u,!1,m,f),o[Gr]=s.current,Nl(o.nodeType===8?o.parentNode:o),new Np(s)},bn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=kl(s),o=o===null?null:o.stateNode,o},bn.flushSync=function(o){return Mi(o)},bn.hydrate=function(o,s,u){if(!bd(s))throw Error(t(200));return _d(null,o,s,!0,u)},bn.hydrateRoot=function(o,s,u){if(!Dp(o))throw Error(t(405));var m=u!=null&&u.hydratedSources||null,f=!1,g="",w=r0;if(u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onRecoverableError!==void 0&&(w=u.onRecoverableError)),s=t0(s,null,o,1,u??null,f,!1,g,w),o[Gr]=s.current,Nl(o),m)for(o=0;o<m.length;o++)u=m[o],f=u._getVersion,f=f(u._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[u,f]:s.mutableSourceEagerHydrationData.push(u,f);return new kd(s)},bn.render=function(o,s,u){if(!bd(s))throw Error(t(200));return _d(null,o,s,!1,u)},bn.unmountComponentAtNode=function(o){if(!bd(o))throw Error(t(40));return o._reactRootContainer?(Mi(function(){_d(null,null,o,!1,function(){o._reactRootContainer=null,o[Gr]=null})}),!0):!1},bn.unstable_batchedUpdates=xp,bn.unstable_renderSubtreeIntoContainer=function(o,s,u,m){if(!bd(u))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return _d(o,s,u,!1,m)},bn.version="18.3.1-next-f1338f8080-20240426",bn}var h0;function Aj(){if(h0)return Lp.exports;h0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Lp.exports=Pj(),Lp.exports}var m0;function Cj(){if(m0)return Ed;m0=1;var n=Aj();return Ed.createRoot=n.createRoot,Ed.hydrateRoot=n.hydrateRoot,Ed}var Rj=Cj();const Vj=Iw(Rj),Nj=({front:n,back:e,onDifficultySelect:t,isFlipped:r,onFlip:i,isFavorite:a=!1,onToggleFavorite:l,darkMode:c=!1})=>E.jsxs("div",{className:"relative w-full",children:[E.jsx("div",{className:"relative w-full h-[180px] sm:h-56 md:h-64 lg:h-72 cursor-pointer",onClick:r?void 0:i,children:E.jsxs("div",{className:`absolute w-full h-full transition-transform duration-500 ${r?"rotate-y-180":""} transform-style-preserve-3d`,children:[E.jsxs("div",{className:`absolute w-full h-full ${c?"bg-gray-800":"bg-white"} rounded-xl shadow-lg p-3 sm:p-6 backface-hidden flex items-center justify-center overflow-auto`,children:[E.jsx("p",{className:`text-base sm:text-xl md:text-2xl text-center font-medium ${c?"text-white":"text-gray-800"} overflow-auto px-4`,children:n}),E.jsx("button",{className:"absolute top-2 right-2 sm:top-3 sm:right-3 md:top-4 md:right-4",onClick:h=>{h.stopPropagation(),l()},children:a?E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:h-6 sm:w-6 md:h-7 md:w-7",viewBox:"0 0 20 20",fill:"currentColor",children:E.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118l-2.8-2.034c-.783-.57-.38-1.81.588-1.81h3.462a1 1 0 00.95-.69l1.07-3.292z"})}):E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 sm:h-6 sm:w-6 md:h-7 md:w-7 ${c?"text-gray-400 hover:text-yellow-400":"text-gray-400 hover:text-yellow-500"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})]}),E.jsxs("div",{className:`absolute w-full h-full ${c?"bg-blue-900":"bg-blue-50"} rounded-xl shadow-lg p-3 sm:p-6 backface-hidden rotate-y-180 flex items-center justify-center overflow-auto`,children:[E.jsx("p",{className:`text-base sm:text-xl md:text-2xl text-center font-medium ${c?"text-white":"text-gray-800"} overflow-auto px-4`,children:e}),E.jsx("button",{className:"absolute top-2 right-2 sm:top-3 sm:right-3 md:top-4 md:right-4",onClick:h=>{h.stopPropagation(),l()},children:a?E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:h-6 sm:w-6 md:h-7 md:w-7",viewBox:"0 0 20 20",fill:"currentColor",children:E.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118l-2.8-2.034c-.783-.57-.38-1.81.588-1.81h3.462a1 1 0 00.95-.69l1.07-3.292z"})}):E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 sm:h-6 sm:w-6 md:h-7 md:w-7 ${c?"text-gray-400 hover:text-yellow-400":"text-gray-400 hover:text-yellow-500"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})]})]})}),r&&E.jsxs("div",{className:"mt-4 sm:mt-6 md:mt-8 flex justify-center gap-2 sm:gap-4",children:[E.jsx("button",{onClick:()=>{t("hard")},className:`px-3 sm:px-6 py-1 sm:py-2 text-sm sm:text-base md:text-lg ${c?"bg-red-600 hover:bg-red-700":"bg-red-500 hover:bg-red-600"} text-white rounded-lg transition-colors duration-200 font-medium shadow-sm`,children:"Hard"}),E.jsx("button",{onClick:()=>{t("medium")},className:`px-3 sm:px-6 py-1 sm:py-2 text-sm sm:text-base md:text-lg ${c?"bg-yellow-600 hover:bg-yellow-700":"bg-yellow-500 hover:bg-yellow-600"} text-white rounded-lg transition-colors duration-200 font-medium shadow-sm`,children:"Medium"}),E.jsx("button",{onClick:()=>{t("easy")},className:`px-3 sm:px-6 py-1 sm:py-2 text-sm sm:text-base md:text-lg ${c?"bg-green-600 hover:bg-green-700":"bg-green-500 hover:bg-green-600"} text-white rounded-lg transition-colors duration-200 font-medium shadow-sm`,children:"Easy"})]})]}),Dj=()=>{};var p0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Oj=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],l=n[t++],c=n[t++],h=((i&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},Aw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],l=i+1<n.length,c=l?n[i+1]:0,h=i+2<n.length,p=h?n[i+2]:0,y=a>>2,k=(a&3)<<4|c>>4;let _=(c&15)<<2|p>>6,S=p&63;h||(S=64,l||(_=64)),r.push(t[y],t[k],t[_],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Pw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Oj(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const p=i<n.length?t[n.charAt(i)]:64;++i;const k=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||c==null||p==null||k==null)throw new Mj;const _=a<<2|c>>4;if(r.push(_),p!==64){const S=c<<4&240|p>>2;if(r.push(S),k!==64){const C=p<<6&192|k;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Mj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Lj=function(n){const e=Pw(n);return Aw.encodeByteArray(e,!0)},nh=function(n){return Lj(n).replace(/\./g,"")},Cw=function(n){try{return Aw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj=()=>Fj().__FIREBASE_DEFAULTS__,Bj=()=>{if(typeof process>"u"||typeof p0>"u")return;const n=p0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Hj=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Cw(n[1]);return e&&JSON.parse(e)},Dh=()=>{try{return Dj()||Uj()||Bj()||Hj()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Rw=n=>{var e,t;return(t=(e=Dh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Kj=n=>{const e=Rw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Vw=()=>{var n;return(n=Dh())===null||n===void 0?void 0:n.config},Nw=n=>{var e;return(e=Dh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[nh(JSON.stringify(t)),nh(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Gj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function qj(){var n;const e=(n=Dh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Qj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Jj(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Zj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Yj(){const n=Vt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Dw(){return!qj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ow(){try{return typeof indexedDB=="object"}catch{return!1}}function Xj(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="FirebaseError";class po extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=eI,Object.setPrototypeOf(this,po.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gu.prototype.create)}}class Gu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?tI(a,r):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new po(i,c,r)}}function tI(n,e){return n.replace(nI,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const nI=/\{\$([^}]+)}/g;function rI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ls(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],l=e[i];if(f0(a)&&f0(l)){if(!ls(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function f0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oI(n,e){const t=new iI(n,e);return t.subscribe.bind(t)}class iI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");sI(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Bp),i.error===void 0&&(i.error=Bp),i.complete===void 0&&(i.complete=Bp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Bp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(n){return n&&n._delegate?n._delegate:n}class us{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new $j;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uI(e))try{this.getOrInitializeService({instanceIdentifier:Ki})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Ki){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ki){return this.instances.has(e)}getOptions(e=Ki){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&l.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lI(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ki){return this.component?this.component.multipleInstances?e:Ki:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lI(n){return n===Ki?void 0:n}function uI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new aI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const dI={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},hI=Le.INFO,mI={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},pI=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=mI[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pv{constructor(e){this.name=e,this._logLevel=hI,this._logHandler=pI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const fI=(n,e)=>e.some(t=>n instanceof t);let v0,g0;function vI(){return v0||(v0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gI(){return g0||(g0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Mw=new WeakMap,vf=new WeakMap,Lw=new WeakMap,Hp=new WeakMap,fv=new WeakMap;function yI(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Xo(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&Mw.set(t,n)}).catch(()=>{}),fv.set(e,n),e}function kI(n){if(vf.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});vf.set(n,e)}let gf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return vf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Lw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function bI(n){gf=n(gf)}function _I(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Kp(this),e,...t);return Lw.set(r,e.sort?e.sort():[e]),Xo(r)}:gI().includes(n)?function(...e){return n.apply(Kp(this),e),Xo(Mw.get(this))}:function(...e){return Xo(n.apply(Kp(this),e))}}function wI(n){return typeof n=="function"?_I(n):(n instanceof IDBTransaction&&kI(n),fI(n,vI())?new Proxy(n,gf):n)}function Xo(n){if(n instanceof IDBRequest)return yI(n);if(Hp.has(n))return Hp.get(n);const e=wI(n);return e!==n&&(Hp.set(n,e),fv.set(e,n)),e}const Kp=n=>fv.get(n);function EI(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(n,e),c=Xo(l);return r&&l.addEventListener("upgradeneeded",h=>{r(Xo(l.result),h.oldVersion,h.newVersion,Xo(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{a&&h.addEventListener("close",()=>a()),i&&h.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}const TI=["get","getKey","getAll","getAllKeys","count"],zI=["put","add","delete","clear"],$p=new Map;function y0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if($p.get(e))return $p.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=zI.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||TI.includes(t)))return;const a=async function(l,...c){const h=this.transaction(l,i?"readwrite":"readonly");let p=h.store;return r&&(p=p.index(c.shift())),(await Promise.all([p[t](...c),i&&h.done]))[0]};return $p.set(e,a),a}bI(n=>({...n,get:(e,t,r)=>y0(e,t)||n.get(e,t,r),has:(e,t)=>!!y0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(xI(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function xI(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yf="@firebase/app",k0="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=new pv("@firebase/app"),jI="@firebase/app-compat",II="@firebase/analytics-compat",PI="@firebase/analytics",AI="@firebase/app-check-compat",CI="@firebase/app-check",RI="@firebase/auth",VI="@firebase/auth-compat",NI="@firebase/database",DI="@firebase/data-connect",OI="@firebase/database-compat",MI="@firebase/functions",LI="@firebase/functions-compat",FI="@firebase/installations",UI="@firebase/installations-compat",BI="@firebase/messaging",HI="@firebase/messaging-compat",KI="@firebase/performance",$I="@firebase/performance-compat",WI="@firebase/remote-config",GI="@firebase/remote-config-compat",qI="@firebase/storage",QI="@firebase/storage-compat",JI="@firebase/firestore",ZI="@firebase/vertexai",YI="@firebase/firestore-compat",XI="firebase",eP="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf="[DEFAULT]",tP={[yf]:"fire-core",[jI]:"fire-core-compat",[PI]:"fire-analytics",[II]:"fire-analytics-compat",[CI]:"fire-app-check",[AI]:"fire-app-check-compat",[RI]:"fire-auth",[VI]:"fire-auth-compat",[NI]:"fire-rtdb",[DI]:"fire-data-connect",[OI]:"fire-rtdb-compat",[MI]:"fire-fn",[LI]:"fire-fn-compat",[FI]:"fire-iid",[UI]:"fire-iid-compat",[BI]:"fire-fcm",[HI]:"fire-fcm-compat",[KI]:"fire-perf",[$I]:"fire-perf-compat",[WI]:"fire-rc",[GI]:"fire-rc-compat",[qI]:"fire-gcs",[QI]:"fire-gcs-compat",[JI]:"fire-fst",[YI]:"fire-fst-compat",[ZI]:"fire-vertex","fire-js":"fire-js",[XI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=new Map,nP=new Map,bf=new Map;function b0(n,e){try{n.container.addComponent(e)}catch(t){ao.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Va(n){const e=n.name;if(bf.has(e))return ao.debug(`There were multiple attempts to register component ${e}.`),!1;bf.set(e,n);for(const t of rh.values())b0(t,n);for(const t of nP.values())b0(t,n);return!0}function vv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function fr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ei=new Gu("app","Firebase",rP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ei.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa=eP;function Fw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:kf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ei.create("bad-app-name",{appName:String(i)});if(t||(t=Vw()),!t)throw ei.create("no-options");const a=rh.get(i);if(a){if(ls(t,a.options)&&ls(r,a.config))return a;throw ei.create("duplicate-app",{appName:i})}const l=new cI(i);for(const h of bf.values())l.addComponent(h);const c=new oP(t,r,l);return rh.set(i,c),c}function Uw(n=kf){const e=rh.get(n);if(!e&&n===kf&&Vw())return Fw();if(!e)throw ei.create("no-app",{appName:n});return e}function ti(n,e,t){var r;let i=(r=tP[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ao.warn(c.join(" "));return}Va(new us(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP="firebase-heartbeat-database",sP=1,Tu="firebase-heartbeat-store";let Wp=null;function Bw(){return Wp||(Wp=EI(iP,sP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Tu)}catch(t){console.warn(t)}}}}).catch(n=>{throw ei.create("idb-open",{originalErrorMessage:n.message})})),Wp}async function aP(n){try{const t=(await Bw()).transaction(Tu),r=await t.objectStore(Tu).get(Hw(n));return await t.done,r}catch(e){if(e instanceof po)ao.warn(e.message);else{const t=ei.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ao.warn(t.message)}}}async function _0(n,e){try{const r=(await Bw()).transaction(Tu,"readwrite");await r.objectStore(Tu).put(e,Hw(n)),await r.done}catch(t){if(t instanceof po)ao.warn(t.message);else{const r=ei.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ao.warn(r.message)}}}function Hw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=1024,uP=30;class cP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hP(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=w0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>uP){const l=mP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ao.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=w0(),{heartbeatsToSend:r,unsentEntries:i}=dP(this._heartbeatsCache.heartbeats),a=nh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ao.warn(t),""}}}function w0(){return new Date().toISOString().substring(0,10)}function dP(n,e=lP){const t=[];let r=n.slice();for(const i of n){const a=t.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),E0(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),E0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class hP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ow()?Xj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await aP(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return _0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return _0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function E0(n){return nh(JSON.stringify({version:2,heartbeats:n})).length}function mP(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(n){Va(new us("platform-logger",e=>new SI(e),"PRIVATE")),Va(new us("heartbeat",e=>new cP(e),"PRIVATE")),ti(yf,k0,n),ti(yf,k0,"esm2017"),ti("fire-js","")}pP("");var T0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ni,Kw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,z){function j(){}j.prototype=z.prototype,P.D=z.prototype,P.prototype=new j,P.prototype.constructor=P,P.C=function(A,V,O){for(var I=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)I[Qe-2]=arguments[Qe];return z.prototype[V].apply(A,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,z,j){j||(j=0);var A=Array(16);if(typeof z=="string")for(var V=0;16>V;++V)A[V]=z.charCodeAt(j++)|z.charCodeAt(j++)<<8|z.charCodeAt(j++)<<16|z.charCodeAt(j++)<<24;else for(V=0;16>V;++V)A[V]=z[j++]|z[j++]<<8|z[j++]<<16|z[j++]<<24;z=P.g[0],j=P.g[1],V=P.g[2];var O=P.g[3],I=z+(O^j&(V^O))+A[0]+3614090360&4294967295;z=j+(I<<7&4294967295|I>>>25),I=O+(V^z&(j^V))+A[1]+3905402710&4294967295,O=z+(I<<12&4294967295|I>>>20),I=V+(j^O&(z^j))+A[2]+606105819&4294967295,V=O+(I<<17&4294967295|I>>>15),I=j+(z^V&(O^z))+A[3]+3250441966&4294967295,j=V+(I<<22&4294967295|I>>>10),I=z+(O^j&(V^O))+A[4]+4118548399&4294967295,z=j+(I<<7&4294967295|I>>>25),I=O+(V^z&(j^V))+A[5]+1200080426&4294967295,O=z+(I<<12&4294967295|I>>>20),I=V+(j^O&(z^j))+A[6]+2821735955&4294967295,V=O+(I<<17&4294967295|I>>>15),I=j+(z^V&(O^z))+A[7]+4249261313&4294967295,j=V+(I<<22&4294967295|I>>>10),I=z+(O^j&(V^O))+A[8]+1770035416&4294967295,z=j+(I<<7&4294967295|I>>>25),I=O+(V^z&(j^V))+A[9]+2336552879&4294967295,O=z+(I<<12&4294967295|I>>>20),I=V+(j^O&(z^j))+A[10]+4294925233&4294967295,V=O+(I<<17&4294967295|I>>>15),I=j+(z^V&(O^z))+A[11]+2304563134&4294967295,j=V+(I<<22&4294967295|I>>>10),I=z+(O^j&(V^O))+A[12]+1804603682&4294967295,z=j+(I<<7&4294967295|I>>>25),I=O+(V^z&(j^V))+A[13]+4254626195&4294967295,O=z+(I<<12&4294967295|I>>>20),I=V+(j^O&(z^j))+A[14]+2792965006&4294967295,V=O+(I<<17&4294967295|I>>>15),I=j+(z^V&(O^z))+A[15]+1236535329&4294967295,j=V+(I<<22&4294967295|I>>>10),I=z+(V^O&(j^V))+A[1]+4129170786&4294967295,z=j+(I<<5&4294967295|I>>>27),I=O+(j^V&(z^j))+A[6]+3225465664&4294967295,O=z+(I<<9&4294967295|I>>>23),I=V+(z^j&(O^z))+A[11]+643717713&4294967295,V=O+(I<<14&4294967295|I>>>18),I=j+(O^z&(V^O))+A[0]+3921069994&4294967295,j=V+(I<<20&4294967295|I>>>12),I=z+(V^O&(j^V))+A[5]+3593408605&4294967295,z=j+(I<<5&4294967295|I>>>27),I=O+(j^V&(z^j))+A[10]+38016083&4294967295,O=z+(I<<9&4294967295|I>>>23),I=V+(z^j&(O^z))+A[15]+3634488961&4294967295,V=O+(I<<14&4294967295|I>>>18),I=j+(O^z&(V^O))+A[4]+3889429448&4294967295,j=V+(I<<20&4294967295|I>>>12),I=z+(V^O&(j^V))+A[9]+568446438&4294967295,z=j+(I<<5&4294967295|I>>>27),I=O+(j^V&(z^j))+A[14]+3275163606&4294967295,O=z+(I<<9&4294967295|I>>>23),I=V+(z^j&(O^z))+A[3]+4107603335&4294967295,V=O+(I<<14&4294967295|I>>>18),I=j+(O^z&(V^O))+A[8]+1163531501&4294967295,j=V+(I<<20&4294967295|I>>>12),I=z+(V^O&(j^V))+A[13]+2850285829&4294967295,z=j+(I<<5&4294967295|I>>>27),I=O+(j^V&(z^j))+A[2]+4243563512&4294967295,O=z+(I<<9&4294967295|I>>>23),I=V+(z^j&(O^z))+A[7]+1735328473&4294967295,V=O+(I<<14&4294967295|I>>>18),I=j+(O^z&(V^O))+A[12]+2368359562&4294967295,j=V+(I<<20&4294967295|I>>>12),I=z+(j^V^O)+A[5]+4294588738&4294967295,z=j+(I<<4&4294967295|I>>>28),I=O+(z^j^V)+A[8]+2272392833&4294967295,O=z+(I<<11&4294967295|I>>>21),I=V+(O^z^j)+A[11]+1839030562&4294967295,V=O+(I<<16&4294967295|I>>>16),I=j+(V^O^z)+A[14]+4259657740&4294967295,j=V+(I<<23&4294967295|I>>>9),I=z+(j^V^O)+A[1]+2763975236&4294967295,z=j+(I<<4&4294967295|I>>>28),I=O+(z^j^V)+A[4]+1272893353&4294967295,O=z+(I<<11&4294967295|I>>>21),I=V+(O^z^j)+A[7]+4139469664&4294967295,V=O+(I<<16&4294967295|I>>>16),I=j+(V^O^z)+A[10]+3200236656&4294967295,j=V+(I<<23&4294967295|I>>>9),I=z+(j^V^O)+A[13]+681279174&4294967295,z=j+(I<<4&4294967295|I>>>28),I=O+(z^j^V)+A[0]+3936430074&4294967295,O=z+(I<<11&4294967295|I>>>21),I=V+(O^z^j)+A[3]+3572445317&4294967295,V=O+(I<<16&4294967295|I>>>16),I=j+(V^O^z)+A[6]+76029189&4294967295,j=V+(I<<23&4294967295|I>>>9),I=z+(j^V^O)+A[9]+3654602809&4294967295,z=j+(I<<4&4294967295|I>>>28),I=O+(z^j^V)+A[12]+3873151461&4294967295,O=z+(I<<11&4294967295|I>>>21),I=V+(O^z^j)+A[15]+530742520&4294967295,V=O+(I<<16&4294967295|I>>>16),I=j+(V^O^z)+A[2]+3299628645&4294967295,j=V+(I<<23&4294967295|I>>>9),I=z+(V^(j|~O))+A[0]+4096336452&4294967295,z=j+(I<<6&4294967295|I>>>26),I=O+(j^(z|~V))+A[7]+1126891415&4294967295,O=z+(I<<10&4294967295|I>>>22),I=V+(z^(O|~j))+A[14]+2878612391&4294967295,V=O+(I<<15&4294967295|I>>>17),I=j+(O^(V|~z))+A[5]+4237533241&4294967295,j=V+(I<<21&4294967295|I>>>11),I=z+(V^(j|~O))+A[12]+1700485571&4294967295,z=j+(I<<6&4294967295|I>>>26),I=O+(j^(z|~V))+A[3]+2399980690&4294967295,O=z+(I<<10&4294967295|I>>>22),I=V+(z^(O|~j))+A[10]+4293915773&4294967295,V=O+(I<<15&4294967295|I>>>17),I=j+(O^(V|~z))+A[1]+2240044497&4294967295,j=V+(I<<21&4294967295|I>>>11),I=z+(V^(j|~O))+A[8]+1873313359&4294967295,z=j+(I<<6&4294967295|I>>>26),I=O+(j^(z|~V))+A[15]+4264355552&4294967295,O=z+(I<<10&4294967295|I>>>22),I=V+(z^(O|~j))+A[6]+2734768916&4294967295,V=O+(I<<15&4294967295|I>>>17),I=j+(O^(V|~z))+A[13]+1309151649&4294967295,j=V+(I<<21&4294967295|I>>>11),I=z+(V^(j|~O))+A[4]+4149444226&4294967295,z=j+(I<<6&4294967295|I>>>26),I=O+(j^(z|~V))+A[11]+3174756917&4294967295,O=z+(I<<10&4294967295|I>>>22),I=V+(z^(O|~j))+A[2]+718787259&4294967295,V=O+(I<<15&4294967295|I>>>17),I=j+(O^(V|~z))+A[9]+3951481745&4294967295,P.g[0]=P.g[0]+z&4294967295,P.g[1]=P.g[1]+(V+(I<<21&4294967295|I>>>11))&4294967295,P.g[2]=P.g[2]+V&4294967295,P.g[3]=P.g[3]+O&4294967295}r.prototype.u=function(P,z){z===void 0&&(z=P.length);for(var j=z-this.blockSize,A=this.B,V=this.h,O=0;O<z;){if(V==0)for(;O<=j;)i(this,P,O),O+=this.blockSize;if(typeof P=="string"){for(;O<z;)if(A[V++]=P.charCodeAt(O++),V==this.blockSize){i(this,A),V=0;break}}else for(;O<z;)if(A[V++]=P[O++],V==this.blockSize){i(this,A),V=0;break}}this.h=V,this.o+=z},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var z=1;z<P.length-8;++z)P[z]=0;var j=8*this.o;for(z=P.length-8;z<P.length;++z)P[z]=j&255,j/=256;for(this.u(P),P=Array(16),z=j=0;4>z;++z)for(var A=0;32>A;A+=8)P[j++]=this.g[z]>>>A&255;return P};function a(P,z){var j=c;return Object.prototype.hasOwnProperty.call(j,P)?j[P]:j[P]=z(P)}function l(P,z){this.h=z;for(var j=[],A=!0,V=P.length-1;0<=V;V--){var O=P[V]|0;A&&O==z||(j[V]=O,A=!1)}this.g=j}var c={};function h(P){return-128<=P&&128>P?a(P,function(z){return new l([z|0],0>z?-1:0)}):new l([P|0],0>P?-1:0)}function p(P){if(isNaN(P)||!isFinite(P))return k;if(0>P)return M(p(-P));for(var z=[],j=1,A=0;P>=j;A++)z[A]=P/j|0,j*=4294967296;return new l(z,0)}function y(P,z){if(P.length==0)throw Error("number format error: empty string");if(z=z||10,2>z||36<z)throw Error("radix out of range: "+z);if(P.charAt(0)=="-")return M(y(P.substring(1),z));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var j=p(Math.pow(z,8)),A=k,V=0;V<P.length;V+=8){var O=Math.min(8,P.length-V),I=parseInt(P.substring(V,V+O),z);8>O?(O=p(Math.pow(z,O)),A=A.j(O).add(p(I))):(A=A.j(j),A=A.add(p(I)))}return A}var k=h(0),_=h(1),S=h(16777216);n=l.prototype,n.m=function(){if(N(this))return-M(this).m();for(var P=0,z=1,j=0;j<this.g.length;j++){var A=this.i(j);P+=(0<=A?A:4294967296+A)*z,z*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(C(this))return"0";if(N(this))return"-"+M(this).toString(P);for(var z=p(Math.pow(P,6)),j=this,A="";;){var V=re(j,z).g;j=q(j,V.j(z));var O=((0<j.g.length?j.g[0]:j.h)>>>0).toString(P);if(j=V,C(j))return O+A;for(;6>O.length;)O="0"+O;A=O+A}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function C(P){if(P.h!=0)return!1;for(var z=0;z<P.g.length;z++)if(P.g[z]!=0)return!1;return!0}function N(P){return P.h==-1}n.l=function(P){return P=q(this,P),N(P)?-1:C(P)?0:1};function M(P){for(var z=P.g.length,j=[],A=0;A<z;A++)j[A]=~P.g[A];return new l(j,~P.h).add(_)}n.abs=function(){return N(this)?M(this):this},n.add=function(P){for(var z=Math.max(this.g.length,P.g.length),j=[],A=0,V=0;V<=z;V++){var O=A+(this.i(V)&65535)+(P.i(V)&65535),I=(O>>>16)+(this.i(V)>>>16)+(P.i(V)>>>16);A=I>>>16,O&=65535,I&=65535,j[V]=I<<16|O}return new l(j,j[j.length-1]&-2147483648?-1:0)};function q(P,z){return P.add(M(z))}n.j=function(P){if(C(this)||C(P))return k;if(N(this))return N(P)?M(this).j(M(P)):M(M(this).j(P));if(N(P))return M(this.j(M(P)));if(0>this.l(S)&&0>P.l(S))return p(this.m()*P.m());for(var z=this.g.length+P.g.length,j=[],A=0;A<2*z;A++)j[A]=0;for(A=0;A<this.g.length;A++)for(var V=0;V<P.g.length;V++){var O=this.i(A)>>>16,I=this.i(A)&65535,Qe=P.i(V)>>>16,rt=P.i(V)&65535;j[2*A+2*V]+=I*rt,G(j,2*A+2*V),j[2*A+2*V+1]+=O*rt,G(j,2*A+2*V+1),j[2*A+2*V+1]+=I*Qe,G(j,2*A+2*V+1),j[2*A+2*V+2]+=O*Qe,G(j,2*A+2*V+2)}for(A=0;A<z;A++)j[A]=j[2*A+1]<<16|j[2*A];for(A=z;A<2*z;A++)j[A]=0;return new l(j,0)};function G(P,z){for(;(P[z]&65535)!=P[z];)P[z+1]+=P[z]>>>16,P[z]&=65535,z++}function Q(P,z){this.g=P,this.h=z}function re(P,z){if(C(z))throw Error("division by zero");if(C(P))return new Q(k,k);if(N(P))return z=re(M(P),z),new Q(M(z.g),M(z.h));if(N(z))return z=re(P,M(z)),new Q(M(z.g),z.h);if(30<P.g.length){if(N(P)||N(z))throw Error("slowDivide_ only works with positive integers.");for(var j=_,A=z;0>=A.l(P);)j=ee(j),A=ee(A);var V=se(j,1),O=se(A,1);for(A=se(A,2),j=se(j,2);!C(A);){var I=O.add(A);0>=I.l(P)&&(V=V.add(j),O=I),A=se(A,1),j=se(j,1)}return z=q(P,V.j(z)),new Q(V,z)}for(V=k;0<=P.l(z);){for(j=Math.max(1,Math.floor(P.m()/z.m())),A=Math.ceil(Math.log(j)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),O=p(j),I=O.j(z);N(I)||0<I.l(P);)j-=A,O=p(j),I=O.j(z);C(O)&&(O=_),V=V.add(O),P=q(P,I)}return new Q(V,P)}n.A=function(P){return re(this,P).h},n.and=function(P){for(var z=Math.max(this.g.length,P.g.length),j=[],A=0;A<z;A++)j[A]=this.i(A)&P.i(A);return new l(j,this.h&P.h)},n.or=function(P){for(var z=Math.max(this.g.length,P.g.length),j=[],A=0;A<z;A++)j[A]=this.i(A)|P.i(A);return new l(j,this.h|P.h)},n.xor=function(P){for(var z=Math.max(this.g.length,P.g.length),j=[],A=0;A<z;A++)j[A]=this.i(A)^P.i(A);return new l(j,this.h^P.h)};function ee(P){for(var z=P.g.length+1,j=[],A=0;A<z;A++)j[A]=P.i(A)<<1|P.i(A-1)>>>31;return new l(j,P.h)}function se(P,z){var j=z>>5;z%=32;for(var A=P.g.length-j,V=[],O=0;O<A;O++)V[O]=0<z?P.i(O+j)>>>z|P.i(O+j+1)<<32-z:P.i(O+j);return new l(V,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Kw=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=y,ni=l}).apply(typeof T0<"u"?T0:typeof self<"u"?self:typeof window<"u"?window:{});var Td=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $w,su,Ww,Dd,_f,Gw,qw,Qw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,b){return d==Array.prototype||d==Object.prototype||(d[v]=b.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Td=="object"&&Td];for(var v=0;v<d.length;++v){var b=d[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=t(this);function i(d,v){if(v)e:{var b=r;d=d.split(".");for(var T=0;T<d.length-1;T++){var F=d[T];if(!(F in b))break e;b=b[F]}d=d[d.length-1],T=b[d],v=v(T),v!=T&&v!=null&&e(b,d,{configurable:!0,writable:!0,value:v})}}function a(d,v){d instanceof String&&(d+="");var b=0,T=!1,F={next:function(){if(!T&&b<d.length){var W=b++;return{value:v(W,d[W]),done:!1}}return T=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}i("Array.prototype.values",function(d){return d||function(){return a(this,function(v,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function p(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function y(d,v,b){return d.call.apply(d.bind,arguments)}function k(d,v,b){if(!d)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,T),d.apply(v,F)}}return function(){return d.apply(v,arguments)}}function _(d,v,b){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:k,_.apply(null,arguments)}function S(d,v){var b=Array.prototype.slice.call(arguments,1);return function(){var T=b.slice();return T.push.apply(T,arguments),d.apply(this,T)}}function C(d,v){function b(){}b.prototype=v.prototype,d.aa=v.prototype,d.prototype=new b,d.prototype.constructor=d,d.Qb=function(T,F,W){for(var le=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)le[Ze-2]=arguments[Ze];return v.prototype[F].apply(T,le)}}function N(d){const v=d.length;if(0<v){const b=Array(v);for(let T=0;T<v;T++)b[T]=d[T];return b}return[]}function M(d,v){for(let b=1;b<arguments.length;b++){const T=arguments[b];if(h(T)){const F=d.length||0,W=T.length||0;d.length=F+W;for(let le=0;le<W;le++)d[F+le]=T[le]}else d.push(T)}}class q{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function G(d){return/^[\s\xa0]*$/.test(d)}function Q(){var d=c.navigator;return d&&(d=d.userAgent)?d:""}function re(d){return re[" "](d),d}re[" "]=function(){};var ee=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function se(d,v,b){for(const T in d)v.call(b,d[T],T,d)}function P(d,v){for(const b in d)v.call(void 0,d[b],b,d)}function z(d){const v={};for(const b in d)v[b]=d[b];return v}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(d,v){let b,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(b in T)d[b]=T[b];for(let W=0;W<j.length;W++)b=j[W],Object.prototype.hasOwnProperty.call(T,b)&&(d[b]=T[b])}}function V(d){var v=1;d=d.split(":");const b=[];for(;0<v&&d.length;)b.push(d.shift()),v--;return d.length&&b.push(d.join(":")),b}function O(d){c.setTimeout(()=>{throw d},0)}function I(){var d=ge;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class Qe{constructor(){this.h=this.g=null}add(v,b){const T=rt.get();T.set(v,b),this.h?this.h.next=T:this.g=T,this.h=T}}var rt=new q(()=>new Ve,d=>d.reset());class Ve{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,Z=!1,ge=new Qe,ae=()=>{const d=c.Promise.resolve(void 0);ve=()=>{d.then(L)}};var L=()=>{for(var d;d=I();){try{d.h.call(d.g)}catch(b){O(b)}var v=rt;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}Z=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Ne=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};c.addEventListener("test",b,v),c.removeEventListener("test",b,v)}catch{}return d}();function ze(d,v){if(me.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var b=this.type=d.type,T=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(ee){e:{try{re(v.nodeName);var F=!0;break e}catch{}F=!1}F||(v=null)}}else b=="mouseover"?v=d.fromElement:b=="mouseout"&&(v=d.toElement);this.relatedTarget=v,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Me[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&ze.aa.h.call(this)}}C(ze,me);var Me={2:"touch",3:"pen",4:"mouse"};ze.prototype.h=function(){ze.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),We=0;function tt(d,v,b,T,F){this.listener=d,this.proxy=null,this.src=v,this.type=b,this.capture=!!T,this.ha=F,this.key=++We,this.da=this.fa=!1}function Tt(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Nn(d){this.src=d,this.g={},this.h=0}Nn.prototype.add=function(d,v,b,T,F){var W=d.toString();d=this.g[W],d||(d=this.g[W]=[],this.h++);var le=yr(d,v,T,F);return-1<le?(v=d[le],b||(v.fa=!1)):(v=new tt(v,this.src,W,!!T,F),v.fa=b,d.push(v)),v};function Dn(d,v){var b=v.type;if(b in d.g){var T=d.g[b],F=Array.prototype.indexOf.call(T,v,void 0),W;(W=0<=F)&&Array.prototype.splice.call(T,F,1),W&&(Tt(v),d.g[b].length==0&&(delete d.g[b],d.h--))}}function yr(d,v,b,T){for(var F=0;F<d.length;++F){var W=d[F];if(!W.da&&W.listener==v&&W.capture==!!b&&W.ha==T)return F}return-1}var Lr="closure_lm_"+(1e6*Math.random()|0),vo={};function go(d,v,b,T,F){if(Array.isArray(v)){for(var W=0;W<v.length;W++)go(d,v[W],b,T,F);return null}return b=ll(b),d&&d[Be]?d.K(v,b,p(T)?!!T.capture:!1,F):ce(d,v,b,!1,T,F)}function ce(d,v,b,T,F,W){if(!v)throw Error("Invalid event type");var le=p(F)?!!F.capture:!!F,Ze=yo(d);if(Ze||(d[Lr]=Ze=new Nn(d)),b=Ze.add(v,b,T,le,W),b.proxy)return b;if(T=we(),b.proxy=T,T.src=d,T.listener=b,d.addEventListener)Ne||(F=le),F===void 0&&(F=!1),d.addEventListener(v.toString(),T,F);else if(d.attachEvent)d.attachEvent(He(v.toString()),T);else if(d.addListener&&d.removeListener)d.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return b}function we(){function d(b){return v.call(d.src,d.listener,b)}const v=Ut;return d}function Ee(d,v,b,T,F){if(Array.isArray(v))for(var W=0;W<v.length;W++)Ee(d,v[W],b,T,F);else T=p(T)?!!T.capture:!!T,b=ll(b),d&&d[Be]?(d=d.i,v=String(v).toString(),v in d.g&&(W=d.g[v],b=yr(W,b,T,F),-1<b&&(Tt(W[b]),Array.prototype.splice.call(W,b,1),W.length==0&&(delete d.g[v],d.h--)))):d&&(d=yo(d))&&(v=d.g[v.toString()],d=-1,v&&(d=yr(v,b,T,F)),(b=-1<d?v[d]:null)&&Te(b))}function Te(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[Be])Dn(v.i,d);else{var b=d.type,T=d.proxy;v.removeEventListener?v.removeEventListener(b,T,d.capture):v.detachEvent?v.detachEvent(He(b),T):v.addListener&&v.removeListener&&v.removeListener(T),(b=yo(v))?(Dn(b,d),b.h==0&&(b.src=null,v[Lr]=null)):Tt(d)}}}function He(d){return d in vo?vo[d]:vo[d]="on"+d}function Ut(d,v){if(d.da)d=!0;else{v=new ze(v,this);var b=d.listener,T=d.ha||d.src;d.fa&&Te(d),d=b.call(T,v)}return d}function yo(d){return d=d[Lr],d instanceof Nn?d:null}var Es="__closure_events_fn_"+(1e9*Math.random()>>>0);function ll(d){return typeof d=="function"?d:(d[Es]||(d[Es]=function(v){return d.handleEvent(v)}),d[Es])}function It(){$.call(this),this.i=new Nn(this),this.M=this,this.F=null}C(It,$),It.prototype[Be]=!0,It.prototype.removeEventListener=function(d,v,b,T){Ee(this,d,v,b,T)};function Pt(d,v){var b,T=d.F;if(T)for(b=[];T;T=T.F)b.push(T);if(d=d.M,T=v.type||v,typeof v=="string")v=new me(v,d);else if(v instanceof me)v.target=v.target||d;else{var F=v;v=new me(T,d),A(v,F)}if(F=!0,b)for(var W=b.length-1;0<=W;W--){var le=v.g=b[W];F=Fr(le,T,!0,v)&&F}if(le=v.g=d,F=Fr(le,T,!0,v)&&F,F=Fr(le,T,!1,v)&&F,b)for(W=0;W<b.length;W++)le=v.g=b[W],F=Fr(le,T,!1,v)&&F}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var b=d.g[v],T=0;T<b.length;T++)Tt(b[T]);delete d.g[v],d.h--}}this.F=null},It.prototype.K=function(d,v,b,T){return this.i.add(String(d),v,!1,b,T)},It.prototype.L=function(d,v,b,T){return this.i.add(String(d),v,!0,b,T)};function Fr(d,v,b,T){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var F=!0,W=0;W<v.length;++W){var le=v[W];if(le&&!le.da&&le.capture==b){var Ze=le.listener,At=le.ha||le.src;le.fa&&Dn(d.i,le),F=Ze.call(At,T)!==!1&&F}}return F&&!T.defaultPrevented}function ul(d,v,b){if(typeof d=="function")b&&(d=_(d,b));else if(d&&typeof d.handleEvent=="function")d=_(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:c.setTimeout(d,v||0)}function ko(d){d.g=ul(()=>{d.g=null,d.i&&(d.i=!1,ko(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class fi extends ${constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ko(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vi(d){$.call(this),this.h=d,this.g={}}C(vi,$);var cl=[];function dl(d){se(d.g,function(v,b){this.g.hasOwnProperty(b)&&Te(v)},d),d.g={}}vi.prototype.N=function(){vi.aa.N.call(this),dl(this)},vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hl=c.JSON.stringify,ml=c.JSON.parse,pl=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function gi(){}gi.prototype.h=null;function Ts(d){return d.h||(d.h=d.i())}function zs(){}var On={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kr(){me.call(this,"d")}C(kr,me);function Ss(){me.call(this,"c")}C(Ss,me);var br={},fl=null;function yi(){return fl=fl||new It}br.La="serverreachability";function vl(d){me.call(this,br.La,d)}C(vl,me);function Ur(d){const v=yi();Pt(v,new vl(v))}br.STAT_EVENT="statevent";function gl(d,v){me.call(this,br.STAT_EVENT,d),this.stat=v}C(gl,me);function _t(d){const v=yi();Pt(v,new gl(v,d))}br.Ma="timingevent";function xs(d,v){me.call(this,br.Ma,d),this.size=v}C(xs,me);function Yn(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},v)}function ki(){this.g=!0}ki.prototype.xa=function(){this.g=!1};function bi(d,v,b,T,F,W){d.info(function(){if(d.g)if(W)for(var le="",Ze=W.split("&"),At=0;At<Ze.length;At++){var Ke=Ze[At].split("=");if(1<Ke.length){var Dt=Ke[0];Ke=Ke[1];var zt=Dt.split("_");le=2<=zt.length&&zt[1]=="type"?le+(Dt+"="+Ke+"&"):le+(Dt+"=redacted&")}}else le=null;else le=W;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+v+`
`+b+`
`+le})}function js(d,v,b,T,F,W,le){d.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+v+`
`+b+`
`+W+" "+le})}function Xn(d,v,b,T){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+dm(d,b)+(T?" "+T:"")})}function yl(d,v){d.info(function(){return"TIMEOUT: "+v})}ki.prototype.info=function(){};function dm(d,v){if(!d.g)return v;if(!v)return null;try{var b=JSON.parse(v);if(b){for(d=0;d<b.length;d++)if(Array.isArray(b[d])){var T=b[d];if(!(2>T.length)){var F=T[1];if(Array.isArray(F)&&!(1>F.length)){var W=F[0];if(W!="noop"&&W!="stop"&&W!="close")for(var le=1;le<F.length;le++)F[le]=""}}}}return hl(b)}catch{return v}}var Is={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},uc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},er;function _i(){}C(_i,gi),_i.prototype.g=function(){return new XMLHttpRequest},_i.prototype.i=function(){return{}},er=new _i;function tr(d,v,b,T){this.j=d,this.i=v,this.l=b,this.R=T||1,this.U=new vi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cc}function cc(){this.i=null,this.g="",this.h=!1}var kl={},Ps={};function As(d,v,b){d.L=1,d.v=To(zn(v)),d.m=b,d.P=!0,bl(d,null)}function bl(d,v){d.F=Date.now(),ot(d),d.A=zn(d.v);var b=d.A,T=d.R;Array.isArray(T)||(T=[String(T)]),So(b.i,"t",T),d.C=0,b=d.j.J,d.h=new cc,d.g=jc(d.j,b?v:null,!d.m),0<d.O&&(d.M=new fi(_(d.Y,d,d.g),d.O)),v=d.U,b=d.g,T=d.ca;var F="readystatechange";Array.isArray(F)||(F&&(cl[0]=F.toString()),F=cl);for(var W=0;W<F.length;W++){var le=go(b,F[W],T||v.handleEvent,!1,v.h||v);if(!le)break;v.g[le.key]=le}v=d.H?z(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),Ur(),bi(d.i,d.u,d.A,d.l,d.R,d.m)}tr.prototype.ca=function(d){d=d.target;const v=this.M;v&&pn(d)==3?v.j():this.Y(d)},tr.prototype.Y=function(d){try{if(d==this.g)e:{const zt=pn(this.g);var v=this.g.Ba();const Fn=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||Sl(this.g)))){this.J||zt!=4||v==7||(v==8||0>=Fn?Ur(3):Ur(2)),wi(this);var b=this.g.Z();this.X=b;t:if(dc(this)){var T=Sl(this.g);d="";var F=T.length,W=pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mn(this),bo(this);var le="";break t}this.h.i=new c.TextDecoder}for(v=0;v<F;v++)this.h.h=!0,d+=this.h.i.decode(T[v],{stream:!(W&&v==F-1)});T.length=0,this.h.g+=d,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=b==200,js(this.i,this.u,this.A,this.l,this.R,zt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,At=this.g;if((Ze=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Ze)){var Ke=Ze;break t}}Ke=null}if(b=Ke)Xn(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_l(this,b);else{this.o=!1,this.s=3,_t(12),Mn(this),bo(this);break e}}if(this.P){b=!0;let xn;for(;!this.J&&this.C<le.length;)if(xn=hm(this,le),xn==Ps){zt==4&&(this.s=4,_t(14),b=!1),Xn(this.i,this.l,null,"[Incomplete Response]");break}else if(xn==kl){this.s=4,_t(15),Xn(this.i,this.l,le,"[Invalid Chunk]"),b=!1;break}else Xn(this.i,this.l,xn,null),_l(this,xn);if(dc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||le.length!=0||this.h.h||(this.s=1,_t(16),b=!1),this.o=this.o&&b,!b)Xn(this.i,this.l,le,"[Invalid Chunked Response]"),Mn(this),bo(this);else if(0<le.length&&!this.W){this.W=!0;var Dt=this.j;Dt.g==this&&Dt.ba&&!Dt.M&&(Dt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),jl(Dt),Dt.M=!0,_t(11))}}else Xn(this.i,this.l,le,null),_l(this,le);zt==4&&Mn(this),this.o&&!this.J&&(zt==4?Bs(this.j,this):(this.o=!1,ot(this)))}else Os(this.g),b==400&&0<le.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),Mn(this),bo(this)}}}catch{}finally{}};function dc(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function hm(d,v){var b=d.C,T=v.indexOf(`
`,b);return T==-1?Ps:(b=Number(v.substring(b,T)),isNaN(b)?kl:(T+=1,T+b>v.length?Ps:(v=v.slice(T,T+b),d.C=T+b,v)))}tr.prototype.cancel=function(){this.J=!0,Mn(this)};function ot(d){d.S=Date.now()+d.I,hc(d,d.I)}function hc(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Yn(_(d.ba,d),v)}function wi(d){d.B&&(c.clearTimeout(d.B),d.B=null)}tr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(yl(this.i,this.A),this.L!=2&&(Ur(),_t(17)),Mn(this),this.s=2,bo(this)):hc(this,this.S-d)};function bo(d){d.j.G==0||d.J||Bs(d.j,d)}function Mn(d){wi(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,dl(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function _l(d,v){try{var b=d.j;if(b.G!=0&&(b.g==d||on(b.h,d))){if(!d.K&&on(b.h,d)&&b.G==3){try{var T=b.Da.g.parse(v)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<d.F)Us(b),sr(b);else break e;Fs(b),_t(18)}}else b.za=F[1],0<b.za-b.T&&37500>F[2]&&b.F&&b.v==0&&!b.C&&(b.C=Yn(_(b.Za,b),6e3));if(1>=pc(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Wr(b,11)}else if((d.K||b.g==d)&&Us(b),!G(v))for(F=b.Da.g.parse(v),v=0;v<F.length;v++){let Ke=F[v];if(b.T=Ke[0],Ke=Ke[1],b.G==2)if(Ke[0]=="c"){b.K=Ke[1],b.ia=Ke[2];const Dt=Ke[3];Dt!=null&&(b.la=Dt,b.j.info("VER="+b.la));const zt=Ke[4];zt!=null&&(b.Aa=zt,b.j.info("SVER="+b.Aa));const Fn=Ke[5];Fn!=null&&typeof Fn=="number"&&0<Fn&&(T=1.5*Fn,b.L=T,b.j.info("backChannelRequestTimeoutMs_="+T)),T=b;const xn=d.g;if(xn){const Ii=xn.g?xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ii){var W=T.h;W.g||Ii.indexOf("spdy")==-1&&Ii.indexOf("quic")==-1&&Ii.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(wl(W,W.h),W.h=null))}if(T.D){const Ks=xn.g?xn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ks&&(T.ya=Ks,nt(T.I,T.D,Ks))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-d.F,b.j.info("Handshake RTT: "+b.R+"ms")),T=b;var le=d;if(T.qa=xc(T,T.J?T.ia:null,T.W),le.K){fc(T.h,le);var Ze=le,At=T.L;At&&(Ze.I=At),Ze.B&&(wi(Ze),ot(Ze)),T.g=le}else ji(T);0<b.i.length&&Tr(b)}else Ke[0]!="stop"&&Ke[0]!="close"||Wr(b,7);else b.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Wr(b,7):Ht(b):Ke[0]!="noop"&&b.l&&b.l.ta(Ke),b.v=0)}}Ur(4)}catch{}}var mc=class{constructor(d,v){this.g=d,this.map=v}};function Ei(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Tn(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function pc(d){return d.h?1:d.g?d.g.size:0}function on(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function wl(d,v){d.g?d.g.add(v):d.h=v}function fc(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}Ei.prototype.cancel=function(){if(this.i=vc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function vc(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const b of d.g.values())v=v.concat(b.D);return v}return N(d.i)}function Cs(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(h(d)){for(var v=[],b=d.length,T=0;T<b;T++)v.push(d[T]);return v}v=[],b=0;for(T in d)v[b++]=d[T];return v}function Rs(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(h(d)||typeof d=="string"){var v=[];d=d.length;for(var b=0;b<d;b++)v.push(b);return v}v=[],b=0;for(const T in d)v[b++]=T;return v}}}function _o(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(h(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var b=Rs(d),T=Cs(d),F=T.length,W=0;W<F;W++)v.call(void 0,T[W],b&&b[W],d)}var Ti=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mm(d,v){if(d){d=d.split("&");for(var b=0;b<d.length;b++){var T=d[b].indexOf("="),F=null;if(0<=T){var W=d[b].substring(0,T);F=d[b].substring(T+1)}else W=d[b];v(W,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Br(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Br){this.h=d.h,zi(this,d.j),this.o=d.o,this.g=d.g,wo(this,d.s),this.l=d.l;var v=d.i,b=new _r;b.i=v.i,v.g&&(b.g=new Map(v.g),b.h=v.h),Eo(this,b),this.m=d.m}else d&&(v=String(d).match(Ti))?(this.h=!1,zi(this,v[1]||"",!0),this.o=Ue(v[2]||""),this.g=Ue(v[3]||"",!0),wo(this,v[4]),this.l=Ue(v[5]||"",!0),Eo(this,v[6]||"",!0),this.m=Ue(v[7]||"")):(this.h=!1,this.i=new _r(null,this.h))}Br.prototype.toString=function(){var d=[],v=this.j;v&&d.push(zo(v,Vs,!0),":");var b=this.g;return(b||v=="file")&&(d.push("//"),(v=this.o)&&d.push(zo(v,Vs,!0),"@"),d.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&d.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(zo(b,b.charAt(0)=="/"?kc:yc,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",zo(b,El)),d.join("")};function zn(d){return new Br(d)}function zi(d,v,b){d.j=b?Ue(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function wo(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function Eo(d,v,b){v instanceof _r?(d.i=v,wr(d.i,d.h)):(b||(v=zo(v,bc)),d.i=new _r(v,d.h))}function nt(d,v,b){d.i.set(v,b)}function To(d){return nt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Ue(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function zo(d,v,b){return typeof d=="string"?(d=encodeURI(d).replace(v,gc),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function gc(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Vs=/[#\/\?@]/g,yc=/[#\?:]/g,kc=/[#\?]/g,bc=/[#\?@]/g,El=/#/g;function _r(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Bt(d){d.g||(d.g=new Map,d.h=0,d.i&&mm(d.i,function(v,b){d.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}n=_r.prototype,n.add=function(d,v){Bt(this),this.i=null,d=Ln(this,d);var b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(v),this.h+=1,this};function nr(d,v){Bt(d),v=Ln(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function rr(d,v){return Bt(d),v=Ln(d,v),d.g.has(v)}n.forEach=function(d,v){Bt(this),this.g.forEach(function(b,T){b.forEach(function(F){d.call(v,F,T,this)},this)},this)},n.na=function(){Bt(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),b=[];for(let T=0;T<v.length;T++){const F=d[T];for(let W=0;W<F.length;W++)b.push(v[T])}return b},n.V=function(d){Bt(this);let v=[];if(typeof d=="string")rr(this,d)&&(v=v.concat(this.g.get(Ln(this,d))));else{d=Array.from(this.g.values());for(let b=0;b<d.length;b++)v=v.concat(d[b])}return v},n.set=function(d,v){return Bt(this),this.i=null,d=Ln(this,d),rr(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},n.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function So(d,v,b){nr(d,v),0<b.length&&(d.i=null,d.g.set(Ln(d,v),N(b)),d.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var b=0;b<v.length;b++){var T=v[b];const W=encodeURIComponent(String(T)),le=this.V(T);for(T=0;T<le.length;T++){var F=W;le[T]!==""&&(F+="="+encodeURIComponent(String(le[T]))),d.push(F)}}return this.i=d.join("&")};function Ln(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function wr(d,v){v&&!d.j&&(Bt(d),d.i=null,d.g.forEach(function(b,T){var F=T.toLowerCase();T!=F&&(nr(this,T),So(this,F,b))},d)),d.j=v}function pm(d,v){const b=new ki;if(c.Image){const T=new Image;T.onload=S(mn,b,"TestLoadImage: loaded",!0,v,T),T.onerror=S(mn,b,"TestLoadImage: error",!1,v,T),T.onabort=S(mn,b,"TestLoadImage: abort",!1,v,T),T.ontimeout=S(mn,b,"TestLoadImage: timeout",!1,v,T),c.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=d}else v(!1)}function _c(d,v){const b=new ki,T=new AbortController,F=setTimeout(()=>{T.abort(),mn(b,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:T.signal}).then(W=>{clearTimeout(F),W.ok?mn(b,"TestPingServer: ok",!0,v):mn(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(F),mn(b,"TestPingServer: error",!1,v)})}function mn(d,v,b,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(b)}catch{}}function fm(){this.g=new pl}function wc(d,v,b){const T=b||"";try{_o(d,function(F,W){let le=F;p(F)&&(le=hl(F)),v.push(T+W+"="+encodeURIComponent(le))})}catch(F){throw v.push(T+"type="+encodeURIComponent("_badmap")),F}}function Hr(d){this.l=d.Ub||null,this.j=d.eb||!1}C(Hr,gi),Hr.prototype.g=function(){return new Si(this.l,this.j)},Hr.prototype.i=function(d){return function(){return d}}({});function Si(d,v){It.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Si,It),n=Si.prototype,n.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,ir(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||c).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,or(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ir(this)),this.g&&(this.readyState=3,ir(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ec(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ec(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?or(this):ir(this),this.readyState==3&&Ec(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,or(this))},n.Qa=function(d){this.g&&(this.response=d,or(this))},n.ga=function(){this.g&&or(this)};function or(d){d.readyState=4,d.l=null,d.j=null,d.v=null,ir(d)}n.setRequestHeader=function(d,v){this.u.append(d,v)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=v.next();return d.join(`\r
`)};function ir(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Si.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Kr(d){let v="";return se(d,function(b,T){v+=T,v+=":",v+=b,v+=`\r
`}),v}function xo(d,v,b){e:{for(T in b){var T=!1;break e}T=!0}T||(b=Kr(b),typeof d=="string"?b!=null&&encodeURIComponent(String(b)):nt(d,v,b))}function ut(d){It.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(ut,It);var vm=/^https?$/i,Tl=["POST","PUT"];n=ut.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,v,b,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():er.g(),this.v=this.o?Ts(this.o):Ts(er),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(W){xi(this,W);return}if(d=b||"",b=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)b.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const W of T.keys())b.set(W,T.get(W));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(b.keys()).find(W=>W.toLowerCase()=="content-type"),F=c.FormData&&d instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Tl,v,void 0))||T||F||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,le]of b)this.g.setRequestHeader(W,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ds(this),this.u=!0,this.g.send(d),this.u=!1}catch(W){xi(this,W)}};function xi(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,Ns(d),Sn(d)}function Ns(d){d.A||(d.A=!0,Pt(d,"complete"),Pt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Pt(this,"complete"),Pt(this,"abort"),Sn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sn(this,!0)),ut.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?zl(this):this.bb())},n.bb=function(){zl(this)};function zl(d){if(d.h&&typeof l<"u"&&(!d.v[1]||pn(d)!=4||d.Z()!=2)){if(d.u&&pn(d)==4)ul(d.Ea,0,d);else if(Pt(d,"readystatechange"),pn(d)==4){d.h=!1;try{const le=d.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var T;if(T=le===0){var F=String(d.D).match(Ti)[1]||null;!F&&c.self&&c.self.location&&(F=c.self.location.protocol.slice(0,-1)),T=!vm.test(F?F.toLowerCase():"")}b=T}if(b)Pt(d,"complete"),Pt(d,"success");else{d.m=6;try{var W=2<pn(d)?d.g.statusText:""}catch{W=""}d.l=W+" ["+d.Z()+"]",Ns(d)}}finally{Sn(d)}}}}function Sn(d,v){if(d.g){Ds(d);const b=d.g,T=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||Pt(d,"ready");try{b.onreadystatechange=T}catch{}}}function Ds(d){d.I&&(c.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function pn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<pn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),ml(v)}};function Sl(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Os(d){const v={};d=(d.g&&2<=pn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<d.length;T++){if(G(d[T]))continue;var b=V(d[T]);const F=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const W=v[F]||[];v[F]=W,W.push(b)}P(v,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Er(d,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||v}function xl(d){this.Aa=0,this.i=[],this.j=new ki,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Er("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Er("baseRetryDelayMs",5e3,d),this.cb=Er("retryDelaySeedMs",1e4,d),this.Wa=Er("forwardChannelMaxRetries",2,d),this.wa=Er("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Ei(d&&d.concurrentRequestLimit),this.Da=new fm,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=xl.prototype,n.la=8,n.G=1,n.connect=function(d,v,b,T){_t(0),this.W=d,this.H=v||{},b&&T!==void 0&&(this.H.OSID=b,this.H.OAID=T),this.F=this.X,this.I=xc(this,null,this.W),Tr(this)};function Ht(d){if(Ms(d),d.G==3){var v=d.U++,b=zn(d.I);if(nt(b,"SID",d.K),nt(b,"RID",v),nt(b,"TYPE","terminate"),$r(d,b),v=new tr(d,d.j,v),v.L=2,v.v=To(zn(b)),b=!1,c.navigator&&c.navigator.sendBeacon)try{b=c.navigator.sendBeacon(v.v.toString(),"")}catch{}!b&&c.Image&&(new Image().src=v.v,b=!0),b||(v.g=jc(v.j,null),v.g.ea(v.v)),v.F=Date.now(),ot(v)}Sc(d)}function sr(d){d.g&&(jl(d),d.g.cancel(),d.g=null)}function Ms(d){sr(d),d.u&&(c.clearTimeout(d.u),d.u=null),Us(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&c.clearTimeout(d.s),d.s=null)}function Tr(d){if(!Tn(d.h)&&!d.s){d.s=!0;var v=d.Ga;ve||ae(),Z||(ve(),Z=!0),ge.add(v,d),d.B=0}}function gm(d,v){return pc(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Yn(_(d.Ga,d,v),zc(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const F=new tr(this,this.j,d);let W=this.o;if(this.S&&(W?(W=z(W),A(W,this.S)):W=this.S),this.m!==null||this.O||(F.H=W,W=null),this.P)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var T=this.i[b];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(v+=T,4096<v){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=jo(this,F,v),b=zn(this.I),nt(b,"RID",d),nt(b,"CVER",22),this.D&&nt(b,"X-HTTP-Session-Id",this.D),$r(this,b),W&&(this.O?v="headers="+encodeURIComponent(String(Kr(W)))+"&"+v:this.m&&xo(b,this.m,W)),wl(this.h,F),this.Ua&&nt(b,"TYPE","init"),this.P?(nt(b,"$req",v),nt(b,"SID","null"),F.T=!0,As(F,b,null)):As(F,b,v),this.G=2}}else this.G==3&&(d?Ls(this,d):this.i.length==0||Tn(this.h)||Ls(this))};function Ls(d,v){var b;v?b=v.l:b=d.U++;const T=zn(d.I);nt(T,"SID",d.K),nt(T,"RID",b),nt(T,"AID",d.T),$r(d,T),d.m&&d.o&&xo(T,d.m,d.o),b=new tr(d,d.j,b,d.B+1),d.m===null&&(b.H=d.o),v&&(d.i=v.D.concat(d.i)),v=jo(d,b,1e3),b.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),wl(d.h,b),As(b,T,v)}function $r(d,v){d.H&&se(d.H,function(b,T){nt(v,T,b)}),d.l&&_o({},function(b,T){nt(v,T,b)})}function jo(d,v,b){b=Math.min(d.i.length,b);var T=d.l?_(d.l.Na,d.l,d):null;e:{var F=d.i;let W=-1;for(;;){const le=["count="+b];W==-1?0<b?(W=F[0].g,le.push("ofs="+W)):W=0:le.push("ofs="+W);let Ze=!0;for(let At=0;At<b;At++){let Ke=F[At].g;const Dt=F[At].map;if(Ke-=W,0>Ke)W=Math.max(0,F[At].g-100),Ze=!1;else try{wc(Dt,le,"req"+Ke+"_")}catch{T&&T(Dt)}}if(Ze){T=le.join("&");break e}}}return d=d.i.splice(0,b),v.D=d,T}function ji(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;ve||ae(),Z||(ve(),Z=!0),ge.add(v,d),d.v=0}}function Fs(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Yn(_(d.Fa,d),zc(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,Tc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Yn(_(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),sr(this),Tc(this))};function jl(d){d.A!=null&&(c.clearTimeout(d.A),d.A=null)}function Tc(d){d.g=new tr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=zn(d.qa);nt(v,"RID","rpc"),nt(v,"SID",d.K),nt(v,"AID",d.T),nt(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&nt(v,"TO",d.ja),nt(v,"TYPE","xmlhttp"),$r(d,v),d.m&&d.o&&xo(v,d.m,d.o),d.L&&(d.g.I=d.L);var b=d.g;d=d.ia,b.L=1,b.v=To(zn(v)),b.m=null,b.P=!0,bl(b,d)}n.Za=function(){this.C!=null&&(this.C=null,sr(this),Fs(this),_t(19))};function Us(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function Bs(d,v){var b=null;if(d.g==v){Us(d),jl(d),d.g=null;var T=2}else if(on(d.h,v))b=v.D,fc(d.h,v),T=1;else return;if(d.G!=0){if(v.o)if(T==1){b=v.m?v.m.length:0,v=Date.now()-v.F;var F=d.B;T=yi(),Pt(T,new xs(T,b)),Tr(d)}else ji(d);else if(F=v.s,F==3||F==0&&0<v.X||!(T==1&&gm(d,v)||T==2&&Fs(d)))switch(b&&0<b.length&&(v=d.h,v.i=v.i.concat(b)),F){case 1:Wr(d,5);break;case 4:Wr(d,10);break;case 3:Wr(d,6);break;default:Wr(d,2)}}}function zc(d,v){let b=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(b*=2),b*v}function Wr(d,v){if(d.j.info("Error code "+v),v==2){var b=_(d.fb,d),T=d.Xa;const F=!T;T=new Br(T||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||zi(T,"https"),To(T),F?pm(T.toString(),b):_c(T.toString(),b)}else _t(2);d.G=0,d.l&&d.l.sa(v),Sc(d),Ms(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function Sc(d){if(d.G=0,d.ka=[],d.l){const v=vc(d.h);(v.length!=0||d.i.length!=0)&&(M(d.ka,v),M(d.ka,d.i),d.h.i.length=0,N(d.i),d.i.length=0),d.l.ra()}}function xc(d,v,b){var T=b instanceof Br?zn(b):new Br(b);if(T.g!="")v&&(T.g=v+"."+T.g),wo(T,T.s);else{var F=c.location;T=F.protocol,v=v?v+"."+F.hostname:F.hostname,F=+F.port;var W=new Br(null);T&&zi(W,T),v&&(W.g=v),F&&wo(W,F),b&&(W.l=b),T=W}return b=d.D,v=d.ya,b&&v&&nt(T,b,v),nt(T,"VER",d.la),$r(d,T),T}function jc(d,v,b){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new ut(new Hr({eb:b})):new ut(d.pa),v.Ha(d.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Il(){}n=Il.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Hs(){}Hs.prototype.g=function(d,v){return new sn(d,v)};function sn(d,v){It.call(this),this.g=new xl(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!G(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!G(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new zr(this)}C(sn,It),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Ht(this.g)},sn.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.u&&(b={},b.__data__=hl(d),d=b);v.i.push(new mc(v.Ya++,d)),v.G==3&&Tr(v)},sn.prototype.N=function(){this.g.l=null,delete this.j,Ht(this.g),delete this.g,sn.aa.N.call(this)};function Ic(d){kr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const b in v){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}C(Ic,kr);function Pc(){Ss.call(this),this.status=1}C(Pc,Ss);function zr(d){this.g=d}C(zr,Il),zr.prototype.ua=function(){Pt(this.g,"a")},zr.prototype.ta=function(d){Pt(this.g,new Ic(d))},zr.prototype.sa=function(d){Pt(this.g,new Pc)},zr.prototype.ra=function(){Pt(this.g,"b")},Hs.prototype.createWebChannel=Hs.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,Qw=function(){return new Hs},qw=function(){return yi()},Gw=br,_f={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Is.NO_ERROR=0,Is.TIMEOUT=8,Is.HTTP_ERROR=6,Dd=Is,uc.COMPLETE="complete",Ww=uc,zs.EventType=On,On.OPEN="a",On.CLOSE="b",On.ERROR="c",On.MESSAGE="d",It.prototype.listen=It.prototype.K,su=zs,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,$w=ut}).apply(typeof Td<"u"?Td:typeof self<"u"?self:typeof window<"u"?window:{});const z0="@firebase/firestore",S0="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=new pv("@firebase/firestore");function ka(){return cs.logLevel}function oe(n,...e){if(cs.logLevel<=Le.DEBUG){const t=e.map(gv);cs.debug(`Firestore (${el}): ${n}`,...t)}}function un(n,...e){if(cs.logLevel<=Le.ERROR){const t=e.map(gv);cs.error(`Firestore (${el}): ${n}`,...t)}}function ds(n,...e){if(cs.logLevel<=Le.WARN){const t=e.map(gv);cs.warn(`Firestore (${el}): ${n}`,...t)}}function gv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(n="Unexpected state"){const e=`FIRESTORE (${el}) INTERNAL ASSERTION FAILED: `+n;throw un(e),new Error(e)}function _e(n,e){n||ye()}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends po{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gt.UNAUTHENTICATED))}shutdown(){}}class vP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class gP{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_e(this.o===void 0);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let a=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Rr,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const h=a;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},c=h=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Rr)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new Jw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new Gt(e)}}class yP{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class kP{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new yP(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class x0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bP{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,fr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){_e(this.o===void 0);const r=a=>{a.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.R;return this.R=a.token,oe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new x0(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_e(typeof t.token=="string"),this.R=t.token,new x0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=_P(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function Pe(n,e){return n<e?-1:n>e?1:0}function wf(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Pe(r,i);{const a=Zw(),l=wP(a.encode(j0(n,t)),a.encode(j0(e,t)));return l!==0?l:Pe(r,i)}}t+=r>65535?2:1}return Pe(n.length,e.length)}function j0(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function wP(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Pe(n[t],e[t]);return Pe(n.length,e.length)}function Na(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Xw(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=-62135596800,P0=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*P0);return new gt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<I0)throw new ue(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/P0}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-I0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new gt(0,0))}static max(){return new Se(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="__name__";class Pr{constructor(e,t,r){t===void 0?t=0:t>e.length&&ye(),r===void 0?r=e.length-t:r>e.length-t&&ye(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Pr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=Pr.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return Pe(e.length,t.length)}static compareSegments(e,t){const r=Pr.isNumericId(e),i=Pr.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Pr.extractNumericId(e).compare(Pr.extractNumericId(t)):wf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ni.fromString(e.substring(4,e.length-2))}}class Je extends Pr{construct(e,t,r){return new Je(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Je(t)}static emptyPath(){return new Je([])}}const EP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ft extends Pr{construct(e,t,r){return new ft(e,t,r)}static isValidIdentifier(e){return EP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===A0}static keyField(){return new ft([A0])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new ue(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new ue(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ue(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(r+=c,i++):(a(),i++)}if(a(),l)throw new ue(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ft(t)}static emptyPath(){return new ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(Je.fromString(e))}static fromName(e){return new de(Je.fromString(e).popFirst(5))}static empty(){return new de(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new Je(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu=-1;class oh{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Ef(n){return n.fields.find(e=>e.kind===2)}function $i(n){return n.fields.filter(e=>e.kind!==2)}oh.UNKNOWN_ID=-1;class Od{constructor(e,t){this.fieldPath=e,this.kind=t}}class Su{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Su(0,Vn.min())}}function TP(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Se.fromTimestamp(r===1e9?new gt(t+1,0):new gt(t,r));return new Vn(i,de.empty(),e)}function eE(n){return new Vn(n.readTime,n.key,zu)}class Vn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Vn(Se.min(),de.empty(),zu)}static max(){return new Vn(Se.max(),de.empty(),zu)}}function yv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=de.comparator(n.documentKey,e.documentKey),t!==0?t:Pe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ks(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==tE)throw n;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof U?t:U.resolve(t)}catch(t){return U.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):U.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):U.reject(t)}static resolve(e){return new U((t,r)=>{t(e)})}static reject(e){return new U((t,r)=>{r(e)})}static waitFor(e){return new U((t,r)=>{let i=0,a=0,l=!1;e.forEach(c=>{++i,c.next(()=>{++a,l&&a===i&&t()},h=>r(h))}),l=!0,a===i&&t()})}static or(e){let t=U.resolve(!1);for(const r of e)t=t.next(i=>i?U.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new U((r,i)=>{const a=e.length,l=new Array(a);let c=0;for(let h=0;h<a;h++){const p=h;t(e[p]).next(y=>{l[p]=y,++c,c===a&&r(l)},y=>i(y))}})}static doWhile(e,t){return new U((r,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):r()};a()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An="SimpleDb";class Oh{static open(e,t,r,i){try{return new Oh(t,e.transaction(i,r))}catch(a){throw new mu(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new Rr,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new mu(e,t.error)):this.m.resolve()},this.transaction.onerror=r=>{const i=kv(r.target.error);this.m.reject(new mu(e,i))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(oe(An,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new SP(t)}}class ri{static delete(e){return oe(An,"Removing database:",e),qi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ow())return!1;if(ri.v())return!0;const e=Vt(),t=ri.C(e),r=0<t&&t<10,i=rE(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.O=r,ri.C(Vt())===12.2&&un("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(oe(An,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const l=a.target.result;t(l)},i.onblocked=()=>{r(new mu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const l=a.target.error;l.name==="VersionError"?r(new ue(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new ue(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new mu(e,l))},i.onupgradeneeded=a=>{oe(An,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;this.O.B(l,i.transaction,a.oldVersion,this.version).next(()=>{oe(An,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const a=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.N(e);const c=Oh.open(this.db,e,a?"readonly":"readwrite",r),h=i(c).next(p=>(c.S(),p)).catch(p=>(c.abort(p),U.reject(p))).toPromise();return h.catch(()=>{}),await c.p,h}catch(c){const h=c,p=h.name!=="FirebaseError"&&l<3;if(oe(An,"Transaction failed with error:",h.message,"Retrying:",p),this.close(),!p)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function rE(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class zP{constructor(e){this.q=e,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.U=e}delete(){return qi(this.q.delete())}}class mu extends ue{constructor(e,t){super(J.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function di(n){return n.name==="IndexedDbTransactionError"}class SP{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(oe(An,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(oe(An,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),qi(r)}add(e){return oe(An,"ADD",this.store.name,e,e),qi(this.store.add(e))}get(e){return qi(this.store.get(e)).next(t=>(t===void 0&&(t=null),oe(An,"GET",this.store.name,e,t),t))}delete(e){return oe(An,"DELETE",this.store.name,e),qi(this.store.delete(e))}count(){return oe(An,"COUNT",this.store.name),qi(this.store.count())}G(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new U((l,c)=>{a.onerror=h=>{c(h.target.error)},a.onsuccess=h=>{l(h.target.result)}})}{const a=this.cursor(r),l=[];return this.j(a,(c,h)=>{l.push(h)}).next(()=>l)}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new U((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){oe(An,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.j(i,(a,l,c)=>c.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.j(i,t)}X(e){const t=this.cursor({});return new U((r,i)=>{t.onerror=a=>{const l=kv(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(c=>{c?l.continue():r()}):r()}})}j(e,t){const r=[];return new U((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const c=l.target.result;if(!c)return void i();const h=new zP(c),p=t(c.primaryKey,c.value,h);if(p instanceof U){const y=p.catch(k=>(h.done(),U.reject(k)));r.push(y)}h.isDone?i():h.K===null?c.continue():c.continue(h.K)}}).next(()=>U.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function qi(n){return new U((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=kv(r.target.error);t(i)}})}let C0=!1;function kv(n){const e=ri.C(Vt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return C0||(C0=!0,setTimeout(()=>{throw r},0)),r}}return n}const pu="IndexBackfiller";class xP{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){oe(pu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ee.ne();oe(pu,`Documents written: ${t}`)}catch(t){di(t)?oe(pu,"Ignoring IndexedDB error during index backfill: ",t):await ks(t)}await this.te(6e4)})}}class jP{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))}re(e,t){const r=new Set;let i=t,a=!0;return U.doWhile(()=>a===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(l!==null&&!r.has(l))return oe(pu,`Processing collection: ${l}`),this.ie(e,l,i).next(c=>{i-=c,r.add(l)});a=!1})).next(()=>t-i)}ie(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.se(i,a)).next(c=>(oe(pu,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>l.size)}))}se(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=eE(a);yv(l,r)>0&&(r=l)}),new Vn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Qn.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=-1;function Mh(n){return n==null}function xu(n){return n===0&&1/n==-1/0}function IP(n){return typeof n=="number"&&Number.isInteger(n)&&!xu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih="";function rn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=R0(e)),e=PP(n.get(t),e);return R0(e)}function PP(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case ih:t+="";break;default:t+=a}}return t}function R0(n){return n+ih+""}function Ar(n){const e=n.length;if(_e(e>=2),e===2)return _e(n.charAt(0)===ih&&n.charAt(1)===""),Je.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf(ih,a);switch((l<0||l>t)&&ye(),n.charAt(l+1)){case"":const c=n.substring(a,l);let h;i.length===0?h=c:(i+=c,h=i,i=""),r.push(h);break;case"":i+=n.substring(a,l),i+="\0";break;case"":i+=n.substring(a,l+1);break;default:ye()}a=l+2}return new Je(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi="remoteDocuments",Qu="owner",da="owner",ju="mutationQueues",AP="userId",pr="mutations",V0="batchId",Yi="userMutationsIndex",N0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(n,e){return[n,rn(e)]}function oE(n,e,t){return[n,rn(e),t]}const CP={},Da="documentMutations",sh="remoteDocumentsV14",RP=["prefixPath","collectionGroup","readTime","documentId"],Ld="documentKeyIndex",VP=["prefixPath","collectionGroup","documentId"],iE="collectionGroupIndex",NP=["collectionGroup","readTime","prefixPath","documentId"],Iu="remoteDocumentGlobal",Tf="remoteDocumentGlobalKey",Oa="targets",sE="queryTargetsIndex",DP=["canonicalId","targetId"],Ma="targetDocuments",OP=["targetId","path"],bv="documentTargetsIndex",MP=["path","targetId"],ah="targetGlobalKey",os="targetGlobal",Pu="collectionParents",LP=["collectionId","parent"],La="clientMetadata",FP="clientId",Lh="bundles",UP="bundleId",Fh="namedQueries",BP="name",_v="indexConfiguration",HP="indexId",zf="collectionGroupIndex",KP="collectionGroup",lh="indexState",$P=["indexId","uid"],aE="sequenceNumberIndex",WP=["uid","sequenceNumber"],uh="indexEntries",GP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lE="documentKeyIndex",qP=["indexId","uid","orderedDocumentKey"],Uh="documentOverlays",QP=["userId","collectionPath","documentId"],Sf="collectionPathOverlayIndex",JP=["userId","collectionPath","largestBatchId"],uE="collectionGroupOverlayIndex",ZP=["userId","collectionGroup","largestBatchId"],wv="globals",YP="name",cE=[ju,pr,Da,Wi,Oa,Qu,os,Ma,La,Iu,Pu,Lh,Fh],XP=[...cE,Uh],dE=[ju,pr,Da,sh,Oa,Qu,os,Ma,La,Iu,Pu,Lh,Fh,Uh],hE=dE,Ev=[...hE,_v,lh,uh],e1=Ev,t1=[...Ev,wv];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf extends nE{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function Nt(n,e){const t=Re(n);return ri.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function mE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t){this.comparator=e,this.root=t||qt.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zd(this.root,e,this.comparator,!1)}getReverseIterator(){return new zd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zd(this.root,e,this.comparator,!0)}}class zd{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??qt.RED,this.left=i??qt.EMPTY,this.right=a??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new qt(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return qt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ye();const e=this.left.check();if(e!==this.right.check())throw ye();return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw ye()}get value(){throw ye()}get color(){throw ye()}get left(){throw ye()}get right(){throw ye()}copy(e,t,r,i,a){return this}insert(e,t,r){return new qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new O0(this.data.getIterator())}getIteratorFrom(e){return new O0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new et(this.comparator);return t.data=e,t}}class O0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ha(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new Jn([])}unionWith(e){let t=new et(ft.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Jn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Na(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new pE("Invalid base64 string: "+a):a}}(e);return new jt(t)}static fromUint8Array(e){const t=function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a}(e);return new jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const n1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lo(n){if(_e(!!n),typeof n=="string"){let e=0;const t=n1.exec(n);if(_e(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dt(n.seconds),nanos:dt(n.nanos)}}function dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function uo(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="server_timestamp",vE="__type__",gE="__previous_value__",yE="__local_write_time__";function Tv(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[vE])===null||t===void 0?void 0:t.stringValue)===fE}function Bh(n){const e=n.mapValue.fields[gE];return Tv(e)?Bh(e):e}function Au(n){const e=lo(n.mapValue.fields[yE].timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,t,r,i,a,l,c,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=p}}const ch="(default)";class hs{constructor(e,t){this.projectId=e,this.database=t||ch}static empty(){return new hs("","")}get isDefaultDatabase(){return this.database===ch}isEqual(e){return e instanceof hs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="__type__",kE="__max__",Yo={mapValue:{fields:{__type__:{stringValue:kE}}}},Sv="__vector__",Fa="value",Fd={nullValue:"NULL_VALUE"};function ii(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Tv(n)?4:bE(n)?9007199254740991:Hh(n)?10:11:ye()}function Or(n,e){if(n===e)return!0;const t=ii(n);if(t!==ii(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Au(n).isEqual(Au(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=lo(i.timestampValue),c=lo(a.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,a){return uo(i.bytesValue).isEqual(uo(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return dt(i.geoPointValue.latitude)===dt(a.geoPointValue.latitude)&&dt(i.geoPointValue.longitude)===dt(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return dt(i.integerValue)===dt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=dt(i.doubleValue),c=dt(a.doubleValue);return l===c?xu(l)===xu(c):isNaN(l)&&isNaN(c)}return!1}(n,e);case 9:return Na(n.arrayValue.values||[],e.arrayValue.values||[],Or);case 10:case 11:return function(i,a){const l=i.mapValue.fields||{},c=a.mapValue.fields||{};if(D0(l)!==D0(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!Or(l[h],c[h])))return!1;return!0}(n,e);default:return ye()}}function Cu(n,e){return(n.values||[]).find(t=>Or(t,e))!==void 0}function si(n,e){if(n===e)return 0;const t=ii(n),r=ii(e);if(t!==r)return Pe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(n.booleanValue,e.booleanValue);case 2:return function(a,l){const c=dt(a.integerValue||a.doubleValue),h=dt(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return M0(n.timestampValue,e.timestampValue);case 4:return M0(Au(n),Au(e));case 5:return wf(n.stringValue,e.stringValue);case 6:return function(a,l){const c=uo(a),h=uo(l);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const c=a.split("/"),h=l.split("/");for(let p=0;p<c.length&&p<h.length;p++){const y=Pe(c[p],h[p]);if(y!==0)return y}return Pe(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const c=Pe(dt(a.latitude),dt(l.latitude));return c!==0?c:Pe(dt(a.longitude),dt(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return L0(n.arrayValue,e.arrayValue);case 10:return function(a,l){var c,h,p,y;const k=a.fields||{},_=l.fields||{},S=(c=k[Fa])===null||c===void 0?void 0:c.arrayValue,C=(h=_[Fa])===null||h===void 0?void 0:h.arrayValue,N=Pe(((p=S==null?void 0:S.values)===null||p===void 0?void 0:p.length)||0,((y=C==null?void 0:C.values)===null||y===void 0?void 0:y.length)||0);return N!==0?N:L0(S,C)}(n.mapValue,e.mapValue);case 11:return function(a,l){if(a===Yo.mapValue&&l===Yo.mapValue)return 0;if(a===Yo.mapValue)return 1;if(l===Yo.mapValue)return-1;const c=a.fields||{},h=Object.keys(c),p=l.fields||{},y=Object.keys(p);h.sort(),y.sort();for(let k=0;k<h.length&&k<y.length;++k){const _=wf(h[k],y[k]);if(_!==0)return _;const S=si(c[h[k]],p[y[k]]);if(S!==0)return S}return Pe(h.length,y.length)}(n.mapValue,e.mapValue);default:throw ye()}}function M0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Pe(n,e);const t=lo(n),r=lo(e),i=Pe(t.seconds,r.seconds);return i!==0?i:Pe(t.nanos,r.nanos)}function L0(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=si(t[i],r[i]);if(a)return a}return Pe(t.length,r.length)}function Ua(n){return jf(n)}function jf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=lo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return uo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return de.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=jf(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const l of r)a?a=!1:i+=",",i+=`${l}:${jf(t.fields[l])}`;return i+"}"}(n.mapValue):ye()}function Ud(n){switch(ii(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bh(n);return e?16+Ud(e):16;case 5:return 2*n.stringValue.length;case 6:return uo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+Ud(a),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return bs(r.fields,(a,l)=>{i+=a.length+Ud(l)}),i}(n.mapValue);default:throw ye()}}function Ru(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function If(n){return!!n&&"integerValue"in n}function Vu(n){return!!n&&"arrayValue"in n}function F0(n){return!!n&&"nullValue"in n}function U0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bd(n){return!!n&&"mapValue"in n}function Hh(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[zv])===null||t===void 0?void 0:t.stringValue)===Sv}function fu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return bs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=fu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function bE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===kE}const _E={mapValue:{fields:{[zv]:{stringValue:Sv},[Fa]:{arrayValue:{}}}}};function o1(n){return"nullValue"in n?Fd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ru(hs.empty(),de.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Hh(n)?_E:{mapValue:{}}:ye()}function i1(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ru(hs.empty(),de.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?_E:"mapValue"in n?Hh(n)?{mapValue:{}}:Yo:ye()}function B0(n,e){const t=si(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function H0(n,e){const t=si(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Bd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fu(t)}setAll(e){let t=ft.emptyPath(),r={},i=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=c.popLast()}l?r[c.lastSegment()]=fu(l):i.push(c.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Bd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Or(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Bd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){bs(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new _n(fu(this.value))}}function wE(n){const e=[];return bs(n.fields,(t,r)=>{const i=new ft([t]);if(Bd(r)){const a=wE(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,t,r,i,a,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=c}static newInvalidDocument(e){return new bt(e,0,Se.min(),Se.min(),Se.min(),_n.empty(),0)}static newFoundDocument(e,t,r,i){return new bt(e,1,t,Se.min(),r,i,0)}static newNoDocument(e,t){return new bt(e,2,t,Se.min(),Se.min(),_n.empty(),0)}static newUnknownDocument(e,t){return new bt(e,3,t,Se.min(),Se.min(),_n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,t){this.position=e,this.inclusive=t}}function K0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(a.field.isKeyField()?r=de.comparator(de.fromName(l.referenceValue),t.key):r=si(l,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function $0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Or(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,t="asc"){this.field=e,this.dir=t}}function s1(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{}class Fe extends EE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new a1(e,t,r):t==="array-contains"?new c1(e,r):t==="in"?new IE(e,r):t==="not-in"?new d1(e,r):t==="array-contains-any"?new h1(e,r):new Fe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new l1(e,r):new u1(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(si(t,this.value)):t!==null&&ii(this.value)===ii(t)&&this.matchesComparison(si(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xe extends EE{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Xe(e,t)}matches(e){return Ha(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Ha(n){return n.op==="and"}function Pf(n){return n.op==="or"}function xv(n){return TE(n)&&Ha(n)}function TE(n){for(const e of n.filters)if(e instanceof Xe)return!1;return!0}function Af(n){if(n instanceof Fe)return n.field.canonicalString()+n.op.toString()+Ua(n.value);if(xv(n))return n.filters.map(e=>Af(e)).join(",");{const e=n.filters.map(t=>Af(t)).join(",");return`${n.op}(${e})`}}function zE(n,e){return n instanceof Fe?function(r,i){return i instanceof Fe&&r.op===i.op&&r.field.isEqual(i.field)&&Or(r.value,i.value)}(n,e):n instanceof Xe?function(r,i){return i instanceof Xe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,l,c)=>a&&zE(l,i.filters[c]),!0):!1}(n,e):void ye()}function SE(n,e){const t=n.filters.concat(e);return Xe.create(t,n.op)}function xE(n){return n instanceof Fe?function(t){return`${t.field.canonicalString()} ${t.op} ${Ua(t.value)}`}(n):n instanceof Xe?function(t){return t.op.toString()+" {"+t.getFilters().map(xE).join(" ,")+"}"}(n):"Filter"}class a1 extends Fe{constructor(e,t,r){super(e,t,r),this.key=de.fromName(r.referenceValue)}matches(e){const t=de.comparator(e.key,this.key);return this.matchesComparison(t)}}class l1 extends Fe{constructor(e,t){super(e,"in",t),this.keys=jE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class u1 extends Fe{constructor(e,t){super(e,"not-in",t),this.keys=jE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function jE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>de.fromName(r.referenceValue))}class c1 extends Fe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vu(t)&&Cu(t.arrayValue,this.value)}}class IE extends Fe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Cu(this.value.arrayValue,t)}}class d1 extends Fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Cu(this.value.arrayValue,t)}}class h1 extends Fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Cu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,t=null,r=[],i=[],a=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=c,this.le=null}}function Cf(n,e=null,t=[],r=[],i=null,a=null,l=null){return new m1(n,e,t,r,i,a,l)}function ms(n){const e=Re(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Af(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Mh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ua(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ua(r)).join(",")),e.le=t}return e.le}function Ju(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!s1(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!zE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$0(n.startAt,e.startAt)&&$0(n.endAt,e.endAt)}function dh(n){return de.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function hh(n,e){return n.filters.filter(t=>t instanceof Fe&&t.field.isEqual(e))}function W0(n,e,t){let r=Fd,i=!0;for(const a of hh(n,e)){let l=Fd,c=!0;switch(a.op){case"<":case"<=":l=o1(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,c=!1;break;case"!=":case"not-in":l=Fd}B0({value:r,inclusive:i},{value:l,inclusive:c})<0&&(r=l,i=c)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];B0({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}function G0(n,e,t){let r=Yo,i=!0;for(const a of hh(n,e)){let l=Yo,c=!0;switch(a.op){case">=":case">":l=i1(a.value),c=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,c=!1;break;case"!=":case"not-in":l=Yo}H0({value:r,inclusive:i},{value:l,inclusive:c})>0&&(r=l,i=c)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];H0({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,t=null,r=[],i=[],a=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=c,this.endAt=h,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function p1(n,e,t,r,i,a,l,c){return new tl(n,e,t,r,i,a,l,c)}function Kh(n){return new tl(n)}function q0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function PE(n){return n.collectionGroup!==null}function vu(n){const e=Re(n);if(e.he===null){e.he=[];const t=new Set;for(const a of e.explicitOrderBy)e.he.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new et(ft.comparator);return l.filters.forEach(h=>{h.getFlattenedFilters().forEach(p=>{p.isInequality()&&(c=c.add(p.field))})}),c})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.he.push(new Nu(a,r))}),t.has(ft.keyField().canonicalString())||e.he.push(new Nu(ft.keyField(),r))}return e.he}function Zn(n){const e=Re(n);return e.Pe||(e.Pe=f1(e,vu(n))),e.Pe}function f1(n,e){if(n.limitType==="F")return Cf(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Nu(i.field,a)});const t=n.endAt?new Ba(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ba(n.startAt.position,n.startAt.inclusive):null;return Cf(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Rf(n,e){const t=n.filters.concat([e]);return new tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function mh(n,e,t){return new tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $h(n,e){return Ju(Zn(n),Zn(e))&&n.limitType===e.limitType}function AE(n){return`${ms(Zn(n))}|lt:${n.limitType}`}function ba(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>xE(i)).join(", ")}]`),Mh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ua(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ua(i)).join(",")),`Target(${r})`}(Zn(n))}; limitType=${n.limitType})`}function Zu(n,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):de.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,i){for(const a of vu(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(l,c,h){const p=K0(l,c,h);return l.inclusive?p<=0:p<0}(r.startAt,vu(r),i)||r.endAt&&!function(l,c,h){const p=K0(l,c,h);return l.inclusive?p>=0:p>0}(r.endAt,vu(r),i))}(n,e)}function v1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function CE(n){return(e,t)=>{let r=!1;for(const i of vu(n)){const a=g1(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function g1(n,e,t){const r=n.field.isKeyField()?de.comparator(e.key,t.key):function(a,l,c){const h=l.data.field(a),p=c.data.field(a);return h!==null&&p!==null?si(h,p):ye()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ye()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bs(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return mE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=new ht(de.comparator);function Cn(){return y1}const RE=new ht(de.comparator);function au(...n){let e=RE;for(const t of n)e=e.insert(t.key,t);return e}function VE(n){let e=RE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Cr(){return gu()}function NE(){return gu()}function gu(){return new fo(n=>n.toString(),(n,e)=>n.isEqual(e))}const k1=new ht(de.comparator),b1=new et(de.comparator);function De(...n){let e=b1;for(const t of n)e=e.add(t);return e}const _1=new et(Pe);function w1(){return _1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xu(e)?"-0":e}}function DE(n){return{integerValue:""+n}}function E1(n,e){return IP(e)?DE(e):jv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(){this._=void 0}}function T1(n,e,t){return n instanceof Du?function(i,a){const l={fields:{[vE]:{stringValue:fE},[yE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Tv(a)&&(a=Bh(a)),a&&(l.fields[gE]=a),{mapValue:l}}(t,e):n instanceof Ka?ME(n,e):n instanceof $a?LE(n,e):function(i,a){const l=OE(i,a),c=Q0(l)+Q0(i.Ie);return If(l)&&If(i.Ie)?DE(c):jv(i.serializer,c)}(n,e)}function z1(n,e,t){return n instanceof Ka?ME(n,e):n instanceof $a?LE(n,e):t}function OE(n,e){return n instanceof Ou?function(r){return If(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Du extends Wh{}class Ka extends Wh{constructor(e){super(),this.elements=e}}function ME(n,e){const t=FE(e);for(const r of n.elements)t.some(i=>Or(i,r))||t.push(r);return{arrayValue:{values:t}}}class $a extends Wh{constructor(e){super(),this.elements=e}}function LE(n,e){let t=FE(e);for(const r of n.elements)t=t.filter(i=>!Or(i,r));return{arrayValue:{values:t}}}class Ou extends Wh{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Q0(n){return dt(n.integerValue||n.doubleValue)}function FE(n){return Vu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,t){this.field=e,this.transform=t}}function x1(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ka&&i instanceof Ka||r instanceof $a&&i instanceof $a?Na(r.elements,i.elements,Or):r instanceof Ou&&i instanceof Ou?Or(r.Ie,i.Ie):r instanceof Du&&i instanceof Du}(n.transform,e.transform)}class j1{constructor(e,t){this.version=e,this.transformResults=t}}class wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Gh{}function UE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Iv(n.key,wn.none()):new nl(n.key,n.data,wn.none());{const t=n.data,r=_n.empty();let i=new et(ft.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new hi(n.key,r,new Jn(i.toArray()),wn.none())}}function I1(n,e,t){n instanceof nl?function(i,a,l){const c=i.value.clone(),h=Z0(i.fieldTransforms,a,l.transformResults);c.setAll(h),a.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,e,t):n instanceof hi?function(i,a,l){if(!Hd(i.precondition,a))return void a.convertToUnknownDocument(l.version);const c=Z0(i.fieldTransforms,a,l.transformResults),h=a.data;h.setAll(BE(i)),h.setAll(c),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function yu(n,e,t,r){return n instanceof nl?function(a,l,c,h){if(!Hd(a.precondition,l))return c;const p=a.value.clone(),y=Y0(a.fieldTransforms,h,l);return p.setAll(y),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof hi?function(a,l,c,h){if(!Hd(a.precondition,l))return c;const p=Y0(a.fieldTransforms,h,l),y=l.data;return y.setAll(BE(a)),y.setAll(p),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(k=>k.field))}(n,e,t,r):function(a,l,c){return Hd(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(n,e,t)}function P1(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=OE(r.transform,i||null);a!=null&&(t===null&&(t=_n.empty()),t.set(r.field,a))}return t||null}function J0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Na(r,i,(a,l)=>x1(a,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class nl extends Gh{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class hi extends Gh{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function BE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Z0(n,e,t){const r=new Map;_e(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,c=e.data.field(a.field);r.set(a.field,z1(l,c,t[i]))}return r}function Y0(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,T1(a,l,e))}return r}class Iv extends Gh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HE extends Gh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&I1(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=yu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=yu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=NE();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let c=this.applyToLocalView(l,a.mutatedFields);c=t.has(i.key)?null:c;const h=UE(l,c);h!==null&&r.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(Se.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),De())}isEqual(e){return this.batchId===e.batchId&&Na(this.mutations,e.mutations,(t,r)=>J0(t,r))&&Na(this.baseMutations,e.baseMutations,(t,r)=>J0(t,r))}}class Av{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){_e(e.mutations.length===r.length);let i=function(){return k1}();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new Av(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,$e;function C1(n){switch(n){case J.OK:return ye();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return ye()}}function KE(n){if(n===void 0)return un("GRPC error has no .code"),J.UNKNOWN;switch(n){case xt.OK:return J.OK;case xt.CANCELLED:return J.CANCELLED;case xt.UNKNOWN:return J.UNKNOWN;case xt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case xt.INTERNAL:return J.INTERNAL;case xt.UNAVAILABLE:return J.UNAVAILABLE;case xt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case xt.NOT_FOUND:return J.NOT_FOUND;case xt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case xt.ABORTED:return J.ABORTED;case xt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case xt.DATA_LOSS:return J.DATA_LOSS;default:return ye()}}($e=xt||(xt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=new ni([4294967295,4294967295],0);function X0(n){const e=Zw().encode(n),t=new Kw;return t.update(e),new Uint8Array(t.digest())}function eb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ni([t,r],0),new ni([i,a],0)]}class Rv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new lu(`Invalid padding: ${t}`);if(r<0)throw new lu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new lu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new lu(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=ni.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(ni.fromNumber(r)));return i.compare(R1)===1&&(i=new ni([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=X0(e),[r,i]=eb(t);for(let a=0;a<this.hashCount;a++){const l=this.Ae(r,i,a);if(!this.Re(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new Rv(a,i,t);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.Ee===0)return;const t=X0(e),[r,i]=eb(t);for(let a=0;a<this.hashCount;a++){const l=this.Ae(r,i,a);this.Ve(l)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Yu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new qh(Se.min(),i,new ht(Pe),Cn(),De())}}class Yu{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Yu(r,t,De(),De(),De())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}}class $E{constructor(e,t){this.targetId=e,this.ge=t}}class WE{constructor(e,t,r=jt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class tb{constructor(){this.pe=0,this.ye=nb(),this.we=jt.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=De(),t=De(),r=De();return this.ye.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ye()}}),new Yu(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=nb()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,_e(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class V1{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Cn(),this.$e=Sd(),this.Ue=Sd(),this.Ke=new ht(Pe)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:ye()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){const t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){const a=i.target;if(dh(a))if(r===0){const l=new de(a.path);this.ze(t,l,bt.newNoDocument(l,Se.min()))}else _e(r===1);else{const l=this.et(t);if(l!==r){const c=this.tt(e),h=c?this.nt(c,e,l):1;if(h!==0){this.Ye(t);const p=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let l,c;try{l=uo(r).toUint8Array()}catch(h){if(h instanceof pE)return ds("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new Rv(l,i,a)}catch(h){return ds(h instanceof lu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.Ee===0?null:c}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let i=0;return r.forEach(a=>{const l=this.ke.it(),c=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.ze(t,a,null),i++)}),i}ot(e){const t=new Map;this.qe.forEach((a,l)=>{const c=this.Xe(l);if(c){if(a.current&&dh(c.target)){const h=new de(c.target.path);this._t(h).has(l)||this.ut(l,h)||this.ze(l,h,bt.newNoDocument(h,e))}a.ve&&(t.set(l,a.Fe()),a.Me())}});let r=De();this.Ue.forEach((a,l)=>{let c=!0;l.forEachWhile(h=>{const p=this.Xe(h);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(a))}),this.Qe.forEach((a,l)=>l.setReadTime(e));const i=new qh(e,t,this.Ke,this.Qe,r);return this.Qe=Cn(),this.$e=Sd(),this.Ue=Sd(),this.Ke=new ht(Pe),i}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new tb,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new et(Pe),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new et(Pe),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new tb),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Sd(){return new ht(de.comparator)}function nb(){return new ht(de.comparator)}const N1={asc:"ASCENDING",desc:"DESCENDING"},D1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},O1={and:"AND",or:"OR"};class M1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Vf(n,e){return n.useProto3Json||Mh(e)?e:{value:e}}function Wa(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function L1(n,e){return Wa(n,e.toTimestamp())}function dn(n){return _e(!!n),Se.fromTimestamp(function(t){const r=lo(t);return new gt(r.seconds,r.nanos)}(n))}function Vv(n,e){return Nf(n,e).canonicalString()}function Nf(n,e){const t=function(i){return new Je(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function qE(n){const e=Je.fromString(n);return _e(rT(e)),e}function ph(n,e){return Vv(n.databaseId,e.path)}function is(n,e){const t=qE(e);if(t.get(1)!==n.databaseId.projectId)throw new ue(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ue(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new de(ZE(t))}function QE(n,e){return Vv(n.databaseId,e)}function JE(n){const e=qE(n);return e.length===4?Je.emptyPath():ZE(e)}function Df(n){return new Je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ZE(n){return _e(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function rb(n,e,t){return{name:ph(n,e),fields:t.value.mapValue.fields}}function F1(n,e,t){const r=is(n,e.name),i=dn(e.updateTime),a=e.createTime?dn(e.createTime):Se.min(),l=new _n({mapValue:{fields:e.fields}}),c=bt.newFoundDocument(r,i,a,l);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function U1(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ye()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(p,y){return p.useProto3Json?(_e(y===void 0||typeof y=="string"),jt.fromBase64String(y||"")):(_e(y===void 0||y instanceof Buffer||y instanceof Uint8Array),jt.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(p){const y=p.code===void 0?J.UNKNOWN:KE(p.code);return new ue(y,p.message||"")}(l);t=new WE(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=is(n,r.document.name),a=dn(r.document.updateTime),l=r.document.createTime?dn(r.document.createTime):Se.min(),c=new _n({mapValue:{fields:r.document.fields}}),h=bt.newFoundDocument(i,a,l,c),p=r.targetIds||[],y=r.removedTargetIds||[];t=new Kd(p,y,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=is(n,r.document),a=r.readTime?dn(r.readTime):Se.min(),l=bt.newNoDocument(i,a),c=r.removedTargetIds||[];t=new Kd([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=is(n,r.document),a=r.removedTargetIds||[];t=new Kd([],a,i,null)}else{if(!("filter"in e))return ye();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,l=new A1(i,a),c=r.targetId;t=new $E(c,l)}}return t}function fh(n,e){let t;if(e instanceof nl)t={update:rb(n,e.key,e.value)};else if(e instanceof Iv)t={delete:ph(n,e.key)};else if(e instanceof hi)t={update:rb(n,e.key,e.data),updateMask:G1(e.fieldMask)};else{if(!(e instanceof HE))return ye();t={verify:ph(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,l){const c=l.transform;if(c instanceof Du)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ka)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof $a)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ou)return{fieldPath:l.field.canonicalString(),increment:c.Ie};throw ye()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:L1(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ye()}(n,e.precondition)),t}function Of(n,e){const t=e.currentDocument?function(a){return a.updateTime!==void 0?wn.updateTime(dn(a.updateTime)):a.exists!==void 0?wn.exists(a.exists):wn.none()}(e.currentDocument):wn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(l,c){let h=null;if("setToServerValue"in c)_e(c.setToServerValue==="REQUEST_TIME"),h=new Du;else if("appendMissingElements"in c){const y=c.appendMissingElements.values||[];h=new Ka(y)}else if("removeAllFromArray"in c){const y=c.removeAllFromArray.values||[];h=new $a(y)}else"increment"in c?h=new Ou(l,c.increment):ye();const p=ft.fromServerFormat(c.fieldPath);return new S1(p,h)}(n,i)):[];if(e.update){e.update.name;const i=is(n,e.update.name),a=new _n({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=function(h){const p=h.fieldPaths||[];return new Jn(p.map(y=>ft.fromServerFormat(y)))}(e.updateMask);return new hi(i,a,l,t,r)}return new nl(i,a,t,r)}if(e.delete){const i=is(n,e.delete);return new Iv(i,t)}if(e.verify){const i=is(n,e.verify);return new HE(i,t)}return ye()}function B1(n,e){return n&&n.length>0?(_e(e!==void 0),n.map(t=>function(i,a){let l=i.updateTime?dn(i.updateTime):dn(a);return l.isEqual(Se.min())&&(l=dn(a)),new j1(l,i.transformResults||[])}(t,e))):[]}function YE(n,e){return{documents:[QE(n,e.path)]}}function XE(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=QE(n,i);const a=function(p){if(p.length!==0)return nT(Xe.create(p,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const l=function(p){if(p.length!==0)return p.map(y=>function(_){return{field:_a(_.field),direction:K1(_.dir)}}(y))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=Vf(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:i}}function eT(n){let e=JE(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){_e(r===1);const y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let a=[];t.where&&(a=function(k){const _=tT(k);return _ instanceof Xe&&xv(_)?_.getFilters():[_]}(t.where));let l=[];t.orderBy&&(l=function(k){return k.map(_=>function(C){return new Nu(wa(C.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(_))}(t.orderBy));let c=null;t.limit&&(c=function(k){let _;return _=typeof k=="object"?k.value:k,Mh(_)?null:_}(t.limit));let h=null;t.startAt&&(h=function(k){const _=!!k.before,S=k.values||[];return new Ba(S,_)}(t.startAt));let p=null;return t.endAt&&(p=function(k){const _=!k.before,S=k.values||[];return new Ba(S,_)}(t.endAt)),p1(e,i,l,a,c,"F",h,p)}function H1(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function tT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=wa(t.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=wa(t.unaryFilter.field);return Fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=wa(t.unaryFilter.field);return Fe.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=wa(t.unaryFilter.field);return Fe.create(l,"!=",{nullValue:"NULL_VALUE"});default:return ye()}}(n):n.fieldFilter!==void 0?function(t){return Fe.create(wa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ye()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Xe.create(t.compositeFilter.filters.map(r=>tT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ye()}}(t.compositeFilter.op))}(n):ye()}function K1(n){return N1[n]}function $1(n){return D1[n]}function W1(n){return O1[n]}function _a(n){return{fieldPath:n.canonicalString()}}function wa(n){return ft.fromServerFormat(n.fieldPath)}function nT(n){return n instanceof Fe?function(t){if(t.op==="=="){if(U0(t.value))return{unaryFilter:{field:_a(t.field),op:"IS_NAN"}};if(F0(t.value))return{unaryFilter:{field:_a(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(U0(t.value))return{unaryFilter:{field:_a(t.field),op:"IS_NOT_NAN"}};if(F0(t.value))return{unaryFilter:{field:_a(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_a(t.field),op:$1(t.op),value:t.value}}}(n):n instanceof Xe?function(t){const r=t.getFilters().map(i=>nT(i));return r.length===1?r[0]:{compositeFilter:{op:W1(t.op),filters:r}}}(n):ye()}function G1(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function rT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,t,r,i,a=Se.min(),l=Se.min(),c=jt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new no(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new no(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e){this.Tt=e}}function q1(n,e){let t;if(e.document)t=F1(n.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=de.fromSegments(e.noDocument.path),i=fs(e.noDocument.readTime);t=bt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye();{const r=de.fromSegments(e.unknownDocument.path),i=fs(e.unknownDocument.version);t=bt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const a=new gt(i[0],i[1]);return Se.fromTimestamp(a)}(e.readTime)),t}function ob(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:vh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(a,l){return{name:ph(a,l.key),fields:l.data.value.mapValue.fields,updateTime:Wa(a,l.version.toTimestamp()),createTime:Wa(a,l.createTime.toTimestamp())}}(n.Tt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ps(e.version)};else{if(!e.isUnknownDocument())return ye();r.unknownDocument={path:t.path.toArray(),version:ps(e.version)}}return r}function vh(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ps(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fs(n){const e=new gt(n.seconds,n.nanoseconds);return Se.fromTimestamp(e)}function Qi(n,e){const t=(e.baseMutations||[]).map(a=>Of(n.Tt,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const c=e.mutations[a+1];l.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map(a=>Of(n.Tt,a)),i=gt.fromMillis(e.localWriteTimeMs);return new Pv(e.batchId,i,t,r)}function uu(n){const e=fs(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?fs(n.lastLimboFreeSnapshotVersion):Se.min();let r;return r=function(a){return a.documents!==void 0}(n.query)?function(a){return _e(a.documents.length===1),Zn(Kh(JE(a.documents[0])))}(n.query):function(a){return Zn(eT(a))}(n.query),new no(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,jt.fromBase64String(n.resumeToken))}function iT(n,e){const t=ps(e.snapshotVersion),r=ps(e.lastLimboFreeSnapshotVersion);let i;i=dh(e.target)?YE(n.Tt,e.target):XE(n.Tt,e.target).ht;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ms(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function sT(n){const e=eT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?mh(e,e.limit,"L"):e}function Gp(n,e){return new Cv(e.largestBatchId,Of(n.Tt,e.overlayMutation))}function ib(n,e){const t=e.path.lastSegment();return[n,rn(e.path.popLast()),t]}function sb(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ps(r.readTime),documentKey:rn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{getBundleMetadata(e,t){return ab(e).get(t).next(r=>{if(r)return function(a){return{id:a.bundleId,createTime:fs(a.createTime),version:a.version}}(r)})}saveBundleMetadata(e,t){return ab(e).put(function(i){return{bundleId:i.id,createTime:ps(dn(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return lb(e).get(t).next(r=>{if(r)return function(a){return{name:a.name,query:sT(a.bundledQuery),readTime:fs(a.readTime)}}(r)})}saveNamedQuery(e,t){return lb(e).put(function(i){return{name:i.name,readTime:ps(dn(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function ab(n){return Nt(n,Lh)}function lb(n){return Nt(n,Fh)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const r=t.uid||"";return new Qh(e,r)}getOverlay(e,t){return eu(e).get(ib(this.userId,t)).next(r=>r?Gp(this.serializer,r):null)}getOverlays(e,t){const r=Cr();return U.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const c=new Cv(t,l);i.push(this.Et(e,c))}),U.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(rn(l.getCollectionPath())));const a=[];return i.forEach(l=>{const c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(eu(e).J(Sf,c))}),U.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Cr(),a=rn(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return eu(e).G(Sf,l).next(c=>{for(const h of c){const p=Gp(this.serializer,h);i.set(p.getKey(),p)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Cr();let l;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return eu(e).Z({index:uE,range:c},(h,p,y)=>{const k=Gp(this.serializer,p);a.size()<i||k.largestBatchId===l?(a.set(k.getKey(),k),l=k.largestBatchId):y.done()}).next(()=>a)}Et(e,t){return eu(e).put(function(i,a,l){const[c,h,p]=ib(a,l.mutation.key);return{userId:a,collectionPath:h,documentId:p,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:fh(i.Tt,l.mutation)}}(this.serializer,this.userId,t))}}function eu(n){return Nt(n,Uh)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{dt(e){return Nt(e,wv)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?jt.fromUint8Array(r):jt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(dt(e.integerValue));else if("doubleValue"in e){const r=dt(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),xu(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=lo(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(uo(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?bE(e)?this.ft(t,Number.MAX_SAFE_INTEGER):Hh(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):ye()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const r=e.fields||{};this.ft(t,55);for(const i of Object.keys(r))this.wt(i,t),this.Rt(r[i],t)}vt(e,t){var r,i;const a=e.fields||{};this.ft(t,53);const l=Fa,c=((i=(r=a[l].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.ft(t,15),t.gt(dt(c)),this.wt(l,t),this.Rt(a[l],t)}Ft(e,t){const r=e.values||[];this.ft(t,50);for(const i of r)this.Rt(i,t)}Dt(e,t){this.ft(t,37),de.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}St(e){e.gt(2)}}Ji.xt=new Ji;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=255;function Z1(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function ub(n){const e=64-function(r){let i=0;for(let a=0;a<8;++a){const l=Z1(255&r[a]);if(i+=l,l!==8)break}return i}(n);return Math.ceil(e/8)}class Y1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Nt(r.value),r=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.kt(r.value),r=t.next();this.qt()}Qt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const i=t.codePointAt(0);this.Nt(240|i>>>18),this.Nt(128|63&i>>>12),this.Nt(128|63&i>>>6),this.Nt(128|63&i)}}this.Bt()}$t(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const i=t.codePointAt(0);this.kt(240|i>>>18),this.kt(128|63&i>>>12),this.kt(128|63&i>>>6),this.kt(128|63&i)}}this.qt()}Ut(e){const t=this.Kt(e),r=ub(t);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Gt(e){const t=this.Kt(e),r=ub(t);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}zt(){this.jt(ma),this.jt(255)}Ht(){this.Jt(ma),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Kt(e){const t=function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===ma?(this.jt(ma),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===ma?(this.Jt(ma),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class X1{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Ut(e)}Vt(){this.Zt.zt()}}class eA{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class tu{constructor(){this.Zt=new Y1,this.Xt=new X1(this.Zt),this.en=new eA(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Zi(this.indexId,this.documentKey,this.arrayValue,r)}}function Ho(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=cb(n.arrayValue,e.arrayValue),t!==0?t:(t=cb(n.directionalValue,e.directionalValue),t!==0?t:de.comparator(n.documentKey,e.documentKey)))}function cb(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e){this.rn=new et((t,r)=>ft.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const r=t;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(_e(e.collectionGroup===this.collectionId),this.an)return!1;const t=Ef(e);if(t!==void 0&&!this.cn(t))return!1;const r=$i(e);let i=new Set,a=0,l=0;for(;a<r.length&&this.cn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.rn.size>0){const c=this.rn.getIterator().getNext();if(!i.has(c.field.canonicalString())){const h=r[a];if(!this.ln(c,h)||!this.hn(this.sn[l++],h))return!1}++a}for(;a<r.length;++a){const c=r[a];if(l>=this.sn.length||!this.hn(this.sn[l++],c))return!1}return!0}Pn(){if(this.an)return null;let e=new et(ft.comparator);const t=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Od(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Od(r.field,0))}for(const r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Od(r.field,r.dir==="asc"?0:1)));return new oh(oh.UNKNOWN_ID,this.collectionId,t,Su.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(n){var e,t;if(_e(n instanceof Fe||n instanceof Xe),n instanceof Fe){if(n instanceof IE){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(a=>Fe.create(n.field,"==",a)))||[];return Xe.create(i,"or")}return n}const r=n.filters.map(i=>aT(i));return Xe.create(r,n.op)}function tA(n){if(n.getFilters().length===0)return[];const e=Ff(aT(n));return _e(lT(e)),Mf(e)||Lf(e)?[e]:e.getFilters()}function Mf(n){return n instanceof Fe}function Lf(n){return n instanceof Xe&&xv(n)}function lT(n){return Mf(n)||Lf(n)||function(t){if(t instanceof Xe&&Pf(t)){for(const r of t.getFilters())if(!Mf(r)&&!Lf(r))return!1;return!0}return!1}(n)}function Ff(n){if(_e(n instanceof Fe||n instanceof Xe),n instanceof Fe)return n;if(n.filters.length===1)return Ff(n.filters[0]);const e=n.filters.map(r=>Ff(r));let t=Xe.create(e,n.op);return t=gh(t),lT(t)?t:(_e(t instanceof Xe),_e(Ha(t)),_e(t.filters.length>1),t.filters.reduce((r,i)=>Nv(r,i)))}function Nv(n,e){let t;return _e(n instanceof Fe||n instanceof Xe),_e(e instanceof Fe||e instanceof Xe),t=n instanceof Fe?e instanceof Fe?function(i,a){return Xe.create([i,a],"and")}(n,e):hb(n,e):e instanceof Fe?hb(e,n):function(i,a){if(_e(i.filters.length>0&&a.filters.length>0),Ha(i)&&Ha(a))return SE(i,a.getFilters());const l=Pf(i)?i:a,c=Pf(i)?a:i,h=l.filters.map(p=>Nv(p,c));return Xe.create(h,"or")}(n,e),gh(t)}function hb(n,e){if(Ha(e))return SE(e,n.getFilters());{const t=e.filters.map(r=>Nv(n,r));return Xe.create(t,"or")}}function gh(n){if(_e(n instanceof Fe||n instanceof Xe),n instanceof Fe)return n;const e=n.getFilters();if(e.length===1)return gh(e[0]);if(TE(n))return n;const t=e.map(i=>gh(i)),r=[];return t.forEach(i=>{i instanceof Fe?r.push(i):i instanceof Xe&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Xe.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.Tn=new Dv}addToCollectionParentIndex(e,t){return this.Tn.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(Vn.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(Vn.min())}updateCollectionGroup(e,t,r){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}}class Dv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new et(Je.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new et(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="IndexedDbIndexManager",xd=new Uint8Array(0);class rA{constructor(e,t){this.databaseId=t,this.In=new Dv,this.En=new fo(r=>ms(r),(r,i)=>Ju(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});const a={collectionId:r,parent:rn(i)};return pb(e).put(a)}return U.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Xw(t),""],!1,!0);return pb(e).G(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Ar(l.parent))}return r})}addFieldIndex(e,t){const r=nu(e),i=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])}}(t);delete i.indexId;const a=r.add(i);if(t.indexState){const l=fa(e);return a.next(c=>{l.put(sb(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=nu(e),i=fa(e),a=pa(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=nu(e),r=pa(e),i=fa(e);return t.J().next(()=>r.J()).next(()=>i.J())}createTargetIndexes(e,t){return U.forEach(this.dn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const a=new db(r).Pn();if(a!=null)return this.addFieldIndex(e,a)}}))}getDocumentsMatchingTarget(e,t){const r=pa(e);let i=!0;const a=new Map;return U.forEach(this.dn(t),l=>this.An(e,l).next(c=>{i&&(i=!!c),a.set(l,c)})).next(()=>{if(i){let l=De();const c=[];return U.forEach(a,(h,p)=>{oe(mb,`Using index ${function(Q){return`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map(re=>`${re.fieldPath}:${re.kind}`).join(",")}`}(h)} to execute ${ms(t)}`);const y=function(Q,re){const ee=Ef(re);if(ee===void 0)return null;for(const se of hh(Q,ee.fieldPath))switch(se.op){case"array-contains-any":return se.value.arrayValue.values||[];case"array-contains":return[se.value]}return null}(p,h),k=function(Q,re){const ee=new Map;for(const se of $i(re))for(const P of hh(Q,se.fieldPath))switch(P.op){case"==":case"in":ee.set(se.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return ee.set(se.fieldPath.canonicalString(),P.value),Array.from(ee.values())}return null}(p,h),_=function(Q,re){const ee=[];let se=!0;for(const P of $i(re)){const z=P.kind===0?W0(Q,P.fieldPath,Q.startAt):G0(Q,P.fieldPath,Q.startAt);ee.push(z.value),se&&(se=z.inclusive)}return new Ba(ee,se)}(p,h),S=function(Q,re){const ee=[];let se=!0;for(const P of $i(re)){const z=P.kind===0?G0(Q,P.fieldPath,Q.endAt):W0(Q,P.fieldPath,Q.endAt);ee.push(z.value),se&&(se=z.inclusive)}return new Ba(ee,se)}(p,h),C=this.Rn(h,p,_),N=this.Rn(h,p,S),M=this.Vn(h,p,k),q=this.mn(h.indexId,y,C,_.inclusive,N,S.inclusive,M);return U.forEach(q,G=>r.H(G,t.limit).next(Q=>{Q.forEach(re=>{const ee=de.fromSegments(re.documentKey);l.has(ee)||(l=l.add(ee),c.push(ee))})}))}).next(()=>c)}return U.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=tA(Xe.create(e.filters,"and")).map(r=>Cf(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,r,i,a,l,c){const h=(t!=null?t.length:1)*Math.max(r.length,a.length),p=h/(t!=null?t.length:1),y=[];for(let k=0;k<h;++k){const _=t?this.fn(t[k/p]):xd,S=this.gn(e,_,r[k%p],i),C=this.pn(e,_,a[k%p],l),N=c.map(M=>this.gn(e,_,M,!0));y.push(...this.createRange(S,C,N))}return y}gn(e,t,r,i){const a=new Zi(e,de.empty(),t,r);return i?a:a.nn()}pn(e,t,r,i){const a=new Zi(e,de.empty(),t,r);return i?a.nn():a}An(e,t){const r=new db(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const c of a)r.un(c)&&(!l||c.fields.length>l.fields.length)&&(l=c);return l})}getIndexType(e,t){let r=2;const i=this.dn(t);return U.forEach(i,a=>this.An(e,a).next(l=>{l?r!==0&&l.fields.length<function(h){let p=new et(ft.comparator),y=!1;for(const k of h.filters)for(const _ of k.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?y=!0:p=p.add(_.field));for(const k of h.orderBy)k.field.isKeyField()||(p=p.add(k.field));return p.size+(y?1:0)}(a)&&(r=1):r=0})).next(()=>function(l){return l.limit!==null}(t)&&i.length>1&&r===2?1:r)}yn(e,t){const r=new tu;for(const i of $i(e)){const a=t.data.field(i.fieldPath);if(a==null)return null;const l=r.tn(i.kind);Ji.xt.At(a,l)}return r.Yt()}fn(e){const t=new tu;return Ji.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const r=new tu;return Ji.xt.At(Ru(this.databaseId,t),r.tn(function(a){const l=$i(a);return l.length===0?0:l[l.length-1].kind}(e))),r.Yt()}Vn(e,t,r){if(r===null)return[];let i=[];i.push(new tu);let a=0;for(const l of $i(e)){const c=r[a++];for(const h of i)if(this.Sn(t,l.fieldPath)&&Vu(c))i=this.bn(i,l,c);else{const p=h.tn(l.kind);Ji.xt.At(c,p)}}return this.Dn(i)}Rn(e,t,r){return this.Vn(e,t,r.position)}Dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Yt();return t}bn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const c of i){const h=new tu;h.seed(c.Yt()),Ji.xt.At(l,h.tn(t.kind)),a.push(h)}return a}Sn(e,t){return!!e.filters.find(r=>r instanceof Fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=nu(e),i=fa(e);return(t?r.G(zf,IDBKeyRange.bound(t,t)):r.G()).next(a=>{const l=[];return U.forEach(a,c=>i.get([c.indexId,this.uid]).next(h=>{l.push(function(y,k){const _=k?new Su(k.sequenceNumber,new Vn(fs(k.readTime),new de(Ar(k.documentKey)),k.largestBatchId)):Su.empty(),S=y.fields.map(([C,N])=>new Od(ft.fromServerFormat(C),N));return new oh(y.indexId,y.collectionGroup,S,_)}(c,h))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:Pe(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=nu(e),a=fa(e);return this.vn(e).next(l=>i.G(zf,IDBKeyRange.bound(t,t)).next(c=>U.forEach(c,h=>a.put(sb(h.indexId,this.uid,l,r)))))}updateIndexEntries(e,t){const r=new Map;return U.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?U.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(c=>(r.set(i.collectionGroup,c),U.forEach(c,h=>this.Cn(e,i,h).next(p=>{const y=this.Fn(a,h);return p.isEqual(y)?U.resolve():this.Mn(e,a,h,p,y)}))))})}xn(e,t,r,i){return pa(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.wn(r,t.key),documentKey:t.key.path.toArray()})}On(e,t,r,i){return pa(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.wn(r,t.key),t.key.path.toArray()])}Cn(e,t,r){const i=pa(e);let a=new et(Ho);return i.Z({index:lE,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,t)])},(l,c)=>{a=a.add(new Zi(r.indexId,t,c.arrayValue,c.directionalValue))}).next(()=>a)}Fn(e,t){let r=new et(Ho);const i=this.yn(t,e);if(i==null)return r;const a=Ef(t);if(a!=null){const l=e.data.field(a.fieldPath);if(Vu(l))for(const c of l.arrayValue.values||[])r=r.add(new Zi(t.indexId,e.key,this.fn(c),i))}else r=r.add(new Zi(t.indexId,e.key,xd,i));return r}Mn(e,t,r,i,a){oe(mb,"Updating index entries for document '%s'",t.key);const l=[];return function(h,p,y,k,_){const S=h.getIterator(),C=p.getIterator();let N=ha(S),M=ha(C);for(;N||M;){let q=!1,G=!1;if(N&&M){const Q=y(N,M);Q<0?G=!0:Q>0&&(q=!0)}else N!=null?G=!0:q=!0;q?(k(M),M=ha(C)):G?(_(N),N=ha(S)):(N=ha(S),M=ha(C))}}(i,a,Ho,c=>{l.push(this.xn(e,t,r,c))},c=>{l.push(this.On(e,t,r,c))}),U.waitFor(l)}vn(e){let t=1;return fa(e).Z({index:aE,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,c)=>Ho(l,c)).filter((l,c,h)=>!c||Ho(l,h[c-1])!==0);const i=[];i.push(e);for(const l of r){const c=Ho(l,e),h=Ho(l,t);if(c===0)i[0]=e.nn();else if(c>0&&h<0)i.push(l),i.push(l.nn());else if(h>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.Nn(i[l],i[l+1]))return[];const c=[i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,xd,[]],h=[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,xd,[]];a.push(IDBKeyRange.bound(c,h))}return a}Nn(e,t){return Ho(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(fb)}getMinOffset(e,t){return U.mapArray(this.dn(t),r=>this.An(e,r).next(i=>i||ye())).next(fb)}}function pb(n){return Nt(n,Pu)}function pa(n){return Nt(n,uh)}function nu(n){return Nt(n,_v)}function fa(n){return Nt(n,lh)}function fb(n){_e(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;yv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Vn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},uT=41943040;class tn{static withCacheSize(e){return new tn(e,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(n,e,t){const r=n.store(pr),i=n.store(Da),a=[],l=IDBKeyRange.only(t.batchId);let c=0;const h=r.Z({range:l},(y,k,_)=>(c++,_.delete()));a.push(h.next(()=>{_e(c===1)}));const p=[];for(const y of t.mutations){const k=oE(e,y.key.path,t.batchId);a.push(i.delete(k)),p.push(y.key)}return U.waitFor(a).next(()=>p)}function yh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ye();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(uT,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);class Jh{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Bn={}}static It(e,t,r,i){_e(e.uid!=="");const a=e.isAuthenticated()?e.uid:"";return new Jh(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ko(e).Z({index:Yi,range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Ea(e),l=Ko(e);return l.add({}).next(c=>{_e(typeof c=="number");const h=new Pv(c,t,r,i),p=function(S,C,N){const M=N.baseMutations.map(G=>fh(S.Tt,G)),q=N.mutations.map(G=>fh(S.Tt,G));return{userId:C,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:M,mutations:q}}(this.serializer,this.userId,h),y=[];let k=new et((_,S)=>Pe(_.canonicalString(),S.canonicalString()));for(const _ of i){const S=oE(this.userId,_.key.path,c);k=k.add(_.key.path.popLast()),y.push(l.put(p)),y.push(a.put(S,CP))}return k.forEach(_=>{y.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Bn[c]=h.keys()}),U.waitFor(y).next(()=>h)})}lookupMutationBatch(e,t){return Ko(e).get(t).next(r=>r?(_e(r.userId===this.userId),Qi(this.serializer,r)):null)}Ln(e,t){return this.Bn[t]?U.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Bn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Ko(e).Z({index:Yi,range:i},(l,c,h)=>{c.userId===this.userId&&(_e(c.batchId>=r),a=Qi(this.serializer,c)),h.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=rs;return Ko(e).Z({index:Yi,range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,rs],[this.userId,Number.POSITIVE_INFINITY]);return Ko(e).G(Yi,t).next(r=>r.map(i=>Qi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Md(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Ea(e).Z({range:i},(l,c,h)=>{const[p,y,k]=l,_=Ar(y);if(p===this.userId&&t.path.isEqual(_))return Ko(e).get(k).next(S=>{if(!S)throw ye();_e(S.userId===this.userId),a.push(Qi(this.serializer,S))});h.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new et(Pe);const i=[];return t.forEach(a=>{const l=Md(this.userId,a.path),c=IDBKeyRange.lowerBound(l),h=Ea(e).Z({range:c},(p,y,k)=>{const[_,S,C]=p,N=Ar(S);_===this.userId&&a.path.isEqual(N)?r=r.add(C):k.done()});i.push(h)}),U.waitFor(i).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Md(this.userId,r),l=IDBKeyRange.lowerBound(a);let c=new et(Pe);return Ea(e).Z({range:l},(h,p,y)=>{const[k,_,S]=h,C=Ar(_);k===this.userId&&r.isPrefixOf(C)?C.length===i&&(c=c.add(S)):y.done()}).next(()=>this.kn(e,c))}kn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Ko(e).get(a).next(l=>{if(l===null)throw ye();_e(l.userId===this.userId),r.push(Qi(this.serializer,l))}))}),U.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return cT(e.ue,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),U.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return U.resolve();const r=IDBKeyRange.lowerBound(function(l){return[l]}(this.userId)),i=[];return Ea(e).Z({range:r},(a,l,c)=>{if(a[0]===this.userId){const h=Ar(a[1]);i.push(h)}else c.done()}).next(()=>{_e(i.length===0)})})}containsKey(e,t){return dT(e,this.userId,t)}Qn(e){return hT(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:rs,lastStreamToken:""})}}function dT(n,e,t){const r=Md(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return Ea(n).Z({range:a,Y:!0},(c,h,p)=>{const[y,k,_]=c;y===e&&k===i&&(l=!0),p.done()}).next(()=>l)}function Ko(n){return Nt(n,pr)}function Ea(n){return Nt(n,Da)}function hT(n){return Nt(n,ju)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new vs(0)}static Kn(){return new vs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{const r=new vs(t.highestTargetId);return t.highestTargetId=r.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>Se.fromTimestamp(new gt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Wn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Gn(e,i)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(t,r),this.Gn(e,r))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>va(e).delete(t.targetId)).next(()=>this.Wn(e)).next(r=>(_e(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return va(e).Z((l,c)=>{const h=uu(c);h.sequenceNumber<=t&&r.get(h.targetId)===null&&(i++,a.push(this.removeTargetData(e,h)))}).next(()=>U.waitFor(a)).next(()=>i)}forEachTarget(e,t){return va(e).Z((r,i)=>{const a=uu(i);t(a)})}Wn(e){return gb(e).get(ah).next(t=>(_e(t!==null),t))}Gn(e,t){return gb(e).put(ah,t)}zn(e,t){return va(e).put(iT(this.serializer,t))}jn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ms(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return va(e).Z({range:i,index:sE},(l,c,h)=>{const p=uu(c);Ju(t,p.target)&&(a=p,h.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=qo(e);return t.forEach(l=>{const c=rn(l.path);i.push(a.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,l))}),U.waitFor(i)}removeMatchingKeys(e,t,r){const i=qo(e);return U.forEach(t,a=>{const l=rn(a.path);return U.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=qo(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=qo(e);let a=De();return i.Z({range:r,Y:!0},(l,c,h)=>{const p=Ar(l[1]),y=new de(p);a=a.add(y)}).next(()=>a)}containsKey(e,t){const r=rn(t.path),i=IDBKeyRange.bound([r],[Xw(r)],!1,!0);let a=0;return qo(e).Z({index:bv,Y:!0,range:i},([l,c],h,p)=>{l!==0&&(a++,p.done())}).next(()=>a>0)}lt(e,t){return va(e).get(t).next(r=>r?uu(r):null)}}function va(n){return Nt(n,Oa)}function gb(n){return Nt(n,os)}function qo(n){return Nt(n,Ma)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="LruGarbageCollector",iA=1048576;function kb([n,e],[t,r]){const i=Pe(n,t);return i===0?Pe(e,r):i}class sA{constructor(e){this.Hn=e,this.buffer=new et(kb),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();kb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mT{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){oe(yb,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){di(t)?oe(yb,"Ignoring IndexedDB error during garbage collection: ",t):await ks(t)}await this.er(3e5)})}}class aA{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return U.resolve(Qn.ae);const r=new sA(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(vb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vb):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,a,l,c,h,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(k=>(k>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),i=this.params.maximumSequenceNumbersToCollect):i=k,l=Date.now(),this.nthSequenceNumber(e,i))).next(k=>(r=k,c=Date.now(),this.removeTargets(e,r,t))).next(k=>(a=k,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(k=>(p=Date.now(),ka()<=Le.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${i} in `+(c-l)+`ms
	Removed ${a} targets in `+(h-c)+`ms
	Removed ${k} documents in `+(p-h)+`ms
Total Duration: ${p-y}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:k})))}}function pT(n,e){return new aA(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,t){this.db=e,this.garbageCollector=pT(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(r,i)=>t(i))}addReference(e,t,r){return jd(e,r)}removeReference(e,t,r){return jd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return jd(e,t)}ar(e,t){return function(i,a){let l=!1;return hT(i).X(c=>dT(i,c,a).next(h=>(h&&(l=!0),U.resolve(!h)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this._r(e,(l,c)=>{if(c<=t){const h=this.ar(e,l).next(p=>{if(!p)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Se.min()),qo(e).delete(function(k){return[0,rn(k.path)]}(l))))});i.push(h)}}).next(()=>U.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return jd(e,t)}_r(e,t){const r=qo(e);let i,a=Qn.ae;return r.Z({index:bv},([l,c],{path:h,sequenceNumber:p})=>{l===0?(a!==Qn.ae&&t(new de(Ar(i)),a),a=p,i=h):a=Qn.ae}).next(()=>{a!==Qn.ae&&t(new de(Ar(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function jd(n,e){return qo(n).put(function(r,i){return{targetId:0,path:rn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(){this.changes=new fo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?U.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Bi(e).put(r)}removeEntry(e,t,r){return Bi(e).delete(function(a,l){const c=a.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],vh(l),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.ur(e,r)))}getEntry(e,t){let r=bt.newInvalidDocument(t);return Bi(e).Z({index:Ld,range:IDBKeyRange.only(ru(t))},(i,a)=>{r=this.cr(t,a)}).next(()=>r)}lr(e,t){let r={size:0,document:bt.newInvalidDocument(t)};return Bi(e).Z({index:Ld,range:IDBKeyRange.only(ru(t))},(i,a)=>{r={document:this.cr(t,a),size:yh(a)}}).next(()=>r)}getEntries(e,t){let r=Cn();return this.hr(e,t,(i,a)=>{const l=this.cr(i,a);r=r.insert(i,l)}).next(()=>r)}Pr(e,t){let r=Cn(),i=new ht(de.comparator);return this.hr(e,t,(a,l)=>{const c=this.cr(a,l);r=r.insert(a,c),i=i.insert(a,yh(l))}).next(()=>({documents:r,Tr:i}))}hr(e,t,r){if(t.isEmpty())return U.resolve();let i=new et(wb);t.forEach(h=>i=i.add(h));const a=IDBKeyRange.bound(ru(i.first()),ru(i.last())),l=i.getIterator();let c=l.getNext();return Bi(e).Z({index:Ld,range:a},(h,p,y)=>{const k=de.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;c&&wb(c,k)<0;)r(c,null),c=l.getNext();c&&c.isEqual(k)&&(r(c,p),c=l.hasNext()?l.getNext():null),c?y.W(ru(c)):y.done()}).next(()=>{for(;c;)r(c,null),c=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,a){const l=t.path,c=[l.popLast().toArray(),l.lastSegment(),vh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bi(e).G(IDBKeyRange.bound(c,h,!0)).next(p=>{a==null||a.incrementDocumentReadCount(p.length);let y=Cn();for(const k of p){const _=this.cr(de.fromSegments(k.prefixPath.concat(k.collectionGroup,k.documentId)),k);_.isFoundDocument()&&(Zu(t,_)||i.has(_.key))&&(y=y.insert(_.key,_))}return y})}getAllFromCollectionGroup(e,t,r,i){let a=Cn();const l=_b(t,r),c=_b(t,Vn.max());return Bi(e).Z({index:iE,range:IDBKeyRange.bound(l,c,!0)},(h,p,y)=>{const k=this.cr(de.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);a=a.insert(k.key,k),a.size===i&&y.done()}).next(()=>a)}newChangeBuffer(e){return new cA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return bb(e).get(Tf).next(t=>(_e(!!t),t))}ur(e,t){return bb(e).put(Tf,t)}cr(e,t){if(t){const r=q1(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Se.min())))return r}return bt.newInvalidDocument(e)}}function vT(n){return new uA(n)}class cA extends fT{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new fo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new et((a,l)=>Pe(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const c=this.Er.get(a);if(t.push(this.Ir.removeEntry(e,a,c.readTime)),l.isValidDocument()){const h=ob(this.Ir.serializer,l);i=i.add(a.path.popLast());const p=yh(h);r+=p-c.size,t.push(this.Ir.addEntry(e,a,h))}else if(r-=c.size,this.trackRemovals){const h=ob(this.Ir.serializer,l.convertToNoDocument(Se.min()));t.push(this.Ir.addEntry(e,a,h))}}),i.forEach(a=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Ir.updateMetadata(e,r)),U.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(r=>(this.Er.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:r,Tr:i})=>(i.forEach((a,l)=>{this.Er.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function bb(n){return Nt(n,Iu)}function Bi(n){return Nt(n,sh)}function ru(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _b(n,e){const t=e.documentKey.path.toArray();return[n,vh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function wb(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Pe(t[a],r[a]),i)return i;return i=Pe(t.length,r.length),i||(i=Pe(t[t.length-2],r[r.length-2]),i||Pe(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&yu(r.mutation,i,Jn.empty(),gt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,De()).next(()=>r))}getLocalViewOfDocuments(e,t,r=De()){const i=Cr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=au();return a.forEach((c,h)=>{l=l.insert(c,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Cr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,De()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,r,i){let a=Cn();const l=gu(),c=function(){return gu()}();return t.forEach((h,p)=>{const y=r.get(p.key);i.has(p.key)&&(y===void 0||y.mutation instanceof hi)?a=a.insert(p.key,p):y!==void 0?(l.set(p.key,y.mutation.getFieldMask()),yu(y.mutation,p,y.mutation.getFieldMask(),gt.now())):l.set(p.key,Jn.empty())}),this.recalculateAndSaveOverlays(e,a).next(h=>(h.forEach((p,y)=>l.set(p,y)),t.forEach((p,y)=>{var k;return c.set(p,new dA(y,(k=l.get(p))!==null&&k!==void 0?k:null))}),c))}recalculateAndSaveOverlays(e,t){const r=gu();let i=new ht((l,c)=>l-c),a=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(h=>{const p=t.get(h);if(p===null)return;let y=r.get(h)||Jn.empty();y=c.applyToLocalView(p,y),r.set(h,y);const k=(i.get(c.batchId)||De()).add(h);i=i.insert(c.batchId,k)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),p=h.key,y=h.value,k=NE();y.forEach(_=>{if(!a.has(_)){const S=UE(t.get(_),r.get(_));S!==null&&k.set(_,S),a=a.add(_)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,k))}return U.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(l){return de.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):PE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):U.resolve(Cr());let c=zu,h=a;return l.next(p=>U.forEach(p,(y,k)=>(c<k.largestBatchId&&(c=k.largestBatchId),a.get(y)?U.resolve():this.remoteDocumentCache.getEntry(e,y).next(_=>{h=h.insert(y,_)}))).next(()=>this.populateOverlays(e,p,a)).next(()=>this.computeViews(e,h,p,De())).next(y=>({batchId:c,changes:VE(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new de(t)).next(r=>{let i=au();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let l=au();return this.indexManager.getCollectionParents(e,a).next(c=>U.forEach(c,h=>{const p=function(k,_){return new tl(_,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)}(t,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next(y=>{y.forEach((k,_)=>{l=l.insert(k,_)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i))).next(l=>{a.forEach((h,p)=>{const y=p.getKey();l.get(y)===null&&(l=l.insert(y,bt.newInvalidDocument(y)))});let c=au();return l.forEach((h,p)=>{const y=a.get(h);y!==void 0&&yu(y.mutation,p,Jn.empty(),gt.now()),Zu(t,p)&&(c=c.insert(h,p))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return U.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:dn(i.createTime)}}(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:sT(i.bundledQuery),readTime:dn(i.readTime)}}(t)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(){this.overlays=new ht(de.comparator),this.Rr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Cr();return U.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Et(e,t,a)}),U.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Rr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Rr.delete(r)),U.resolve()}getOverlaysForCollection(e,t,r){const i=Cr(),a=t.length+1,l=new de(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,p=h.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&h.largestBatchId>r&&i.set(h.getKey(),h)}return U.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new ht((p,y)=>p-y);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let y=a.get(p.largestBatchId);y===null&&(y=Cr(),a=a.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const c=Cr(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((p,y)=>c.set(p,y)),!(c.size()>=i)););return U.resolve(c)}Et(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Cv(t,r));let a=this.Rr.get(t);a===void 0&&(a=De(),this.Rr.set(t,a)),this.Rr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(){this.Vr=new et(Ft.mr),this.gr=new et(Ft.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new Ft(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new Ft(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new de(new Je([])),r=new Ft(t,e),i=new Ft(t,e+1),a=[];return this.gr.forEachInRange([r,i],l=>{this.wr(l),a.push(l.key)}),a}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new de(new Je([])),r=new Ft(t,e),i=new Ft(t,e+1);let a=De();return this.gr.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Ft(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ft{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return de.comparator(e.key,t.key)||Pe(e.Cr,t.Cr)}static pr(e,t){return Pe(e.Cr,t.Cr)||de.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new et(Ft.mr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Pv(a,t,r,i);this.mutationQueue.push(l);for(const c of i)this.Mr=this.Mr.add(new Ft(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(l)}lookupMutationBatch(e,t){return U.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Nr(r),a=i<0?0:i;return U.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?rs:this.Fr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ft(t,0),i=new Ft(t,Number.POSITIVE_INFINITY),a=[];return this.Mr.forEachInRange([r,i],l=>{const c=this.Or(l.Cr);a.push(c)}),U.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new et(Pe);return t.forEach(i=>{const a=new Ft(i,0),l=new Ft(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([a,l],c=>{r=r.add(c.Cr)})}),U.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;de.isDocumentKey(a)||(a=a.child(""));const l=new Ft(new de(a),0);let c=new et(Pe);return this.Mr.forEachWhile(h=>{const p=h.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(c=c.add(h.Cr)),!0)},l),U.resolve(this.Br(c))}Br(e){const t=[];return e.forEach(r=>{const i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){_e(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return U.forEach(t.mutations,i=>{const a=new Ft(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new Ft(t,0),i=this.Mr.firstAfterOrEqual(r);return U.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.kr=e,this.docs=function(){return new ht(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return U.resolve(r?r.document.mutableCopy():bt.newInvalidDocument(t))}getEntries(e,t){let r=Cn();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():bt.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Cn();const l=t.path,c=new de(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:p,value:{document:y}}=h.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||yv(eE(y),r)<=0||(i.has(y.key)||Zu(t,y))&&(a=a.insert(y.key,y.mutableCopy()))}return U.resolve(a)}getAllFromCollectionGroup(e,t,r,i){ye()}qr(e,t){return U.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new gA(this)}getSize(e){return U.resolve(this.size)}}class gA extends fT{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),U.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e){this.persistence=e,this.Qr=new fo(t=>ms(t),Ju),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Ov,this.targetCount=0,this.Kr=vs.Un()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),U.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new vs(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.zn(t),U.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Qr.forEach((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Qr.delete(l),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),U.waitFor(a).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return U.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),U.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),U.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),U.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return U.resolve(r)}containsKey(e,t){return U.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Qn(0),this.zr=!1,this.zr=!0,this.jr=new pA,this.referenceDelegate=e(this),this.Hr=new yA(this),this.indexManager=new nA,this.remoteDocumentCache=function(i){return new vA(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new oT(t),this.Yr=new hA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new fA(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){oe("MemoryPersistence","Starting transaction:",e);const i=new kA(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(a=>this.referenceDelegate.Xr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}ei(e,t){return U.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class kA extends nE{constructor(e){super(),this.currentSequenceNumber=e}}class Zh{constructor(e){this.persistence=e,this.ti=new Ov,this.ni=null}static ri(e){return new Zh(e)}get ii(){if(this.ni)return this.ni;throw ye()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),U.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),U.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(i=>this.ii.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.ii.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.ii,r=>{const i=de.fromPath(r);return this.si(e,i).next(a=>{a||t.removeEntry(i,Se.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return U.or([()=>U.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class kh{constructor(e,t){this.persistence=e,this.oi=new fo(r=>rn(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=pT(this,t)}static ri(e,t){return new kh(e,t)}Zr(){}Xr(e){return U.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return U.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(a=>a?U.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.qr(e,l=>this.ar(e,l,t).next(c=>{c||(r++,a.removeEntry(l,Se.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),U.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),U.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ud(e.data.value)),t}ar(e,t,r){return U.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.oi.get(t);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.serializer=e}B(e,t,r,i){const a=new Oh("createOrUpgrade",t);r<1&&i>=1&&(function(h){h.createObjectStore(Qu)}(e),function(h){h.createObjectStore(ju,{keyPath:AP}),h.createObjectStore(pr,{keyPath:V0,autoIncrement:!0}).createIndex(Yi,N0,{unique:!0}),h.createObjectStore(Da)}(e),Eb(e),function(h){h.createObjectStore(Wi)}(e));let l=U.resolve();return r<3&&i>=3&&(r!==0&&(function(h){h.deleteObjectStore(Ma),h.deleteObjectStore(Oa),h.deleteObjectStore(os)}(e),Eb(e)),l=l.next(()=>function(h){const p=h.store(os),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return p.put(ah,y)}(a))),r<4&&i>=4&&(r!==0&&(l=l.next(()=>function(h,p){return p.store(pr).G().next(k=>{h.deleteObjectStore(pr),h.createObjectStore(pr,{keyPath:V0,autoIncrement:!0}).createIndex(Yi,N0,{unique:!0});const _=p.store(pr),S=k.map(C=>_.put(C));return U.waitFor(S)})}(e,a))),l=l.next(()=>{(function(h){h.createObjectStore(La,{keyPath:FP})})(e)})),r<5&&i>=5&&(l=l.next(()=>this._i(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore(Iu)}(e),this.ai(a)))),r<7&&i>=7&&(l=l.next(()=>this.ui(a))),r<8&&i>=8&&(l=l.next(()=>this.ci(e,a))),r<9&&i>=9&&(l=l.next(()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(l=l.next(()=>this.li(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore(Lh,{keyPath:UP})})(e),function(h){h.createObjectStore(Fh,{keyPath:BP})}(e)})),r<12&&i>=12&&(l=l.next(()=>{(function(h){const p=h.createObjectStore(Uh,{keyPath:QP});p.createIndex(Sf,JP,{unique:!1}),p.createIndex(uE,ZP,{unique:!1})})(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const p=h.createObjectStore(sh,{keyPath:RP});p.createIndex(Ld,VP),p.createIndex(iE,NP)}(e)).next(()=>this.hi(e,a)).next(()=>e.deleteObjectStore(Wi))),r<14&&i>=14&&(l=l.next(()=>this.Pi(e,a))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore(_v,{keyPath:HP,autoIncrement:!0}).createIndex(zf,KP,{unique:!1}),h.createObjectStore(lh,{keyPath:$P}).createIndex(aE,WP,{unique:!1}),h.createObjectStore(uh,{keyPath:GP}).createIndex(lE,qP,{unique:!1})}(e))),r<16&&i>=16&&(l=l.next(()=>{t.objectStore(lh).clear()}).next(()=>{t.objectStore(uh).clear()})),r<17&&i>=17&&(l=l.next(()=>{(function(h){h.createObjectStore(wv,{keyPath:YP})})(e)})),l}ai(e){let t=0;return e.store(Wi).Z((r,i)=>{t+=yh(i)}).next(()=>{const r={byteSize:t};return e.store(Iu).put(Tf,r)})}_i(e){const t=e.store(ju),r=e.store(pr);return t.G().next(i=>U.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,rs],[a.userId,a.lastAcknowledgedBatchId]);return r.G(Yi,l).next(c=>U.forEach(c,h=>{_e(h.userId===a.userId);const p=Qi(this.serializer,h);return cT(e,a.userId,p).next(()=>{})}))}))}ui(e){const t=e.store(Ma),r=e.store(Wi);return e.store(os).get(ah).next(i=>{const a=[];return r.Z((l,c)=>{const h=new Je(l),p=function(k){return[0,rn(k)]}(h);a.push(t.get(p).next(y=>y?U.resolve():(k=>t.put({targetId:0,path:rn(k),sequenceNumber:i.highestListenSequenceNumber}))(h)))}).next(()=>U.waitFor(a))})}ci(e,t){e.createObjectStore(Pu,{keyPath:LP});const r=t.store(Pu),i=new Dv,a=l=>{if(i.add(l)){const c=l.lastSegment(),h=l.popLast();return r.put({collectionId:c,parent:rn(h)})}};return t.store(Wi).Z({Y:!0},(l,c)=>{const h=new Je(l);return a(h.popLast())}).next(()=>t.store(Da).Z({Y:!0},([l,c,h],p)=>{const y=Ar(c);return a(y.popLast())}))}li(e){const t=e.store(Oa);return t.Z((r,i)=>{const a=uu(i),l=iT(this.serializer,a);return t.put(l)})}hi(e,t){const r=t.store(Wi),i=[];return r.Z((a,l)=>{const c=t.store(sh),h=function(k){return k.document?new de(Je.fromString(k.document.name).popFirst(5)):k.noDocument?de.fromSegments(k.noDocument.path):k.unknownDocument?de.fromSegments(k.unknownDocument.path):ye()}(l).path.toArray(),p={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(c.put(p))}).next(()=>U.waitFor(i))}Pi(e,t){const r=t.store(pr),i=vT(this.serializer),a=new Mv(Zh.ri,this.serializer.Tt);return r.G().next(l=>{const c=new Map;return l.forEach(h=>{var p;let y=(p=c.get(h.userId))!==null&&p!==void 0?p:De();Qi(this.serializer,h).keys().forEach(k=>y=y.add(k)),c.set(h.userId,y)}),U.forEach(c,(h,p)=>{const y=new Gt(p),k=Qh.It(this.serializer,y),_=a.getIndexManager(y),S=Jh.It(y,this.serializer,_,a.referenceDelegate);return new gT(i,S,k,_).recalculateAndSaveOverlaysForDocumentKeys(new xf(t,Qn.ae),h).next()})})}}function Eb(n){n.createObjectStore(Ma,{keyPath:OP}).createIndex(bv,MP,{unique:!0}),n.createObjectStore(Oa,{keyPath:"targetId"}).createIndex(sE,DP,{unique:!0}),n.createObjectStore(os)}const $o="IndexedDbPersistence",qp=18e5,Qp=5e3,Jp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",_A="main";class Lv{constructor(e,t,r,i,a,l,c,h,p,y,k=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ti=a,this.window=l,this.document=c,this.Ii=p,this.Ei=y,this.di=k,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=_=>Promise.resolve(),!Lv.D())throw new ue(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lA(this,i),this.gi=t+_A,this.serializer=new oT(h),this.pi=new ri(this.gi,this.di,new bA(this.serializer)),this.jr=new J1,this.Hr=new oA(this.referenceDelegate,this.serializer),this.remoteDocumentCache=vT(this.serializer),this.Yr=new Q1,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,y===!1&&un($o,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ue(J.FAILED_PRECONDITION,Jp);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new Qn(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Id(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(di(e))return oe($o,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return oe($o,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return ou(e).get(da).next(t=>U.resolve(this.Ni(t)))}Bi(e){return Id(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,qp)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Nt(t,La);return r.G().next(i=>{const a=this.qi(i,qp),l=i.filter(c=>a.indexOf(c)===-1);return U.forEach(l,c=>r.delete(c.clientId)).next(()=>l)})}).catch(()=>[]);if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?U.resolve(!0):ou(e).get(da).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Qp)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new ue(J.FAILED_PRECONDITION,Jp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Id(e).G().next(r=>this.qi(r,Qp).find(i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,l=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(a||l&&c)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&oe($o,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[Qu,La],e=>{const t=new xf(e,Qn.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()}qi(e,t){return e.filter(r=>this.ki(r.updateTimeMs,t)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>Id(e).G().next(t=>this.qi(t,qp).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return Jh.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new rA(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return Qh.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,r){oe($o,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",a=function(h){return h===17?t1:h===16?e1:h===15?Ev:h===14?hE:h===13?dE:h===12?XP:h===11?cE:void ye()}(this.di);let l;return this.pi.runTransaction(e,i,a,c=>(l=new xf(c,this.Gr?this.Gr.next():Qn.ae),t==="readwrite-primary"?this.Fi(l).next(h=>!!h||this.Mi(l)).next(h=>{if(!h)throw un(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new ue(J.FAILED_PRECONDITION,tE);return r(l)}).next(h=>this.Oi(l).next(()=>h)):this.ji(l).next(()=>r(l)))).then(c=>(l.raiseOnCommittedEvent(),c))}ji(e){return ou(e).get(da).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Qp)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ue(J.FAILED_PRECONDITION,Jp)})}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ou(e).put(da,t)}static D(){return ri.D()}xi(e){const t=ou(e);return t.get(da).next(r=>this.Ni(r)?(oe($o,"Releasing primary lease."),t.delete(da)):U.resolve())}ki(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(un(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ui();const t=/(?:Version|Mobile)\/1[456]/;Dw()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const r=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return oe($o,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return un($o,"Failed to get zombied client id.",r),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){un("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ou(n){return Nt(n,Qu)}function Id(n){return Nt(n,La)}function wA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=De(),i=De();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Fv(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return Dw()?8:rE(Vt())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.rs(e,t).next(l=>{a.result=l}).next(()=>{if(!a.result)return this.ss(e,t,i,r).next(l=>{a.result=l})}).next(()=>{if(a.result)return;const l=new EA;return this._s(e,t,l).next(c=>{if(a.result=c,this.Xi)return this.us(e,t,l,c.size)})}).next(()=>a.result)}us(e,t,r,i){return r.documentReadCount<this.es?(ka()<=Le.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",ba(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),U.resolve()):(ka()<=Le.DEBUG&&oe("QueryEngine","Query:",ba(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(ka()<=Le.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",ba(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zn(t))):U.resolve())}rs(e,t){if(q0(t))return U.resolve(null);let r=Zn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=mh(t,null,"F"),r=Zn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=De(...a);return this.ns.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(h=>{const p=this.cs(t,c);return this.ls(t,p,l,h.readTime)?this.rs(e,mh(t,null,"F")):this.hs(e,p,t,h)}))})))}ss(e,t,r,i){return q0(t)||i.isEqual(Se.min())?U.resolve(null):this.ns.getDocuments(e,r).next(a=>{const l=this.cs(t,a);return this.ls(t,l,r,i)?U.resolve(null):(ka()<=Le.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ba(t)),this.hs(e,l,t,TP(i,zu)).next(c=>c))})}cs(e,t){let r=new et(CE(e));return t.forEach((i,a)=>{Zu(e,a)&&(r=r.add(a))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}_s(e,t,r){return ka()<=Le.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",ba(t)),this.ns.getDocumentsMatchingQuery(e,t,Vn.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="LocalStore",TA=3e8;class zA{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new ht(Pe),this.Is=new fo(a=>ms(a),Ju),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gT(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function kT(n,e,t,r){return new zA(n,e,t,r)}async function bT(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],c=[];let h=De();for(const p of i){l.push(p.batchId);for(const y of p.mutations)h=h.add(y.key)}for(const p of a){c.push(p.batchId);for(const y of p.mutations)h=h.add(y.key)}return t.localDocuments.getDocuments(r,h).next(p=>({Rs:p,removedBatchIds:l,addedBatchIds:c}))})})}function SA(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.ds.newChangeBuffer({trackRemovals:!0});return function(c,h,p,y){const k=p.batch,_=k.keys();let S=U.resolve();return _.forEach(C=>{S=S.next(()=>y.getEntry(h,C)).next(N=>{const M=p.docVersions.get(C);_e(M!==null),N.version.compareTo(M)<0&&(k.applyToRemoteDocument(N,p),N.isValidDocument()&&(N.setReadTime(p.commitVersion),y.addEntry(N)))})}),S.next(()=>c.mutationQueue.removeMutationBatch(h,k))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=De();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(h=h.add(c.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function _T(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function xA(n,e){const t=Re(n),r=e.snapshotVersion;let i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;const c=[];e.targetChanges.forEach((y,k)=>{const _=i.get(k);if(!_)return;c.push(t.Hr.removeMatchingKeys(a,y.removedDocuments,k).next(()=>t.Hr.addMatchingKeys(a,y.addedDocuments,k)));let S=_.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(k)!==null?S=S.withResumeToken(jt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):y.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(y.resumeToken,r)),i=i.insert(k,S),function(N,M,q){return N.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=TA?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(_,S,y)&&c.push(t.Hr.updateTargetData(a,S))});let h=Cn(),p=De();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))}),c.push(jA(a,l,e.documentUpdates).next(y=>{h=y.Vs,p=y.fs})),!r.isEqual(Se.min())){const y=t.Hr.getLastRemoteSnapshotVersion(a).next(k=>t.Hr.setTargetsMetadata(a,a.currentSequenceNumber,r));c.push(y)}return U.waitFor(c).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,h,p)).next(()=>h)}).then(a=>(t.Ts=i,a))}function jA(n,e,t){let r=De(),i=De();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Cn();return t.forEach((c,h)=>{const p=a.get(c);h.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(Se.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):oe(Uv,"Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",h.version)}),{Vs:l,fs:i}})}function IA(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=rs),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function PA(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(a=>a?(i=a,U.resolve(i)):t.Hr.allocateTargetId(r).next(l=>(i=new no(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function Uf(n,e,t){const r=Re(n),i=r.Ts.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!di(l))throw l;oe(Uv,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)}function Tb(n,e,t){const r=Re(n);let i=Se.min(),a=De();return r.persistence.runTransaction("Execute query","readwrite",l=>function(h,p,y){const k=Re(h),_=k.Is.get(y);return _!==void 0?U.resolve(k.Ts.get(_)):k.Hr.getTargetData(p,y)}(r,l,Zn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(l,c.targetId).next(h=>{a=h})}).next(()=>r.Ps.getDocumentsMatchingQuery(l,e,t?i:Se.min(),t?a:De())).next(c=>(AA(r,v1(e),c),{documents:c,gs:a})))}function AA(n,e,t){let r=n.Es.get(e)||Se.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Es.set(e,r)}class zb{constructor(){this.activeTargetIds=w1()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wT{constructor(){this.ho=new zb,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new zb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb="ConnectivityMonitor";class xb{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){oe(Sb,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){oe(Sb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pd=null;function Bf(){return Pd===null?Pd=function(){return 268435456+Math.round(2147483648*Math.random())}():Pd++,"0x"+Pd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="RestConnection",RA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class VA{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===ch?`project_id=${r}`:`project_id=${r}&database_id=${i}`}So(e,t,r,i,a){const l=Bf(),c=this.bo(e,t.toUriEncodedString());oe(Zp,`Sending RPC '${e}' ${l}:`,c,r);const h={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(h,i,a),this.vo(e,c,h,r).then(p=>(oe(Zp,`Received RPC '${e}' ${l}: `,p),p),p=>{throw ds(Zp,`RPC '${e}' ${l} failed with error: `,p,"url: ",c,"request:",r),p})}Co(e,t,r,i,a,l){return this.So(e,t,r,i,a)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+el}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}bo(e,t){const r=RA[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class DA extends VA{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){const a=Bf();return new Promise((l,c)=>{const h=new $w;h.setWithCredentials(!0),h.listenOnce(Ww.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Dd.NO_ERROR:const y=h.getResponseJson();oe(Xt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(y)),l(y);break;case Dd.TIMEOUT:oe(Xt,`RPC '${e}' ${a} timed out`),c(new ue(J.DEADLINE_EXCEEDED,"Request time out"));break;case Dd.HTTP_ERROR:const k=h.getStatus();if(oe(Xt,`RPC '${e}' ${a} failed with status:`,k,"response text:",h.getResponseText()),k>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const S=_==null?void 0:_.error;if(S&&S.status&&S.message){const C=function(M){const q=M.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(q)>=0?q:J.UNKNOWN}(S.status);c(new ue(C,S.message))}else c(new ue(J.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new ue(J.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{oe(Xt,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(i);oe(Xt,`RPC '${e}' ${a} sending request:`,i),h.send(t,"POST",p,r,15)})}Wo(e,t,r){const i=Bf(),a=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Qw(),c=qw(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(h.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Do(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const y=a.join("");oe(Xt,`Creating RPC '${e}' stream ${i}: ${y}`,h);const k=l.createWebChannel(y,h);let _=!1,S=!1;const C=new NA({Fo:M=>{S?oe(Xt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(_||(oe(Xt,`Opening RPC '${e}' stream ${i} transport.`),k.open(),_=!0),oe(Xt,`RPC '${e}' stream ${i} sending:`,M),k.send(M))},Mo:()=>k.close()}),N=(M,q,G)=>{M.listen(q,Q=>{try{G(Q)}catch(re){setTimeout(()=>{throw re},0)}})};return N(k,su.EventType.OPEN,()=>{S||(oe(Xt,`RPC '${e}' stream ${i} transport opened.`),C.Qo())}),N(k,su.EventType.CLOSE,()=>{S||(S=!0,oe(Xt,`RPC '${e}' stream ${i} transport closed`),C.Uo())}),N(k,su.EventType.ERROR,M=>{S||(S=!0,ds(Xt,`RPC '${e}' stream ${i} transport errored:`,M),C.Uo(new ue(J.UNAVAILABLE,"The operation could not be completed")))}),N(k,su.EventType.MESSAGE,M=>{var q;if(!S){const G=M.data[0];_e(!!G);const Q=G,re=(Q==null?void 0:Q.error)||((q=Q[0])===null||q===void 0?void 0:q.error);if(re){oe(Xt,`RPC '${e}' stream ${i} received error:`,re);const ee=re.status;let se=function(j){const A=xt[j];if(A!==void 0)return KE(A)}(ee),P=re.message;se===void 0&&(se=J.INTERNAL,P="Unknown error status: "+ee+" with message "+re.message),S=!0,C.Uo(new ue(se,P)),k.close()}else oe(Xt,`RPC '${e}' stream ${i} received:`,G),C.Ko(G)}}),N(c,Gw.STAT_EVENT,M=>{M.stat===_f.PROXY?oe(Xt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===_f.NOPROXY&&oe(Xt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.$o()},0),C}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(){return typeof window<"u"?window:null}function $d(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(n){return new M1(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=a,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="PersistentStream";class TT{constructor(e,t,r,i,a,l,c,h){this.Ti=e,this.n_=r,this.r_=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new ET(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(un(t.toString()),un("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{const i=new ue(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return oe(jb,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(oe(jb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class MA extends TT{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=U1(this.serializer,e),r=function(a){if(!("targetChange"in a))return Se.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Se.min():l.readTime?dn(l.readTime):Se.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=Df(this.serializer),t.addTarget=function(a,l){let c;const h=l.target;if(c=dh(h)?{documents:YE(a,h)}:{query:XE(a,h).ht},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=GE(a,l.resumeToken);const p=Vf(a,l.expectedCount);p!==null&&(c.expectedCount=p)}else if(l.snapshotVersion.compareTo(Se.min())>0){c.readTime=Wa(a,l.snapshotVersion.toTimestamp());const p=Vf(a,l.expectedCount);p!==null&&(c.expectedCount=p)}return c}(this.serializer,e);const r=H1(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=Df(this.serializer),t.removeTarget=e,this.I_(t)}}class LA extends TT{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=B1(e.writeResults,e.commitTime),r=dn(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=Df(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>fh(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{}class UA extends FA{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new ue(J.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.So(e,Nf(t,r),i,a,l)).catch(a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ue(J.UNKNOWN,a.toString())})}Co(e,t,r,i,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Co(e,Nf(t,r),i,l,c,a)).catch(l=>{throw l.name==="FirebaseError"?(l.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ue(J.UNKNOWN,l.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class BA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(un(t),this.N_=!1):oe("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="RemoteStore";class HA{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=a,this.z_.To(l=>{r.enqueueAndForget(async()=>{_s(this)&&(oe(gs,"Restarting streams for network reachability change."),await async function(h){const p=Re(h);p.W_.add(4),await Xu(p),p.j_.set("Unknown"),p.W_.delete(4),await Xh(p)}(this))})}),this.j_=new BA(r,i)}}async function Xh(n){if(_s(n))for(const e of n.G_)await e(!0)}async function Xu(n){for(const e of n.G_)await e(!1)}function zT(n,e){const t=Re(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),$v(t)?Kv(t):rl(t).c_()&&Hv(t,e))}function Bv(n,e){const t=Re(n),r=rl(t);t.K_.delete(e),r.c_()&&ST(t,e),t.K_.size===0&&(r.c_()?r.P_():_s(t)&&t.j_.set("Unknown"))}function Hv(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}rl(n).y_(e)}function ST(n,e){n.H_.Ne(e),rl(n).w_(e)}function Kv(n){n.H_=new V1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),rl(n).start(),n.j_.B_()}function $v(n){return _s(n)&&!rl(n).u_()&&n.K_.size>0}function _s(n){return Re(n).W_.size===0}function xT(n){n.H_=void 0}async function KA(n){n.j_.set("Online")}async function $A(n){n.K_.forEach((e,t)=>{Hv(n,e)})}async function WA(n,e){xT(n),$v(n)?(n.j_.q_(e),Kv(n)):n.j_.set("Unknown")}async function GA(n,e,t){if(n.j_.set("Online"),e instanceof WE&&e.state===2&&e.cause)try{await async function(i,a){const l=a.cause;for(const c of a.targetIds)i.K_.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i.K_.delete(c),i.H_.removeTarget(c))}(n,e)}catch(r){oe(gs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bh(n,r)}else if(e instanceof Kd?n.H_.We(e):e instanceof $E?n.H_.Ze(e):n.H_.je(e),!t.isEqual(Se.min()))try{const r=await _T(n.localStore);t.compareTo(r)>=0&&await function(a,l){const c=a.H_.ot(l);return c.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const y=a.K_.get(p);y&&a.K_.set(p,y.withResumeToken(h.resumeToken,l))}}),c.targetMismatches.forEach((h,p)=>{const y=a.K_.get(h);if(!y)return;a.K_.set(h,y.withResumeToken(jt.EMPTY_BYTE_STRING,y.snapshotVersion)),ST(a,h);const k=new no(y.target,h,p,y.sequenceNumber);Hv(a,k)}),a.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){oe(gs,"Failed to raise snapshot:",r),await bh(n,r)}}async function bh(n,e,t){if(!di(e))throw e;n.W_.add(1),await Xu(n),n.j_.set("Offline"),t||(t=()=>_T(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{oe(gs,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Xh(n)})}function jT(n,e){return e().catch(t=>bh(n,t,e))}async function ec(n){const e=Re(n),t=ai(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:rs;for(;qA(e);)try{const i=await IA(e.localStore,r);if(i===null){e.U_.length===0&&t.P_();break}r=i.batchId,QA(e,i)}catch(i){await bh(e,i)}IT(e)&&PT(e)}function qA(n){return _s(n)&&n.U_.length<10}function QA(n,e){n.U_.push(e);const t=ai(n);t.c_()&&t.S_&&t.b_(e.mutations)}function IT(n){return _s(n)&&!ai(n).u_()&&n.U_.length>0}function PT(n){ai(n).start()}async function JA(n){ai(n).C_()}async function ZA(n){const e=ai(n);for(const t of n.U_)e.b_(t.mutations)}async function YA(n,e,t){const r=n.U_.shift(),i=Av.from(r,e,t);await jT(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await ec(n)}async function XA(n,e){e&&ai(n).S_&&await async function(r,i){if(function(l){return C1(l)&&l!==J.ABORTED}(i.code)){const a=r.U_.shift();ai(r).h_(),await jT(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await ec(r)}}(n,e),IT(n)&&PT(n)}async function Ib(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),oe(gs,"RemoteStore received new credentials");const r=_s(t);t.W_.add(3),await Xu(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Xh(t)}async function eC(n,e){const t=Re(n);e?(t.W_.delete(2),await Xh(t)):e||(t.W_.add(2),await Xu(t),t.j_.set("Unknown"))}function rl(n){return n.J_||(n.J_=function(t,r,i){const a=Re(t);return a.M_(),new MA(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{xo:KA.bind(null,n),No:$A.bind(null,n),Lo:WA.bind(null,n),p_:GA.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),$v(n)?Kv(n):n.j_.set("Unknown")):(await n.J_.stop(),xT(n))})),n.J_}function ai(n){return n.Y_||(n.Y_=function(t,r,i){const a=Re(t);return a.M_(),new LA(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:JA.bind(null,n),Lo:XA.bind(null,n),D_:ZA.bind(null,n),v_:YA.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await ec(n)):(await n.Y_.stop(),n.U_.length>0&&(oe(gs,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,c=new Wv(e,t,l,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gv(n,e){if(un("AsyncQueue",`${e}: ${n}`),di(n))return new ue(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{static emptySet(e){return new Ia(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||de.comparator(t.key,r.key):(t,r)=>de.comparator(t.key,r.key),this.keyedMap=au(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ia)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ia;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(){this.Z_=new ht(de.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):ye():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ga{constructor(e,t,r,i,a,l,c,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new Ga(e,t,Ia.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class nC{constructor(){this.queries=Ab(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const i=Re(t),a=i.queries;i.queries=Ab(),a.forEach((l,c)=>{for(const h of c.ta)h.onError(r)})})(this,new ue(J.ABORTED,"Firestore shutting down"))}}function Ab(){return new fo(n=>AE(n),$h)}async function AT(n,e){const t=Re(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.na()&&e.ra()&&(r=2):(a=new tC,r=e.ra()?0:1);try{switch(r){case 0:a.ea=await t.onListen(i,!0);break;case 1:a.ea=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const c=Gv(l,`Initialization of query '${ba(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,a),a.ta.push(e),e.sa(t.onlineState),a.ea&&e.oa(a.ea)&&qv(t)}async function CT(n,e){const t=Re(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const l=a.ta.indexOf(e);l>=0&&(a.ta.splice(l,1),a.ta.length===0?i=e.ra()?0:1:!a.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function rC(n,e){const t=Re(n);let r=!1;for(const i of e){const a=i.query,l=t.queries.get(a);if(l){for(const c of l.ta)c.oa(i)&&(r=!0);l.ea=i}}r&&qv(t)}function oC(n,e,t){const r=Re(n),i=r.queries.get(e);if(i)for(const a of i.ta)a.onError(t);r.queries.delete(e)}function qv(n){n.ia.forEach(e=>{e.next()})}var Hf,Cb;(Cb=Hf||(Hf={}))._a="default",Cb.Cache="cache";class RT{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ga(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Ga.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Hf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e){this.key=e}}class NT{constructor(e){this.key=e}}class iC{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=De(),this.mutatedKeys=De(),this.ya=CE(e),this.wa=new Ia(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new Pb,i=t?t.wa:this.wa;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,c=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((y,k)=>{const _=i.get(y),S=Zu(this.query,k)?k:null,C=!!_&&this.mutatedKeys.has(_.key),N=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let M=!1;_&&S?_.data.isEqual(S.data)?C!==N&&(r.track({type:3,doc:S}),M=!0):this.va(_,S)||(r.track({type:2,doc:S}),M=!0,(h&&this.ya(S,h)>0||p&&this.ya(S,p)<0)&&(c=!0)):!_&&S?(r.track({type:0,doc:S}),M=!0):_&&!S&&(r.track({type:1,doc:_}),M=!0,(h||p)&&(c=!0)),M&&(S?(l=l.add(S),a=N?a.add(y):a.delete(y)):(l=l.delete(y),a=a.delete(y)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),a=a.delete(y.key),r.track({type:1,doc:y})}return{wa:l,Da:r,ls:c,mutatedKeys:a}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const l=e.Da.X_();l.sort((y,k)=>function(S,C){const N=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return N(S)-N(C)}(y.type,k.type)||this.ya(y.doc,k.doc)),this.Ca(r),i=i!=null&&i;const c=t&&!i?this.Fa():[],h=this.pa.size===0&&this.current&&!i?1:0,p=h!==this.ga;return this.ga=h,l.length!==0||p?{snapshot:new Ga(this.query,e.wa,a,l,e.mutatedKeys,h===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:c}:{Ma:c}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Pb,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=De(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new NT(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new VT(r))}),t}Oa(e){this.fa=e.gs,this.pa=De();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return Ga.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Qv="SyncEngine";class sC{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class aC{constructor(e){this.key=e,this.Ba=!1}}class lC{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.La={},this.ka=new fo(c=>AE(c),$h),this.qa=new Map,this.Qa=new Set,this.$a=new ht(de.comparator),this.Ua=new Map,this.Ka=new Ov,this.Wa={},this.Ga=new Map,this.za=vs.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function uC(n,e,t=!0){const r=UT(n);let i;const a=r.ka.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Na()):i=await DT(r,e,t,!0),i}async function cC(n,e){const t=UT(n);await DT(t,e,!0,!1)}async function DT(n,e,t,r){const i=await PA(n.localStore,Zn(e)),a=i.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let c;return r&&(c=await dC(n,e,a,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&zT(n.remoteStore,i),c}async function dC(n,e,t,r,i){n.Ha=(k,_,S)=>async function(N,M,q,G){let Q=M.view.ba(q);Q.ls&&(Q=await Tb(N.localStore,M.query,!1).then(({documents:P})=>M.view.ba(P,Q)));const re=G&&G.targetChanges.get(M.targetId),ee=G&&G.targetMismatches.get(M.targetId)!=null,se=M.view.applyChanges(Q,N.isPrimaryClient,re,ee);return Vb(N,M.targetId,se.Ma),se.snapshot}(n,k,_,S);const a=await Tb(n.localStore,e,!0),l=new iC(e,a.gs),c=l.ba(a.documents),h=Yu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),p=l.applyChanges(c,n.isPrimaryClient,h);Vb(n,t,p.Ma);const y=new sC(e,t,l);return n.ka.set(e,y),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),p.snapshot}async function hC(n,e,t){const r=Re(n),i=r.ka.get(e),a=r.qa.get(i.targetId);if(a.length>1)return r.qa.set(i.targetId,a.filter(l=>!$h(l,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Uf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Bv(r.remoteStore,i.targetId),Kf(r,i.targetId)}).catch(ks)):(Kf(r,i.targetId),await Uf(r.localStore,i.targetId,!0))}async function mC(n,e){const t=Re(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Bv(t.remoteStore,r.targetId))}async function pC(n,e,t){const r=BT(n);try{const i=await function(l,c){const h=Re(l),p=gt.now(),y=c.reduce((S,C)=>S.add(C.key),De());let k,_;return h.persistence.runTransaction("Locally write mutations","readwrite",S=>{let C=Cn(),N=De();return h.ds.getEntries(S,y).next(M=>{C=M,C.forEach((q,G)=>{G.isValidDocument()||(N=N.add(q))})}).next(()=>h.localDocuments.getOverlayedDocuments(S,C)).next(M=>{k=M;const q=[];for(const G of c){const Q=P1(G,k.get(G.key).overlayedDocument);Q!=null&&q.push(new hi(G.key,Q,wE(Q.value.mapValue),wn.exists(!0)))}return h.mutationQueue.addMutationBatch(S,p,q,c)}).next(M=>{_=M;const q=M.applyToLocalDocumentSet(k,N);return h.documentOverlayCache.saveOverlays(S,M.batchId,q)})}).then(()=>({batchId:_.batchId,changes:VE(k)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,c,h){let p=l.Wa[l.currentUser.toKey()];p||(p=new ht(Pe)),p=p.insert(c,h),l.Wa[l.currentUser.toKey()]=p}(r,i.batchId,t),await tc(r,i.changes),await ec(r.remoteStore)}catch(i){const a=Gv(i,"Failed to persist write");t.reject(a)}}async function OT(n,e){const t=Re(n);try{const r=await xA(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.Ua.get(a);l&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Ba=!0:i.modifiedDocuments.size>0?_e(l.Ba):i.removedDocuments.size>0&&(_e(l.Ba),l.Ba=!1))}),await tc(t,r,e)}catch(r){await ks(r)}}function Rb(n,e,t){const r=Re(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ka.forEach((a,l)=>{const c=l.view.sa(e);c.snapshot&&i.push(c.snapshot)}),function(l,c){const h=Re(l);h.onlineState=c;let p=!1;h.queries.forEach((y,k)=>{for(const _ of k.ta)_.sa(c)&&(p=!0)}),p&&qv(h)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function fC(n,e,t){const r=Re(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ua.get(e),a=i&&i.key;if(a){let l=new ht(de.comparator);l=l.insert(a,bt.newNoDocument(a,Se.min()));const c=De().add(a),h=new qh(Se.min(),new Map,new ht(Pe),l,c);await OT(r,h),r.$a=r.$a.remove(a),r.Ua.delete(e),Jv(r)}else await Uf(r.localStore,e,!1).then(()=>Kf(r,e,t)).catch(ks)}async function vC(n,e){const t=Re(n),r=e.batch.batchId;try{const i=await SA(t.localStore,e);LT(t,r,null),MT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await tc(t,i)}catch(i){await ks(i)}}async function gC(n,e,t){const r=Re(n);try{const i=await function(l,c){const h=Re(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return h.mutationQueue.lookupMutationBatch(p,c).next(k=>(_e(k!==null),y=k.keys(),h.mutationQueue.removeMutationBatch(p,k))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,y,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>h.localDocuments.getDocuments(p,y))})}(r.localStore,e);LT(r,e,t),MT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await tc(r,i)}catch(i){await ks(i)}}function MT(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function LT(n,e,t){const r=Re(n);let i=r.Wa[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function Kf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||FT(n,r)})}function FT(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(Bv(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),Jv(n))}function Vb(n,e,t){for(const r of t)r instanceof VT?(n.Ka.addReference(r.key,e),yC(n,r)):r instanceof NT?(oe(Qv,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||FT(n,r.key)):ye()}function yC(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(oe(Qv,"New document in limbo: "+t),n.Qa.add(r),Jv(n))}function Jv(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new de(Je.fromString(e)),r=n.za.next();n.Ua.set(r,new aC(t)),n.$a=n.$a.insert(t,r),zT(n.remoteStore,new no(Zn(Kh(t.path)),r,"TargetPurposeLimboResolution",Qn.ae))}}async function tc(n,e,t){const r=Re(n),i=[],a=[],l=[];r.ka.isEmpty()||(r.ka.forEach((c,h)=>{l.push(r.Ha(h,e,t).then(p=>{var y;if((p||t)&&r.isPrimaryClient){const k=p?!p.fromCache:(y=t==null?void 0:t.targetChanges.get(h.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(h.targetId,k?"current":"not-current")}if(p){i.push(p);const k=Fv.Yi(h.targetId,p);a.push(k)}}))}),await Promise.all(l),r.La.p_(i),await async function(h,p){const y=Re(h);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",k=>U.forEach(p,_=>U.forEach(_.Hi,S=>y.persistence.referenceDelegate.addReference(k,_.targetId,S)).next(()=>U.forEach(_.Ji,S=>y.persistence.referenceDelegate.removeReference(k,_.targetId,S)))))}catch(k){if(!di(k))throw k;oe(Uv,"Failed to update sequence numbers: "+k)}for(const k of p){const _=k.targetId;if(!k.fromCache){const S=y.Ts.get(_),C=S.snapshotVersion,N=S.withLastLimboFreeSnapshotVersion(C);y.Ts=y.Ts.insert(_,N)}}}(r.localStore,a))}async function kC(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){oe(Qv,"User change. New user:",e.toKey());const r=await bT(t.localStore,e);t.currentUser=e,function(a,l){a.Ga.forEach(c=>{c.forEach(h=>{h.reject(new ue(J.CANCELLED,l))})}),a.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await tc(t,r.Rs)}}function bC(n,e){const t=Re(n),r=t.Ua.get(e);if(r&&r.Ba)return De().add(r.key);{let i=De();const a=t.qa.get(e);if(!a)return i;for(const l of a){const c=t.ka.get(l);i=i.unionWith(c.view.Sa)}return i}}function UT(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=OT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fC.bind(null,e),e.La.p_=rC.bind(null,e.eventManager),e.La.Ja=oC.bind(null,e.eventManager),e}function BT(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gC.bind(null,e),e}class Mu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yh(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return kT(this.persistence,new yT,e.initialUser,this.serializer)}Xa(e){return new Mv(Zh.ri,this.serializer)}Za(e){return new wT}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mu.provider={build:()=>new Mu};class _C extends Mu{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){_e(this.persistence.referenceDelegate instanceof kh);const r=this.persistence.referenceDelegate.garbageCollector;return new mT(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new Mv(r=>kh.ri(r,t),this.serializer)}}class wC extends Mu{constructor(e,t,r){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await BT(this.ru.syncEngine),await ec(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return kT(this.persistence,new yT,e.initialUser,this.serializer)}tu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new mT(r,e.asyncQueue,t)}nu(e,t){const r=new jP(t,this.persistence);return new xP(e.asyncQueue,r)}Xa(e){const t=wA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new Lv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,OA(),$d(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new wT}}class _h{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Rb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kC.bind(null,this.syncEngine),await eC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nC}()}createDatastore(e){const t=Yh(e.databaseInfo.databaseId),r=function(a){return new DA(a)}(e.databaseInfo);return function(a,l,c,h){return new UA(a,l,c,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,a,l,c){return new HA(r,i,a,l,c)}(this.localStore,this.datastore,e.asyncQueue,t=>Rb(this.syncEngine,t,0),function(){return xb.D()?new xb:new CA}())}createSyncEngine(e,t){return function(i,a,l,c,h,p,y){const k=new lC(i,a,l,c,h,p);return y&&(k.ja=!0),k}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=Re(i);oe(gs,"RemoteStore shutting down."),a.W_.add(5),await Xu(a),a.z_.shutdown(),a.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}_h.provider={build:()=>new _h};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):un("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li="FirestoreClient";class EC{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Gt.UNAUTHENTICATED,this.clientId=Yw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async l=>{oe(li,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(oe(li,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Gv(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Yp(n,e){n.asyncQueue.verifyOperationInProgress(),oe(li,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await bT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Nb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await TC(n);oe(li,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Ib(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Ib(e.remoteStore,i)),n._onlineComponents=e}async function TC(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){oe(li,"Using user provided OfflineComponentProvider");try{await Yp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===J.FAILED_PRECONDITION||i.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ds("Error using user provided cache. Falling back to memory cache: "+t),await Yp(n,new Mu)}}else oe(li,"Using default OfflineComponentProvider"),await Yp(n,new _C(void 0));return n._offlineComponents}async function KT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(oe(li,"Using user provided OnlineComponentProvider"),await Nb(n,n._uninitializedComponentsProvider._online)):(oe(li,"Using default OnlineComponentProvider"),await Nb(n,new _h))),n._onlineComponents}function zC(n){return KT(n).then(e=>e.syncEngine)}async function $T(n){const e=await KT(n),t=e.eventManager;return t.onListen=uC.bind(null,e.syncEngine),t.onUnlisten=hC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=cC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=mC.bind(null,e.syncEngine),t}function SC(n,e,t={}){const r=new Rr;return n.asyncQueue.enqueueAndForget(async()=>function(a,l,c,h,p){const y=new HT({next:_=>{y.su(),l.enqueueAndForget(()=>CT(a,k));const S=_.docs.has(c);!S&&_.fromCache?p.reject(new ue(J.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&_.fromCache&&h&&h.source==="server"?p.reject(new ue(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(_)},error:_=>p.reject(_)}),k=new RT(Kh(c.path),y,{includeMetadataChanges:!0,Ta:!0});return AT(a,k)}(await $T(n),n.asyncQueue,e,t,r)),r.promise}function xC(n,e,t={}){const r=new Rr;return n.asyncQueue.enqueueAndForget(async()=>function(a,l,c,h,p){const y=new HT({next:_=>{y.su(),l.enqueueAndForget(()=>CT(a,k)),_.fromCache&&h.source==="server"?p.reject(new ue(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(_)},error:_=>p.reject(_)}),k=new RT(c,y,{includeMetadataChanges:!0,Ta:!0});return AT(a,k)}(await $T(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(n,e,t){if(!t)throw new ue(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function jC(n,e,t,r){if(e===!0&&r===!0)throw new ue(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ob(n){if(!de.isDocumentKey(n))throw new ue(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Mb(n){if(de.isDocumentKey(n))throw new ue(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function em(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ye()}function co(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ue(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=em(n);throw new ue(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="firestore.googleapis.com",Lb=!0;class Fb{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qT,this.ssl=Lb}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Lb;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=uT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iA)throw new ue(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tm{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new fP;switch(r.type){case"firstParty":return new kP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Db.get(t);r&&(oe("ComponentProvider","Removing Datastore"),Db.delete(t),r.terminate())}(this),Promise.resolve()}}function IC(n,e,t,r={}){var i;const a=(n=co(n,tm))._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;a.host!==qT&&a.host!==c&&ds("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},a),{host:c,ssl:!1,emulatorOptions:r});if(!ls(h,l)&&(n._setSettings(h),r.mockUserToken)){let p,y;if(typeof r.mockUserToken=="string")p=r.mockUserToken,y=Gt.MOCK_USER;else{p=Wj(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const k=r.mockUserToken.sub||r.mockUserToken.user_id;if(!k)throw new ue(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Gt(k)}n._authCredentials=new vP(new Jw(p,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mi(this.firestore,e,this._query)}}class En{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}}class oi extends mi{constructor(e,t,r){super(e,t,Kh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new de(e))}withConverter(e){return new oi(this.firestore,e,this._path)}}function QT(n,e,...t){if(n=hn(n),GT("collection","path",e),n instanceof tm){const r=Je.fromString(e,...t);return Mb(r),new oi(n,null,r)}{if(!(n instanceof En||n instanceof oi))throw new ue(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Je.fromString(e,...t));return Mb(r),new oi(n.firestore,null,r)}}function Pa(n,e,...t){if(n=hn(n),arguments.length===1&&(e=Yw.newId()),GT("doc","path",e),n instanceof tm){const r=Je.fromString(e,...t);return Ob(r),new En(n,null,new de(r))}{if(!(n instanceof En||n instanceof oi))throw new ue(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Je.fromString(e,...t));return Ob(r),new En(n.firestore,n instanceof oi?n.converter:null,new de(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="AsyncQueue";class Bb{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new ET(this,"async_queue_retry"),this.Su=()=>{const r=$d();r&&oe(Ub,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=$d();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=$d();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Rr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!di(e))throw e;oe(Ub,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const i=function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),c}(r);throw un("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const i=Wv.createAndSchedule(this,e,t,r,a=>this.Fu(a));return this.fu.push(i),i}Du(){this.gu&&ye()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class ol extends tm{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Bb,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Bb(e),this._firestoreClient=void 0,await e}}}function PC(n,e){const t=typeof n=="object"?n:Uw(),r=typeof n=="string"?n:ch,i=vv(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=Kj("firestore");a&&IC(i,...a)}return i}function Zv(n){if(n._terminated)throw new ue(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||JT(n),n._firestoreClient}function JT(n){var e,t,r;const i=n._freezeSettings(),a=function(c,h,p,y){return new r1(c,h,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,WT(y.experimentalLongPollingOptions),y.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new EC(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}}(n._componentsProvider))}function AC(n,e){ds("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return CC(n,_h.provider,{build:r=>new wC(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function CC(n,e,t){if((n=co(n,ol))._firestoreClient||n._terminated)throw new ue(J.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ue(J.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},JT(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qa(jt.fromBase64String(e))}catch(t){throw new ue(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qa(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ue(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=/^__.*__$/;class VC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new hi(e,this.data,this.fieldMask,t,this.fieldTransforms):new nl(e,this.data,t,this.fieldTransforms)}}function YT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye()}}class tg{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Bu(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new tg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return wh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(YT(this.Lu)&&RC.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class NC{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Yh(e)}ju(e,t,r,i=!1){return new tg({Lu:e,methodName:t,zu:r,path:ft.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ng(n){const e=n._freezeSettings(),t=Yh(n._databaseId);return new NC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function XT(n,e,t,r,i,a={}){const l=n.ju(a.merge||a.mergeFields?2:0,e,t,i);nz("Data must be an object, but it was:",l,r);const c=ez(r,l);let h,p;if(a.merge)h=new Jn(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const y=[];for(const k of a.mergeFields){const _=OC(e,k,t);if(!l.contains(_))throw new ue(J.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);LC(y,_)||y.push(_)}h=new Jn(y),p=l.fieldTransforms.filter(k=>h.covers(k.field))}else h=null,p=l.fieldTransforms;return new VC(new _n(c),h,p)}function DC(n,e,t,r=!1){return rg(t,n.ju(r?4:3,e))}function rg(n,e){if(tz(n=hn(n)))return nz("Unsupported field value:",e,n),ez(n,e);if(n instanceof ZT)return function(r,i){if(!YT(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){const a=[];let l=0;for(const c of r){let h=rg(c,i.Ku(l));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),l++}return{arrayValue:{values:a}}}(n,e)}return function(r,i){if((r=hn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return E1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=gt.fromDate(r);return{timestampValue:Wa(i.serializer,a)}}if(r instanceof gt){const a=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wa(i.serializer,a)}}if(r instanceof Xv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qa)return{bytesValue:GE(i.serializer,r._byteString)};if(r instanceof En){const a=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw i.Wu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Vv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof eg)return function(l,c){return{mapValue:{fields:{[zv]:{stringValue:Sv},[Fa]:{arrayValue:{values:l.toArray().map(p=>{if(typeof p!="number")throw c.Wu("VectorValues must only contain numeric values.");return jv(c.serializer,p)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${em(r)}`)}(n,e)}function ez(n,e){const t={};return mE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bs(n,(r,i)=>{const a=rg(i,e.qu(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function tz(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof gt||n instanceof Xv||n instanceof qa||n instanceof En||n instanceof ZT||n instanceof eg)}function nz(n,e,t){if(!tz(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=em(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function OC(n,e,t){if((e=hn(e))instanceof Yv)return e._internalPath;if(typeof e=="string")return rz(n,e);throw wh("Field path arguments must be of type string or ",n,!1,void 0,t)}const MC=new RegExp("[~\\*/\\[\\]]");function rz(n,e,t){if(e.search(MC)>=0)throw wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yv(...e.split("."))._internalPath}catch{throw wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wh(n,e,t,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(a||l)&&(h+=" (found",a&&(h+=` in field ${r}`),l&&(h+=` in document ${i}`),h+=")"),new ue(J.INVALID_ARGUMENT,c+n+h)}function LC(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class FC extends oz{data(){return super.data()}}function nm(n,e){return typeof e=="string"?rz(n,e):e instanceof Yv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ue(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class og{}class ig extends og{}function BC(n,e,...t){let r=[];e instanceof og&&r.push(e),r=r.concat(t),function(a){const l=a.filter(h=>h instanceof sg).length,c=a.filter(h=>h instanceof rm).length;if(l>1||l>0&&c>0)throw new ue(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class rm extends ig{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new rm(e,t,r)}_apply(e){const t=this._parse(e);return iz(e._query,t),new mi(e.firestore,e.converter,Rf(e._query,t))}_parse(e){const t=ng(e.firestore);return function(a,l,c,h,p,y,k){let _;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ue(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Kb(k,y);const C=[];for(const N of k)C.push(Hb(h,a,N));_={arrayValue:{values:C}}}else _=Hb(h,a,k)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Kb(k,y),_=DC(c,l,k,y==="in"||y==="not-in");return Fe.create(p,y,_)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function HC(n,e,t){const r=e,i=nm("where",n);return rm._create(i,r,t)}class sg extends og{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sg(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Xe.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,a){let l=i;const c=a.getFlattenedFilters();for(const h of c)iz(l,h),l=Rf(l,h)}(e._query,t),new mi(e.firestore,e.converter,Rf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ag extends ig{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ag(e,t)}_apply(e){const t=function(i,a,l){if(i.startAt!==null)throw new ue(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ue(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Nu(a,l)}(e._query,this._field,this._direction);return new mi(e.firestore,e.converter,function(i,a){const l=i.explicitOrderBy.concat([a]);return new tl(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function KC(n,e="asc"){const t=e,r=nm("orderBy",n);return ag._create(r,t)}class lg extends ig{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new lg(e,t,r)}_apply(e){return new mi(e.firestore,e.converter,mh(e._query,this._limit,this._limitType))}}function $C(n){return lg._create("limit",n,"F")}function Hb(n,e,t){if(typeof(t=hn(t))=="string"){if(t==="")throw new ue(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PE(e)&&t.indexOf("/")!==-1)throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Je.fromString(t));if(!de.isDocumentKey(r))throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ru(n,new de(r))}if(t instanceof En)return Ru(n,t._key);throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${em(t)}.`)}function Kb(n,e){if(!Array.isArray(n)||n.length===0)throw new ue(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iz(n,e){const t=function(i,a){for(const l of i)for(const c of l.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ue(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class WC{convertValue(e,t="none"){switch(ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(uo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return bs(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,i;const a=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Fa].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(l=>dt(l.doubleValue));return new eg(a)}convertGeoPoint(e){return new Xv(dt(e.latitude),dt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Bh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Au(e));default:return null}}convertTimestamp(e){const t=lo(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Je.fromString(e);_e(rT(r));const i=new hs(r.get(1),r.get(3)),a=new de(r.popFirst(5));return i.isEqual(t)||un(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sz(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class az extends oz{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(nm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Wd extends az{data(e={}){return super.data(e)}}class GC{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new cu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Wd(this._firestore,this._userDataWriter,r.key,r,new cu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(c=>{const h=new Wd(i._firestore,i._userDataWriter,c.doc.key,c.doc,new cu(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const h=new Wd(i._firestore,i._userDataWriter,c.doc.key,c.doc,new cu(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,y=-1;return c.type!==0&&(p=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),y=l.indexOf(c.doc.key)),{type:qC(c.type),doc:h,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function qC(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(n){n=co(n,En);const e=co(n.firestore,ol);return SC(Zv(e),n._key).then(t=>YC(e,n,t))}class lz extends WC{constructor(e){super(),this.firestore=e}convertBytes(e){return new qa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,t)}}function JC(n){n=co(n,mi);const e=co(n.firestore,ol),t=Zv(e),r=new lz(e);return UC(n._query),xC(t,n._query).then(i=>new GC(e,r,n,i))}function Gd(n,e,t){n=co(n,En);const r=co(n.firestore,ol),i=sz(n.converter,e,t);return uz(r,[XT(ng(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,wn.none())])}function ZC(n,e){const t=co(n.firestore,ol),r=Pa(n),i=sz(n.converter,e);return uz(t,[XT(ng(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,wn.exists(!1))]).then(()=>r)}function uz(n,e){return function(r,i){const a=new Rr;return r.asyncQueue.enqueueAndForget(async()=>pC(await zC(r),i,a)),a.promise}(Zv(n),e)}function YC(n,e,t){const r=t.docs.get(e._key),i=new lz(n);return new az(n,i,e._key,r,new cu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){el=i})(Xa),Va(new us("firestore",(r,{instanceIdentifier:i,options:a})=>{const l=r.getProvider("app").getImmediate(),c=new ol(new gP(r.getProvider("auth-internal")),new bP(l,r.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ue(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hs(p.options.projectId,y)}(l,i),l);return a=Object.assign({useFetchStreams:t},a),c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),ti(z0,S0,e),ti(z0,S0,"esm2017")})();var XC="firebase",eR="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ti(XC,eR,"app");function ug(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function cz(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tR=cz,dz=new Gu("auth","Firebase",cz());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new pv("@firebase/auth");function nR(n,...e){Eh.logLevel<=Le.WARN&&Eh.warn(`Auth (${Xa}): ${n}`,...e)}function qd(n,...e){Eh.logLevel<=Le.ERROR&&Eh.error(`Auth (${Xa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(n,...e){throw dg(n,...e)}function gr(n,...e){return dg(n,...e)}function cg(n,e,t){const r=Object.assign(Object.assign({},tR()),{[e]:t});return new Gu("auth","Firebase",r).create(e,{appName:n.name})}function ss(n){return cg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rR(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Mr(n,"argument-error"),cg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return dz.create(n,...e)}function Ce(n,e,...t){if(!n)throw dg(e,...t)}function ro(n){const e="INTERNAL ASSERTION FAILED: "+n;throw qd(e),new Error(e)}function ho(n,e){n||ro(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function oR(){return $b()==="http:"||$b()==="https:"}function $b(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oR()||Jj()||"connection"in navigator)?navigator.onLine:!0}function sR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ho(t>e,"Short delay should be less than long delay!"),this.isMobile=Gj()||Zj()}get(){return iR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(n,e){ho(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ro("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ro("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ro("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uR=new nc(3e4,6e4);function mg(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function il(n,e,t,r,i={}){return mz(n,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const c=qu(Object.assign({key:n.config.apiKey},l)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:h},a);return Qj()||(p.referrerPolicy="no-referrer"),hz.fetch()(await pz(n,n.config.apiHost,t,c),p)})}async function mz(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},aR),e);try{const i=new dR(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Ad(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const c=a.ok?l.errorMessage:l.error.message,[h,p]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ad(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Ad(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw Ad(n,"user-disabled",l);const y=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw cg(n,y,p);Mr(n,y)}}catch(i){if(i instanceof po)throw i;Mr(n,"network-request-failed",{message:String(i)})}}async function cR(n,e,t,r,i={}){const a=await il(n,e,t,r,i);return"mfaPendingCredential"in a&&Mr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function pz(n,e,t,r){const i=`${e}${t}?${r}`,a=n,l=a.config.emulator?hg(n.config,i):`${n.config.apiScheme}://${i}`;return lR.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}class dR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(gr(this.auth,"network-request-failed")),uR.get())})}}function Ad(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=gr(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(n,e){return il(n,"POST","/v1/accounts:delete",e)}async function Th(n,e){return il(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mR(n,e=!1){const t=hn(n),r=await t.getIdToken(e),i=pg(r);Ce(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:ku(Xp(i.auth_time)),issuedAtTime:ku(Xp(i.iat)),expirationTime:ku(Xp(i.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Xp(n){return Number(n)*1e3}function pg(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return qd("JWT malformed, contained fewer than 3 sections"),null;try{const i=Cw(t);return i?JSON.parse(i):(qd("Failed to decode base64 JWT payload"),null)}catch(i){return qd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Wb(n){const e=pg(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof po&&pR(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function pR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ku(this.lastLoginAt),this.creationTime=ku(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zh(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Lu(n,Th(t,{idToken:r}));Ce(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?fz(a.providerUserInfo):[],c=gR(n.providerData,l),h=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!(c!=null&&c.length),y=h?p:!1,k={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Wf(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(n,k)}async function vR(n){const e=hn(n);await zh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gR(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fz(n){return n.map(e=>{var{providerId:t}=e,r=ug(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yR(n,e){const t=await mz(n,{},async()=>{const r=qu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,l=await pz(n,i,"/v1/token",`key=${a}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",hz.fetch()(l,{method:"POST",headers:c,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kR(n,e){return il(n,"POST","/v2/accounts:revokeToken",mg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Wb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=Wb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await yR(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,l=new Aa;return r&&(Ce(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Ce(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(Ce(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Aa,this.toJSON())}_performRefresh(){return ro("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wo(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class vr{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=ug(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Wf(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Lu(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return mR(this,e)}reload(){return vR(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await zh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fr(this.auth.app))return Promise.reject(ss(this.auth));const e=await this.getIdToken();return await Lu(this,hR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,l,c,h,p,y;const k=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,S=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,C=(l=t.photoURL)!==null&&l!==void 0?l:void 0,N=(c=t.tenantId)!==null&&c!==void 0?c:void 0,M=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,q=(p=t.createdAt)!==null&&p!==void 0?p:void 0,G=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:Q,emailVerified:re,isAnonymous:ee,providerData:se,stsTokenManager:P}=t;Ce(Q&&P,e,"internal-error");const z=Aa.fromJSON(this.name,P);Ce(typeof Q=="string",e,"internal-error"),Wo(k,e.name),Wo(_,e.name),Ce(typeof re=="boolean",e,"internal-error"),Ce(typeof ee=="boolean",e,"internal-error"),Wo(S,e.name),Wo(C,e.name),Wo(N,e.name),Wo(M,e.name),Wo(q,e.name),Wo(G,e.name);const j=new vr({uid:Q,auth:e,email:_,emailVerified:re,displayName:k,isAnonymous:ee,photoURL:C,phoneNumber:S,tenantId:N,stsTokenManager:z,createdAt:q,lastLoginAt:G});return se&&Array.isArray(se)&&(j.providerData=se.map(A=>Object.assign({},A))),M&&(j._redirectEventId=M),j}static async _fromIdTokenResponse(e,t,r=!1){const i=new Aa;i.updateFromServerResponse(t);const a=new vr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await zh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ce(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?fz(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new Aa;c.updateFromIdToken(r);const h=new vr({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Wf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,p),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=new Map;function oo(n){ho(n instanceof Function,"Expected a class definition");let e=Gb.get(n);return e?(ho(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Gb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vz.type="NONE";const qb=vz;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(n,e,t){return`firebase:${n}:${e}:${t}`}class Ca{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Qd(this.userKey,i.apiKey,a),this.fullPersistenceKey=Qd("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Th(this.auth,{idToken:e}).catch(()=>{});return t?vr._fromGetAccountInfoResponse(this.auth,t,e):null}return vr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ca(oo(qb),e,r);const i=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=i[0]||oo(qb);const l=Qd(r,e.config.apiKey,e.name);let c=null;for(const p of t)try{const y=await p._get(l);if(y){let k;if(typeof y=="string"){const _=await Th(e,{idToken:y}).catch(()=>{});if(!_)break;k=await vr._fromGetAccountInfoResponse(e,_,y)}else k=vr._fromJSON(e,y);p!==a&&(c=k),a=p;break}}catch{}const h=i.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new Ca(a,e,r):(a=h[0],c&&await a._set(l,c.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new Ca(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bz(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gz(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wz(e))return"Blackberry";if(Ez(e))return"Webos";if(yz(e))return"Safari";if((e.includes("chrome/")||kz(e))&&!e.includes("edge/"))return"Chrome";if(_z(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function gz(n=Vt()){return/firefox\//i.test(n)}function yz(n=Vt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kz(n=Vt()){return/crios\//i.test(n)}function bz(n=Vt()){return/iemobile/i.test(n)}function _z(n=Vt()){return/android/i.test(n)}function wz(n=Vt()){return/blackberry/i.test(n)}function Ez(n=Vt()){return/webos/i.test(n)}function fg(n=Vt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function bR(n=Vt()){var e;return fg(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _R(){return Yj()&&document.documentMode===10}function Tz(n=Vt()){return fg(n)||_z(n)||Ez(n)||wz(n)||/windows phone/i.test(n)||bz(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zz(n,e=[]){let t;switch(n){case"Browser":t=Qb(Vt());break;case"Worker":t=`${Qb(Vt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,c)=>{try{const h=e(a);l(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ER(n,e={}){return il(n,"GET","/v2/passwordPolicy",mg(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=6;class zR{constructor(e){var t,r,i,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:TR,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,l,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(a=h.containsUppercaseLetter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jb(this),this.idTokenSubscription=new Jb(this),this.beforeStateQueue=new wR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dz,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=oo(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Ca.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Th(this,{idToken:e}),r=await vr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(fr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&(h!=null&&h.user)&&(i=h.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await zh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fr(this.app))return Promise.reject(ss(this));const t=e?hn(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fr(this.app)?Promise.reject(ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fr(this.app)?Promise.reject(ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(oo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ER(this),t=new zR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await kR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&oo(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await Ca.create(this,[oo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zz(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(fr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&nR(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function om(n){return hn(n)}class Jb{constructor(e){this.auth=e,this.observer=null,this.addObserver=oI(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xR(n){vg=n}function jR(n){return vg.loadJS(n)}function IR(){return vg.gapiScript}function PR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(n,e){const t=vv(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(ls(a,e??{}))return i;Mr(i,"already-initialized")}return t.initialize({options:e})}function CR(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(oo);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function RR(n,e,t){const r=om(n);Ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=Sz(e),{host:l,port:c}=VR(e),h=c===null?"":`:${c}`,p={url:`${a}//${l}${h}/`},y=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ce(ls(p,r.config.emulator)&&ls(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,NR()}function Sz(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function VR(n){const e=Sz(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Zb(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:Zb(l)}}}function Zb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function NR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ro("not implemented")}_getIdTokenResponse(e){return ro("not implemented")}_linkToIdToken(e,t){return ro("not implemented")}_getReauthenticationResolver(e){return ro("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(n,e){return cR(n,"POST","/v1/accounts:signInWithIdp",mg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="http://localhost";class ys extends xz{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ys(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=ug(t,["providerId","signInMethod"]);if(!r||!i)return null;const l=new ys(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ra(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ra(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ra(e,t)}buildRequest(){const e={requestUri:DR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=qu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends gg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo extends rc{constructor(){super("facebook.com")}static credential(e){return ys._fromParams({providerId:Qo.PROVIDER_ID,signInMethod:Qo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qo.credentialFromTaggedObject(e)}static credentialFromError(e){return Qo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qo.credential(e.oauthAccessToken)}catch{return null}}}Qo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends rc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ys._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return to.credential(t,r)}catch{return null}}}to.GOOGLE_SIGN_IN_METHOD="google.com";to.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo extends rc{constructor(){super("github.com")}static credential(e){return ys._fromParams({providerId:Jo.PROVIDER_ID,signInMethod:Jo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jo.credentialFromTaggedObject(e)}static credentialFromError(e){return Jo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jo.credential(e.oauthAccessToken)}catch{return null}}}Jo.GITHUB_SIGN_IN_METHOD="github.com";Jo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo extends rc{constructor(){super("twitter.com")}static credential(e,t){return ys._fromParams({providerId:Zo.PROVIDER_ID,signInMethod:Zo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Zo.credentialFromTaggedObject(e)}static credentialFromError(e){return Zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Zo.credential(t,r)}catch{return null}}}Zo.TWITTER_SIGN_IN_METHOD="twitter.com";Zo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await vr._fromIdTokenResponse(e,r,i),l=Yb(r);return new Qa({user:a,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Yb(r);return new Qa({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Yb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh extends po{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Sh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Sh(e,t,r,i)}}function jz(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Sh._fromErrorAndOperation(n,a,e,r):a})}async function OR(n,e,t=!1){const r=await Lu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Qa._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(n,e,t=!1){const{auth:r}=n;if(fr(r.app))return Promise.reject(ss(r));const i="reauthenticate";try{const a=await Lu(n,jz(r,i,e,n),t);Ce(a.idToken,r,"internal-error");const l=pg(a.idToken);Ce(l,r,"internal-error");const{sub:c}=l;return Ce(n.uid===c,r,"user-mismatch"),Qa._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Mr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LR(n,e,t=!1){if(fr(n.app))return Promise.reject(ss(n));const r="signIn",i=await jz(n,r,e),a=await Qa._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(n,e){return hn(n).setPersistence(e)}function FR(n,e,t,r){return hn(n).onIdTokenChanged(e,t,r)}function UR(n,e,t){return hn(n).beforeAuthStateChanged(e,t)}function Iz(n,e,t,r){return hn(n).onAuthStateChanged(e,t,r)}function BR(n){return hn(n).signOut()}const xh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xh,"1"),this.storage.removeItem(xh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=1e3,KR=10;class Az extends Pz{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Tz(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);_R()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,KR):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},HR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Az.type="LOCAL";const Cz=Az;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz extends Pz{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Rz.type="SESSION";const yg=Rz;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new im(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(l).map(async p=>p(t.origin,a)),h=await $R(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}im.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((c,h)=>{const p=kg("",20);i.port1.start();const y=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(k){const _=k;if(_.data.eventId===p)switch(_.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(_.data.response);break;default:clearTimeout(y),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(){return window}function GR(n){Vr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vz(){return typeof Vr().WorkerGlobalScope<"u"&&typeof Vr().importScripts=="function"}async function qR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function QR(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function JR(){return Vz()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nz="firebaseLocalStorageDb",ZR=1,jh="firebaseLocalStorage",Dz="fbase_key";class oc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function sm(n,e){return n.transaction([jh],e?"readwrite":"readonly").objectStore(jh)}function YR(){const n=indexedDB.deleteDatabase(Nz);return new oc(n).toPromise()}function Gf(){const n=indexedDB.open(Nz,ZR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(jh,{keyPath:Dz})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(jh)?e(r):(r.close(),await YR(),e(await Gf()))})})}async function Xb(n,e,t){const r=sm(n,!0).put({[Dz]:e,value:t});return new oc(r).toPromise()}async function XR(n,e){const t=sm(n,!1).get(e),r=await new oc(t).toPromise();return r===void 0?null:r.value}function e_(n,e){const t=sm(n,!0).delete(e);return new oc(t).toPromise()}const eV=800,tV=3;class Oz{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>tV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vz()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=im._getInstance(JR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await qR(),!this.activeServiceWorker)return;this.sender=new WR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||QR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gf();return await Xb(e,xh,"1"),await e_(e,xh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Xb(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>XR(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>e_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=sm(i,!1).getAll();return new oc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Oz.type="LOCAL";const Mz=Oz;new nc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lz(n,e){return e?oo(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg extends xz{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ra(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ra(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ra(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function nV(n){return LR(n.auth,new bg(n),n.bypassAuthState)}function rV(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),MR(t,new bg(n),n.bypassAuthState)}async function oV(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),OR(t,new bg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nV;case"linkViaPopup":case"linkViaRedirect":return oV;case"reauthViaPopup":case"reauthViaRedirect":return rV;default:Mr(this.auth,"internal-error")}}resolve(e){ho(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ho(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=new nc(2e3,1e4);async function Uz(n,e,t){if(fr(n.app))return Promise.reject(gr(n,"operation-not-supported-in-this-environment"));const r=om(n);rR(n,e,gg);const i=Lz(r,t);return new Xi(r,"signInViaPopup",e,i).executeNotNull()}class Xi extends Fz{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Xi.currentPopupAction&&Xi.currentPopupAction.cancel(),Xi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){ho(this.filter.length===1,"Popup operations only handle one event");const e=kg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iV.get())};e()}}Xi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV="pendingRedirect",Jd=new Map;class aV extends Fz{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Jd.get(this.auth._key());if(!e){try{const r=await lV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Jd.set(this.auth._key(),e)}return this.bypassAuthState||Jd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lV(n,e){const t=dV(e),r=cV(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function uV(n,e){Jd.set(n._key(),e)}function cV(n){return oo(n._redirectPersistence)}function dV(n){return Qd(sV,n.config.apiKey,n.name)}async function hV(n,e,t=!1){if(fr(n.app))return Promise.reject(ss(n));const r=om(n),i=Lz(r,e),l=await new aV(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV=10*60*1e3;class pV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Bz(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(gr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mV&&this.cachedEventUids.clear(),this.cachedEventUids.has(t_(e))}saveEventToCache(e){this.cachedEventUids.add(t_(e)),this.lastProcessedEventTime=Date.now()}}function t_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Bz({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bz(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vV(n,e={}){return il(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yV=/^https?/;async function kV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await vV(n);for(const t of e)try{if(bV(t))return}catch{}Mr(n,"unauthorized-domain")}function bV(n){const e=$f(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!yV.test(t))return!1;if(gV.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=new nc(3e4,6e4);function n_(){const n=Vr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function wV(n){return new Promise((e,t)=>{var r,i,a;function l(){n_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{n_(),t(gr(n,"network-request-failed"))},timeout:_V.get()})}if(!((i=(r=Vr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Vr().gapi)===null||a===void 0)&&a.load)l();else{const c=PR("iframefcb");return Vr()[c]=()=>{gapi.load?l():t(gr(n,"network-request-failed"))},jR(`${IR()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw Zd=null,e})}let Zd=null;function EV(n){return Zd=Zd||wV(n),Zd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=new nc(5e3,15e3),zV="__/auth/iframe",SV="emulator/auth/iframe",xV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IV(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?hg(e,SV):`https://${n.config.authDomain}/${zV}`,r={apiKey:e.apiKey,appName:n.name,v:Xa},i=jV.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${qu(r).slice(1)}`}async function PV(n){const e=await EV(n),t=Vr().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:IV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xV,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=gr(n,"network-request-failed"),c=Vr().setTimeout(()=>{a(l)},TV.get());function h(){Vr().clearTimeout(c),i(r)}r.ping(h).then(h,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CV=500,RV=600,VV="_blank",NV="http://localhost";class r_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DV(n,e,t,r=CV,i=RV){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h=Object.assign(Object.assign({},AV),{width:r.toString(),height:i.toString(),top:a,left:l}),p=Vt().toLowerCase();t&&(c=kz(p)?VV:t),gz(p)&&(e=e||NV,h.scrollbars="yes");const y=Object.entries(h).reduce((_,[S,C])=>`${_}${S}=${C},`,"");if(bR(p)&&c!=="_self")return OV(e||"",c),new r_(null);const k=window.open(e||"",c,y);Ce(k,n,"popup-blocked");try{k.focus()}catch{}return new r_(k)}function OV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV="__/auth/handler",LV="emulator/auth/handler",FV=encodeURIComponent("fac");async function o_(n,e,t,r,i,a){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Xa,eventId:i};if(e instanceof gg){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",rI(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,k]of Object.entries({}))l[y]=k}if(e instanceof rc){const y=e.getScopes().filter(k=>k!=="");y.length>0&&(l.scopes=y.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const y of Object.keys(c))c[y]===void 0&&delete c[y];const h=await n._getAppCheckToken(),p=h?`#${FV}=${encodeURIComponent(h)}`:"";return`${UV(n)}?${qu(c).slice(1)}${p}`}function UV({config:n}){return n.emulator?hg(n,LV):`https://${n.authDomain}/${MV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf="webStorageSupport";class BV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yg,this._completeRedirectFn=hV,this._overrideRedirectResult=uV}async _openPopup(e,t,r,i){var a;ho((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await o_(e,t,r,$f(),i);return DV(e,l,kg())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await o_(e,t,r,$f(),i);return GR(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(ho(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await PV(e),r=new pV(e);return t.register("authEvent",i=>(Ce(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(tf,{type:tf},i=>{var a;const l=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[tf];l!==void 0&&t(!!l),Mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=kV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Tz()||yz()||fg()}}const HV=BV;var i_="@firebase/auth",s_="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $V(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WV(n){Va(new us("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Ce(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zz(n)},p=new SR(r,i,a,h);return CR(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Va(new us("auth-internal",e=>{const t=om(e.getProvider("auth").getImmediate());return(r=>new KV(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ti(i_,s_,$V(n)),ti(i_,s_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=5*60,qV=Nw("authIdTokenMaxAge")||GV;let a_=null;const QV=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>qV)return;const i=t==null?void 0:t.token;a_!==i&&(a_=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function JV(n=Uw()){const e=vv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=AR(n,{popupRedirectResolver:HV,persistence:[Mz,Cz,yg]}),r=Nw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=QV(a.toString());UR(t,l,()=>l(t.currentUser)),FR(t,c=>l(c))}}const i=Rw("auth");return i&&RR(t,`http://${i}`),t}function ZV(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}xR({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=gr("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",ZV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WV("Browser");console.log("Firebase config loaded:",{authDomain:"flashcards-1f4c1.firebaseapp.com",projectId:"flashcards-1f4c1",storageBucket:"flashcards-1f4c1.firebasestorage.app",messagingSenderId:"1079353402957"});const YV={apiKey:"AIzaSyARHuueMBCAqvu7Dq6fYDd_fEutumTZl5g",authDomain:"flashcards-1f4c1.firebaseapp.com",projectId:"flashcards-1f4c1",storageBucket:"flashcards-1f4c1.firebasestorage.app",messagingSenderId:"1079353402957",appId:"1:1079353402957:web:bdc931b3b7a3db3066de04"};let Ih;try{Ih=Fw(YV),console.log("Firebase initialized successfully")}catch(n){console.error("Error initializing Firebase:",n),Ih={}}const Ye=(()=>{try{const n=JV(Ih);return(async()=>{try{await ef(n,Mz),console.log("Using IndexedDB persistence for auth (best)")}catch{try{await ef(n,Cz),console.log("Using localStorage persistence for auth (good)")}catch{try{await ef(n,yg),console.log("Using session persistence for auth (limited)")}catch(i){console.error("Could not set any persistence method:",i)}}}})(),n}catch(n){return console.error("Error initializing Firebase Auth:",n),{}}})(),Hz=new to,es=(()=>{try{const n=PC(Ih);return(async()=>{try{await AC(n,{forceOwnership:!1}),console.log(" Firestore offline persistence enabled successfully")}catch(t){t.code==="failed-precondition"?console.log(" Another tab is handling persistence - this is normal"):t.code==="unimplemented"?console.warn(" This browser does not support persistence"):console.error(" Unexpected error enabling persistence:",t)}})(),n}catch(n){return console.error(" Critical error initializing Firestore:",n),{}}})(),Cd=({label:n,value:e,darkMode:t})=>E.jsxs("div",{className:`p-3 rounded-lg ${t?"bg-gray-800":"bg-white"} text-center`,children:[E.jsx("p",{className:"text-xs text-gray-500 mb-1",children:n}),E.jsx("p",{className:"text-lg font-bold",children:e})]}),Kz=({darkMode:n=!1,onClose:e})=>{const[t,r]=te.useState([]),[i,a]=te.useState({cardsReviewed:0,easy:0,medium:0,hard:0,categories:new Set,sessionsCompleted:0});te.useEffect(()=>{(async()=>{if(!Ye.currentUser){console.log("User not logged in, cannot load study sessions");return}try{const h=QT(es,"studySessions"),p=BC(h,HC("userId","==",Ye.currentUser.uid),KC("date","desc"),$C(100)),y=await JC(p),k=[];y.forEach(S=>{k.push(S.data())}),r(k);const _={cardsReviewed:0,easy:0,medium:0,hard:0,categories:new Set,sessionsCompleted:k.length};k.forEach(S=>{_.cardsReviewed+=S.cardsReviewed,_.easy+=S.performance.easy,_.medium+=S.performance.medium,_.hard+=S.performance.hard,_.categories.add(S.category)}),a(_)}catch(h){console.error("Error loading study sessions:",h)}})()},[]);const l=c=>{const h=new Date(c);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(h)};return E.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 p-4",children:E.jsx("div",{className:`w-full max-w-[95vw] sm:max-w-3xl overflow-y-auto max-h-[90vh] ${n?"bg-gray-800 text-white":"bg-white text-gray-800"} rounded-lg shadow-xl`,children:E.jsxs("div",{className:"p-4 sm:p-6",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Study Statistics"}),E.jsx("button",{onClick:e,className:`p-2 rounded-full ${n?"hover:bg-gray-700":"hover:bg-gray-200"}`,children:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:E.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:`p-4 rounded-lg ${n?"bg-gray-700":"bg-gray-100"}`,children:[E.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:"General Statistics"}),E.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[E.jsx(Cd,{label:"Cards",value:i.cardsReviewed,darkMode:n}),E.jsx(Cd,{label:"Reviewed",value:i.sessionsCompleted,darkMode:n}),E.jsx(Cd,{label:"Easy",value:i.easy,darkMode:n}),E.jsx(Cd,{label:"Hard",value:i.hard,darkMode:n})]})]}),E.jsxs("div",{className:`p-4 rounded-lg ${n?"bg-gray-700":"bg-gray-100"}`,children:[E.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:"Performance Distribution"}),E.jsxs("div",{className:"h-10 mb-2 flex rounded-lg overflow-hidden",children:[E.jsx("div",{className:"bg-green-500 h-full transition-all duration-300",style:{width:`${i.easy/i.cardsReviewed*100}%`}}),E.jsx("div",{className:"bg-yellow-500 h-full transition-all duration-300",style:{width:`${i.medium/i.cardsReviewed*100}%`}}),E.jsx("div",{className:"bg-red-500 h-full transition-all duration-300",style:{width:`${i.hard/i.cardsReviewed*100}%`}})]}),E.jsxs("div",{className:"flex justify-between text-xs sm:text-sm",children:[E.jsxs("span",{children:["Easy: ",i.easy>0?Math.round(i.easy/i.cardsReviewed*100):0,"%"]}),E.jsxs("span",{children:["Medium: ",i.medium>0?Math.round(i.medium/i.cardsReviewed*100):0,"%"]}),E.jsxs("span",{children:["Hard: ",i.hard>0?Math.round(i.hard/i.cardsReviewed*100):0,"%"]})]})]}),E.jsxs("div",{className:`p-4 rounded-lg ${n?"bg-gray-700":"bg-gray-100"}`,children:[E.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:"Study Sessions"}),E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"min-w-full text-xs sm:text-sm",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{className:"p-2 text-left",children:"Date"}),E.jsx("th",{className:"p-2 text-right",children:"Cards"}),E.jsx("th",{className:"p-2 text-right",children:"Easy"}),E.jsx("th",{className:"p-2 text-right",children:"Medium"}),E.jsx("th",{className:"p-2 text-right",children:"Hard"})]})}),E.jsx("tbody",{children:t.map((c,h)=>{var p,y,k;return E.jsxs("tr",{className:h%2===0?n?"bg-gray-800":"bg-gray-50":"",children:[E.jsx("td",{className:"p-2",children:l(c.date)}),E.jsx("td",{className:"p-2 text-right",children:c.cardsReviewed}),E.jsx("td",{className:"p-2 text-right",children:((p=c.performance)==null?void 0:p.easy)||0}),E.jsx("td",{className:"p-2 text-right",children:((y=c.performance)==null?void 0:y.medium)||0}),E.jsx("td",{className:"p-2 text-right",children:((k=c.performance)==null?void 0:k.hard)||0})]},h)})})]})})]})]}),E.jsx("div",{className:"mt-4 flex justify-end",children:E.jsx("button",{onClick:e,className:`px-4 py-2 rounded ${n?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white`,children:"Close"})})]})})})},XV=({darkMode:n,onClose:e,totalCards:t})=>E.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 p-4",children:E.jsxs("div",{className:`w-full max-w-[95vw] sm:max-w-md p-4 sm:p-6 rounded-xl shadow-xl text-center
          ${n?"bg-gray-800 text-white":"bg-white text-gray-800"}`,children:[E.jsx("div",{className:"mb-6",children:E.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-100",children:E.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})}),E.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-2",children:"Congratulations!"}),E.jsxs("p",{className:"text-sm sm:text-base mb-6",children:["You've completed all ",t," cards in this deck! Your brain thanks you for the workout. "]}),E.jsx("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:E.jsx("button",{onClick:e,className:`px-4 py-2 rounded-lg ${n?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white transition-colors duration-200`,children:"Continue"})})]})}),$z=te.createContext({});function e2(n){const e=te.useRef(null);return e.current===null&&(e.current=n()),e.current}const _g=typeof window<"u",t2=_g?te.useLayoutEffect:te.useEffect,wg=te.createContext(null),Wz=te.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function n2(n=!0){const e=te.useContext(wg);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,a=te.useId();te.useEffect(()=>{if(n)return i(a)},[n]);const l=te.useCallback(()=>n&&r&&r(a),[a,r,n]);return!t&&r?[!1,l]:[!0]}function Eg(n,e){n.indexOf(e)===-1&&n.push(e)}function Tg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Rn=n=>n;let Gz=Rn;const r2={useManualTiming:!1};function zg(n){let e;return()=>(e===void 0&&(e=n()),e)}const Ja=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class Sg{constructor(){this.subscriptions=[]}add(e){return Eg(this.subscriptions,e),()=>Tg(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let a=0;a<i;a++){const l=this.subscriptions[a];l&&l(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const io=n=>n*1e3,so=n=>n/1e3;function qz(n,e){return e?n*(1e3/e):0}const o2=zg(()=>window.ScrollTimeline!==void 0);class i2{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(i=>{if(o2()&&i.attachTimeline)return i.attachTimeline(e);if(typeof t=="function")return t(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class s2 extends i2{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function xg(n,e){return n?n[e]||n.default||n:void 0}const qf=2e4;function Qz(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<qf;)e+=t,r=n.next(e);return e>=qf?1/0:e}function jg(n){return typeof n=="function"}function l_(n,e){n.timeline=e,n.onfinish=null}const Ig=n=>Array.isArray(n)&&typeof n[0]=="number",a2={linearEasing:void 0};function l2(n,e){const t=zg(n);return()=>{var r;return(r=a2[e])!==null&&r!==void 0?r:t()}}const Ph=l2(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Jz=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let a=0;a<i;a++)r+=n(Ja(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function Zz(n){return!!(typeof n=="function"&&Ph()||!n||typeof n=="string"&&(n in Qf||Ph())||Ig(n)||Array.isArray(n)&&n.every(Zz))}const du=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,Qf={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:du([0,.65,.55,1]),circOut:du([.55,0,1,.45]),backIn:du([.31,.01,.66,-.59]),backOut:du([.33,1.53,.69,.99])};function Yz(n,e){if(n)return typeof n=="function"&&Ph()?Jz(n,e):Ig(n)?du(n):Array.isArray(n)?n.map(t=>Yz(t,e)||Qf.easeOut):Qf[n]}const Rd=["read","resolveKeyframes","update","preRender","render","postRender"],u_={value:null};function u2(n,e){let t=new Set,r=new Set,i=!1,a=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},h=0;function p(k){l.has(k)&&(y.schedule(k),n()),h++,k(c)}const y={schedule:(k,_=!1,S=!1)=>{const N=S&&i?t:r;return _&&l.add(k),N.has(k)||N.add(k),k},cancel:k=>{r.delete(k),l.delete(k)},process:k=>{if(c=k,i){a=!0;return}i=!0,[t,r]=[r,t],t.forEach(p),e&&u_.value&&u_.value.frameloop[e].push(h),h=0,t.clear(),i=!1,a&&(a=!1,y.process(k))}};return y}const c2=40;function Xz(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,l=Rd.reduce((q,G)=>(q[G]=u2(a,e?G:void 0),q),{}),{read:c,resolveKeyframes:h,update:p,preRender:y,render:k,postRender:_}=l,S=()=>{const q=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(q-i.timestamp,c2),1),i.timestamp=q,i.isProcessing=!0,c.process(i),h.process(i),p.process(i),y.process(i),k.process(i),_.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(S))},C=()=>{t=!0,r=!0,i.isProcessing||n(S)};return{schedule:Rd.reduce((q,G)=>{const Q=l[G];return q[G]=(re,ee=!1,se=!1)=>(t||C(),Q.schedule(re,ee,se)),q},{}),cancel:q=>{for(let G=0;G<Rd.length;G++)l[Rd[G]].cancel(q)},state:i,steps:l}}const{schedule:st,cancel:ui,state:Wt,steps:nf}=Xz(typeof requestAnimationFrame<"u"?requestAnimationFrame:Rn,!0),{schedule:Pg}=Xz(queueMicrotask,!1);let Yd;function d2(){Yd=void 0}const Nr={now:()=>(Yd===void 0&&Nr.set(Wt.isProcessing||r2.useManualTiming?Wt.timestamp:performance.now()),Yd),set:n=>{Yd=n,queueMicrotask(d2)}},mr={x:!1,y:!1};function eS(){return mr.x||mr.y}function h2(n){return n==="x"||n==="y"?mr[n]?null:(mr[n]=!0,()=>{mr[n]=!1}):mr.x||mr.y?null:(mr.x=mr.y=!0,()=>{mr.x=mr.y=!1})}function m2(n,e,t){var r;if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const a=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(n);return a?Array.from(a):[]}return Array.from(n)}function tS(n,e){const t=m2(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function c_(n){return!(n.pointerType==="touch"||eS())}function p2(n,e,t={}){const[r,i,a]=tS(n,t),l=c=>{if(!c_(c))return;const{target:h}=c,p=e(h,c);if(typeof p!="function"||!h)return;const y=k=>{c_(k)&&(p(k),h.removeEventListener("pointerleave",y))};h.addEventListener("pointerleave",y,i)};return r.forEach(c=>{c.addEventListener("pointerenter",l,i)}),a}function d_(n,e){const t=`${e}PointerCapture`;if(n.target instanceof Element&&t in n.target&&n.pointerId!==void 0)try{n.target[t](n.pointerId)}catch{}}const nS=(n,e)=>e?n===e?!0:nS(n,e.parentElement):!1,Ag=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,f2=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function v2(n){return f2.has(n.tagName)||n.tabIndex!==-1}const hu=new WeakSet;function h_(n){return e=>{e.key==="Enter"&&n(e)}}function rf(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const g2=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=h_(()=>{if(hu.has(t))return;rf(t,"down");const i=h_(()=>{rf(t,"up")}),a=()=>rf(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function m_(n){return Ag(n)&&!eS()}function y2(n,e,t={}){const[r,i,a]=tS(n,t),l=c=>{const h=c.currentTarget;if(!h||!m_(c)||hu.has(h))return;hu.add(h),d_(c,"set");const p=e(h,c),y=(S,C)=>{h.removeEventListener("pointerup",k),h.removeEventListener("pointercancel",_),d_(S,"release"),!(!m_(S)||!hu.has(h))&&(hu.delete(h),typeof p=="function"&&p(S,{success:C}))},k=S=>{(S.isTrusted?k2(S,h instanceof Element?h.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}):!1)?y(S,!1):y(S,!(h instanceof Element)||nS(h,S.target))},_=S=>{y(S,!1)};h.addEventListener("pointerup",k,i),h.addEventListener("pointercancel",_,i),h.addEventListener("lostpointercapture",_,i)};return r.forEach(c=>{c=t.useGlobalTarget?window:c;let h=!1;c instanceof HTMLElement&&(h=!0,!v2(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0)),c.addEventListener("pointerdown",l,i),h&&c.addEventListener("focus",p=>g2(p,i),i)}),a}function k2(n,e){return n.clientX<e.left||n.clientX>e.right||n.clientY<e.top||n.clientY>e.bottom}const p_=30,b2=n=>!isNaN(parseFloat(n));class _2{constructor(e,t={}){this.version="12.5.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=Nr.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Nr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=b2(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Sg);const r=this.events[e].add(t);return e==="change"?()=>{r(),st.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Nr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>p_)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,p_);return qz(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Fu(n,e){return new _2(n,e)}const rS=te.createContext({strict:!1}),f_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Za={};for(const n in f_)Za[n]={isEnabled:e=>f_[n].some(t=>!!e[t])};function w2(n){for(const e in n)Za[e]={...Za[e],...n[e]}}const E2=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ah(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||E2.has(n)}let oS=n=>!Ah(n);function T2(n){n&&(oS=e=>e.startsWith("on")?!Ah(e):n(e))}try{T2(require("@emotion/is-prop-valid").default)}catch{}function z2(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(oS(i)||t===!0&&Ah(i)||!e&&!Ah(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function S2(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,i)=>i==="create"?n:(e.has(i)||e.set(i,n(i)),e.get(i))})}const am=te.createContext({});function lm(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Uu(n){return typeof n=="string"||Array.isArray(n)}const Cg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Rg=["initial",...Cg];function um(n){return lm(n.animate)||Rg.some(e=>Uu(n[e]))}function iS(n){return!!(um(n)||n.variants)}function x2(n,e){if(um(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Uu(t)?t:void 0,animate:Uu(r)?r:void 0}}return n.inherit!==!1?e:{}}function j2(n){const{initial:e,animate:t}=x2(n,te.useContext(am));return te.useMemo(()=>({initial:e,animate:t}),[v_(e),v_(t)])}function v_(n){return Array.isArray(n)?n.join(" "):n}const I2=Symbol.for("motionComponentSymbol");function Ta(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function P2(n,e,t){return te.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Ta(t)&&(t.current=r))},[e])}const Vg=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),A2="framerAppearId",sS="data-"+Vg(A2),aS=te.createContext({});function C2(n,e,t,r,i){var a,l;const{visualElement:c}=te.useContext(am),h=te.useContext(rS),p=te.useContext(wg),y=te.useContext(Wz).reducedMotion,k=te.useRef(null);r=r||h.renderer,!k.current&&r&&(k.current=r(n,{visualState:e,parent:c,props:t,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:y}));const _=k.current,S=te.useContext(aS);_&&!_.projection&&i&&(_.type==="html"||_.type==="svg")&&R2(k.current,t,i,S);const C=te.useRef(!1);te.useInsertionEffect(()=>{_&&C.current&&_.update(t,p)});const N=t[sS],M=te.useRef(!!N&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,N))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,N)));return t2(()=>{_&&(C.current=!0,window.MotionIsMounted=!0,_.updateFeatures(),Pg.render(_.render),M.current&&_.animationState&&_.animationState.animateChanges())}),te.useEffect(()=>{_&&(!M.current&&_.animationState&&_.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var q;(q=window.MotionHandoffMarkAsComplete)===null||q===void 0||q.call(window,N)}),M.current=!1))}),_}function R2(n,e,t,r){const{layoutId:i,layout:a,drag:l,dragConstraints:c,layoutScroll:h,layoutRoot:p}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:lS(n.parent)),n.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!l||c&&Ta(c),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:h,layoutRoot:p})}function lS(n){if(n)return n.options.allowProjection!==!1?n.projection:lS(n.parent)}function V2({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){var a,l;n&&w2(n);function c(p,y){let k;const _={...te.useContext(Wz),...p,layoutId:N2(p)},{isStatic:S}=_,C=j2(p),N=r(p,S);if(!S&&_g){D2();const M=O2(_);k=M.MeasureLayout,C.visualElement=C2(i,N,_,e,M.ProjectionNode)}return E.jsxs(am.Provider,{value:C,children:[k&&C.visualElement?E.jsx(k,{visualElement:C.visualElement,..._}):null,t(i,p,P2(N,C.visualElement,y),N,S,C.visualElement)]})}c.displayName=`motion.${typeof i=="string"?i:`create(${(l=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&l!==void 0?l:""})`}`;const h=te.forwardRef(c);return h[I2]=i,h}function N2({layoutId:n}){const e=te.useContext($z).id;return e&&n!==void 0?e+"-"+n:n}function D2(n,e){te.useContext(rS).strict}function O2(n){const{drag:e,layout:t}=Za;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const uS=n=>e=>typeof e=="string"&&e.startsWith(n),Ng=uS("--"),M2=uS("var(--"),Dg=n=>M2(n)?L2.test(n.split("/*")[0].trim()):!1,L2=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Bu={};function F2(n){for(const e in n)Bu[e]=n[e],Ng(e)&&(Bu[e].isCSSVariable=!0)}const sl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ws=new Set(sl);function cS(n,{layout:e,layoutId:t}){return ws.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Bu[n]||n==="opacity")}const nn=n=>!!(n&&n.getVelocity),dS=(n,e)=>e&&typeof n=="number"?e.transform(n):n,mo=(n,e,t)=>t>e?e:t<n?n:t,al={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Hu={...al,transform:n=>mo(0,1,n)},Vd={...al,default:1},ic=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Go=ic("deg"),Dr=ic("%"),Ie=ic("px"),U2=ic("vh"),B2=ic("vw"),g_={...Dr,parse:n=>Dr.parse(n)/100,transform:n=>Dr.transform(n*100)},H2={borderWidth:Ie,borderTopWidth:Ie,borderRightWidth:Ie,borderBottomWidth:Ie,borderLeftWidth:Ie,borderRadius:Ie,radius:Ie,borderTopLeftRadius:Ie,borderTopRightRadius:Ie,borderBottomRightRadius:Ie,borderBottomLeftRadius:Ie,width:Ie,maxWidth:Ie,height:Ie,maxHeight:Ie,top:Ie,right:Ie,bottom:Ie,left:Ie,padding:Ie,paddingTop:Ie,paddingRight:Ie,paddingBottom:Ie,paddingLeft:Ie,margin:Ie,marginTop:Ie,marginRight:Ie,marginBottom:Ie,marginLeft:Ie,backgroundPositionX:Ie,backgroundPositionY:Ie},K2={rotate:Go,rotateX:Go,rotateY:Go,rotateZ:Go,scale:Vd,scaleX:Vd,scaleY:Vd,scaleZ:Vd,skew:Go,skewX:Go,skewY:Go,distance:Ie,translateX:Ie,translateY:Ie,translateZ:Ie,x:Ie,y:Ie,z:Ie,perspective:Ie,transformPerspective:Ie,opacity:Hu,originX:g_,originY:g_,originZ:Ie},y_={...al,transform:Math.round},Og={...H2,...K2,zIndex:y_,size:Ie,fillOpacity:Hu,strokeOpacity:Hu,numOctaves:y_},$2={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},W2=sl.length;function G2(n,e,t){let r="",i=!0;for(let a=0;a<W2;a++){const l=sl[a],c=n[l];if(c===void 0)continue;let h=!0;if(typeof c=="number"?h=c===(l.startsWith("scale")?1:0):h=parseFloat(c)===0,!h||t){const p=dS(c,Og[l]);if(!h){i=!1;const y=$2[l]||l;r+=`${y}(${p}) `}t&&(e[l]=p)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function Mg(n,e,t){const{style:r,vars:i,transformOrigin:a}=n;let l=!1,c=!1;for(const h in e){const p=e[h];if(ws.has(h)){l=!0;continue}else if(Ng(h)){i[h]=p;continue}else{const y=dS(p,Og[h]);h.startsWith("origin")?(c=!0,a[h]=y):r[h]=y}}if(e.transform||(l||t?r.transform=G2(e,n.transform,t):r.transform&&(r.transform="none")),c){const{originX:h="50%",originY:p="50%",originZ:y=0}=a;r.transformOrigin=`${h} ${p} ${y}`}}const Lg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function hS(n,e,t){for(const r in e)!nn(e[r])&&!cS(r,t)&&(n[r]=e[r])}function q2({transformTemplate:n},e){return te.useMemo(()=>{const t=Lg();return Mg(t,e,n),Object.assign({},t.vars,t.style)},[e])}function Q2(n,e){const t=n.style||{},r={};return hS(r,t,n),Object.assign(r,q2(n,e)),r}function J2(n,e){const t={},r=Q2(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const Z2=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Fg(n){return typeof n!="string"||n.includes("-")?!1:!!(Z2.indexOf(n)>-1||/[A-Z]/u.test(n))}const Y2={offset:"stroke-dashoffset",array:"stroke-dasharray"},X2={offset:"strokeDashoffset",array:"strokeDasharray"};function eN(n,e,t=1,r=0,i=!0){n.pathLength=1;const a=i?Y2:X2;n[a.offset]=Ie.transform(-r);const l=Ie.transform(e),c=Ie.transform(t);n[a.array]=`${l} ${c}`}function k_(n,e,t){return typeof n=="string"?n:Ie.transform(e+t*n)}function tN(n,e,t){const r=k_(e,n.x,n.width),i=k_(t,n.y,n.height);return`${r} ${i}`}function Ug(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:a,pathLength:l,pathSpacing:c=1,pathOffset:h=0,...p},y,k){if(Mg(n,p,k),y){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:_,style:S,dimensions:C}=n;_.transform&&(C&&(S.transform=_.transform),delete _.transform),C&&(i!==void 0||a!==void 0||S.transform)&&(S.transformOrigin=tN(C,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(_.x=e),t!==void 0&&(_.y=t),r!==void 0&&(_.scale=r),l!==void 0&&eN(_,l,c,h,!1)}const mS=()=>({...Lg(),attrs:{}}),Bg=n=>typeof n=="string"&&n.toLowerCase()==="svg";function nN(n,e,t,r){const i=te.useMemo(()=>{const a=mS();return Ug(a,e,Bg(r),n.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};hS(a,n.style,n),i.style={...a,...i.style}}return i}function rN(n=!1){return(t,r,i,{latestValues:a},l)=>{const h=(Fg(t)?nN:J2)(r,a,l,t),p=z2(r,typeof t=="string",n),y=t!==te.Fragment?{...p,...h,ref:i}:{},{children:k}=r,_=te.useMemo(()=>nn(k)?k.get():k,[k]);return te.createElement(t,{...y,children:_})}}function b_(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function Hg(n,e,t,r){if(typeof e=="function"){const[i,a]=b_(r);e=e(t!==void 0?t:n.custom,i,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,a]=b_(r);e=e(t!==void 0?t:n.custom,i,a)}return e}const Jf=n=>Array.isArray(n),oN=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),iN=n=>Jf(n)?n[n.length-1]||0:n;function Xd(n){const e=nn(n)?n.get():n;return oN(e)?e.toValue():e}function sN({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},r,i,a){const l={latestValues:aN(r,i,a,n),renderState:e()};return t&&(l.onMount=c=>t({props:r,current:c,...l}),l.onUpdate=c=>t(c)),l}const pS=n=>(e,t)=>{const r=te.useContext(am),i=te.useContext(wg),a=()=>sN(n,e,r,i);return t?a():e2(a)};function aN(n,e,t,r){const i={},a=r(n,{});for(const _ in a)i[_]=Xd(a[_]);let{initial:l,animate:c}=n;const h=um(n),p=iS(n);e&&p&&!h&&n.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let y=t?t.initial===!1:!1;y=y||l===!1;const k=y?c:l;if(k&&typeof k!="boolean"&&!lm(k)){const _=Array.isArray(k)?k:[k];for(let S=0;S<_.length;S++){const C=Hg(n,_[S]);if(C){const{transitionEnd:N,transition:M,...q}=C;for(const G in q){let Q=q[G];if(Array.isArray(Q)){const re=y?Q.length-1:0;Q=Q[re]}Q!==null&&(i[G]=Q)}for(const G in N)i[G]=N[G]}}}return i}function Kg(n,e,t){var r;const{style:i}=n,a={};for(const l in i)(nn(i[l])||e.style&&nn(e.style[l])||cS(l,n)||((r=t==null?void 0:t.getValue(l))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[l]=i[l]);return a}const lN={useVisualState:pS({scrapeMotionValuesFromProps:Kg,createRenderState:Lg})};function fS(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function vS(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const a in t)n.style.setProperty(a,t[a])}const gS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function yS(n,e,t,r){vS(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(gS.has(i)?i:Vg(i),e.attrs[i])}function kS(n,e,t){const r=Kg(n,e,t);for(const i in n)if(nn(n[i])||nn(e[i])){const a=sl.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=n[i]}return r}const __=["x","y","width","height","cx","cy","r"],uN={useVisualState:pS({scrapeMotionValuesFromProps:kS,createRenderState:mS,onUpdate:({props:n,prevProps:e,current:t,renderState:r,latestValues:i})=>{if(!t)return;let a=!!n.drag;if(!a){for(const c in i)if(ws.has(c)){a=!0;break}}if(!a)return;let l=!e;if(e)for(let c=0;c<__.length;c++){const h=__[c];n[h]!==e[h]&&(l=!0)}l&&st.read(()=>{fS(t,r),st.render(()=>{Ug(r,i,Bg(t.tagName),n.transformTemplate),yS(t,r)})})}})};function cN(n,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const l={...Fg(r)?uN:lN,preloadedFeatures:n,useRender:rN(i),createVisualElement:e,Component:r};return V2(l)}}function Ku(n,e,t){const r=n.getProps();return Hg(r,e,t!==void 0?t:r.custom,n)}const bS=new Set(["width","height","top","left","right","bottom",...sl]);function dN(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Fu(t))}function hN(n,e){const t=Ku(n,e);let{transitionEnd:r={},transition:i={},...a}=t||{};a={...a,...r};for(const l in a){const c=iN(a[l]);dN(n,l,c)}}function mN(n){return!!(nn(n)&&n.add)}function Zf(n,e){const t=n.getValue("willChange");if(mN(t))return t.add(e)}function _S(n){return n.props[sS]}const wS=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,pN=1e-7,fN=12;function vN(n,e,t,r,i){let a,l,c=0;do l=e+(t-e)/2,a=wS(l,r,i)-n,a>0?t=l:e=l;while(Math.abs(a)>pN&&++c<fN);return l}function sc(n,e,t,r){if(n===e&&t===r)return Rn;const i=a=>vN(a,0,1,n,t);return a=>a===0||a===1?a:wS(i(a),e,r)}const ES=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,TS=n=>e=>1-n(1-e),zS=sc(.33,1.53,.69,.99),$g=TS(zS),SS=ES($g),xS=n=>(n*=2)<1?.5*$g(n):.5*(2-Math.pow(2,-10*(n-1))),Wg=n=>1-Math.sin(Math.acos(n)),jS=TS(Wg),IS=ES(Wg),PS=n=>/^0[^.\s]+$/u.test(n);function gN(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||PS(n):!0}const bu=n=>Math.round(n*1e5)/1e5,Gg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function yN(n){return n==null}const kN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,qg=(n,e)=>t=>!!(typeof t=="string"&&kN.test(t)&&t.startsWith(n)||e&&!yN(t)&&Object.prototype.hasOwnProperty.call(t,e)),AS=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,a,l,c]=r.match(Gg);return{[n]:parseFloat(i),[e]:parseFloat(a),[t]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},bN=n=>mo(0,255,n),of={...al,transform:n=>Math.round(bN(n))},ts={test:qg("rgb","red"),parse:AS("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+of.transform(n)+", "+of.transform(e)+", "+of.transform(t)+", "+bu(Hu.transform(r))+")"};function _N(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Yf={test:qg("#"),parse:_N,transform:ts.transform},za={test:qg("hsl","hue"),parse:AS("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Dr.transform(bu(e))+", "+Dr.transform(bu(t))+", "+bu(Hu.transform(r))+")"},en={test:n=>ts.test(n)||Yf.test(n)||za.test(n),parse:n=>ts.test(n)?ts.parse(n):za.test(n)?za.parse(n):Yf.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?ts.transform(n):za.transform(n)},wN=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function EN(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(Gg))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(wN))===null||t===void 0?void 0:t.length)||0)>0}const CS="number",RS="color",TN="var",zN="var(",w_="${}",SN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $u(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(SN,h=>(en.test(h)?(r.color.push(a),i.push(RS),t.push(en.parse(h))):h.startsWith(zN)?(r.var.push(a),i.push(TN),t.push(h)):(r.number.push(a),i.push(CS),t.push(parseFloat(h))),++a,w_)).split(w_);return{values:t,split:c,indexes:r,types:i}}function VS(n){return $u(n).values}function NS(n){const{split:e,types:t}=$u(n),r=e.length;return i=>{let a="";for(let l=0;l<r;l++)if(a+=e[l],i[l]!==void 0){const c=t[l];c===CS?a+=bu(i[l]):c===RS?a+=en.transform(i[l]):a+=i[l]}return a}}const xN=n=>typeof n=="number"?0:n;function jN(n){const e=VS(n);return NS(n)(e.map(xN))}const ci={test:EN,parse:VS,createTransformer:NS,getAnimatableNone:jN},IN=new Set(["brightness","contrast","saturate","opacity"]);function PN(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Gg)||[];if(!r)return n;const i=t.replace(r,"");let a=IN.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+i+")"}const AN=/\b([a-z-]*)\(.*?\)/gu,Xf={...ci,getAnimatableNone:n=>{const e=n.match(AN);return e?e.map(PN).join(" "):n}},CN={...Og,color:en,backgroundColor:en,outlineColor:en,fill:en,stroke:en,borderColor:en,borderTopColor:en,borderRightColor:en,borderBottomColor:en,borderLeftColor:en,filter:Xf,WebkitFilter:Xf},DS=n=>CN[n];function OS(n,e){let t=DS(n);return t!==Xf&&(t=ci),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const RN=new Set(["auto","none","0"]);function VN(n,e,t){let r=0,i;for(;r<n.length&&!i;){const a=n[r];typeof a=="string"&&!RN.has(a)&&$u(a).values.length&&(i=n[r]),r++}if(i&&t)for(const a of e)n[a]=OS(t,i)}const ns=n=>n*180/Math.PI,ev=n=>{const e=ns(Math.atan2(n[1],n[0]));return tv(e)},NN={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:ev,rotateZ:ev,skewX:n=>ns(Math.atan(n[1])),skewY:n=>ns(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},tv=n=>(n=n%360,n<0&&(n+=360),n),E_=ev,T_=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),z_=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),DN={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:T_,scaleY:z_,scale:n=>(T_(n)+z_(n))/2,rotateX:n=>tv(ns(Math.atan2(n[6],n[5]))),rotateY:n=>tv(ns(Math.atan2(-n[2],n[0]))),rotateZ:E_,rotate:E_,skewX:n=>ns(Math.atan(n[4])),skewY:n=>ns(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function S_(n){return n.includes("scale")?1:0}function nv(n,e){if(!n||n==="none")return S_(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=DN,i=t;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=NN,i=c}if(!i)return S_(e);const a=r[e],l=i[1].split(",").map(MN);return typeof a=="function"?a(l):l[a]}const ON=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return nv(t,e)};function MN(n){return parseFloat(n.trim())}const x_=n=>n===al||n===Ie,LN=new Set(["x","y","z"]),FN=sl.filter(n=>!LN.has(n));function UN(n){const e=[];return FN.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Ya={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>nv(e,"x"),y:(n,{transform:e})=>nv(e,"y")};Ya.translateX=Ya.x;Ya.translateY=Ya.y;const as=new Set;let rv=!1,ov=!1;function MS(){if(ov){const n=Array.from(as).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=UN(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([a,l])=>{var c;(c=r.getValue(a))===null||c===void 0||c.set(l)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ov=!1,rv=!1,as.forEach(n=>n.complete()),as.clear()}function LS(){as.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(ov=!0)})}function BN(){LS(),MS()}class Qg{constructor(e,t,r,i,a,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=a,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(as.add(this),rv||(rv=!0,st.read(LS),st.resolveKeyframes(MS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const l=i==null?void 0:i.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&t){const h=r.readValue(t,c);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=c),i&&l===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),as.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,as.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const FS=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),HN=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function KN(n){const e=HN.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function US(n,e,t=1){const[r,i]=KN(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const l=a.trim();return FS(l)?parseFloat(l):l}return Dg(i)?US(i,e,t+1):i}const BS=n=>e=>e.test(n),$N={test:n=>n==="auto",parse:n=>n},HS=[al,Ie,Dr,Go,B2,U2,$N],j_=n=>HS.find(BS(n));class KS extends Qg{constructor(e,t,r,i,a){super(e,t,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let p=e[h];if(typeof p=="string"&&(p=p.trim(),Dg(p))){const y=US(p,t.current);y!==void 0&&(e[h]=y),h===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!bS.has(r)||e.length!==2)return;const[i,a]=e,l=j_(i),c=j_(a);if(l!==c)if(x_(l)&&x_(c))for(let h=0;h<e.length;h++){const p=e[h];typeof p=="string"&&(e[h]=parseFloat(p))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)gN(e[i])&&r.push(i);r.length&&VN(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ya[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const a=t.getValue(r);a&&a.jump(this.measuredOrigin,!1);const l=i.length-1,c=i[l];i[l]=Ya[r](t.measureViewportBox(),window.getComputedStyle(t.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([h,p])=>{t.getValue(h).set(p)}),this.resolveNoneKeyframes()}}const I_=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(ci.test(n)||n==="0")&&!n.startsWith("url("));function WN(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function GN(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],l=I_(i,e),c=I_(a,e);return!l||!c?!1:WN(n)||(t==="spring"||jg(t))&&r}const qN=n=>n!==null;function cm(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(qN),a=e&&t!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const QN=40;class $S{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Nr.now(),this.options={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:a,repeatType:l,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>QN?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&BN(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Nr.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:l,onComplete:c,onUpdate:h,isGenerator:p}=this.options;if(!p&&!GN(e,r,i,a))if(l)this.options.duration=0;else{h&&h(cm(e,this.options,t)),c&&c(),this.resolveFinishedPromise();return}const y=this.initPlayback(e,t);y!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...y},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const vt=(n,e,t)=>n+(e-n)*t;function sf(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function JN({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,a=0,l=0;if(!e)i=a=l=t;else{const c=t<.5?t*(1+e):t+e-t*e,h=2*t-c;i=sf(h,c,n+1/3),a=sf(h,c,n),l=sf(h,c,n-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:r}}function Ch(n,e){return t=>t>0?e:n}const af=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},ZN=[Yf,ts,za],YN=n=>ZN.find(e=>e.test(n));function P_(n){const e=YN(n);if(!e)return!1;let t=e.parse(n);return e===za&&(t=JN(t)),t}const A_=(n,e)=>{const t=P_(n),r=P_(e);if(!t||!r)return Ch(n,e);const i={...t};return a=>(i.red=af(t.red,r.red,a),i.green=af(t.green,r.green,a),i.blue=af(t.blue,r.blue,a),i.alpha=vt(t.alpha,r.alpha,a),ts.transform(i))},XN=(n,e)=>t=>e(n(t)),ac=(...n)=>n.reduce(XN),iv=new Set(["none","hidden"]);function eD(n,e){return iv.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function tD(n,e){return t=>vt(n,e,t)}function Jg(n){return typeof n=="number"?tD:typeof n=="string"?Dg(n)?Ch:en.test(n)?A_:oD:Array.isArray(n)?WS:typeof n=="object"?en.test(n)?A_:nD:Ch}function WS(n,e){const t=[...n],r=t.length,i=n.map((a,l)=>Jg(a)(a,e[l]));return a=>{for(let l=0;l<r;l++)t[l]=i[l](a);return t}}function nD(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=Jg(n[i])(n[i],e[i]));return i=>{for(const a in r)t[a]=r[a](i);return t}}function rD(n,e){var t;const r=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const l=e.types[a],c=n.indexes[l][i[l]],h=(t=n.values[c])!==null&&t!==void 0?t:0;r[a]=h,i[l]++}return r}const oD=(n,e)=>{const t=ci.createTransformer(e),r=$u(n),i=$u(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?iv.has(n)&&!i.values.length||iv.has(e)&&!r.values.length?eD(n,e):ac(WS(rD(r,i),i.values),t):Ch(n,e)};function GS(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?vt(n,e,t):Jg(n)(n,e)}const iD=5;function qS(n,e,t){const r=Math.max(e-iD,0);return qz(t-n(r),e-r)}const kt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},C_=.001;function sD({duration:n=kt.duration,bounce:e=kt.bounce,velocity:t=kt.velocity,mass:r=kt.mass}){let i,a,l=1-e;l=mo(kt.minDamping,kt.maxDamping,l),n=mo(kt.minDuration,kt.maxDuration,so(n)),l<1?(i=p=>{const y=p*l,k=y*n,_=y-t,S=sv(p,l),C=Math.exp(-k);return C_-_/S*C},a=p=>{const k=p*l*n,_=k*t+t,S=Math.pow(l,2)*Math.pow(p,2)*n,C=Math.exp(-k),N=sv(Math.pow(p,2),l);return(-i(p)+C_>0?-1:1)*((_-S)*C)/N}):(i=p=>{const y=Math.exp(-p*n),k=(p-t)*n+1;return-.001+y*k},a=p=>{const y=Math.exp(-p*n),k=(t-p)*(n*n);return y*k});const c=5/n,h=lD(i,a,c);if(n=io(n),isNaN(h))return{stiffness:kt.stiffness,damping:kt.damping,duration:n};{const p=Math.pow(h,2)*r;return{stiffness:p,damping:l*2*Math.sqrt(r*p),duration:n}}}const aD=12;function lD(n,e,t){let r=t;for(let i=1;i<aD;i++)r=r-n(r)/e(r);return r}function sv(n,e){return n*Math.sqrt(1-e*e)}const uD=["duration","bounce"],cD=["stiffness","damping","mass"];function R_(n,e){return e.some(t=>n[t]!==void 0)}function dD(n){let e={velocity:kt.velocity,stiffness:kt.stiffness,damping:kt.damping,mass:kt.mass,isResolvedFromDuration:!1,...n};if(!R_(n,cD)&&R_(n,uD))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,a=2*mo(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:kt.mass,stiffness:i,damping:a}}else{const t=sD(n);e={...e,...t,mass:kt.mass},e.isResolvedFromDuration=!0}return e}function QS(n=kt.visualDuration,e=kt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const a=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],c={done:!1,value:a},{stiffness:h,damping:p,mass:y,duration:k,velocity:_,isResolvedFromDuration:S}=dD({...t,velocity:-so(t.velocity||0)}),C=_||0,N=p/(2*Math.sqrt(h*y)),M=l-a,q=so(Math.sqrt(h/y)),G=Math.abs(M)<5;r||(r=G?kt.restSpeed.granular:kt.restSpeed.default),i||(i=G?kt.restDelta.granular:kt.restDelta.default);let Q;if(N<1){const ee=sv(q,N);Q=se=>{const P=Math.exp(-N*q*se);return l-P*((C+N*q*M)/ee*Math.sin(ee*se)+M*Math.cos(ee*se))}}else if(N===1)Q=ee=>l-Math.exp(-q*ee)*(M+(C+q*M)*ee);else{const ee=q*Math.sqrt(N*N-1);Q=se=>{const P=Math.exp(-N*q*se),z=Math.min(ee*se,300);return l-P*((C+N*q*M)*Math.sinh(z)+ee*M*Math.cosh(z))/ee}}const re={calculatedDuration:S&&k||null,next:ee=>{const se=Q(ee);if(S)c.done=ee>=k;else{let P=0;N<1&&(P=ee===0?io(C):qS(Q,ee,se));const z=Math.abs(P)<=r,j=Math.abs(l-se)<=i;c.done=z&&j}return c.value=c.done?l:se,c},toString:()=>{const ee=Math.min(Qz(re),qf),se=Jz(P=>re.next(ee*P).value,ee,30);return ee+"ms "+se}};return re}function V_({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:l,min:c,max:h,restDelta:p=.5,restSpeed:y}){const k=n[0],_={done:!1,value:k},S=z=>c!==void 0&&z<c||h!==void 0&&z>h,C=z=>c===void 0?h:h===void 0||Math.abs(c-z)<Math.abs(h-z)?c:h;let N=t*e;const M=k+N,q=l===void 0?M:l(M);q!==M&&(N=q-k);const G=z=>-N*Math.exp(-z/r),Q=z=>q+G(z),re=z=>{const j=G(z),A=Q(z);_.done=Math.abs(j)<=p,_.value=_.done?q:A};let ee,se;const P=z=>{S(_.value)&&(ee=z,se=QS({keyframes:[_.value,C(_.value)],velocity:qS(Q,z,_.value),damping:i,stiffness:a,restDelta:p,restSpeed:y}))};return P(0),{calculatedDuration:null,next:z=>{let j=!1;return!se&&ee===void 0&&(j=!0,re(z),P(z)),ee!==void 0&&z>=ee?se.next(z-ee):(!j&&re(z),_)}}}const hD=sc(.42,0,1,1),mD=sc(0,0,.58,1),JS=sc(.42,0,.58,1),pD=n=>Array.isArray(n)&&typeof n[0]!="number",fD={linear:Rn,easeIn:hD,easeInOut:JS,easeOut:mD,circIn:Wg,circInOut:IS,circOut:jS,backIn:$g,backInOut:SS,backOut:zS,anticipate:xS},N_=n=>{if(Ig(n)){Gz(n.length===4);const[e,t,r,i]=n;return sc(e,t,r,i)}else if(typeof n=="string")return fD[n];return n};function vD(n,e,t){const r=[],i=t||GS,a=n.length-1;for(let l=0;l<a;l++){let c=i(n[l],n[l+1]);if(e){const h=Array.isArray(e)?e[l]||Rn:e;c=ac(h,c)}r.push(c)}return r}function gD(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const a=n.length;if(Gz(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=vD(e,r,i),h=c.length,p=y=>{if(l&&y<n[0])return e[0];let k=0;if(h>1)for(;k<n.length-2&&!(y<n[k+1]);k++);const _=Ja(n[k],n[k+1],y);return c[k](_)};return t?y=>p(mo(n[0],n[a-1],y)):p}function yD(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Ja(0,e,r);n.push(vt(t,1,i))}}function kD(n){const e=[0];return yD(e,n.length-1),e}function bD(n,e){return n.map(t=>t*e)}function _D(n,e){return n.map(()=>e||JS).splice(0,n.length-1)}function Rh({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=pD(r)?r.map(N_):N_(r),a={done:!1,value:e[0]},l=bD(t&&t.length===e.length?t:kD(e),n),c=gD(l,e,{ease:Array.isArray(i)?i:_D(e,i)});return{calculatedDuration:n,next:h=>(a.value=c(h),a.done=h>=n,a)}}const wD=n=>{const e=({timestamp:t})=>n(t);return{start:()=>st.update(e,!0),stop:()=>ui(e),now:()=>Wt.isProcessing?Wt.timestamp:Nr.now()}},ED={decay:V_,inertia:V_,tween:Rh,keyframes:Rh,spring:QS},TD=n=>n/100;class Zg extends $S{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:h}=this.options;h&&h()};const{name:t,motionValue:r,element:i,keyframes:a}=this.options,l=(i==null?void 0:i.KeyframeResolver)||Qg,c=(h,p)=>this.onKeyframesResolved(h,p);this.resolver=new l(a,c,t,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:l=0}=this.options,c=jg(t)?t:ED[t]||Rh;let h,p;c!==Rh&&typeof e[0]!="number"&&(h=ac(TD,GS(e[0],e[1])),e=[0,100]);const y=c({...this.options,keyframes:e});a==="mirror"&&(p=c({...this.options,keyframes:[...e].reverse(),velocity:-l})),y.calculatedDuration===null&&(y.calculatedDuration=Qz(y));const{calculatedDuration:k}=y,_=k+i,S=_*(r+1)-i;return{generator:y,mirroredGenerator:p,mapPercentToKeyframes:h,calculatedDuration:k,resolvedDuration:_,totalDuration:S}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:z}=this.options;return{done:!0,value:z[z.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:l,mapPercentToKeyframes:c,keyframes:h,calculatedDuration:p,totalDuration:y,resolvedDuration:k}=r;if(this.startTime===null)return a.next(0);const{delay:_,repeat:S,repeatType:C,repeatDelay:N,onUpdate:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-y/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const q=this.currentTime-_*(this.speed>=0?1:-1),G=this.speed>=0?q<0:q>y;this.currentTime=Math.max(q,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=y);let Q=this.currentTime,re=a;if(S){const z=Math.min(this.currentTime,y)/k;let j=Math.floor(z),A=z%1;!A&&z>=1&&(A=1),A===1&&j--,j=Math.min(j,S+1),!!(j%2)&&(C==="reverse"?(A=1-A,N&&(A-=N/k)):C==="mirror"&&(re=l)),Q=mo(0,1,A)*k}const ee=G?{done:!1,value:h[0]}:re.next(Q);c&&(ee.value=c(ee.value));let{done:se}=ee;!G&&p!==null&&(se=this.speed>=0?this.currentTime>=y:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&se);return P&&i!==void 0&&(ee.value=cm(h,this.options,i)),M&&M(ee.value),P&&this.finish(),ee}get duration(){const{resolved:e}=this;return e?so(e.calculatedDuration):0}get time(){return so(this.currentTime)}set time(e){e=io(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=so(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=wD,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const zD=new Set(["opacity","clipPath","filter","transform"]);function SD(n,e,t,{delay:r=0,duration:i=300,repeat:a=0,repeatType:l="loop",ease:c="easeInOut",times:h}={}){const p={[e]:t};h&&(p.offset=h);const y=Yz(c,i);return Array.isArray(y)&&(p.easing=y),n.animate(p,{delay:r,duration:i,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"})}const xD=zg(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Vh=10,jD=2e4;function ID(n){return jg(n.type)||n.type==="spring"||!Zz(n.ease)}function PD(n,e){const t=new Zg({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const i=[];let a=0;for(;!r.done&&a<jD;)r=t.sample(a),i.push(r.value),a+=Vh;return{times:void 0,keyframes:i,duration:a-Vh,ease:"linear"}}const ZS={anticipate:xS,backInOut:SS,circInOut:IS};function AD(n){return n in ZS}class D_ extends $S{constructor(e){super(e);const{name:t,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new KS(a,(l,c)=>this.onKeyframesResolved(l,c),t,r,i),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:i,ease:a,type:l,motionValue:c,name:h,startTime:p}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof a=="string"&&Ph()&&AD(a)&&(a=ZS[a]),ID(this.options)){const{onComplete:k,onUpdate:_,motionValue:S,element:C,...N}=this.options,M=PD(e,N);e=M.keyframes,e.length===1&&(e[1]=e[0]),r=M.duration,i=M.times,a=M.ease,l="keyframes"}const y=SD(c.owner.current,h,e,{...this.options,duration:r,times:i,ease:a});return y.startTime=p??this.calcStartTime(),this.pendingTimeline?(l_(y,this.pendingTimeline),this.pendingTimeline=void 0):y.onfinish=()=>{const{onComplete:k}=this.options;c.set(cm(e,this.options,t)),k&&k(),this.cancel(),this.resolveFinishedPromise()},{animation:y,duration:r,times:i,type:l,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return so(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return so(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=io(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Rn;const{animation:r}=t;l_(r,e)}return Rn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:i,type:a,ease:l,times:c}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:p,onUpdate:y,onComplete:k,element:_,...S}=this.options,C=new Zg({...S,keyframes:r,duration:i,type:a,ease:l,times:c,isGenerator:!0}),N=io(this.time);p.setWithVelocity(C.sample(N-Vh).value,C.sample(N).value,Vh)}const{onStop:h}=this.options;h&&h(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:i,repeatType:a,damping:l,type:c}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:p}=t.owner.getProps();return xD()&&r&&zD.has(r)&&!h&&!p&&!i&&a!=="mirror"&&l!==0&&c!=="inertia"}}const CD={type:"spring",stiffness:500,damping:25,restSpeed:10},RD=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),VD={type:"keyframes",duration:.8},ND={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},DD=(n,{keyframes:e})=>e.length>2?VD:ws.has(n)?n.startsWith("scale")?RD(e[1]):CD:ND;function OD({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:l,repeatDelay:c,from:h,elapsed:p,...y}){return!!Object.keys(y).length}const Yg=(n,e,t,r={},i,a)=>l=>{const c=xg(r,n)||{},h=c.delay||r.delay||0;let{elapsed:p=0}=r;p=p-io(h);let y={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-p,onUpdate:_=>{e.set(_),c.onUpdate&&c.onUpdate(_)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:a?void 0:i};OD(c)||(y={...y,...DD(n,y)}),y.duration&&(y.duration=io(y.duration)),y.repeatDelay&&(y.repeatDelay=io(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let k=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(y.duration=0,y.delay===0&&(k=!0)),y.allowFlatten=!c.type&&!c.ease,k&&!a&&e.get()!==void 0){const _=cm(y.keyframes,c);if(_!==void 0)return st.update(()=>{y.onUpdate(_),y.onComplete()}),new s2([])}return!a&&D_.supports(y)?new D_(y):new Zg(y)};function MD({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function YS(n,e,{delay:t=0,transitionOverride:r,type:i}={}){var a;let{transition:l=n.getDefaultTransition(),transitionEnd:c,...h}=e;r&&(l=r);const p=[],y=i&&n.animationState&&n.animationState.getState()[i];for(const k in h){const _=n.getValue(k,(a=n.latestValues[k])!==null&&a!==void 0?a:null),S=h[k];if(S===void 0||y&&MD(y,k))continue;const C={delay:t,...xg(l||{},k)};let N=!1;if(window.MotionHandoffAnimation){const q=_S(n);if(q){const G=window.MotionHandoffAnimation(q,k,st);G!==null&&(C.startTime=G,N=!0)}}Zf(n,k),_.start(Yg(k,_,S,n.shouldReduceMotion&&bS.has(k)?{type:!1}:C,n,N));const M=_.animation;M&&p.push(M)}return c&&Promise.all(p).then(()=>{st.update(()=>{c&&hN(n,c)})}),p}function av(n,e,t={}){var r;const i=Ku(n,e,t.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(a=t.transitionOverride);const l=i?()=>Promise.all(YS(n,i,t)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(p=0)=>{const{delayChildren:y=0,staggerChildren:k,staggerDirection:_}=a;return LD(n,e,y+p,k,_,t)}:()=>Promise.resolve(),{when:h}=a;if(h){const[p,y]=h==="beforeChildren"?[l,c]:[c,l];return p().then(()=>y())}else return Promise.all([l(),c(t.delay)])}function LD(n,e,t=0,r=0,i=1,a){const l=[],c=(n.variantChildren.size-1)*r,h=i===1?(p=0)=>p*r:(p=0)=>c-p*r;return Array.from(n.variantChildren).sort(FD).forEach((p,y)=>{p.notify("AnimationStart",e),l.push(av(p,e,{...a,delay:t+h(y)}).then(()=>p.notify("AnimationComplete",e)))}),Promise.all(l)}function FD(n,e){return n.sortNodePosition(e)}function UD(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>av(n,a,t));r=Promise.all(i)}else if(typeof e=="string")r=av(n,e,t);else{const i=typeof e=="function"?Ku(n,e,t.custom):e;r=Promise.all(YS(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function XS(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const BD=Rg.length;function ex(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?ex(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<BD;t++){const r=Rg[t],i=n.props[r];(Uu(i)||i===!1)&&(e[r]=i)}return e}const HD=[...Cg].reverse(),KD=Cg.length;function $D(n){return e=>Promise.all(e.map(({animation:t,options:r})=>UD(n,t,r)))}function WD(n){let e=$D(n),t=O_(),r=!0;const i=h=>(p,y)=>{var k;const _=Ku(n,y,h==="exit"?(k=n.presenceContext)===null||k===void 0?void 0:k.custom:void 0);if(_){const{transition:S,transitionEnd:C,...N}=_;p={...p,...N,...C}}return p};function a(h){e=h(n)}function l(h){const{props:p}=n,y=ex(n.parent)||{},k=[],_=new Set;let S={},C=1/0;for(let M=0;M<KD;M++){const q=HD[M],G=t[q],Q=p[q]!==void 0?p[q]:y[q],re=Uu(Q),ee=q===h?G.isActive:null;ee===!1&&(C=M);let se=Q===y[q]&&Q!==p[q]&&re;if(se&&r&&n.manuallyAnimateOnMount&&(se=!1),G.protectedKeys={...S},!G.isActive&&ee===null||!Q&&!G.prevProp||lm(Q)||typeof Q=="boolean")continue;const P=GD(G.prevProp,Q);let z=P||q===h&&G.isActive&&!se&&re||M>C&&re,j=!1;const A=Array.isArray(Q)?Q:[Q];let V=A.reduce(i(q),{});ee===!1&&(V={});const{prevResolvedValues:O={}}=G,I={...O,...V},Qe=ve=>{z=!0,_.has(ve)&&(j=!0,_.delete(ve)),G.needsAnimating[ve]=!0;const Z=n.getValue(ve);Z&&(Z.liveStyle=!1)};for(const ve in I){const Z=V[ve],ge=O[ve];if(S.hasOwnProperty(ve))continue;let ae=!1;Jf(Z)&&Jf(ge)?ae=!XS(Z,ge):ae=Z!==ge,ae?Z!=null?Qe(ve):_.add(ve):Z!==void 0&&_.has(ve)?Qe(ve):G.protectedKeys[ve]=!0}G.prevProp=Q,G.prevResolvedValues=V,G.isActive&&(S={...S,...V}),r&&n.blockInitialAnimation&&(z=!1),z&&(!(se&&P)||j)&&k.push(...A.map(ve=>({animation:ve,options:{type:q}})))}if(_.size){const M={};if(typeof p.initial!="boolean"){const q=Ku(n,Array.isArray(p.initial)?p.initial[0]:p.initial);q&&q.transition&&(M.transition=q.transition)}_.forEach(q=>{const G=n.getBaseTarget(q),Q=n.getValue(q);Q&&(Q.liveStyle=!0),M[q]=G??null}),k.push({animation:M})}let N=!!k.length;return r&&(p.initial===!1||p.initial===p.animate)&&!n.manuallyAnimateOnMount&&(N=!1),r=!1,N?e(k):Promise.resolve()}function c(h,p){var y;if(t[h].isActive===p)return Promise.resolve();(y=n.variantChildren)===null||y===void 0||y.forEach(_=>{var S;return(S=_.animationState)===null||S===void 0?void 0:S.setActive(h,p)}),t[h].isActive=p;const k=l(h);for(const _ in t)t[_].protectedKeys={};return k}return{animateChanges:l,setActive:c,setAnimateFunction:a,getState:()=>t,reset:()=>{t=O_(),r=!0}}}function GD(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!XS(e,n):!1}function Hi(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function O_(){return{animate:Hi(!0),whileInView:Hi(),whileHover:Hi(),whileTap:Hi(),whileDrag:Hi(),whileFocus:Hi(),exit:Hi()}}class pi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class qD extends pi{constructor(e){super(e),e.animationState||(e.animationState=WD(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();lm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let QD=0;class JD extends pi{constructor(){super(...arguments),this.id=QD++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const ZD={animation:{Feature:qD},exit:{Feature:JD}};function Wu(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function lc(n){return{point:{x:n.pageX,y:n.pageY}}}const YD=n=>e=>Ag(e)&&n(e,lc(e));function _u(n,e,t,r){return Wu(n,e,YD(t),r)}function tx({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function XD({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function eO(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}const nx=1e-4,tO=1-nx,nO=1+nx,rx=.01,rO=0-rx,oO=0+rx;function cn(n){return n.max-n.min}function iO(n,e,t){return Math.abs(n-e)<=t}function M_(n,e,t,r=.5){n.origin=r,n.originPoint=vt(e.min,e.max,n.origin),n.scale=cn(t)/cn(e),n.translate=vt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=tO&&n.scale<=nO||isNaN(n.scale))&&(n.scale=1),(n.translate>=rO&&n.translate<=oO||isNaN(n.translate))&&(n.translate=0)}function wu(n,e,t,r){M_(n.x,e.x,t.x,r?r.originX:void 0),M_(n.y,e.y,t.y,r?r.originY:void 0)}function L_(n,e,t){n.min=t.min+e.min,n.max=n.min+cn(e)}function sO(n,e,t){L_(n.x,e.x,t.x),L_(n.y,e.y,t.y)}function F_(n,e,t){n.min=e.min-t.min,n.max=n.min+cn(e)}function Eu(n,e,t){F_(n.x,e.x,t.x),F_(n.y,e.y,t.y)}const U_=()=>({translate:0,scale:1,origin:0,originPoint:0}),Sa=()=>({x:U_(),y:U_()}),B_=()=>({min:0,max:0}),Et=()=>({x:B_(),y:B_()});function qn(n){return[n("x"),n("y")]}function lf(n){return n===void 0||n===1}function lv({scale:n,scaleX:e,scaleY:t}){return!lf(n)||!lf(e)||!lf(t)}function Gi(n){return lv(n)||ox(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function ox(n){return H_(n.x)||H_(n.y)}function H_(n){return n&&n!=="0%"}function Nh(n,e,t){const r=n-t,i=e*r;return t+i}function K_(n,e,t,r,i){return i!==void 0&&(n=Nh(n,i,r)),Nh(n,t,r)+e}function uv(n,e=0,t=1,r,i){n.min=K_(n.min,e,t,r,i),n.max=K_(n.max,e,t,r,i)}function ix(n,{x:e,y:t}){uv(n.x,e.translate,e.scale,e.originPoint),uv(n.y,t.translate,t.scale,t.originPoint)}const $_=.999999999999,W_=1.0000000000001;function aO(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let a,l;for(let c=0;c<i;c++){a=t[c],l=a.projectionDelta;const{visualElement:h}=a.options;h&&h.props.style&&h.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&ja(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,ix(n,l)),r&&Gi(a.latestValues)&&ja(n,a.latestValues))}e.x<W_&&e.x>$_&&(e.x=1),e.y<W_&&e.y>$_&&(e.y=1)}function xa(n,e){n.min=n.min+e,n.max=n.max+e}function G_(n,e,t,r,i=.5){const a=vt(n.min,n.max,i);uv(n,e,t,a,r)}function ja(n,e){G_(n.x,e.x,e.scaleX,e.scale,e.originX),G_(n.y,e.y,e.scaleY,e.scale,e.originY)}function sx(n,e){return tx(eO(n.getBoundingClientRect(),e))}function lO(n,e,t){const r=sx(n,t),{scroll:i}=e;return i&&(xa(r.x,i.offset.x),xa(r.y,i.offset.y)),r}const ax=({current:n})=>n?n.ownerDocument.defaultView:null,q_=(n,e)=>Math.abs(n-e);function uO(n,e){const t=q_(n.x,e.x),r=q_(n.y,e.y);return Math.sqrt(t**2+r**2)}class lx{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=cf(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,S=uO(k.offset,{x:0,y:0})>=3;if(!_&&!S)return;const{point:C}=k,{timestamp:N}=Wt;this.history.push({...C,timestamp:N});const{onStart:M,onMove:q}=this.handlers;_||(M&&M(this.lastMoveEvent,k),this.startEvent=this.lastMoveEvent),q&&q(this.lastMoveEvent,k)},this.handlePointerMove=(k,_)=>{this.lastMoveEvent=k,this.lastMoveEventInfo=uf(_,this.transformPagePoint),st.update(this.updatePoint,!0)},this.handlePointerUp=(k,_)=>{this.end();const{onEnd:S,onSessionEnd:C,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=cf(k.type==="pointercancel"?this.lastMoveEventInfo:uf(_,this.transformPagePoint),this.history);this.startEvent&&S&&S(k,M),C&&C(k,M)},!Ag(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const l=lc(e),c=uf(l,this.transformPagePoint),{point:h}=c,{timestamp:p}=Wt;this.history=[{...h,timestamp:p}];const{onSessionStart:y}=t;y&&y(e,cf(c,this.history)),this.removeListeners=ac(_u(this.contextWindow,"pointermove",this.handlePointerMove),_u(this.contextWindow,"pointerup",this.handlePointerUp),_u(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ui(this.updatePoint)}}function uf(n,e){return e?{point:e(n.point)}:n}function Q_(n,e){return{x:n.x-e.x,y:n.y-e.y}}function cf({point:n},e){return{point:n,delta:Q_(n,ux(e)),offset:Q_(n,cO(e)),velocity:dO(e,.1)}}function cO(n){return n[0]}function ux(n){return n[n.length-1]}function dO(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=ux(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>io(e)));)t--;if(!r)return{x:0,y:0};const a=so(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const l={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function hO(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?vt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?vt(t,n,r.max):Math.min(n,t)),n}function J_(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function mO(n,{top:e,left:t,bottom:r,right:i}){return{x:J_(n.x,t,i),y:J_(n.y,e,r)}}function Z_(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function pO(n,e){return{x:Z_(n.x,e.x),y:Z_(n.y,e.y)}}function fO(n,e){let t=.5;const r=cn(n),i=cn(e);return i>r?t=Ja(e.min,e.max-r,n.min):r>i&&(t=Ja(n.min,n.max-i,e.min)),mo(0,1,t)}function vO(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const cv=.35;function gO(n=cv){return n===!1?n=0:n===!0&&(n=cv),{x:Y_(n,"left","right"),y:Y_(n,"top","bottom")}}function Y_(n,e,t){return{min:X_(n,e),max:X_(n,t)}}function X_(n,e){return typeof n=="number"?n:n[e]||0}const yO=new WeakMap;class kO{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Et(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=y=>{const{dragSnapToOrigin:k}=this.getProps();k?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(lc(y).point)},a=(y,k)=>{const{drag:_,dragPropagation:S,onDragStart:C}=this.getProps();if(_&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=h2(_),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),qn(M=>{let q=this.getAxisMotionValue(M).get()||0;if(Dr.test(q)){const{projection:G}=this.visualElement;if(G&&G.layout){const Q=G.layout.layoutBox[M];Q&&(q=cn(Q)*(parseFloat(q)/100))}}this.originPoint[M]=q}),C&&st.postRender(()=>C(y,k)),Zf(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},l=(y,k)=>{const{dragPropagation:_,dragDirectionLock:S,onDirectionLock:C,onDrag:N}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:M}=k;if(S&&this.currentDirection===null){this.currentDirection=bO(M),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",k.point,M),this.updateAxis("y",k.point,M),this.visualElement.render(),N&&N(y,k)},c=(y,k)=>this.stop(y,k),h=()=>qn(y=>{var k;return this.getAnimationState(y)==="paused"&&((k=this.getAxisMotionValue(y).animation)===null||k===void 0?void 0:k.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new lx(e,{onSessionStart:i,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:ax(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&st.postRender(()=>a(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Nd(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=hO(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;t&&Ta(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=mO(i.layoutBox,t):this.constraints=!1,this.elastic=gO(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&qn(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=vO(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ta(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=lO(r,i.root,this.visualElement.getTransformPagePoint());let l=pO(i.layout.layoutBox,a);if(t){const c=t(XD(l));this.hasMutatedConstraints=!!c,c&&(l=tx(c))}return l}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),h=this.constraints||{},p=qn(y=>{if(!Nd(y,t,this.currentDirection))return;let k=h&&h[y]||{};l&&(k={min:0,max:0});const _=i?200:1e6,S=i?40:1e7,C={type:"inertia",velocity:r?e[y]:0,bounceStiffness:_,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...a,...k};return this.startAxisValueAnimation(y,C)});return Promise.all(p).then(c)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return Zf(this.visualElement,e),r.start(Yg(e,r,0,t,this.visualElement,!1))}stopAnimation(){qn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){qn(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){qn(t=>{const{drag:r}=this.getProps();if(!Nd(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(t);if(i&&i.layout){const{min:l,max:c}=i.layout.layoutBox[t];a.set(e[t]-vt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Ta(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};qn(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const h=c.get();i[l]=fO({min:h,max:h},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),qn(l=>{if(!Nd(l,e,null))return;const c=this.getAxisMotionValue(l),{min:h,max:p}=this.constraints[l];c.set(vt(h,p,i[l]))})}addListeners(){if(!this.visualElement.current)return;yO.set(this.visualElement,this);const e=this.visualElement.current,t=_u(e,"pointerdown",h=>{const{drag:p,dragListener:y=!0}=this.getProps();p&&y&&this.start(h)}),r=()=>{const{dragConstraints:h}=this.getProps();Ta(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),st.read(r);const l=Wu(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p})=>{this.isDragging&&p&&(qn(y=>{const k=this.getAxisMotionValue(y);k&&(this.originPoint[y]+=h[y].translate,k.set(k.get()+h[y].translate))}),this.visualElement.render())});return()=>{l(),t(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:l=cv,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:l,dragMomentum:c}}}function Nd(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function bO(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class _O extends pi{constructor(e){super(e),this.removeGroupControls=Rn,this.removeListeners=Rn,this.controls=new kO(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Rn}unmount(){this.removeGroupControls(),this.removeListeners()}}const ew=n=>(e,t)=>{n&&st.postRender(()=>n(e,t))};class wO extends pi{constructor(){super(...arguments),this.removePointerDownListener=Rn}onPointerDown(e){this.session=new lx(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ax(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:ew(e),onStart:ew(t),onMove:r,onEnd:(a,l)=>{delete this.session,i&&st.postRender(()=>i(a,l))}}}mount(){this.removePointerDownListener=_u(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const eh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function tw(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const iu={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ie.test(n))n=parseFloat(n);else return n;const t=tw(n,e.target.x),r=tw(n,e.target.y);return`${t}% ${r}%`}},EO={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=ci.parse(n);if(i.length>5)return r;const a=ci.createTransformer(n),l=typeof i[0]!="number"?1:0,c=t.x.scale*e.x,h=t.y.scale*e.y;i[0+l]/=c,i[1+l]/=h;const p=vt(c,h,.5);return typeof i[2+l]=="number"&&(i[2+l]/=p),typeof i[3+l]=="number"&&(i[3+l]/=p),a(i)}};class TO extends te.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;F2(zO),a&&(t.group&&t.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),eh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:a}=this.props,l=r.projection;return l&&(l.isPresent=a,i||e.layoutDependency!==t||t===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||st.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Pg.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function cx(n){const[e,t]=n2(),r=te.useContext($z);return E.jsx(TO,{...n,layoutGroup:r,switchLayoutGroup:te.useContext(aS),isPresent:e,safeToRemove:t})}const zO={borderRadius:{...iu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:iu,borderTopRightRadius:iu,borderBottomLeftRadius:iu,borderBottomRightRadius:iu,boxShadow:EO};function SO(n,e,t){const r=nn(n)?n:Fu(n);return r.start(Yg("",r,e,t)),r.animation}function xO(n){return n instanceof SVGElement&&n.tagName!=="svg"}const jO=(n,e)=>n.depth-e.depth;class IO{constructor(){this.children=[],this.isDirty=!1}add(e){Eg(this.children,e),this.isDirty=!0}remove(e){Tg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(jO),this.isDirty=!1,this.children.forEach(e)}}function PO(n,e){const t=Nr.now(),r=({timestamp:i})=>{const a=i-t;a>=e&&(ui(r),n(a-e))};return st.read(r,!0),()=>ui(r)}const dx=["TopLeft","TopRight","BottomLeft","BottomRight"],AO=dx.length,nw=n=>typeof n=="string"?parseFloat(n):n,rw=n=>typeof n=="number"||Ie.test(n);function CO(n,e,t,r,i,a){i?(n.opacity=vt(0,t.opacity!==void 0?t.opacity:1,RO(r)),n.opacityExit=vt(e.opacity!==void 0?e.opacity:1,0,VO(r))):a&&(n.opacity=vt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let l=0;l<AO;l++){const c=`border${dx[l]}Radius`;let h=ow(e,c),p=ow(t,c);if(h===void 0&&p===void 0)continue;h||(h=0),p||(p=0),h===0||p===0||rw(h)===rw(p)?(n[c]=Math.max(vt(nw(h),nw(p),r),0),(Dr.test(p)||Dr.test(h))&&(n[c]+="%")):n[c]=p}(e.rotate||t.rotate)&&(n.rotate=vt(e.rotate||0,t.rotate||0,r))}function ow(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const RO=hx(0,.5,jS),VO=hx(.5,.95,Rn);function hx(n,e,t){return r=>r<n?0:r>e?1:t(Ja(n,e,r))}function iw(n,e){n.min=e.min,n.max=e.max}function Gn(n,e){iw(n.x,e.x),iw(n.y,e.y)}function sw(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function aw(n,e,t,r,i){return n-=e,n=Nh(n,1/t,r),i!==void 0&&(n=Nh(n,1/i,r)),n}function NO(n,e=0,t=1,r=.5,i,a=n,l=n){if(Dr.test(e)&&(e=parseFloat(e),e=vt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=vt(a.min,a.max,r);n===a&&(c-=e),n.min=aw(n.min,e,t,c,i),n.max=aw(n.max,e,t,c,i)}function lw(n,e,[t,r,i],a,l){NO(n,e[t],e[r],e[i],e.scale,a,l)}const DO=["x","scaleX","originX"],OO=["y","scaleY","originY"];function uw(n,e,t,r){lw(n.x,e,DO,t?t.x:void 0,r?r.x:void 0),lw(n.y,e,OO,t?t.y:void 0,r?r.y:void 0)}function cw(n){return n.translate===0&&n.scale===1}function mx(n){return cw(n.x)&&cw(n.y)}function dw(n,e){return n.min===e.min&&n.max===e.max}function MO(n,e){return dw(n.x,e.x)&&dw(n.y,e.y)}function hw(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function px(n,e){return hw(n.x,e.x)&&hw(n.y,e.y)}function mw(n){return cn(n.x)/cn(n.y)}function pw(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class LO{constructor(){this.members=[]}add(e){Eg(this.members,e),e.scheduleRender()}remove(e){if(Tg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function FO(n,e,t){let r="";const i=n.x.translate/e.x,a=n.y.translate/e.y,l=(t==null?void 0:t.z)||0;if((i||a||l)&&(r=`translate3d(${i}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:p,rotate:y,rotateX:k,rotateY:_,skewX:S,skewY:C}=t;p&&(r=`perspective(${p}px) ${r}`),y&&(r+=`rotate(${y}deg) `),k&&(r+=`rotateX(${k}deg) `),_&&(r+=`rotateY(${_}deg) `),S&&(r+=`skewX(${S}deg) `),C&&(r+=`skewY(${C}deg) `)}const c=n.x.scale*e.x,h=n.y.scale*e.y;return(c!==1||h!==1)&&(r+=`scale(${c}, ${h})`),r||"none"}const df=["","X","Y","Z"],UO={visibility:"hidden"},fw=1e3;let BO=0;function hf(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function fx(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=_S(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",st,!(i||a))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&fx(r)}function vx({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(l={},c=e==null?void 0:e()){this.id=BO++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach($O),this.nodes.forEach(JO),this.nodes.forEach(ZO),this.nodes.forEach(WO)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new IO)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Sg),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const h=this.eventHandlers.get(l);h&&h.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=xO(l),this.instance=l;const{layoutId:h,layout:p,visualElement:y}=this.options;if(y&&!y.current&&y.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(p||h)&&(this.isLayoutDirty=!0),n){let k;const _=()=>this.root.updateBlockedByResize=!1;n(l,()=>{this.root.updateBlockedByResize=!0,k&&k(),k=PO(_,250),eh.hasAnimatedSinceResize&&(eh.hasAnimatedSinceResize=!1,this.nodes.forEach(gw))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&y&&(h||p)&&this.addEventListener("didUpdate",({delta:k,hasLayoutChanged:_,hasRelativeLayoutChanged:S,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||y.getDefaultTransition()||nM,{onLayoutAnimationStart:M,onLayoutAnimationComplete:q}=y.getProps(),G=!this.targetLayout||!px(this.targetLayout,C),Q=!_&&S;if(this.options.layoutRoot||this.resumeFrom||Q||_&&(G||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(k,Q);const re={...xg(N,"layout"),onPlay:M,onComplete:q};(y.shouldReduceMotion||this.options.layoutRoot)&&(re.delay=0,re.type=!1),this.startAnimation(re)}else _||gw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ui(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(YO),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&fx(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const k=this.path[y];k.shouldResetTransform=!0,k.updateScroll("snapshot"),k.options.layoutRoot&&k.willUpdate(!1)}const{layoutId:c,layout:h}=this.options;if(c===void 0&&!h)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(vw);return}this.isUpdating||this.nodes.forEach(qO),this.isUpdating=!1,this.nodes.forEach(QO),this.nodes.forEach(HO),this.nodes.forEach(KO),this.clearAllSnapshots();const c=Nr.now();Wt.delta=mo(0,1e3/60,c-Wt.timestamp),Wt.timestamp=c,Wt.isProcessing=!0,nf.update.process(Wt),nf.preRender.process(Wt),nf.render.process(Wt),Wt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Pg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(GO),this.sharedNodes.forEach(XO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,st.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){st.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!cn(this.snapshot.measuredBox.x)&&!cn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Et(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c){const h=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!mx(this.projectionDelta),h=this.getTransformTemplate(),p=h?h(this.latestValues,""):void 0,y=p!==this.prevTransformTemplateValue;l&&(c||Gi(this.latestValues)||y)&&(i(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let h=this.removeElementScroll(c);return l&&(h=this.removeTransform(h)),rM(h),{animationId:this.root.animationId,measuredBox:c,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:c}=this.options;if(!c)return Et();const h=c.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(oM))){const{scroll:y}=this.root;y&&(xa(h.x,y.offset.x),xa(h.y,y.offset.y))}return h}removeElementScroll(l){var c;const h=Et();if(Gn(h,l),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return h;for(let p=0;p<this.path.length;p++){const y=this.path[p],{scroll:k,options:_}=y;y!==this.root&&k&&_.layoutScroll&&(k.wasRoot&&Gn(h,l),xa(h.x,k.offset.x),xa(h.y,k.offset.y))}return h}applyTransform(l,c=!1){const h=Et();Gn(h,l);for(let p=0;p<this.path.length;p++){const y=this.path[p];!c&&y.options.layoutScroll&&y.scroll&&y!==y.root&&ja(h,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),Gi(y.latestValues)&&ja(h,y.latestValues)}return Gi(this.latestValues)&&ja(h,this.latestValues),h}removeTransform(l){const c=Et();Gn(c,l);for(let h=0;h<this.path.length;h++){const p=this.path[h];if(!p.instance||!Gi(p.latestValues))continue;lv(p.latestValues)&&p.updateSnapshot();const y=Et(),k=p.measurePageBox();Gn(y,k),uw(c,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,y)}return Gi(this.latestValues)&&uw(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Wt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var c;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==h;if(!(l||p&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:k,layoutId:_}=this.options;if(!(!this.layout||!(k||_))){if(this.resolvedRelativeTargetAt=Wt.timestamp,!this.targetDelta&&!this.relativeTarget){const S=this.getClosestProjectingParent();S&&S.layout&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Et(),this.relativeTargetOrigin=Et(),Eu(this.relativeTargetOrigin,this.layout.layoutBox,S.layout.layoutBox),Gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Et(),this.targetWithTransforms=Et()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),sO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Gn(this.target,this.layout.layoutBox),ix(this.target,this.targetDelta)):Gn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const S=this.getClosestProjectingParent();S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Et(),this.relativeTargetOrigin=Et(),Eu(this.relativeTargetOrigin,this.target,S.target),Gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||lv(this.parent.latestValues)||ox(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const c=this.getLead(),h=!!this.resumingFrom||this!==c;let p=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(p=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===Wt.timestamp&&(p=!1),p)return;const{layout:y,layoutId:k}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||k))return;Gn(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,S=this.treeScale.y;aO(this.layoutCorrected,this.treeScale,this.path,h),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Et());const{target:C}=c;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(sw(this.prevProjectionDelta.x,this.projectionDelta.x),sw(this.prevProjectionDelta.y,this.projectionDelta.y)),wu(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==S||!pw(this.projectionDelta.x,this.prevProjectionDelta.x)||!pw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Sa(),this.projectionDelta=Sa(),this.projectionDeltaWithTransform=Sa()}setAnimationOrigin(l,c=!1){const h=this.snapshot,p=h?h.latestValues:{},y={...this.latestValues},k=Sa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const _=Et(),S=h?h.source:void 0,C=this.layout?this.layout.source:void 0,N=S!==C,M=this.getStack(),q=!M||M.members.length<=1,G=!!(N&&!q&&this.options.crossfade===!0&&!this.path.some(tM));this.animationProgress=0;let Q;this.mixTargetDelta=re=>{const ee=re/1e3;yw(k.x,l.x,ee),yw(k.y,l.y,ee),this.setTargetDelta(k),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Eu(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),eM(this.relativeTarget,this.relativeTargetOrigin,_,ee),Q&&MO(this.relativeTarget,Q)&&(this.isProjectionDirty=!1),Q||(Q=Et()),Gn(Q,this.relativeTarget)),N&&(this.animationValues=y,CO(y,p,this.latestValues,ee,G,q)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ee},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ui(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=st.update(()=>{eh.hasAnimatedSinceResize=!0,this.currentAnimation=SO(0,fw,{...l,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(fw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:h,layout:p,latestValues:y}=l;if(!(!c||!h||!p)){if(this!==l&&this.layout&&p&&gx(this.options.animationType,this.layout.layoutBox,p.layoutBox)){h=this.target||Et();const k=cn(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+k;const _=cn(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+_}Gn(c,h),ja(c,y),wu(this.projectionDeltaWithTransform,this.layoutCorrected,c,y)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new LO),this.sharedNodes.get(l).add(c);const p=c.options.initialPromotionConfig;c.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:c}=this.options;return c?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:c}=this.options;return c?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:h}={}){const p=this.getStack();p&&p.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(c=!0),!c)return;const p={};h.z&&hf("z",l,p,this.animationValues);for(let y=0;y<df.length;y++)hf(`rotate${df[y]}`,l,p,this.animationValues),hf(`skew${df[y]}`,l,p,this.animationValues);l.render();for(const y in p)l.setStaticValue(y,p[y]),this.animationValues&&(this.animationValues[y]=p[y]);l.scheduleRender()}getProjectionStyles(l){var c,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return UO;const p={visibility:""},y=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=Xd(l==null?void 0:l.pointerEvents)||"",p.transform=y?y(this.latestValues,""):"none",p;const k=this.getLead();if(!this.projectionDelta||!this.layout||!k.target){const N={};return this.options.layoutId&&(N.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,N.pointerEvents=Xd(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Gi(this.latestValues)&&(N.transform=y?y({},""):"none",this.hasProjected=!1),N}const _=k.animationValues||k.latestValues;this.applyTransformsToTarget(),p.transform=FO(this.projectionDeltaWithTransform,this.treeScale,_),y&&(p.transform=y(_,p.transform));const{x:S,y:C}=this.projectionDelta;p.transformOrigin=`${S.origin*100}% ${C.origin*100}% 0`,k.animationValues?p.opacity=k===this?(h=(c=_.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:p.opacity=k===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const N in Bu){if(_[N]===void 0)continue;const{correct:M,applyTo:q,isCSSVariable:G}=Bu[N],Q=p.transform==="none"?_[N]:M(_[N],k);if(q){const re=q.length;for(let ee=0;ee<re;ee++)p[q[ee]]=Q}else G?this.options.visualElement.renderState.vars[N]=Q:p[N]=Q}return this.options.layoutId&&(p.pointerEvents=k===this?Xd(l==null?void 0:l.pointerEvents)||"":"none"),p}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(vw),this.root.sharedNodes.clear()}}}function HO(n){n.updateLayout()}function KO(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:a}=n.options,l=t.source!==n.layout.source;a==="size"?qn(k=>{const _=l?t.measuredBox[k]:t.layoutBox[k],S=cn(_);_.min=r[k].min,_.max=_.min+S}):gx(a,t.layoutBox,r)&&qn(k=>{const _=l?t.measuredBox[k]:t.layoutBox[k],S=cn(r[k]);_.max=_.min+S,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[k].max=n.relativeTarget[k].min+S)});const c=Sa();wu(c,r,t.layoutBox);const h=Sa();l?wu(h,n.applyTransform(i,!0),t.measuredBox):wu(h,r,t.layoutBox);const p=!mx(c);let y=!1;if(!n.resumeFrom){const k=n.getClosestProjectingParent();if(k&&!k.resumeFrom){const{snapshot:_,layout:S}=k;if(_&&S){const C=Et();Eu(C,t.layoutBox,_.layoutBox);const N=Et();Eu(N,r,S.layoutBox),px(C,N)||(y=!0),k.options.layoutRoot&&(n.relativeTarget=N,n.relativeTargetOrigin=C,n.relativeParent=k)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:h,layoutDelta:c,hasLayoutChanged:p,hasRelativeLayoutChanged:y})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function $O(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function WO(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function GO(n){n.clearSnapshot()}function vw(n){n.clearMeasurements()}function qO(n){n.isLayoutDirty=!1}function QO(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function gw(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function JO(n){n.resolveTargetDelta()}function ZO(n){n.calcProjection()}function YO(n){n.resetSkewAndRotation()}function XO(n){n.removeLeadSnapshot()}function yw(n,e,t){n.translate=vt(e.translate,0,t),n.scale=vt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function kw(n,e,t,r){n.min=vt(e.min,t.min,r),n.max=vt(e.max,t.max,r)}function eM(n,e,t,r){kw(n.x,e.x,t.x,r),kw(n.y,e.y,t.y,r)}function tM(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const nM={duration:.45,ease:[.4,0,.1,1]},bw=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),_w=bw("applewebkit/")&&!bw("chrome/")?Math.round:Rn;function ww(n){n.min=_w(n.min),n.max=_w(n.max)}function rM(n){ww(n.x),ww(n.y)}function gx(n,e,t){return n==="position"||n==="preserve-aspect"&&!iO(mw(e),mw(t),.2)}function oM(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const iM=vx({attachResizeListener:(n,e)=>Wu(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),mf={current:void 0},yx=vx({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!mf.current){const n=new iM({});n.mount(window),n.setOptions({layoutScroll:!0}),mf.current=n}return mf.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),sM={pan:{Feature:wO},drag:{Feature:_O,ProjectionNode:yx,MeasureLayout:cx}};function Ew(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,a=r[i];a&&st.postRender(()=>a(e,lc(e)))}class aM extends pi{mount(){const{current:e}=this.node;e&&(this.unmount=p2(e,(t,r)=>(Ew(this.node,r,"Start"),i=>Ew(this.node,i,"End"))))}unmount(){}}class lM extends pi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ac(Wu(this.node.current,"focus",()=>this.onFocus()),Wu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Tw(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),a=r[i];a&&st.postRender(()=>a(e,lc(e)))}class uM extends pi{mount(){const{current:e}=this.node;e&&(this.unmount=y2(e,(t,r)=>(Tw(this.node,r,"Start"),(i,{success:a})=>Tw(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const dv=new WeakMap,pf=new WeakMap,cM=n=>{const e=dv.get(n.target);e&&e(n)},dM=n=>{n.forEach(cM)};function hM({root:n,...e}){const t=n||document;pf.has(t)||pf.set(t,{});const r=pf.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(dM,{root:n,...e})),r[i]}function mM(n,e,t){const r=hM(e);return dv.set(n,t),r.observe(n),()=>{dv.delete(n),r.unobserve(n)}}const pM={some:0,all:1};class fM extends pi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:a}=e,l={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:pM[i]},c=h=>{const{isIntersecting:p}=h;if(this.isInView===p||(this.isInView=p,a&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:y,onViewportLeave:k}=this.node.getProps(),_=p?y:k;_&&_(h)};return mM(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(vM(e,t))&&this.startObserver()}unmount(){}}function vM({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const gM={inView:{Feature:fM},tap:{Feature:uM},focus:{Feature:lM},hover:{Feature:aM}},yM={layout:{ProjectionNode:yx,MeasureLayout:cx}},hv={current:null},kx={current:!1};function kM(){if(kx.current=!0,!!_g)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>hv.current=n.matches;n.addListener(e),e()}else hv.current=!1}const bM=[...HS,en,ci],_M=n=>bM.find(BS(n)),wM=new WeakMap;function EM(n,e,t){for(const r in e){const i=e[r],a=t[r];if(nn(i))n.addValue(r,i);else if(nn(a))n.addValue(r,Fu(i,{owner:n}));else if(a!==i)if(n.hasValue(r)){const l=n.getValue(r);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=n.getStaticValue(r);n.addValue(r,Fu(l!==void 0?l:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const zw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class TM{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Qg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const S=Nr.now();this.renderScheduledAt<S&&(this.renderScheduledAt=S,st.render(this.render,!1,!0))};const{latestValues:h,renderState:p,onUpdate:y}=l;this.onUpdate=y,this.latestValues=h,this.baseTarget={...h},this.initialValues=t.initial?{...h}:{},this.renderState=p,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=um(t),this.isVariantNode=iS(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:k,..._}=this.scrapeMotionValuesFromProps(t,{},this);for(const S in _){const C=_[S];h[S]!==void 0&&nn(C)&&C.set(h[S],!1)}}mount(e){this.current=e,wM.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),kx.current||kM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:hv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ui(this.notifyUpdate),ui(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ws.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&st.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),a(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Za){const t=Za[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Et()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<zw.length;r++){const i=zw[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,l=e[a];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=EM(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Fu(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(FS(i)||PS(i))?i=parseFloat(i):!_M(i)&&ci.test(t)&&(i=OS(e,t)),this.setBaseTarget(e,nn(i)?i.get():i)),nn(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const l=Hg(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);l&&(i=l[e])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!nn(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Sg),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class bx extends TM{constructor(){super(...arguments),this.KeyframeResolver=KS}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;nn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function zM(n){return window.getComputedStyle(n)}class SM extends bx{constructor(){super(...arguments),this.type="html",this.renderInstance=vS}readValueFromInstance(e,t){if(ws.has(t))return ON(e,t);{const r=zM(e),i=(Ng(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return sx(e,t)}build(e,t,r){Mg(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return Kg(e,t,r)}}class xM extends bx{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Et,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&fS(this.current,this.renderState)}}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ws.has(t)){const r=DS(t);return r&&r.default||0}return t=gS.has(t)?t:Vg(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return kS(e,t,r)}onBindTransform(){this.current&&!this.renderState.dimensions&&st.postRender(this.updateDimensions)}build(e,t,r){Ug(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,i){yS(e,t,r,i)}mount(e){this.isSVGTag=Bg(e.tagName),super.mount(e)}}const jM=(n,e)=>Fg(n)?new xM(e):new SM(e,{allowProjection:n!==te.Fragment}),IM=cN({...ZD,...gM,...sM,...yM},jM),ga=S2(IM),PM=({darkMode:n=!1,onComplete:e,slides:t})=>{const[r,i]=te.useState(0),a=()=>{r<t.length-1?i(h=>h+1):e()},l=()=>{r>0&&i(h=>h-1)};te.useEffect(()=>{const h=p=>{p.key==="ArrowRight"||p.key==="Enter"?a():p.key==="ArrowLeft"?l():p.key==="Escape"&&e()};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[r]);const c=(r+1)/t.length*100;return E.jsxs("div",{className:`fixed inset-0 ${n?"bg-black/70":"bg-black/50"} z-50 flex items-center justify-center p-2 sm:p-4 backdrop-blur-sm`,children:[E.jsx(ga.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:`w-full max-w-[95vw] sm:max-w-xl md:max-w-3xl lg:max-w-4xl ${n?"bg-gray-800 text-white":"bg-white text-gray-800"} rounded-xl shadow-xl overflow-hidden backdrop-blur-lg border ${n?"border-gray-700":"border-gray-200"}`,children:E.jsxs("div",{className:"relative flex flex-col h-[90vh] sm:h-[80vh] md:h-[70vh] lg:h-[75vh]",children:[E.jsx("div",{className:"absolute top-2 sm:top-4 right-2 sm:right-16 z-20",children:E.jsxs(ga.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:`px-3 sm:px-4 py-1 rounded-lg text-xs sm:text-sm font-medium 
                transition-colors duration-200 flex items-center gap-1 sm:gap-2
                ${n?"text-gray-300 hover:text-white hover:bg-gray-700/50 backdrop-blur-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-100/50 backdrop-blur-sm"}`,children:["Skip Course",E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 sm:h-4 sm:w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})}),E.jsx("div",{className:`h-1 sm:h-2 ${n?"bg-gray-700":"bg-gray-200"} relative`,children:E.jsx(ga.div,{className:"h-full bg-blue-500",initial:{width:0},animate:{width:`${c}%`},transition:{duration:.3,ease:"easeInOut"},style:{boxShadow:"0 0 10px #3B82F6"}})}),E.jsxs("div",{className:`absolute top-2 sm:top-4 left-2 sm:left-4 text-xs sm:text-sm md:text-base font-medium ${n?"text-gray-400":"text-gray-500"}`,children:[r+1," / ",t.length]}),E.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:E.jsxs(ga.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4,ease:"easeOut"},className:"p-3 sm:p-6 md:p-8 lg:p-10 pt-12 sm:pt-16",children:[E.jsx(ga.h2,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},className:`text-xl sm:text-2xl md:text-3xl font-bold mb-3 sm:mb-4 md:mb-6 ${n?"text-white":"text-gray-900"}`,children:t[r].title}),E.jsx(ga.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:`prose ${n?"prose-invert":""} max-w-none whitespace-pre-wrap text-sm sm:text-base md:text-lg lg:prose-xl`,children:t[r].content})]},r)}),E.jsxs("div",{className:"flex justify-between items-center p-3 sm:p-4 md:p-6 border-t ${darkMode ? 'border-gray-700' : 'border-gray-200'}",children:[E.jsxs("button",{onClick:l,disabled:r===0,className:`px-3 sm:px-4 py-2 rounded-lg text-sm sm:text-base md:text-lg font-medium transition-colors duration-200 flex items-center gap-2
                ${n?"text-gray-400 hover:text-white hover:bg-gray-700/50":"text-gray-500 hover:text-gray-900 hover:bg-gray-100/50"}
                ${r===0?"opacity-50 cursor-not-allowed":""}
              `,children:[E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),E.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),E.jsxs("button",{onClick:a,className:`px-4 sm:px-6 py-2 rounded-lg text-sm sm:text-base md:text-lg font-medium transition-colors duration-200 flex items-center gap-2
                ${n?"bg-blue-600 text-white hover:bg-blue-700":"bg-blue-500 text-white hover:bg-blue-600"}
              `,children:[E.jsx("span",{className:"hidden sm:inline",children:r===t.length-1?"Finish":"Next"}),E.jsx("span",{className:"sm:hidden",children:r===t.length-1?"Done":"Next"}),r<t.length-1&&E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})}),E.jsx("style",{children:`
        .shadow-glow-blue {
          box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
        }
        
        .custom-scrollbar::-webkit-scrollbar {
          width: 8px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
          background: ${n?"rgba(31, 41, 55, 0.5)":"rgba(243, 244, 246, 0.5)"};
          border-radius: 4px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: ${n?"rgba(75, 85, 99, 0.5)":"rgba(209, 213, 219, 0.5)"};
          border-radius: 4px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: ${n?"rgba(75, 85, 99, 0.8)":"rgba(209, 213, 219, 0.8)"};
        }
      `})]})},ff={general:{filosofie:[{title:"Mletsk kola",content:`Obdob: Pedsokratovsk obdob.

Hlavn pedstavitel: Thales, Anaximandros, Anaximens. 

Hlavn mylenka: Mletsk kola hledala zkladn princip (arch), kter by vysvtlil vznik a povahu svta. Thales tvrdil, e zkladem veho je voda, Anaximandros mluvil o neomezenm (apeiron), a Anaximens o vzduchu. 

Pklad: Thalesovo tvrzen, e voda je zkladem veho, je viditeln i v prodnch jevech, jako je kondenzace vody nebo vznik ivota v moi.`},{title:"Pythagorejsk kola",content:`Obdob: Pedsokratovsk obdob.

Hlavn pedstavitel: Pythagoras.

Hlavn mylenka: Pythagorejsk kola vila, e matematika a sla jsou klov pro pochopen vesmru. Pythagoras tvrdil, e vechny vci jsou uspodny podle matematickch zkon, piem sla jsou jejich podstatou.

Pklad: Pythagorejsk vta, kter k, e souet tverc dlek obou kratch stran pravohlho trojhelnku se rovn tverci dlky pepony (a + b = c), je pkladem jeho mylenky, e matematika je zkladem reality.`},{title:"Herakleitos",content:`Obdob: Pedsokratovsk obdob.

Hlavn pedstavitel: Herakleitos z Efesu.

Hlavn mylenka: Herakleitos zdraznil, e svt je v neustlm pohybu a zmn, a e zmna je zkladn charakteristikou reality. Proslul svm vrokem: "Nikdy nevstoup do te eky".

Pklad: Tento vrok ilustruje, e i kdy vstoupme do stejn eky, jej voda u bude jin, protoe se neustle mn. Stejn tak i v ivot je ve v neustlm pohybu a nic nen trval.`},{title:"Eljsk kola",content:`Obdob: Pedsokratovsk obdob.

Hlavn pedstavitel: Parmenids, Zenn.

Hlavn mylenka: Eljsk kola tvrdila, e realita je jedna, nemnn a nehybn. Parmenids kal, e zmna a pohyb jsou iluze. Zenn formuloval paradoxy, kter mly ukzat, e pohyb je nesmysln.

Pklad: Zennv paradox "Achilles a elva" ukazuje, e Achilles, i kdy b rychleji ne elva, ji nikdy nedohon, protoe vdy bude muset ubhnout vzdlenost, kterou elva ji ula.`},{title:"Sofist",content:`Obdob: Pedsokratovsk obdob.

Hlavn pedstavitel: Protagoras, Gorgias.

Hlavn mylenka: Sofist vili, e pravda je relativn a zvis na lidskm nzoru. Protagoras proslul svm vrokem: "lovk je mrou vech vc", co znamen, e ve je subjektivn a zvis na lovku.

Pklad: Kdy dva lid maj rzn nzory na njakou udlost, sofist by ekli, e oba maj pravdu, protoe pravda je relativn a zvis na jejich osobnch perspektivch.`},{title:"Atomist",content:`Obdob: Pedsokratovsk obdob.

Hlavn pedstavitel: Leukippos, Demokritos.

Hlavn mylenka: Atomist tvrdili, e ve se skld z malch, nedlitelnch stic - atom, kter se pohybuj v przdnu. Tyto atomy se spojovnm vytvej rzn vci a objekty.

Pklad: Pokud rozbijeme sklenici, podle atomist se rozbije na mnoho malch atom, kter dve tvoily celistvou sklenici, ale nyn jsou rozmstny v prostoru jako samostatn stice.`},{title:"Sokratova filosofie",content:`Obdob: Klasick obdob (5. stolet p. n. l.).

Hlavn pedstavitel: Skrats.

Hlavn mylenka: Skrats zdrazoval vznam etiky a sebepoznn, vil, e nezkouman ivot nestoj za to t". Pouval dialog (dialektiku) jako metodu zkoumn pravdy.

Pklad: V rozhovoru s mladm muem by se Skrats ptal na definici spravedlnosti a postupn by odhaloval rozpory v jeho odpovdch, m by ho vedl k hlubmu zamylen a vlastnmu poznn.`},{title:"Platonismus",content:`Obdob: Klasick obdob (4. stolet p. n. l.).

Hlavn pedstavitel: Platn.

Hlavn mylenka: Platn rozvinul teorii idej, podle kter existuje dokonal svt idej, jeho nedokonalm odrazem je svt, kter vidme. Lidsk due m schopnost tento svt idej poznvat.

Pklad: Platnova alegorie jeskyn popisuje lidi pipoutan v jeskyni, kte vid pouze stny na stn, a ukazuje, e poznn idej je jako vyjt z jeskyn na svtlo.`},{title:"Aristotelismus",content:`Obdob: Klasick obdob (4. stolet p. n. l.).

Hlavn pedstavitel: Aristotels.

Hlavn mylenka: Aristotels zdrazoval empirick pozorovn a logiku. Tvrdil, e ve m svj el (telos) a e clem lidskho ivota je dosaen eudaimonie (tst a naplnn).

Pklad: Aristotels by napklad zkoumal vlastnosti rostliny a na zklad pozorovn uril jej el, co by aplikoval i na etick otzky, napklad jak lovk me doshnout svho potencilu.`},{title:"Spor o univerzlie",content:`Obdob: Klasick obdob (4. stolet p. n. l.).

Pohled Platna: Platn tvrdil, e univerzlie (obecn pojmy, nap. "krsa" nebo "dobro") existuj samostatn jako reln ideje ve svt idej, nezvisl na konkrtnch vcech.

Pohled Aristotela: Aristotels naopak vil, e univerzlie existuj pouze ve vcech samotnch, jako jejich podstatn vlastnosti, a mimo n nemaj dnou nezvislou existenci.

Pklad: Pedstavme si "kruh". Platn by ekl, e existuje dokonal kruh ve svt idej, kter vechny konkrtn kruhy (nap. namalovan kruhy na pape) pouze napodobuj. Aristotels by naopak tvrdil, e vlastnost "kruhovitosti" existuje v kadm konkrtnm kruhu a nen oddlen od dan vci.`},{title:"Stoicismus",content:`Obdob: Helenistick obdob (3. stolet p. n. l. - 2. stolet n. l.).

Hlavn pedstavitel: Znn z Kitia, Epikttos, Seneca, Marcus Aurelius.

Hlavn mylenka: Stoicismus se zamuje na dosaen vnitnho klidu a harmonickho ivota skrze ovldn emoc a rozpoznn toho, co je v naem ivot skuten pod na kontrolou. Stoici vili, e rozum a ctnost jsou klem k dosaen eudaimonie" (astnho a naplnnho ivota).

Pklad: Stoik Marcus Aurelius ve sv knize Meditace zdrazuje, jak se vyrovnvat s nepzn osudu a zamovat se na vlastn ctnosti.`},{title:"Epikureismus",content:`Obdob: Helenistick obdob (4. stolet p. n. l. - 1. stolet n. l.).

Hlavn pedstavitel: Epikuros, Metrodros.

Hlavn mylenka: Epikureismus u, e nejvym clem je doshnout atarxie" (vnitnho klidu) a poten, kter je pirozen a dosaiteln skrze rozumn uspokojovn zkladnch poteb, odmtn nadmrnch touh a vyhbn se bolesti.

Pklad: Epikuros tvrdil, e ptelstv je nejvtm potenm, protoe ptel pomhaj zmrnit strach a bolest, co vede k trval radosti.`},{title:"Skepticismus",content:`Obdob: Helenistick obdob (3. stolet p. n. l. - 2. stolet n. l.).

Hlavn pedstavitel: Pyrrhn z Elidy, Aenesidmos.

Hlavn mylenka: Skepticismus je filozofick smr, kter se zamuje na pochybovn o schopnosti lidskho rozumu doshnout jistch a objektivnch pravd. Skeptici tvrd, e lovk neme doshnout definitivn jistoty a ml by se vyhbat absolutnm tvrzenm.

Pklad: Pyrrhn doporuoval, aby se lovk vyhbal soudm a soudil vci pouze podle pirozench vjem, co vedlo k tomu, e neexistuje dn dvod pro negativn emoce.`},{title:"Novoplatonismus",content:`Obdob: Helenistick obdob (3. stolet n. l. - 6. stolet n. l.).

Hlavn pedstavitel: Plotnos, Porfyrios, Jamblichos.

Hlavn mylenka: Novoplatonismus je vvoj a reinterpretace platonismu, kter zdrazuje existenci jedinho, absolutnho Jedna", z nho pochz ve ostatn. Tento smr se zamuje na duchovn oistu a nvrat k Jednu" skrze meditaci, introspekci a filozofii.

Pklad: Plotnos tvrdil, e ve ve svt je propojeno skrze Jedno", a lovk me doshnout osvcen a sjednocen s tmto absolutnm principem.`},{title:"Novopthagoreismus",content:`Obdob: Helenistick obdob (3. stolet p. n. l. - 1. stolet n. l.).

Hlavn pedstavitel: Philolaos, Archytas.

Hlavn mylenka: Novopthagoreismus zdrazuje matematick a harmonick principy jako zklad pro porozumn vesmru. Novopthagorejci vili, e vesmr je zen matematickmi zkony, kter ovlivuj ve od prody po dui lovka.

Pklad: Philolaos tvrdil, e vesmr nen centrln, ale je uspodn kolem ohn, co bylo jeho filozofickm pokusem propojit matematiku s cosmologi.`}],psychologie:[{title:"Psychoanalza",content:`Obdob: Konec 19. a zatek 20. stolet.

Hlavn pedstavitel: Sigmund Freud.

Hlavn mylenka: Psychoanalza je teorie a terapeutick metoda, kter se zamuje na studium nevdom a vliv nevdomch proces na chovn a mylen lovka. Freud se domnval, e nevdom konflikty, potlaen vzpomnky a zrann maj zsadn vliv na duevn zdrav.

Pklad: Freudovo teoretick vysvtlen zmn v jazyce, napklad, kdy lovk msto "krsn dvka" ekne "krsn svin", co m bt podle nj projev nevdomho pn nebo strachu.`},{title:"Analytick psychologie",content:`Obdob: Potek 20. stolet.

Hlavn pedstavitel: Carl Gustav Jung.

Hlavn mylenka: Analytick psychologie se zamuje na studium individuace a symboliky. Jung se soustedil na rozvoj jednotlivce, kter je schopen doshnout pln seberealizace a rovnovhy mezi vdommi a nevdommi stmi psychiky.

Pklad: Jungovy analzy sn, kde se objevuj univerzln symboly (archetypy) jako matka, hrdina nebo stn, kter jsou pro vechny kultury a jednotlivce stejn.`},{title:"Individuln psychologie",content:`Obdob: Potek 20. stolet.

Hlavn pedstavitel: Alfred Adler.

Hlavn mylenka: Individuln psychologie se zamuje na studium jedinenosti kadho lovka a jeho snahy o dosaen nadazenosti. Adler vil, e kad lovk m svj vlastn ivotn styl a cle, kter se sna doshnout.

Pklad: Adlerova teorie o pocitu mncennosti a kompenzaci, kde lovk, kter se ct mncenn v urit oblasti, se sna tuto nevhodu kompenzovat rozvojem jinch schopnost.`},{title:"Behaviorismus",content:`Obdob: Zatek 20. stolet.

Hlavn pedstavitel: John B. Watson, B. F. Skinner.

Hlavn mylenka: Behaviorismus je teorie, kter tvrd, e chovn je vsledkem podnt a reakc (stimulus-response). Tento smr se sousted na pozorovateln chovn a vychz z pesvden, e psychologii lze studovat pouze na zklad mitelnch a objektivnch faktor.

Pklad: Skinnerova teorie operantnho podmiovn, kdy se chovn jedince formuje prostednictvm pozitivnho nebo negativnho poslen.`},{title:"Gestalt psychologie",content:`Obdob: Zatek 20. stolet.

Hlavn pedstavitel: Max Wertheimer, Wolfgang Khler, Kurt Koffka.

Hlavn mylenka: Gestalt psychologie se zamuje na studium vnmn a mylen jako celk, kter jsou vce ne pouhm soutem jejich st. Tento smr zdrazuje, e lovk vnm svt v celcch a vzorcch, ne jako izolovan prvky.

Pklad: Gestalt zkon blzkosti, kter k, e prvky blzko sebe vnmme jako celek, napklad teky uspodan do kruhu vnmme jako kruh, ne jako jednotliv teky.`},{title:"Humanistick psychologie",content:`Obdob: 50. a 60. lta 20. stolet.

Hlavn pedstavitel: Abraham Maslow, Carl Rogers.

Hlavn mylenka: Humanistick psychologie se zamuje na studium lidskho potencilu a seberealizace. Tento smr zdrazuje svobodu volby, kreativitu a osobn rst lovka.

Pklad: Maslowova pyramida poteb, kter ukazuje hierarchii lidskch poteb od zkladnch fyziologickch poteb a po seberealizaci.`},{title:"Kognitivn psychologie",content:`Obdob: 60. lta 20. stolet.

Hlavn pedstavitel: Jean Piaget, Ulric Neisser.

Hlavn mylenka: Kognitivn psychologie se zamuje na studium mentlnch proces, jako je mylen, pam, vnmn a uen. Tento smr zdrazuje, e lovk aktivn zpracovv informace a vytv mentln reprezentace svta.

Pklad: Piagetova teorie kognitivnho vvoje, kter popisuje, jak se dti vyvjej od senzomotorickho stdia a po formln operace.`},{title:"Transpersonln psychologie",content:`Obdob: 60. lta 20. stolet.

Hlavn pedstavitel: Stanislav Grof, Abraham Maslow.

Hlavn mylenka: Transpersonln psychologie se zamuje na studium transcendentnch a spiritulnch aspekt lidsk psychiky. Tento smr zkoum stavy vdom, kter pesahuj bn ego a osobn identitu.

Pklad: Grofovo zkoumn holotropnho dchn a jeho vlivu na zmny vdom a pstup k nevdommu materilu.`},{title:"Gnoseologie",content:`Obdob: Od starovku po souasnost.

Hlavn pedstavitel: Ren Descartes, Immanuel Kant.

Hlavn mylenka: Gnoseologie je teorie poznn, kter se zabv otzkami, jak lovk poznv svt a jak jsou hranice lidskho poznn. Tento obor zkoum povahu poznn, jeho zdroje a kritria pravdivosti.

Pklad: Kantovo rozlien mezi analytickmi a syntetickmi soudy, kter ukazuje rozdl mezi defininm poznnm a poznnm, kter pidv novou informaci.`},{title:"Introspekce",content:`Obdob: 19. stolet.

Hlavn pedstavitel: Wilhelm Wundt, Edward Titchener.

Hlavn mylenka: Introspekce je metoda zkoumn vlastnch mentlnch proces a stav. Tato metoda se zamuje na systematick pozorovn a popis vlastnch mylenek, pocit a vjem.

Pklad: Wundtv experimentln pstup k introspekci, kde cvien pozorovatel popisovali sv vjemy pi vystaven rznm podntm.`},{title:"Kolektivn nevdom",content:`Obdob: Potek 20. stolet.

Hlavn pedstavitel: Carl Gustav Jung.

Hlavn mylenka: Kolektivn nevdom je koncept, kter popisuje sdlen nevdom obsahy, kter jsou ddictvm celho lidstva. Jung vil, e tyto obsahy se projevuj v mtech, symbolech a archetypech.

Pklad: Jungova analza mt a pohdek, kde identifikoval univerzln archetypy jako hrdina, stn nebo moudr staec, kter se objevuj v rznch kulturch.`}],sociologie:[{title:"Auguste Comte",content:`Obdob: 19. stolet.

Mylenkov smr: Pozitivismus.

Hlavn mylenka: Comte je zakladatelem pozitivismu, smru, kter tvrd, e vechny skutenosti je mon studovat vdeckmi metodami, podobn jako v prodnch vdch. Uvedl teorii t stdi vvoje lidskho poznn, kter postupuje od teologickho, pes metafyzick, a k vdeckmu (pozitivnmu) stdiu. Vdeck pstup podle nj ml pinst objektivn porozumn socilnm jevm a tm i zlepen lidsk spolenosti.

Pklad: Comteho prce Systm pozitivn filozofie", kter klade draz na vdeck metody a aplikace na analzu spoleenskch jev.`},{title:"Herbert Spencer",content:`Obdob: 19. stolet.

Mylenkov smr: Sociln darwinismus.

Hlavn mylenka: Spencer pinesl teorii socilnho darwinismu, kter tvrd, e stejn jako v prod, i v lidsk spolenosti pevaj nejschopnj a nejadaptabilnj jedinci. Tvrdil, e lidsk spolenosti a jejich instituce se vyvjej pirozenm vbrem, co znamen, e silnj skupiny a jednotlivci by mli mt svobodu prosperovat bez zsah zven. Tento pstup odmtal regulace sttu a podporoval laissez-faire ekonomiku, kter umouje pirozen vbr ve vech oblastech ivota.

Pklad: Spencerovo tvrzen, e jakkoliv zsah sttu do socilnch proces, napklad pomoc chudm, brn pirozenmu vbru a pokroku spolenosti.`},{title:"Karl Marx",content:`Obdob: 19. stolet.

Mylenkov smr: Marxismus.

Hlavn mylenka: Marxismus tvrd, e historie lidstva je histori tdnch boj, kde dominantn tdy vykoisuj ni tdy. Marx rozpracoval teorii o tom, jak kapitalismus vede k exploataci pracujcch a jak je tento systm neudriteln. Pedpovdl, e proletarit (dlnick tda) nakonec povstane proti buroazii (vlastnkm vrobnch prostedk), co povede k revoluci a vzniku beztdn socialistick spolenosti.

Pklad: Marxova analza kapitalismu a jeho teorie pebrn moci proletaritem bhem proletsk revoluce.`},{title:"mile Durkheim",content:`Obdob: 19. - 20. stolet.

Mylenkov smr: Jeden ze zakladatel modern sociologie (ovlivnil mnoho smr).

Hlavn mylenka: Durkheim byl zakladatelem modern sociologie, kter vil, e spolenost by mla bt studovna jako objektivn realita, kter ovlivuje chovn jednotlivc. Zajmal se o to, jak sociln struktury, jako nboenstv nebo dlba prce, udruj sociln d a stabilitu. Durkheim tak tvrdil, e spoleensk jevy mus bt vysvtlovny podle jejich funkce v rmci ir sociln struktury, a e spolenost je vce ne souhrn jednotlivc.

Pklad: Durkheimova studie sebevrady, kter ukzala, e sebevrady nejsou jen individulnmi iny, ale jsou ovlivnny irmi socilnmi faktory, jako je integrace jednotlivce do spolenosti.`},{title:"Vilfredo Pareto",content:`Obdob: 19. - 20. stolet.

Mylenkov smr: Elitismus.

Hlavn mylenka: Pareto formuloval teorii, podle kter v kad spolenosti existuj dv hlavn kategorie: elity a masy. Elity jsou ti, kte kontroluj moc a bohatstv, zatmco masy jsou pasivn a podzen. Pareto vil, e zmny ve spolenosti jsou dsledkem boje mezi rznmi elitami a e zmna moci mezi elitami vede k postupnmu rozvoji spolenosti. Dle tvrdil, e mocn elity vdy udruj svou pozici, ale mn se jednotliv lenov elitnch skupin. Zneuito nacismem.

Pklad: Paretoho princip 80/20", kter ukazuje, e 80 % zdroj a moci je soustedno v rukou 20 % lid ve spolenosti.`},{title:"Max Weber",content:`Obdob: 19. - 20. stolet.

Mylenkov smr: Chpajc sociologie.

Hlavn mylenka: Weber se zabval tm, jak sociln iny jednotlivc, jejich motivy a hodnoty ovlivuj vznik a fungovn instituc a organizac. Na rozdl od Marxovy ekonomick determinace, Weber tvrdil, e rzn hodnoty a ideologie, napklad protestantsk etika, mohou mt zsadn vliv na vznik kapitalismu. Zajmal se tak o byrokracii jako jednu z klovch struktur modern spolenosti, kter, i kdy zajiuje efektivitu, me vst k odcizen a ztrt individuality.

Pklad: Weberova teorie o protestantsk etice a jejm vlivu na vznik kapitalismu, kde tvrdil, e urit hodnoty spojen s protestantskm nboenstvm vedly k etice tvrd prce, eten a racionality, kter jsou zkladem kapitalistick ekonomiky.`},{title:"Georg Simmel",content:`Obdob: 19. - 20. stolet.

Mylenkov smr: Sociologie.

Hlavn mylenka: Simmel se zamoval na studium malch skupin a interakc mezi jednotlivci, m se stal prkopnkem mikro-sociologie. Jeho teorie k, e kad jednotliv setkn a vztah mezi lidmi m vliv na ir sociln strukturu. Zkoumal tak vliv modernho mstskho ivota na jednotlivce, piem tvrdil, e anonymita velkch mst me vst k rozpadu tradinch spoleenskch vazeb.

Pklad: Simmelova analza vztah mezi jednotlivci v modernm mstskm prosted, kde anonymita a rychl ivotn styl mohou vst k izolaci a ztrt osobnch kontakt.`},{title:"Robert Park",content:`Obdob: 20. stolet.

Mylenkov smr: Chicago School.

Hlavn mylenka: Park byl klovm pedstavitelem Chicagsk koly sociologie, kter se zamila na studium mstskho ivota a jeho vlivu na sociln interakce. Zabval se tm, jak mstsk prosted formuje chovn a vztahy mezi lidmi, piem zdrazoval vznam prosted a socilnch faktor v rozvoji jednotlivc. Dle se vnoval analze proces migrace a urbanizace, kter byly v t dob vznamnmi tmaty.

Pklad: Parkova studie mstskch komunit v Chicagu, kde zkoumal, jak rzn etnick a sociln skupiny spolu koexistuj v mstskm prostoru.`},{title:"Jacob Moreno",content:`Obdob: 20. stolet.

Mylenkov smr: Psychodrama.

Hlavn mylenka: Moreno je zakladatelem psychodramy, terapeutick metody, kter pouv dramatizaci osobnch konflikt a zkuenost jako zpsob psychoterapie. Psychodrama umouje jednotlivcm prot a analyzovat sv emoce a vztahy v simulovanch situacch, co jim pomh lpe porozumt jejich vnitnm proitkm a konfliktm. Moreno vil, e pomoc tohoto pstupu je mon doshnout hlubho sebepoznn a uzdraven.

Pklad: Morenoho psychodramatick sezen, kdy astnci hraj rzn role, aby se vyrovnali se svmi vnitnmi problmy nebo vztahovmi konflikty.`},{title:"Tom Garrigue Masaryk",content:`Obdob: 19. - 20. stolet.

Mylenkov smr: Humanismus, sociologie.

Hlavn mylenka: Masaryk se zasazoval o humanistick hodnoty, kter kladly draz na rozum, vdu a etiku v politice. V jeho filozofii se prolnaly prvky sociologie a politiky, piem jeho hlavnm clem bylo zajitn demokratickch a svobodnch princip pro nov vzniklou eskoslovenskou republiku. Masaryk ml rovn vznamn podl na formovn politickch instituc a rozvoji obansk spolenosti v eskoslovensku.

Pklad: Masarykovo dlo esk otzka", kde se zamil na nrodn identitu a roli vdy a rozumu v politickm ivot.`},{title:"Edvard Bene",content:`Obdob: 20. stolet.

Mylenkov smr: Diplomacie, politika.

Hlavn mylenka: Bene byl vznamnou osobnost esk diplomacie, kter se podlel na vzniku eskoslovensk republiky a byl klovm diplomatem v obdob prvn a druh svtov vlky. Byl obhjcem mrov politiky a piinil se o vznik mezinrodnch pakt, kter mly zajistit bezpenost stedn Evropy. Ve sv politick karie se vnoval pedevm zahranin politice a ochran suverenity eskoslovenska.

Pklad: Beneovo zapojen do vzniku Mnichovsk dohody a jeho role v diplomatickch jednnch bhem druh svtov vlky.`},{title:"Jan Blha",content:`Obdob: 20. stolet.

Mylenkov smr: Sociologie, politika.

Hlavn mylenka: Blha se soustedil na otzky politick a sociln zmny, piem se vnoval zejmna studiu transformace politickch a socilnch struktur ve 20. stolet. Jeho pstup zahrnoval analzu modernizanch proces, kter ovlivnily rozvoj demokratickch instituc. Blha rovn zdrazoval roli politickch elit a jejich vliv na vvoj sttnch a politickch systm.

Pklad: Blhova analza politickch a socilnch zmn v eskoslovensku bhem 20. stolet, piem se zamoval na procesy modernizace.`}]},"pravo-politologie":{pravo:[{title:"stavn prvo",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn stavn prvnci a teoretici.

Hlavn mylenka: stavn prvo je soubor prvnch norem, kter upravuj zkladn principy organizace sttu, postaven jednotlivc ve spolenosti a vztahy mezi sttnmi orgny. Je to nejvy prvn normativn soustava v prvnm systmu kadho sttu.

Pklad: stava esk republiky, kter definuje zkladn strukturu sttu, prva a svobody oban a vztahy mezi sttnmi orgny.`},{title:"Vznam stavy",content:`Obdob: Modern doba.

Hlavn pedstavitel: stavn prvnci a teoretici.

Hlavn mylenka: stava je zkladn prvn dokument sttu, kter vymezuje strukturu a kompetence sttnch orgn, prva a svobody oban a principy fungovn prvnho a politickho systmu. M nejvy prvn slu.

Pklad: stava USA, kter je nejstar psanou stavou na svt a slou jako model pro mnoho dalch demokratickch stt.`},{title:"Princip dlby moci",content:`Obdob: Modern doba.

Hlavn pedstavitel: Montesquieu, John Locke.

Hlavn mylenka: Princip dlby moci je zkladn zsada stavnho prva, podle kter je moc ve stt rozdlena mezi ti nezvisl sloky: zkonodrnou, vkonnou a soudn. Tento princip m zajistit kontrolu a vyvenost mezi jednotlivmi slokami.

Pklad: V esk republice je moc rozdlena mezi Parlament (zkonodrn), Vldu (vkonn) a soudy (soudn moc).`},{title:"Princip prvnho sttu",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Princip prvnho sttu znamen, e veker innost sttu je podzena prvu, co znamen, e stt a jeho orgny mohou jednat pouze v mezch prva. Kad oban je chrnn ped svvolnm rozhodovnm sttn moci.

Pklad: stavn soud, kter kontroluje, zda zkony a rozhodnut sttnch orgn jsou v souladu s stavou.`},{title:"Suverenita lidu",content:`Obdob: Modern doba.

Hlavn pedstavitel: Jean-Jacques Rousseau, modern demokratit teoretici.

Hlavn mylenka: Suverenita lidu je zkladn zsada demokratickch stt, podle kter veker politick moc pochz od oban. Lid maj prvo rozhodovat o svm politickm systmu prostednictvm voleb a dalch demokratickch nstroj.

Pklad: Volebn prvo, kter umouje obanm volit sv zstupce do parlamentu a dalch orgn.`},{title:"Psan a nepsan stava",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn stavn prvnci.

Hlavn mylenka: Psan stava je formln sepsna v jednom nebo nkolika dokumentech (nap. stava USA nebo R). Nepsan stava je soubor tradic, zvyk a precedens, kter nejsou sepsny v jednom dokumentu, ale tvo stavn rmec (nap. ve Velk Britnii).

Pklad: Velk Britnie, kter nem psanou stavu, ale m dlouholet stavn tradice a zvyklosti.`},{title:"Zkladn prva a svobody",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Zkladn prva a svobody jsou prva, kter maj vichni oban podle stavy a mezinrodnch dohod. Tato prva chrn jednotlivce ped nadmrnm zsahem sttu do jejich ivota a zahrnuj prva na svobodu, rovnost, ochranu soukrom a dal.

Pklad: Listina zkladnch prv a svobod v esk republice, kter garantuje obanm zkladn prva a svobody.`},{title:"Princip subsidiarity",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Princip subsidiarity znamen, e koly by mly bt eeny na nejni mon rovni vldy. To znamen, e vy orgny by mly zasahovat pouze tehdy, kdy ni rove nen schopn efektivn problm vyeit.

Pklad: V Evropsk unii, kde se princip subsidiarity pouv k uren, kdy by mla EU zasahovat do zleitost lenskch stt.`},{title:"Kontroln role stavnho soudu",content:`Obdob: Modern doba.

Hlavn pedstavitel: stavn soudci a prvn teoretici.

Hlavn mylenka: stavn soud m za kol kontrolovat, zda zkony a jin prvn pedpisy nejsou v rozporu s stavou. Tato kontrola je dleit pro ochranu stavnho podku a zkladnch prv oban.

Pklad: Rozhodnut stavnho soudu esk republiky, kter mohou zruit zkony, kter jsou v rozporu s stavou.`},{title:"Zkladn normy stavnho podku",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn stavn prvnci.

Hlavn mylenka: Zkladn normy stavnho podku jsou prvn normy, kter upravuj fundamentln prvn strukturu sttu. Tyto normy jsou chrnny vy prvn slou a jejich zmna je obvykle sloitj ne u bnch prvnch pedpis.

Pklad: stavn zkony v esk republice, kter maj vy prvn slu ne bn zkony.`},{title:"Prvn norma",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Prvn norma je pravidlo chovn, kter je vymezeno prvnm systmem. Normy jsou vynutiteln sttem, co znamen, e poruen tchto norem me vst k prvnm sankcm.

Pklad: Ustanoven obanskho zkonku, kter upravuj vztahy mezi obany.`},{title:"Prvn subjektivita",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Prvn subjektivita je schopnost bt nositelem prv a povinnost. Fyzick osoby maj prvn subjektivitu od narozen, prvnick osoby ji zskvaj zpisem do obchodnho rejstku.

Pklad: Dt, kter m prvn subjektivitu od narozen, me bt nositelem prv a povinnost.`},{title:"Zpsobilost k prvnm konm",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Zpsobilost k prvnm konm je schopnost jednotlivce prvn jednat, tedy uzavrat platn smlouvy a vykonvat jin prvn jednn.

Pklad: Plnolet lovk m plnou zpsobilost k prvnm konm, zatmco nezletil m omezenou zpsobilost.`},{title:"Prva a povinnosti",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Prva a povinnosti jsou prvn vztahy mezi subjekty, kter vznikaj na zklad prvnch norem. Prva jsou oprvnn jedince vykonvat urit innosti nebo se domhat neho, zatmco povinnosti vyaduj urit chovn nebo zdren se innosti.

Pklad: Vlastnick prvo dv vlastnkovi prvo nakldat s vc, zatmco povinnost platit dan vyaduje urit chovn.`},{title:"Obansk smlouva",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Obansk smlouva je prvn kon, kterm si strany vzjemn ujednaj prva a povinnosti. Smlouva je zvazn pro ob strany a jej poruen me vst k prvnm dsledkm.

Pklad: Kupn smlouva, kde prodvajc se zavazuje pedat vc a kupujc zaplatit cenu.`},{title:"Absolutn a relativn prvo",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Absolutn prvo je takov prvo, kter me bt uplatnno vi kadmu (nap. vlastnick prvo). Relativn prvo je prvo, kter se uplatuje pouze vi konkrtn osob nebo osobm (nap. nrok na plnn z konkrtn smlouvy).

Pklad: Vlastnick prvo je absolutn, protoe me bt uplatnno vi komukoliv, zatmco nrok na zaplacen dluhu je relativn, protoe se tk pouze konkrtnho dlunka.`},{title:"Vlastnictv",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Vlastnictv je prvn vztah, kter dv vlastnkovi prvo nakldat s vc podle svho uven, v mezch zkona. Vlastnk me vc uvat, mnit, zcizit, nebo zniit.

Pklad: Vlastnk domu me s nm nakldat podle svho uven, ale mus respektovat stavebn pedpisy a prva soused.`},{title:"Zvazkov prvo",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Zvazkov prvo je st obanskho prva, kter se zabv vztahy mezi osobami, kter jsou vzjemn vzny zvazky. Zvazky mohou vznikat ze smluv nebo z jinch prvnch jednn.

Pklad: Smlouva o dlo, kde se jedna strana zavazuje vykonat uritou prci a druh strana zaplatit odmnu.`},{title:"Odpovdnost za kodu",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Odpovdnost za kodu je prvn zvazek nahradit kodu zpsobenou jednnm, kter bylo nezkonn, nebo kter poruilo smluvn podmnky. Me bt zaloena na zavinn nebo objektivn odpovdnosti.

Pklad: Odpovdnost za kodu zpsobenou dopravn nehodou, kde vink mus nahradit kodu pokozenmu.`},{title:"Prvn jednn",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Prvn jednn je kon, kterm osoba vyjaduje svj prvn zmr, aby vyvolala prvn nsledky. Me jt o uzaven smlouvy, podn aloby nebo zzen zvti.

Pklad: Podpis smlouvy, kter je prvnm jednnm vedoucm k vzniku prvnch vztah mezi stranami.`},{title:"Trestn prvo",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Trestn prvo je soubor prvnch norem, kter stanov, jak jednn je povaovno za trestn, jak jsou tresty za jeho spchn a jak se trestn zen provd. Jeho clem je chrnit veejn zjem a zajistit spravedliv postih pachatel trestnch in.

Pklad: Trestn zkonk, kter definuje trestn iny a jejich tresty.`},{title:"Pestupek a trestn in",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Pestupek je mn zvan poruen prvnch pedpis, kter je sankcionovno mrnjm trestem (pokutou, napomenutm), zatmco trestn in je zvanj protiprvn jednn, kter me vst k vym trestm, jako je odnt svobody.

Pklad: Pestupek me bt pekroen rychlosti, zatmco trestnm inem je krde nebo vrada.`},{title:"Trestn odpovdnost",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Trestn odpovdnost znamen, e osoba, kter spch trestn in, je prvn zodpovdn za svj in a me bt potrestna podle trestnho zkona. Osoba mus bt v dob spchn trestnho inu zpsobil k trestn odpovdnosti.

Pklad: Plnolet lovk, kter spch trestn in, je trestn odpovdn, zatmco dt mlad 15 let nen.`},{title:"Druhy trest",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Tresty v trestnm prvu se dl na hlavn (nap. odnt svobody, penit tresty) a vedlej (nap. ztrta obanskch prv, zkaz innosti). Hlavn tresty jsou vnj a maj dlouhodobj dopad na ivot pachatele.

Pklad: Za vradu me bt uloen trest odnt svobody, zatmco za pestupek me bt uloena pokuta.`},{title:"Trestn zen",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Trestn zen je proces, pi kterm se zjiuje, zda byla spchna trestn innost a zda je obvinn osoba vinn. Trestn zen zahrnuje vyetovn, obalobu, soudn zen a ppadn odvoln.

Pklad: Proces od zadren podezelho a po vynesen rozsudku.`},{title:"Obvinn a vyetovn",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Obvinn je oficiln obvinn osoby z toho, e spchala trestn in. Vyetovn je fze trestnho zen, kdy orgny inn v trestnm zen shromauj dkazy, provdj vslechy a zjiuj okolnosti trestnho inu.

Pklad: Policie provd vyetovn a shromauje dkazy, kter pak pedkld sttnmu zstupci k podn obaloby.`},{title:"Soudn zen",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Soudn zen je fze trestnho zen, kdy soud rozhoduje o vin nebo nevin obvinn osoby. Soud zkoum dkazy, vyslechne obalovanho a svdky a na zklad toho vyn rozsudek.

Pklad: Veejn soudn len, kde soud zkoum vechny dkazy a vyslechne vechny zastnn strany.`},{title:"Trestn zkonk",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Trestn zkonk je soubor prvnch pedpis, kter definuj trestn iny, stanov tresty a upravuj postupy v trestnm zen. V esk republice je to zkon . 40/2009 Sb., kter upravuje vekerou trestn problematiku.

Pklad: Definice trestnch in a jejich trestnch sazeb v trestnm zkonku.`},{title:"Podmnn odsouzen",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Podmnn odsouzen znamen, e osoba je uznna vinnou, ale soud odkld vkon trestu na zkuebn dobu. Pokud obvinn v tto dob neudl dn dal trestn in, trest nebude vykonn.

Pklad: Soud me uloit podmnn trest odnt svobody na zkuebn dobu t let.`},{title:"Amnestie",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rzn prvn teoretici.

Hlavn mylenka: Amnestie je rozhodnut vldy nebo prezidenta, kter znamen zprotn trestu pro uritou skupinu osob, kter byly odsouzeny za trestn iny. Amnestie me bt udlena za zvltnch okolnost a obvykle se vztahuje na men trestn iny.

Pklad: Prezidentsk amnestie u pleitosti vznamnho vro sttu.`}],politologie:[{title:"stava R",content:`Obdob: Modern doba.

Hlavn pedstavitel: stavn prvnci a teoretici.

Hlavn mylenka: stava R je zkladn zkon sttu, kter uruje strukturu a fungovn sttn moci. Stanovuje rozdlen moci na zkonodrnou, vkonnou a soudn a definuje prva a svobody oban.

Pklad: stava R definuje zkladn strukturu sttu, vetn pravomoc jednotlivch orgn a zkladnch prv oban.`},{title:"Zkon",content:`Obdob: Modern doba.

Hlavn pedstavitel: Zkonodrci a prvn teoretici.

Hlavn mylenka: Zkon je prvn norma schvlen Parlamentem R, kter m obecnou zvaznost a upravuje dleit oblasti ivota ve stt.

Pklad: Obansk zkonk, kter upravuje vztahy mezi obany a jejich prva a povinnosti.`},{title:"Vyhlka",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ministerstva a obce.

Hlavn mylenka: Vyhlka je podzkonn pedpis vydvan ministerstvy nebo obcemi, kter detailnji upravuje zkony a jejich praktickou aplikaci.

Pklad: Vyhlka ministerstva kolstv o organizaci kolnho roku.`},{title:"Volebn systm pro Poslaneckou snmovnu R",content:`Obdob: Modern doba.

Hlavn pedstavitel: stavn prvnci a volebn komise.

Hlavn mylenka: Volby do Poslaneck snmovny R probhaj podle pomrnho volebnho systmu, kde volii hlasuj pro politick strany. Mandty jsou rozdlovny podle volebnch vsledk stran, kter pekroily 5% hranici.

Pklad: Volebn systm umouje menm stranm zskat zastoupen v parlamentu, pokud pekro 5% hranici.`},{title:"Volebn systm pro Sent R",content:`Obdob: Modern doba.

Hlavn pedstavitel: stavn prvnci a volebn komise.

Hlavn mylenka: Volby do Sentu R probhaj podle vtinovho systmu. Kad voli hlasuje pro konkrtnho kandidta ve svm obvod, a pokud dn nezsk nadpolovin vtinu, kon se druh kolo.

Pklad: Volebn obvody pro sentory jsou men a umouj osobnj kontakt voli s kandidty.`},{title:"Prezident R",content:`Obdob: Modern doba.

Hlavn pedstavitel: Prezidenti R.

Hlavn mylenka: Prezident R je hlavou sttu, volen pmo obany na ptilet obdob. M spe reprezentativn roli, ale tak jmenuje vldu, soudce a dal klov initele.

Pklad: Prezident reprezentuje stt navenek a m pravomoc jmenovat pedsedu vldy.`},{title:"Poslaneck snmovna R",content:`Obdob: Modern doba.

Hlavn pedstavitel: Poslanci a pedsedov snmovny.

Hlavn mylenka: Poslaneck snmovna je doln komora Parlamentu R, kter schvaluje zkony, rozpoet a kontroluje vldu. M 200 poslanc volench na tyi roky.

Pklad: Poslaneck snmovna je hlavnm zkonodrnm orgnem a me vyslovit nedvru vld.`},{title:"Sent R",content:`Obdob: Modern doba.

Hlavn pedstavitel: Sentoi a pedsedov sentu.

Hlavn mylenka: Sent je horn komora Parlamentu R, kter m 81 sentor volench na est let. Funguje jako kontroln orgn pi pijmn zkon.

Pklad: Sent me vrtit zkony Poslaneck snmovn s pozmovacmi nvrhy.`},{title:"Vlda R",content:`Obdob: Modern doba.

Hlavn pedstavitel: lenov vldy a premir.

Hlavn mylenka: Vlda R je vkonnm orgnem sttu, kter d innost ministerstev a odpovd Poslaneck snmovn. Jejm pedsedou je premir.

Pklad: Vlda navrhuje zkony a d sttn sprvu.`},{title:"Soudn moc v R",content:`Obdob: Modern doba.

Hlavn pedstavitel: Soudci a stavn soudci.

Hlavn mylenka: Soudn moc v R je nezvisl a zahrnuje obecn soudy, nejvy soudy a stavn soud, kter dohl na dodrovn stavy.

Pklad: stavn soud me zruit zkony, kter jsou v rozporu s stavou.`},{title:"Poloprezidentsk demokracie",content:`Obdob: Modern doba.

Hlavn pedstavitel: Politologov a stavn teoretici.

Hlavn mylenka: Poloprezidentsk demokracie je systm, ve kterm se o moc dl pmo volen prezident a vlda, kter je odpovdn parlamentu. Prezident m vznamn pravomoci, jako je jmenovn premira, zatmco vlda spravuje kadodenn chod sttu.

Pklad: Francie, kde prezident jmenuje premira a m pravomoc rozpustit parlament.`},{title:"Prezidentsk demokracie",content:`Obdob: Modern doba.

Hlavn pedstavitel: Politologov a stavn teoretici.

Hlavn mylenka: Prezidentsk demokracie je systm, ve kterm je prezident hlavou sttu i vldy. Je pmo volen obany a neme bt odvoln parlamentem. Prezident m vkonnou moc a parlament zkonodrnou.

Pklad: Spojen stty americk, kde prezident je hlavou vkonn moci a neme bt odvoln Kongresem.`},{title:"Parlamentn demokracie",content:`Obdob: Modern doba.

Hlavn pedstavitel: Politologov a stavn teoretici.

Hlavn mylenka: Parlamentn demokracie je systm, kde vlda vznik a odpovd parlamentu. Hlavou sttu je prezident nebo monarcha, ale vkonnou moc vykonv premir a vlda.

Pklad: esk republika, kde vlda je odpovdn Poslaneck snmovn.`},{title:"stavn monarchie",content:`Obdob: Modern doba.

Hlavn pedstavitel: Politologov a stavn teoretici.

Hlavn mylenka: stavn monarchie je forma vldy, kde monarcha funguje jako reprezentativn hlava sttu a jeho pravomoci jsou omezeny stavou. Skutenou moc maj volen zstupci.

Pklad: Spojen krlovstv, kde krlovna je hlavou sttu, ale skutenou moc m parlament a vlda.`},{title:"Absolutn monarchie",content:`Obdob: Modern doba.

Hlavn pedstavitel: Politologov a stavn teoretici.

Hlavn mylenka: Absolutn monarchie je systm, ve kterm m monarcha neomezenou moc a vldne bez stavnch omezen. Jeho rozhodnut jsou konen.

Pklad: Sadsk Arbie, kde krl m absolutn moc nad sttem.`},{title:"Theokracie",content:`Obdob: Modern doba.

Hlavn pedstavitel: Politologov a nboent teoretici.

Hlavn mylenka: Theokracie je forma vldy, ve kter je moc v rukou nboenskch vdc nebo instituc, kter interpretuj bosk zkony jako zklad vldnut.

Pklad: rn, kde nejvy nboensk vdce m vznamnou politickou moc.`},{title:"Autokracie",content:`Obdob: Modern doba.

Hlavn pedstavitel: Politologov a teoretici moci.

Hlavn mylenka: Autokracie je systm, kde vekerou moc dr jedna osoba nebo zk skupina lid. Neexistuje inn kontrola moci obany nebo institucemi.

Pklad: Severn Korea, kde jedin strana a jej vdce maj absolutn kontrolu nad sttem.`},{title:"Diktatura",content:`Obdob: Modern doba.

Hlavn pedstavitel: Politologov a teoretici moci.

Hlavn mylenka: Diktatura je systm vldy, ve kterm je moc soustedna v rukou jedn osoby nebo zk skupiny, asto se opr o vojenskou slu a potlauje opozici.

Pklad: Blorusko, kde prezident m neomezenou moc a potlauje opozici.`},{title:"Oligarchie",content:`Obdob: Modern doba.

Hlavn pedstavitel: Politologov a teoretici moci.

Hlavn mylenka: Oligarchie je vlda mal skupiny lid, kte kontroluj stt na zklad svho bohatstv, postaven nebo vojensk sly. Oban nemaj vliv na rozhodovn.

Pklad: Rusko, kde mal skupina bohatch lid m vznamn vliv na politiku.`},{title:"Aristokracie",content:`Obdob: Modern doba.

Hlavn pedstavitel: Politologov a historici.

Hlavn mylenka: Aristokracie je systm vldy, kde moc dr privilegovan vrstva, obvykle lechta, na zklad svho postaven, ddinosti nebo majetku.

Pklad: Spojen krlovstv v minulosti, kde lechta mla vznamn vliv na vldu.`},{title:"Demokracie",content:`Obdob: Modern doba.

Hlavn pedstavitel: Politologov a demokratit teoretici.

Hlavn mylenka: Demokracie je systm vldy, kde moc vychz z lidu a oban maj monost se podlet na rozhodovn. Je zaloena na svobodnch volbch, prvnm stt a ochran lidskch prv.

Pklad: esk republika, kde oban vol sv zstupce a maj stavou garantovan prva.`},{title:"Liberalismus",content:`Obdob: Modern doba.

Hlavn pedstavitel: John Locke, Adam Smith, John Stuart Mill.

Hlavn mylenka: Liberalismus je politick ideologie, kter klade draz na svobodu jednotlivce, trn hospodstv a omezenou roli sttu. V v pirozen prva lovka a svobodn podnikn.

Pklad: Spojen stty americk, kde je siln tradice individuln svobody a trnho hospodstv.`},{title:"Konzervatismus",content:`Obdob: Modern doba.

Hlavn pedstavitel: Edmund Burke, Roger Scruton.

Hlavn mylenka: Konzervatismus je ideologie, kter klade draz na tradici, stabilitu a postupnou zmnu. V si zavedench instituc a opatrn pistupuje k reformm.

Pklad: Konzervativn strany v Evrop, kter hj tradin hodnoty a opatrn reformy.`},{title:"Socialismus",content:`Obdob: Modern doba.

Hlavn pedstavitel: Karl Marx, Friedrich Engels.

Hlavn mylenka: Socialismus je ideologie, kter klade draz na sociln spravedlnost, rovnost a kolektivn vlastnictv. V v aktivn roli sttu pi zajiovn blahobytu oban.

Pklad: Skandinvsk zem, kde je siln sociln stt a vysok mra perozdlovn.`},{title:"Komunismus",content:`Obdob: Modern doba.

Hlavn pedstavitel: Karl Marx, Vladimir Lenin.

Hlavn mylenka: Komunismus je radikln forma socialismu, kter usiluje o beztdn spolenost a spoleensk vlastnictv vrobnch prostedk. V praxi asto vede k totalitnmu reimu.

Pklad: Sovtsk svaz, kde byla zavedena centrln plnovan ekonomika a diktatura proletaritu.`},{title:"Fascismus",content:`Obdob: Modern doba.

Hlavn pedstavitel: Benito Mussolini, Adolf Hitler.

Hlavn mylenka: Fascismus je autoritsk ideologie, kter klade draz na nrod, rasu a silnho vdce. Odmt demokracii a lidsk prva, propaguje nsil a expanzi.

Pklad: Itlie za Mussoliniho a Nmecko za Hitlera.`},{title:"Nacionalismus",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ernest Renan, Johann Gottlieb Fichte.

Hlavn mylenka: Nacionalismus je ideologie, kter klade draz na nrod a jeho zjmy. Me mt demokratickou formu (kulturn nacionalismus) nebo autoritskou formu (etnick nacionalismus).

Pklad: Maarsko, kde je siln tradice kulturnho nacionalismu.`},{title:"Anarchismus",content:`Obdob: Modern doba.

Hlavn pedstavitel: Pierre-Joseph Proudhon, Michail Bakunin.

Hlavn mylenka: Anarchismus je ideologie, kter odmt sttn moc a usiluje o spolenost bez hierarchie a autority. V v dobrovolnou spoluprci a samosprvu.

Pklad: Anarchistick komuny a hnut v 19. a 20. stolet.`},{title:"Environmentalismus",content:`Obdob: Modern doba.

Hlavn pedstavitel: Rachel Carson, Al Gore.

Hlavn mylenka: Environmentalismus je ideologie, kter klade draz na ochranu ivotnho prosted a udriteln rozvoj. Usiluje o zmnu spoleenskho a ekonomickho systmu ve prospch prody.

Pklad: Zelen strany v Evrop, kter prosazuj ekologickou politiku.`},{title:"Feminismus",content:`Obdob: Modern doba.

Hlavn pedstavitel: Mary Wollstonecraft, Simone de Beauvoir.

Hlavn mylenka: Feminismus je ideologie, kter usiluje o rovnost pohlav a odstrann patriarchlnch struktur ve spolenosti. Prosazuje prva en a jejich plnou participaci ve spolenosti.

Pklad: Feministick hnut v 20. stolet, kter doshla volebnho prva pro eny a dal prva.`}]},"historie-ekonomie":{ekonomie:[{title:"Zklady ekonomie",content:`Obdob: Od starovku po souasnost.

Hlavn pedstavitel: Adam Smith, John Maynard Keynes, Milton Friedman.

Hlavn mylenka: Ekonomie je vda o tom, jak spolenost vyuv omezen zdroje k uspokojen neomezench poteb. Zabv se vrobou, distribuc a spotebou statk a slueb.

Pklad: Smithova teorie "neviditeln ruky trhu", kter ukazuje, jak individuln zjmy mohou vst k celkovmu prospchu spolenosti.`},{title:"Ekonomick systmy",content:`Obdob: Modern doba.

Hlavn pedstavitel: Karl Marx, Friedrich Hayek.

Hlavn mylenka: Ekonomick systmy se li podle toho, jak je organizovna vroba a distribuce statk. Zkladn dlen je na trn a plnovan hospodstv.

Pklad: Porovnn kapitalistickho a socialistickho systmu, kde se li role sttu a soukromho vlastnictv.`},{title:"Hrub domc produkt (HDP)",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a statistici.

Hlavn mylenka: HDP je celkov penn hodnota vech finlnch vrobk a slueb vyprodukovanch v urit zemi bhem uritho obdob. Je to jeden z hlavnch ukazatel ekonomick vkonnosti a zdrav ekonomiky. HDP se m bu vrobn, vdajovou, nebo pjmovou metodou.

Pklad: HDP esk republiky v roce 2023, kter m celkovou ekonomickou produkci zem.`},{title:"Inflace",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a centrln banki.

Hlavn mylenka: Inflace je proces, pi kterm se zvyuj ceny zbo a slueb v ekonomice, co vede ke snen kupn sly penz. Vysok inflace me destabilizovat ekonomiku, zatmco nzk a stabiln inflace je povaovna za znak zdrav ekonomiky.

Pklad: Rst cen potravin a energi v dsledku inflace, kter sniuje kupn slu spotebitel.`},{title:"Deflace",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a centrln banki.

Hlavn mylenka: Deflace je opakem inflace, tedy pokles cen zbo a slueb v ekonomice. Me signalizovat ekonomick pokles a vst k recesi, protoe spotebitel a firmy odkldaj vdaje v oekvn, e ceny budou klesat i nadle.

Pklad: Japonsko v 90. letech 20. stolet, kde dlouhodob deflace vedla k ekonomick stagnaci.`},{title:"Nerovnovha v hospodstv",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a politici.

Hlavn mylenka: Nerovnovha v hospodstv nastv, kdy mezi nabdkou a poptvkou vznikne disproporce, co me vst k ekonomickm problmm jako jsou nezamstnanost, vysok inflace nebo recese. Clem makroekonomick politiky je tuto nerovnovhu odstranit.

Pklad: Ekonomick krize v roce 2008, kdy nerovnovha na finannch trzch vedla k globln recesi.`},{title:"Poptvkov inflace",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a centrln banki.

Hlavn mylenka: Poptvkov inflace nastv, kdy celkov poptvkov tlak v ekonomice (tedy poptvka po zbo a slubch) pevyuje nabdku. To me vst k rstu cen a inflaci, kter je podporovna nadmrnm vdajovm tlakem.

Pklad: Rst cen nemovitost v dsledku vysok poptvky po bydlen.`},{title:"Nabdkov inflace",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a centrln banki.

Hlavn mylenka: Nabdkov inflace vznik, kdy nklady na vrobu (napklad ceny surovin nebo prce) vzrostou, co vede ke zven cen zbo a slueb. Tento typ inflace je asto spojen s rostoucmi cenami surovin nebo energi.

Pklad: Rst cen ropy v 70. letech 20. stolet, kter vedl k celosvtov stagflaci.`},{title:"Cyklick nezamstnanost",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a politici.

Hlavn mylenka: Cyklick nezamstnanost je forma nezamstnanosti, kter se vyskytuje v dsledku ekonomickch cykl. Bhem recese nebo poklesu ekonomick aktivity roste nezamstnanost, protoe poptvka po zbo a slubch kles a firmy omezuj vrobu.

Pklad: Vysok nezamstnanost bhem ekonomick krize v roce 2008.`},{title:"Strukturln nezamstnanost",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a politici.

Hlavn mylenka: Strukturln nezamstnanost vznik, kdy jsou pracovn sly v uritm sektoru neadekvtn potebm trhu prce, co me bt dsledkem technologickch zmn, zmn ve struktue ekonomiky nebo geografickch faktor.

Pklad: Nezamstnanost v dsledku automatizace vroby, kdy pracovnci nemaj potebn dovednosti pro nov technologie.`},{title:"Frikn nezamstnanost",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a politici.

Hlavn mylenka: Frikn nezamstnanost se vyskytuje, kdy lid mezi zamstnnmi mn prci, nebo kdy se erstv absolventi kol poprv hledaj prci. Je to pirozen typ nezamstnanosti, kter je soust kad ekonomiky.

Pklad: Absolventi vysokch kol, kte hledaj sv prvn zamstnn.`},{title:"Makroekonomick rovnovha",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a centrln banki.

Hlavn mylenka: Makroekonomick rovnovha je stav, kdy v ekonomice dochz k vyrovnn mezi celkovou nabdkou (vrobou) a celkovou poptvkou. V tomto stavu neexistuj dn siln inflan nebo deflan tlaky a ekonomika roste stabilnm tempem.

Pklad: Stabiln rst HDP s nzkou inflac a pirozenou mrou nezamstnanosti.`},{title:"Monetrn politika",content:`Obdob: Modern doba.

Hlavn pedstavitel: Centrln banki a ekonomov.

Hlavn mylenka: Monetrn politika je soubor opaten, kter centrln banka pouv k zen nabdky penz, rokovch sazeb a kreditn politiky s clem ovlivnit ekonomiku. Clem je obvykle dosaen stabiln inflace a podpora ekonomickho rstu.

Pklad: Zmny rokovch sazeb eskou nrodn bankou pro kontrolu inflace.`},{title:"Fiskln politika",content:`Obdob: Modern doba.

Hlavn pedstavitel: Vldy a ekonomov.

Hlavn mylenka: Fiskln politika se tk rozhodnut vldy o vdajch a danch, kter maj vliv na ekonomickou aktivitu. Fiskln politika me bt expanzivn (zven vdaj nebo snen dan) nebo restriktivn (snen vdaj nebo zven dan), aby se podpoil rst nebo snil deficit.

Pklad: Vldn stimulan balky v dob ekonomick krize.`},{title:"Kapitlov forma vroby",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a podnikatel.

Hlavn mylenka: Kapitlov forma vroby oznauje vyuvn stroj, zazen a technologickch inovac pi produkci. Tento faktor pispv k produktivit prce a rstu ekonomiky.

Pklad: Automatizovan vrobn linky v modernch tovrnch.`},{title:"Pirozen mra nezamstnanosti",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a politici.

Hlavn mylenka: Pirozen mra nezamstnanosti je mra nezamstnanosti, kter je povaovna za optimln v ekonomice, kter je stabiln a v rovnovze. Zahrnuje frikn a strukturln nezamstnanost, ale ne cyklickou nezamstnanost zpsobenou reces.

Pklad: Pirozen mra nezamstnanosti v rozvinutch ekonomikch se pohybuje kolem 4-6%.`},{title:"Hrub nrodn produkt (HNP)",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a statistici.

Hlavn mylenka: HNP je mtko celkov ekonomick produkce, kter zahrnuje vechny pjmy zskan obyvateli dan zem, vetn tch, kter byly zskny v zahrani. HNP je uiten pro analzu ekonomickho blahobytu v irm mtku.

Pklad: HNP zahrnuje pjmy eskch oban pracujcch v zahrani.`},{title:"Oteven ekonomika",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a politici.

Hlavn mylenka: Oteven ekonomika je ekonomika, kter umouje voln obchod se zahranim, vetn importu a exportu zbo, slueb a kapitlu. Otevenost ekonomiky m vliv na jej rst a integraci do svtovho hospodstv.

Pklad: esk republika jako soust Evropsk unie a svtovho obchodu.`},{title:"Uzaven ekonomika",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a politici.

Hlavn mylenka: Uzaven ekonomika je ekonomika, kter neprovd mezinrodn obchod a omezuje export i import. Tento model je dnes velmi vzcn, protoe vtina zem je integrovna do globlnho hospodstv.

Pklad: Severn Korea jako pklad relativn uzaven ekonomiky.`},{title:"rokov sazba",content:`Obdob: Modern doba.

Hlavn pedstavitel: Centrln banki a ekonomov.

Hlavn mylenka: rokov sazba je cena, kterou plat dlunci za pjen penz, nebo vnos, kter zskvaj vitel. rokov sazby maj velk vliv na ekonomickou aktivitu, protoe ovlivuj spotebitelskou poptvku a podnikov investice.

Pklad: Zmny rokovch sazeb hypotk vlivem rozhodnut centrln banky.`},{title:"Poptvka po penzch",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a centrln banki.

Hlavn mylenka: Poptvka po penzch oznauje mnostv penz, kter si jednotlivci a firmy pej dret v hotovosti, msto toho, aby je investovali nebo pouili k nkupu zbo a slueb. Poptvka po penzch zvis na rokovch sazbch, inflaci a oekvn ekonomickho vvoje.

Pklad: Zven poptvky po hotovosti v dob ekonomick nejistoty.`},{title:"Nabdka penz",content:`Obdob: Modern doba.

Hlavn pedstavitel: Centrln banki a ekonomov.

Hlavn mylenka: Nabdka penz je mnostv penz v obhu v ekonomice, kter je k dispozici pro obchody a transakce. Tento ukazatel je kontrolovn centrln bankou prostednictvm nstroj monetrn politiky, jako jsou rokov sazby a kvantitativn uvolovn.

Pklad: Kvantitativn uvolovn v dob ekonomick krize, kdy centrln banka nakupuje sttn dluhopisy.`},{title:"Mezinrodn obchod",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a mezinrodn organizace.

Hlavn mylenka: Mezinrodn obchod zahrnuje vmnu zbo a slueb mezi zemmi. Tento obchod pin vhody dky specializaci a komparativnm vhodm, co vede k efektivnjmu vyuit zdroj a rstu svtovho blahobytu.

Pklad: Export eskch automobil do zahrani a import surovin.`},{title:"Devizov kurz",content:`Obdob: Modern doba.

Hlavn pedstavitel: Centrln banki a forex obchodnci.

Hlavn mylenka: Devizov kurz je cena jedn mny vyjden v jin mn. Kurzy mn jsou dleit pro mezinrodn obchod a investice, protoe ovlivuj konkurenceschopnost exportr a nklady importr.

Pklad: Fluktuace kurzu koruny vi euru a jeho vliv na esk export.`},{title:"Platebn bilance",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a centrln banki.

Hlavn mylenka: Platebn bilance je pehled vech ekonomickch transakc mezi rezidenty dan zem a zbytkem svta za urit obdob. Zahrnuje obchodn bilanci, bilanci slueb, bilanci vnos a kapitlov toky.

Pklad: Pebytek obchodn bilance esk republiky dky silnmu exportu.`},{title:"Ekonomick rst",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a politici.

Hlavn mylenka: Ekonomick rst je dlouhodob zvyovn produkce zbo a slueb v ekonomice. Rst je men zmnami relnho HDP a je klovm ukazatelem ekonomickho rozvoje a zvyovn ivotn rovn.

Pklad: Rst esk ekonomiky po vstupu do Evropsk unie.`},{title:"Ekonomick rozvoj",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a mezinrodn organizace.

Hlavn mylenka: Ekonomick rozvoj zahrnuje nejen rst HDP, ale tak zlepovn kvality ivota, vzdln, zdravotn pe a infrastruktury. Rozvoj je komplexn proces, kter zahrnuje sociln, kulturn a environmentln aspekty.

Pklad: Transformace esk republiky z centrln plnovan na trn ekonomiku.`},{title:"Hospodsk cyklus",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a centrln banki.

Hlavn mylenka: Hospodsk cyklus je opakujc se kolsn ekonomick aktivity mezi obdobmi rstu (expanze) a poklesu (recese). Cyklus zahrnuje tyi fze: expanzi, vrchol, recesi a dno, po kterm nsleduje nov expanze.

Pklad: Globln finann krize 2008-2009 a nsledn oiven.`},{title:"Ekonomick integrace",content:`Obdob: Modern doba.

Hlavn pedstavitel: Politici a mezinrodn organizace.

Hlavn mylenka: Ekonomick integrace je proces, pi kterm se zem spojuj do vtch ekonomickch celk, aby zvily efektivitu obchodu a produkce. Integrace me mt rzn formy, od zn volnho obchodu a po mnov unie.

Pklad: Evropsk unie jako pklad hlubok ekonomick integrace.`},{title:"Globalizace",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a mezinrodn organizace.

Hlavn mylenka: Globalizace je proces rostouc propojenosti svtovch ekonomik, kultur a spolenost. Zahrnuje mezinrodn obchod, investice, migraci a en technologi, co vede k vytven globlnho trhu a spolenosti.

Pklad: Globln dodavatelsk etzce v automobilovm prmyslu.`},{title:"Protekcionismus",content:`Obdob: Modern doba.

Hlavn pedstavitel: Politici a ekonomov.

Hlavn mylenka: Protekcionismus je hospodsk politika, kter omezuje mezinrodn obchod pomoc cel, kvt a dalch barir. Clem je chrnit domc prmysl a zamstnanost, ale me vst k vym cenm a ni efektivit.

Pklad: Obchodn vlky mezi USA a nou.`},{title:"Voln obchod",content:`Obdob: Modern doba.

Hlavn pedstavitel: Ekonomov a mezinrodn organizace.

Hlavn mylenka: Voln obchod je hospodsk politika, kter odstrauje bariry v mezinrodnm obchodu. Teorie komparativnch vhod ukazuje, e voln obchod vede k efektivnjmu vyuit zdroj a rstu blahobytu vech zastnnch zem.

Pklad: Evropsk jednotn trh jako pklad volnho obchodu.`}],"moderni-historie":[{title:"Modern djiny",content:`Obdob: Od 18. stolet po souasnost.

Hlavn udlosti: Prmyslov revoluce, svtov vlky, studen vlka.

Hlavn mylenka: Modern djiny jsou charakterizovny rychlm technologickm pokrokem, globalizac a vznamnmi spoleenskmi zmnami.

Pklad: Prmyslov revoluce v 18. a 19. stolet, kter zmnila zpsob vroby a ivot spolenosti.`},{title:"Svtov vlky",content:`Obdob: 20. stolet.

Hlavn udlosti: Prvn svtov vlka (1914-1918), Druh svtov vlka (1939-1945).

Hlavn mylenka: Svtov vlky mly zsadn vliv na vvoj modernho svta, vedly k vytvoen novho svtovho du a urychlily technologick pokrok.

Pklad: Vznik Spojench nrod po druh svtov vlce jako pokus o zajitn svtovho mru.`},{title:"Hitlerv prvn pokus o moc",content:`Obdob: 1923

Vysvtlen: Pivn pu - nespn pokus o pevrat, za kter byl Hitler odsouzen a posln do vzen.`},{title:"Smrt Vladimira Iljie Lenina",content:`Obdob: 21. ledna 1924

Vysvtlen: Lenin zemel 21. ledna 1924, co vedlo k boji o moc v Sovtskm svazu.`},{title:"Nstup Hitlera k moci",content:`Obdob: 30. ledna 1933

Vysvtlen: Adolf Hitler byl jmenovn nmeckm skm kanclem prezidentem Paulem von Hindenburgem.`},{title:"Por skho snmu",content:`Obdob: 27. nora 1933

Vysvtlen: Hitler vyuil tto udlosti k prosazen zkon omezujcch obansk svobody a k potlaen politick opozice, zejmna komunist.`},{title:"Zmocovac zkon",content:`Obdob: 23. bezna 1933

Vysvtlen: Tento zkon umonil Hitlerov vld obchzet parlament a vydvat zkony samostatn, co de facto znamenalo konec demokratickho systmu Vmarsk republiky.`},{title:"Hitler neomezenm vdcem",content:`Obdob: 2. srpna 1934

Vysvtlen: Po smrti prezidenta Hindenburga Hitler spojil funkce prezidenta a kancle a stal se neomezenm vdcem Nmecka.`},{title:"Mnichovsk dohoda",content:`Obdob: 30. z 1938

Vysvtlen: Mezinrodn smlouva podepsan mezi Nmeckem, Itli, Franci a Velkou Britni. Dohoda umonila nacistickmu Nmecku anektovat pohranin oblasti eskoslovenska (Sudety) bez souhlasu eskoslovensk vldy.`},{title:"Signati Mnichovsk dohody",content:`Vysvtlen: Mnichovskou dohodu podepsali:
1. Adolf Hitler (Nmecko)
2. Benito Mussolini (Itlie)
3. Neville Chamberlain (Velk Britnie)
4. douard Daladier (Francie)`},{title:"Pochod na m",content:`Obdob: 27. - 29. jna 1922

Vysvtlen: Klov udlost, bhem n faist veden Benitem Mussolinim pinutili italskho krle Viktora Emanuela III., aby Mussoliniho jmenoval pedsedou vldy.`},{title:"Stalinv nstup k moci",content:`Obdob: 1922-1953

Vysvtlen: Stalin se stal generlnm tajemnkem KSSS v roce 1922, plnou kontrolu zskal v roce 1929 a udrel si ji a do sv smrti v roce 1953.`},{title:"Bitva u Jutska",content:`Obdob: 31. kvtna - 1. ervna 1916

Vysvtlen: Nejvt nmon bitva vlky mezi britskm a nmeckm nmonictvem.`},{title:"Bitva u Verdunu",content:`Obdob: 21. nora - 18. prosince 1916

Vysvtlen: Nejdel bitva vlky, kde Nmecko usilovalo o vyerpn francouzskch sil (tzv. strategie "vykrvcen"). Francie nakonec Verdun uhjila.`},{title:"Korejsk vlka",content:`Obdob: 1950-1953

Vysvtlen: Vojensk konflikt mezi Severn Koreou, podporovanou Sovtskm svazem a nou, a Jin Koreou, podporovanou Spojenmi stty a dalmi leny OSN.`},{title:"Sovtsk invaze do Afghnistnu",content:`Obdob: 1979-1989

Vysvtlen: Sovtsk invaze do Afghnistnu byla vojensk operace, kdy SSSR poslal sv vojensk jednotky na podporu komunistickho reimu v Afghnistnu.`},{title:"Vlka ve Vietnamu",content:`Obdob: 1955-1975

Vysvtlen: Ozbrojen konflikt mezi komunistickm Severnm Vietnamem a nekomunistickm Jinm Vietnamem, podporovanm Spojenmi stty a jejich spojenci.`},{title:"Pd Berlnsk zdi",content:`Obdob: 1989

Vysvtlen: Symbolizoval konec studen vlky a rozpad vchodnho bloku. Zed byla fyzickou a ideologickou barirou mezi komunistickm vchodnm Berlnem a kapitalistickm zpadnm Berlnem.`},{title:"Vlka v Perskm zlivu",content:`Obdob: 1990-1991

Vysvtlen: Konflikt zaal, kdy Irk pod vedenm Saddma Husajna napadl Kuvajt. Koalice veden Spojenmi stty zahjila vojenskou intervenci, kter vedla k porce Irku a osvobozen Kuvajtu.`},{title:"Kubnsk raketov krize",content:`Obdob: 1962

Vysvtlen: Kuba pijala sovtsk rakety na sv zem, co vedlo k dramatickmu napt mezi Spojenmi stty a Sovtskm svazem.`},{title:"Sovtsk revoluce",content:`Obdob: 1917

Vysvtlen: Revoluce v Rusku, kter vystila v pd carismu a vznik komunistick vldy. Sovtsk revoluce znamenala konec rusk monarchie a zatek vldy bolevik vedench Vladimirem Leninem.`},{title:"Vietnamizace",content:`Obdob: 1969-1973

Vysvtlen: Politick proces, bhem kterho USA zaaly pedvat odpovdnost za vlku ve Vietnamu na jiho-vietnamskou armdu, s clem postupn sthnout americk sly z tohoto konfliktu.`},{title:"Korean Armistice Agreement",content:`Obdob: 1953

Vysvtlen: Dohoda o pm, kter ukonila aktivn boje v Korejsk vlce. Nezaruila vak oficiln mr, take Korejsk poloostrov zstal rozdlen na dva stty.`},{title:"Politick strany v eskoslovensku po 2. svtov vlce",content:`Vysvtlen: Po druh svtov vlce v eskoslovensku dominovaly tyi hlavn politick strany:
1. KS (Komunistick strana eskoslovenska)
2. SNS (eskoslovensk strana nrodn socialistick)
3. SL (eskoslovensk strana lidov)
4. SSD (eskoslovensk sociln demokratick strana)`},{title:"nor 1948 v eskoslovensku",content:`Obdob: 25. nora 1948

Vysvtlen: Komunistick pevrat v eskoslovensku, kter vedl k nastolen totalitnho reimu. KS pevzala moc a zaala obdob komunistick diktatury.`},{title:"Prask jaro",content:`Obdob: 1968

Vysvtlen: Obdob politickho uvolnn v eskoslovensku, kter bylo ukoneno invaz vojsk Varavsk smlouvy v srpnu 1968.`},{title:"Sametov revoluce",content:`Obdob: 17. listopadu - 29. prosince 1989

Vysvtlen: Neozbrojen revoluce, kter vedla k pdu komunistickho reimu v eskoslovensku.`},{title:"Rozdlen eskoslovenska",content:`Obdob: 1. ledna 1993

Vysvtlen: eskoslovensko se rozdlilo na dva samostatn stty: eskou republiku a Slovensko.`},{title:"Vstup esk republiky do EU",content:`Obdob: 1. kvtna 2004

Vysvtlen: esk republika se stala lenskm sttem Evropsk unie spolu s dalmi devti zemmi.`},{title:"Vstup esk republiky do NATO",content:`Obdob: 12. bezna 1999

Vysvtlen: esk republika se stala lenskm sttem Severoatlantick aliance.`},{title:"Vznik esk republiky",content:`Obdob: 1. ledna 1993

Vysvtlen: Po rozdlen eskoslovenska vznikla samostatn esk republika jako nstupnick stt.`},{title:"Vznik Slovensk republiky",content:`Obdob: 1. ledna 1993

Vysvtlen: Po rozdlen eskoslovenska vznikla samostatn Slovensk republika jako nstupnick stt.`},{title:"Vznik eskoslovenska",content:`Obdob: 28. jna 1918

Vysvtlen: Vznik samostatnho eskoslovenskho sttu po rozpadu Rakousko-Uherska.`},{title:"Vznik Rakouska-Uherska",content:`Obdob: 1867

Vysvtlen: Rakousko-Uhersko vzniklo jako dualistick monarchie po rakousko-uherskm vyrovnn.`},{title:"Vznik Rakouskho csastv",content:`Obdob: 1804

Vysvtlen: Frantiek II. Habsbursk vyhlsil Rakousk csastv jako reakci na Napoleonovu korunovaci.`},{title:"Vznik Svat e msk",content:`Obdob: 962

Vysvtlen: Ota I. Velik byl korunovn csaem Svat e msk.`},{title:"Vznik Svat e msk nroda nmeckho",content:`Obdob: 1512

Vysvtlen: Oficiln nzev Svat e msk byl zmnn na Svatou i mskou nroda nmeckho.`},{title:"Vznik Svat aliance",content:`Obdob: 1815

Vysvtlen: Vznik protinapoleonsk koalice mezi Rakouskem, Pruskem a Ruskem.`},{title:"Vznik Spolenosti nrod",content:`Obdob: 1920

Vysvtlen: Vznik mezinrodn organizace, kter mla zajistit mr a spoluprci mezi stty.`},{title:"Vznik OSN",content:`Obdob: 1945

Vysvtlen: Vznik Organizace spojench nrod jako nstupkyn Spolenosti nrod.`},{title:"Vznik NATO",content:`Obdob: 1949

Vysvtlen: Vznik Severoatlantick aliance jako vojensko-politick organizace zpadnch stt.`},{title:"Vznik Varavsk smlouvy",content:`Obdob: 1955

Vysvtlen: Vznik vojensko-politick organizace vchodnho bloku jako protivha NATO.`},{title:"Vznik Evropskho hospodskho spoleenstv",content:`Obdob: 1957

Vysvtlen: Vznik pedchdce Evropsk unie, kter ml zajistit hospodskou spoluprci mezi evropskmi stty.`}],"evropska-integrace":[{title:"Historie Evropsk unie",content:`Obdob: Po druh svtov vlce

Vysvtlen: Evropsk unie (EU) vznikla z touhy po mru, stabilit a hospodsk spoluprci v Evrop po druh svtov vlce. Prvnm krokem bylo vytvoen Evropskho spoleenstv uhl a oceli (ESUO) v roce 1951, kter zahrnovalo est zakldajcch stt: Belgii, Francii, Itlii, Lucembursko, Nizozemsko a Nmecko.`},{title:"msk smlouva",content:`Obdob: 1957

Vysvtlen: msk smlouva byla podepsna v roce 1957 a vytvoila Evropsk hospodsk spoleenstv (EHS) a Evropsk atomov spoleenstv (EURATOM). Tato smlouva poloila zklady pro spolen trh a postupnou integraci evropskch ekonomik.`},{title:"Prvn rozen Evropsk unie",content:`Obdob: 1973

Vysvtlen: V roce 1973 pistoupily k EHS ti nov stty: Dnsko, Irsko a Spojen krlovstv. Toto rozen bylo dleit pro rozen Evropsk spoluprce a upevnn politick a hospodsk stability.`},{title:"Jednotn evropsk akt",content:`Obdob: 1986

Vysvtlen: Jednotn evropsk akt (JEA) z roku 1986 byl prvn reviz msk smlouvy a ml za cl vytvoit jednotn vnitn trh. Zahrnoval tak politick cle, jako je poslen spoluprce v oblasti zahranin politiky.`},{title:"Pd Berlnsk zdi a nov smr pro EU",content:`Obdob: 1989-1990

Vysvtlen: Pd Berlnsk zdi v roce 1989 a konec studen vlky otevely nov monosti pro expanze EU na vchod. Byly zahjeny ppravy na rozen EU o stty stedn a vchodn Evropy.`},{title:"Maastrichtsk smlouva",content:`Obdob: 1992

Vysvtlen: Maastrichtsk smlouva z roku 1992 ustanovila Evropskou unii a stanovila zkladn principy pro jej politickou a hospodskou integraci. Zavedla euro jako spolenou mnu a poloila zklady pro spolenou zahranin a bezpenostn politiku.`},{title:"Prvn vlna rozen po pdu elezn opony",content:`Obdob: 2004

Vysvtlen: V roce 2004 se Evropsk unie rozila o 10 novch lenskch stt, vetn zem bvalho vchodnho bloku, jako jsou Polsko, Maarsko, esk republika, Slovensko, Slovinsko, Estonsko, Litva, Lotysko, Kypr a Malta. Tento krok znamenal vznamnou zmnu v geopolitick map Evropy.`},{title:"Lisabonsk smlouva",content:`Obdob: 2009

Vysvtlen: Lisabonsk smlouva, kter vstoupila v platnost v roce 2009, poslila fungovn EU tm, e zjednoduila rozhodovac procesy a poskytla vt pravomoci Evropskmu parlamentu. Vytvoila tak novou funkci pedsedy Evropsk rady a zavedla institut evropskho obanstv.`},{title:"Druh vlna rozen Evropsk unie",content:`Obdob: 1973-1986

Vysvtlen: V roce 1986 pistoupily panlsko a Portugalsko. Tento krok ml velk vznam pro stabilizaci a demokratizaci jin Evropy po pdu diktatur.`},{title:"Tet vlna rozen EU",content:`Obdob: 1995

Vysvtlen: V roce 1995 pistoupily Rakousko, Finsko a vdsko. Tato vlna rozen byla zamena na zem, kter byly ji vyspl a pipraven na integraci do EU.`},{title:"Kypr a Malta se stvaj leny EU",content:`Obdob: 2004

Vysvtlen: Kypr a Malta se staly soust Evropsk unie v roce 2004, co rozilo EU na Stedozem. Tato expanze byla soust irho procesu integrace stedoevropskch a vchodoevropskch stt.`},{title:"Konsolidace mnov unie",content:`Obdob: 1999-2002

Vysvtlen: V roce 1999 byla zahjena mnov unie, kdy byla eurozna vytvoena pro 11 stt, kter pijaly euro. V roce 2002 byly bankovky a mince euro zavedeny do obhu.`},{title:"Balknsk rozen EU",content:`Obdob: 2007

Vysvtlen: V roce 2007 pistoupily Bulharsko a Rumunsko, co znamenalo pokraovn rozen EU na Balkn. Tento krok ml za cl stabilizovat a demokratizovat region po dlouhm obdob konflikt.`},{title:"Vstup Chorvatska do EU",content:`Obdob: 2013

Vysvtlen: Chorvatsko se stalo 28. lenem EU v roce 2013, co znamenalo posledn vlnu rozen ped tm, ne dolo k britskmu referendu o vystoupen z EU (Brexit).`},{title:"Brexit",content:`Obdob: 2016-2020

Vysvtlen: V roce 2016 se konalo referendum ve Spojenm krlovstv, ve kterm se vtina obyvatel rozhodla pro odchod z EU. Tento proces, znm jako Brexit, skonil formlnm vystoupenm Spojenho krlovstv z EU v roce 2020.`},{title:"Evropsk hospodsk prostor (EHP)",content:`Obdob: 1994

Vysvtlen: Evropsk hospodsk prostor (EHP) vznikl v roce 1994 jako zpsob, jak umonit evropskm sttm mimo EU pstup na jednotn trh. Zahrnoval zem jako Norsko, Island a Lichtentejnsko.`},{title:"Vznik eurozny",content:`Obdob: 1999

Vysvtlen: V roce 1999 byla zzena eurozna, kter zaala fungovat s 11 zemmi, kter pijaly euro jako svou mnu. Tento krok byl klovm momentem pro integraci ekonomickch politik v rmci EU.`},{title:"Smlouva o fungovn Evropsk unie",content:`Obdob: 1957

Vysvtlen: Smlouva o fungovn Evropsk unie (SFEU), pvodn znm jako msk smlouva, byla jednm ze zkladnch dokument, kter vytvoil Evropsk hospodsk spoleenstv a poloil zklady pro fungovn vnitnho trhu EU.`},{title:"Vstup vdska, Finska a Rakouska do EU",content:`Obdob: 1995

Vysvtlen: V roce 1995 se vdsko, Finsko a Rakousko pipojily k EU, co rozilo unii o ti seversk a stedoevropsk zem.`},{title:"mluva o pistoupen panlska a Portugalska",content:`Obdob: 1986

Vysvtlen: panlsko a Portugalsko se staly leny EU v roce 1986, m dolo k rozen o dv jihoevropsk zem po skonen jejich diktatur.`},{title:"Integrace po pdu Berlnsk zdi",content:`Obdob: 1989-1990

Vysvtlen: Pd Berlnsk zdi a znik Sovtskho svazu znamenaly monost integrace bvalch komunistickch stt do EU. Tento proces zahrnoval stty stedn a vchodn Evropy.`},{title:"Evropsk unie a jej expanze do stedn Evropy",content:`Obdob: 2004

Vysvtlen: V roce 2004 EU pistoupily nov lensk stty z bvalho vchodnho bloku, m se poslila stabilita a demokracie v regionu. Tento krok znamenal i nov geopolitick uspodn v Evrop.`},{title:"Vstup Rumunska a Bulharska do EU",content:`Obdob: 2007

Vysvtlen: V roce 2007 pistoupily k EU Rumunsko a Bulharsko, co poslilo regionln stabilitu a demokratick procesy v jihovchodn Evrop.`},{title:"Vstup Chorvatska do EU",content:`Obdob: 2013

Vysvtlen: Chorvatsko se stalo lenem EU v roce 2013, co bylo posledn rozen unie v 21. stolet ped kriz souvisejc s odchodem Spojenho krlovstv.`},{title:"Evropsk parlament",content:"Vysvtlen: Evropsk parlament je jednm z hlavnch orgn Evropsk unie, kter reprezentuje obany EU. Je sloen z poslanc volench kadch pt let ve vech lenskch sttech. Parlament schvaluje legislativn nvrhy, rozpoet EU a m vznamnou roli pi rozhodovn o mezinrodnch dohodch a politice Unie. Poslanci jsou rozdleni podle politickch frakc a hlasuj o dleitch otzkch tkajcch se prv a politiky EU."},{title:"Evropsk komise",content:"Vysvtlen: Evropsk komise je vkonnm orgnem EU, kter zajiuje implementaci politik a rozhodnut pijatch EU. Je sloena z komisa, kte jsou jmenovni lenskmi stty a odpovdaj za jednotliv oblasti politiky, jako jsou obchod, ivotn prosted nebo konkurence. Komise m prvo navrhovat legislativu, co je klov soust jej role v evropskm legislativnm procesu."},{title:"Legislativn proces v EU",content:"Vysvtlen: Legislativn proces v Evropsk unii zan obvykle nvrhem Evropsk komise. Tento nvrh je nsledn projednvn Evropskm parlamentem a Radou Evropsk unie, kter pedstavuje vldy lenskch stt. Pro schvlen legislativy je potebn souinnost Parlamentu a Rady. Parlament me navrhnout zmny k textu, kter byl pedloen, a rozhodujc rozhodnut jsou pijmna na zklad vtiny hlas. Proces me zahrnovat nkolik ten a vyjednvn, ne se doshne konen dohody."},{title:"Rada Evropsk unie",content:"Vysvtlen: Rada Evropsk unie, znm tak jako Rada ministr, je sloena z ministr lenskch stt a je spolu s Evropskm parlamentem klovm legislativnm orgnem EU. Rada se schz na rznch rovnch podle zamen (nap. ministi financ, ministi zahraninch vc) a jej hlavn koly zahrnuj schvalovn legislativy, vyjednvn o rozpotu EU a koordinaci politiky mezi lenskmi stty."},{title:"Prvn zklad legislativy EU",content:"Vysvtlen: Prvn zklad legislativy EU se nachz v zakldajcch smlouvch, pedevm ve Smlouv o Evropsk unii a Smlouv o fungovn Evropsk unie. Tyto smlouvy stanovuj rmec pro fungovn instituc EU, vetn podmnek pro tvorbu novch prvnch pedpis, kter maj platnost v lenskch sttech. Legislativn aktivity EU vychzej z tchto zkladnch prvnch dokument."},{title:"Rozhodovac proces v Evropsk komisi",content:"Vysvtlen: Evropsk komise rozhoduje na zklad kolektivn odpovdnosti, co znamen, e komisai jako celek nesou odpovdnost za jej rozhodnut. Kdy Komise pipravuje nvrhy legislativnch akt, me tak konzultovat odbornky z lenskch stt nebo veejnost. Vtina rozhodnut, zejmna legislativnch, mus bt schvlena kolegiln, co zajiuje jednotn pstup a zohleduje vechny lensk stty."},{title:"Role Evropsk komise pi kontrole implementace politiky EU",content:"Vysvtlen: Evropsk komise m klovou roli pi sledovn, zda lensk stty pln zvazky podle prvnch pedpis EU. Komise m pravomoc zahjit zen proti lenskm sttm, pokud poru pravidla EU, a me je podrobit soudnmu zen u Soudnho dvora EU. Tento dohled zajiuje, e pravidla EU jsou aplikovna rovnomrn ve vech lenskch sttech."},{title:"Zkladn rozhodovac proces v Evropskm parlamentu",content:"Vysvtlen: Evropsk parlament rozhoduje o vtin legislativnch nvrh, kter mu pedlo Evropsk komise, prostednictvm nkolika ten a hlasovn. V prbhu procesu me Parlament navrhovat zmny, kter mus bt dohodnuty s Radou Evropsk unie. Pokud ob instituce dospj k dohod, legislativn akt me bt pijat. Pokud ne, nvrh je obvykle vrcen ke zpracovn."},{title:"Pm a nepm hlasovn v Evropskm parlamentu",content:"Vysvtlen: Evropsk parlament pouv rzn metody hlasovn v zvislosti na povaze rozhodovn. V nkterch ppadech se hlasuje pmo, co znamen, e kad poslanec hlasuje individuln. V jinch ppadech, zejmna u technickch nebo procedurlnch rozhodnut, me bt pouito nepm hlasovn, kde hlasovn probh na zklad frakc nebo zstupc vbor."},{title:"Vbor pro prvn zleitosti Evropskho parlamentu",content:"Vysvtlen: Tento vbor se zamuje na prvn aspekty legislativnch nvrh v Evropskm parlamentu. Je odpovdn za hodnocen prvn kvality nvrh a jejich souladu s pravidly EU. Vbor pro prvn zleitosti me navrhovat pravy, kter zajiuj, e vechny legislativn akty budou v souladu s prvem EU a mezinrodnmi zvazky."},{title:"Legislativn proces v Evropskm parlamentu",content:"Vysvtlen: Legislativn proces v Evropskm parlamentu je zaloen na principu spolurozhodovn mezi Parlamentem a Radou Evropsk unie. Tento proces zahrnuje nkolik ten, kdy Parlament a Rada mohou vznst nvrhy na zmny legislativnch text. Pokud se strany dohodnou, nvrh je pijat. Pokud ne, nvrh me bt vrcen k dalmu projednn."},{title:"Evropsk rada a jej role v legislativnm procesu",content:"Vysvtlen: Evropsk rada je sloena z hlav stt a pedsed vld lenskch stt. Akoli Evropsk rada nem pmou legislativn pravomoc, jej rozhodnut a zvry mohou mt zsadn vliv na smr politiky EU. Evropsk rada stanov hlavn politick cle a priority, kter pak ovlivuj prci Evropsk komise a Evropskho parlamentu."},{title:"Rozdl mezi Evropskou komis a Evropskou radou",content:"Vysvtlen: Evropsk komise je vkonnm orgnem EU, kter navrhuje legislativn opaten a implementuje rozhodnut EU. Evropsk rada je naopak orgnem, kter definuje obecn politick smovn a priority EU, ale nen pmo zapojena do denn legislativn prce."},{title:"Prvn akty Evropsk unie",content:"Vysvtlen: Prvn akty EU jsou rozdleny na nazen, smrnice a rozhodnut. Nazen jsou zvazn pro vechny lensk stty a pmo aplikovna v nrodnch prvnch systmech. Smrnice vyaduj, aby lensk stty doshly uritch cl, ale umouj jim vybrat zpsob, jak to provst. Rozhodnut jsou zvazn pro jednotliv pjemce (stty nebo firmy), kterm jsou adresovna."},{title:"Evropsk soudn dvr a jeho role",content:"Vysvtlen: Evropsk soudn dvr zajiuje, e prvo EU je sprvn interpretovno a aplikovno ve vech lenskch sttech. Me rozhodovat o alobch podanch lenskmi stty proti Komisi, o sporech mezi institucemi EU a jednotlivmi lenskmi stty nebo jednotlivci, a zajiuje, e evropsk prvo m pednost ped nrodnmi prvnmi pedpisy."},{title:"Vznam subsidiarity v legislativnm procesu EU",content:"Vysvtlen: Princip subsidiarity znamen, e EU by mla jednat pouze v oblastech, kde jsou cle pedpisu lpe dosaeny na rovni Unie ne na rovni lenskch stt. Tento princip chrn nrodn suverenitu a zajiuje, e EU nezasahuje do oblast, kter mohou bt lpe eeny na nrodn rovni."},{title:"Legislativa v oblasti ivotnho prosted",content:"Vysvtlen: Evropsk unie m rozshlou legislativu zamenou na ochranu ivotnho prosted, kter zahrnuje normy pro kvalitu vzduchu, vody, odpadovho hospodstv a ochrany biodiverzity. Legislativa v tto oblasti se vyvj v reakci na environmentln vzvy a m za cl harmonizovat ekologick standardy mezi lenskmi stty."},{title:"Vliv veejnho mnn na legislativn proces EU",content:"Vysvtlen: Veejn mnn m vliv na legislativn proces v EU, protoe Evropsk parlament je pmo volen obany lenskch stt. Politick strany se sna brt v vahu nzory voli, co me ovlivnit jejich hlasovn o legislativnch nvrzch. Veejn diskuse a konzultace mohou tak pomoci formovat politiku a pithnout pozornost k dleitm tmatm."},{title:"Kter zem pat do eurozny?",content:"Vysvtlen: Eurozna je skupina evropskch zem, kter pouvaj euro jako svou oficiln mnu. V souasnosti do eurozny pat 20 zem: Belgie, Estonsko, Irsko, ecko, panlsko, Francie, Itlie, Kypr, Lotysko, Litva, Lucembursko, Malta, Nizozemsko, Portugalsko, Slovensko, Slovinsko, Finsko, Nmecko, Rakousko a Belgii. Zem, kter nejsou v eurozn, maj svou vlastn mnu nebo zstvaj v pechodn fzi pijet eura."},{title:"Rozen eurozny",content:"Vysvtlen: Vzhledem k tomu, e eurozna je soust irho ekonomickho a mnovho spoleenstv Evropsk unie, mohou lensk stty EU pistupovat k euru, pokud spln ekonomick podmnky stanoven Maastrichtskmi kritrii. Tyto kritria zahrnuj stabilitu cen, veejn finance a smnn kurz. Po splnn tchto podmnek mohou zem podat o pijet eura."},{title:"Kter zem pat do Schengensk zny?",content:"Vysvtlen: Schengensk zna je prostor, ve kterm bylo zrueno hranin kontroly mezi vtinou evropskch stt. Mezi zem, kter pat do Schengenu, pat vechny lensk stty EU krom Irska, Rumunska, Bulharska, Chorvatska a Kypru. Dle do Schengenu pat i nkter zem, kter nejsou soust EU, jako napklad Norsko, Island, vcarsko a Lichtentejnsko."},{title:"Rozen Schengensk zny",content:"Vysvtlen: Schengensk zna se postupn roziovala a zahrnovala jak lensk stty EU, tak i nkter zem mimo ni. Dleit pro rozen je splnn bezpenostnch, prvnch a administrativnch podmnek, kter umon zruen hraninch kontrol. Nkter zem, jako napklad Rumunsko a Bulharsko, ekaj na pistoupen do Schengenu, protoe jet nesplnily vechny podmnky."},{title:"Rozdl mezi euroznou a Schengenem",content:"Vysvtlen: Eurozna a Schengen jsou dva rzn procesy v rmci Evropsk unie. Eurozna je zamena na jednotnou mnu, euro, a jejmi leny jsou pouze zem, kter pouvaj euro. Schengen se tk zruen hraninch kontrol mezi stty a je zamen na voln pohyb osob, co se netk mny. Nkter zem jsou leny Schengenu, ale ne eurozny, a naopak."},{title:"Zem EU mimo Schengenskou znu",content:"Vysvtlen: Nkter lensk stty Evropsk unie nejsou soust Schengensk zny. Pat sem Irsko, Rumunsko, Bulharsko, Chorvatsko a Kypr. Tyto zem bu nemaj zaveden Schengensk prostor, nebo stle pracuj na splnn podmnek pro pipojen k tto zn."},{title:"Zem mimo EU, kter pat do Schengenu",content:"Vysvtlen: Nkter zem mimo Evropskou unii jsou soust Schengensk zny. Pat sem Norsko, Island, vcarsko a Lichtentejnsko. Tyto zem souhlasily se zruenm hraninch kontrol a koordinovnm svch vzovch politik, i kdy nejsou leny EU."},{title:"Kdy dolo k rozen Schengensk zny na vchodn Evropu?",content:"Vysvtlen: Schengensk zna se zaala roziovat na vchodn Evropu po rozen EU v roce 2004. Nov lensk stty, kter vstoupily do EU, zaaly postupn splovat podmnky pro vstup do Schengenu. K tomu dolo v roce 2007 a 2008, kdy zem jako esk republika, Polsko, Maarsko a dal bval komunistick stty stedn a vchodn Evropy pistoupily k Schengenu."},{title:"Zem, kter nepat do Schengenu",content:"Vysvtlen: Nkter lensk stty EU nejsou soust Schengensk zny, napklad Irsko, Rumunsko, Bulharsko, Chorvatsko a Kypr. Tyto zem si zachovvaj vlastn hranin kontroly a nevstoupily do Schengenu kvli rznm prvnm, bezpenostnm nebo administrativnm dvodm."},{title:"Vznam Schengensk zny pro cestovn",content:"Vysvtlen: Schengensk zna umouje voln pohyb osob mezi lenskmi stty, co znamen, e lid mohou cestovat bez nutnosti prochzet hraninmi kontrolami. To usnaduje obchod, turismus a pracovn mobilitu mezi stty. Schengen tak zahrnuje spoluprci v oblasti bezpenosti, jako je vmna informac o kriminalit a migraci."},{title:"Vztah mezi Schengenem a vzovou politikou EU",content:"Vysvtlen: V rmci Schengensk zny plat jednotn vzov politika. Osoba, kter zsk vzum pro jeden lensk stt, m prvo cestovat i do dalch stt Schengensk zny. Toto usnaduje cestovn pro turisty, obchodnky a pracovnky, ale zrove zajiuje bezpenostn kontrolu a ochranu hranic EU."},{title:"Zem, kter maj euro, ale nejsou v Schengenu",content:"Vysvtlen: Existuj zem, kter pouvaj euro, ale nejsou leny Schengensk zny. Mezi n pat napklad Kypr, kter pouv euro jako svou mnu, ale stle nepat do Schengenu. Tento rozdl v lenstv ukazuje, e pijet eura a pipojen k Schengensk zn jsou oddlen procesy."},{title:"Pstupov podmnky pro Schengen",content:"Vysvtlen: Zem, kter chtj pistoupit k Schengensk zn, mus splnit urit podmnky, jako je zajitn bezpench vnjch hranic, fungujc migran politika, spoluprce v oblasti justice a policejn spoluprce. Tyto podmnky jsou hodnoceny ped tm, ne me stt bt pijat do Schengenu."},{title:"Schengen a bezpenostn spoluprce",content:"Vysvtlen: Schengensk zna zahrnuje spoluprci v oblasti bezpenosti, co zahrnuje sdlen informac o trestn innosti, podezelch osobch a migrantech. Tato spoluprce pomh zajiovat bezpenost v Evrop, protoe umouje lep monitorovn a kontrolu pohybu osob na vnjch hranicch EU."},{title:"Vliv Schengenu na obchod",content:"Vysvtlen: Schengensk zna podporuje obchod v Evrop tm, e usnaduje pohyb zbo a osob mezi lenskmi stty. Zruen hraninch kontrol znamen rychlej a efektivnj transport a logistiku, co pispv k ekonomick integraci a sniuje nklady na obchodn operace."},{title:"Schengen a migrace",content:"Vysvtlen: Schengensk zna zahrnuje politiky pro kontrolu migrace, vetn pravidel pro udlovn vz a ochrany vnjch hranic. Clem je umonit voln pohyb obanm lenskch stt a zajitn bezpenosti tm, e se kontroluj nelegln migranti, kte se pokouej vstoupit do EU."},{title:"Vytvoen Schengensk zny",content:"Vysvtlen: Schengensk zna byla pvodn vytvoena v roce 1985 jako dohoda mezi pti zemmi (Belgie, Francie, Lucembursko, Nizozemsko a Nmecko), kter se rozhodly zruit hranin kontroly. Postupn se roziovala na dal evropsk zem a dnes zahrnuje vtinu stt EU, stejn jako nkter zem mimo EU."},{title:"Pistupovn zem k eurozn",content:"Vysvtlen: Zem pistupuj k eurozn, kdy spln ekonomick a mnov podmnky stanoven Maastrichtskmi kritrii, kter zahrnuj stabilitu cen, veejn finance a smnn kurz. Jakmile jsou tyto podmnky splnny, mohou se zem rozhodnout o pijet eura jako sv oficiln mny."}]}},AM=2.5,CM=1,Sw=(n,e)=>{const t={...n};t.easeFactor||(t.easeFactor=AM),t.interval||(t.interval=CM),t.repetitions||(t.repetitions=0),t.difficulty=e;const r=new Date;switch(t.lastReviewed=r,e){case"easy":t.easeFactor+=.15;break;case"medium":t.easeFactor-=.05;break;case"hard":t.easeFactor-=.3;break}t.easeFactor=Math.max(1.3,t.easeFactor),e==="hard"?t.interval=Math.max(1,Math.floor(t.interval*.5)):t.repetitions===0?t.interval=1:t.repetitions===1?t.interval=3:t.interval=Math.round(t.interval*t.easeFactor),t.repetitions+=1;const i=new Date(r);return i.setDate(i.getDate()+t.interval),t.dueDate=i,t},RM=n=>{const e=new Date;return n.filter(t=>!t.dueDate||t.dueDate<=e)},xw=async(n,e,t,r=0)=>{const i=`${n}_${e}`;if(console.log(`saveSRSData called with category: ${n}, subcategory: ${e}, index: ${r}`),!Ye.currentUser){console.log("User not logged in, cannot save to Firestore");return}const a=Ye.currentUser.uid;console.log(`Preparing to save for user ${a} (${Ye.currentUser.email||"no email"})`);const l=Pa(es,"users",a,"srsData",i),c=t.map(h=>{const p={id:h.id,front:h.front,back:h.back,favorite:h.favorite||!1,difficulty:h.difficulty||null,dueDate:h.dueDate?h.dueDate.toISOString():null,interval:h.interval||0,easeFactor:h.easeFactor||2.5,repetitions:h.repetitions||0,lastReviewed:h.lastReviewed?h.lastReviewed.toISOString():null,timesReviewed:h.timesReviewed||0,successRate:h.successRate||0};return Object.fromEntries(Object.entries(p).filter(([y,k])=>k!=null))});try{const h={cards:c,currentIndex:r,lastUpdated:new Date().toISOString(),userId:a,userEmail:Ye.currentUser.email||"anonymous",categoryId:n,subcategoryId:e,provider:Ye.currentUser.providerData.length>0?Ye.currentUser.providerData[0].providerId:"anonymous"};await Gd(l,h,{merge:!0}),console.log(` Successfully saved ${c.length} cards to Firestore for ${i}`);try{localStorage.setItem(`flashcard_progress_${i}`,r.toString()),localStorage.setItem(`flashcard_last_updated_${i}`,new Date().toISOString()),localStorage.setItem(`user_progress_${a}_${i}`,r.toString())}catch(p){console.warn("Could not save backup to localStorage:",p)}}catch(h){console.error("Error saving to Firestore:",h);try{localStorage.setItem(`flashcard_progress_${i}`,r.toString()),localStorage.setItem(`flashcard_last_updated_${i}`,new Date().toISOString())}catch(p){console.error("Complete save failure - could not save to Firestore or localStorage:",p)}}},VM=async(n,e,t)=>{var l;console.log(`loadSRSData called with category: ${n}, subcategory: ${e}`);const r=`${n}_${e}`,i=localStorage.getItem(`flashcard_progress_${r}`);let a=i?parseInt(i,10):0;if(i&&console.log(`Found local backup index: ${a} for ${r}`),Ye.currentUser){const c=Ye.currentUser.uid;console.log(`User is authenticated with ID: ${c}, email: ${Ye.currentUser.email||"no email"}`),console.log(`Looking for document ID: ${r} for user ${c}`);const h=Pa(es,"users",c,"srsData",r);try{const p=await QC(h);if(console.log("Firestore document snapshot:",p.exists()?"exists":"does not exist"),p.exists()){const y=p.data();if(console.log("Retrieved Firestore data:",{currentIndex:y.currentIndex,lastUpdated:y.lastUpdated,cardCount:((l=y.cards)==null?void 0:l.length)||0}),y.cards&&y.cards.length>0){const k=y.cards.map(_=>({..._,dueDate:_.dueDate?new Date(_.dueDate):void 0,lastReviewed:_.lastReviewed?new Date(_.lastReviewed):void 0}));return console.log(`Successfully loaded ${k.length} cards from Firestore`),{cards:k,currentIndex:y.currentIndex??0}}}console.log("No valid card data found in Firestore, using default cards")}catch(p){console.error("Error loading from Firestore:",p)}}else console.log("User not authenticated, skipping Firestore load");return console.log(`Using default cards with${a?" backup":" initial"} index: ${a}`),{cards:t.map((c,h)=>({...c,id:h+1})),currentIndex:a}},NM=({cards:n,darkMode:e=!1,categoryId:t="default",subcategoryId:r=""})=>{const[i,a]=te.useState(0),[l,c]=te.useState(!1),[h,p]=te.useState(!1),[y,k]=te.useState(!1),[_,S]=te.useState(!0),[C,N]=te.useState([]),[M,q]=te.useState(!0),[G,Q]=te.useState(!0),[re,ee]=te.useState(!1),[se,P]=te.useState(new Set),[z,j]=te.useState({easy:0,medium:0,hard:0}),[A,V]=te.useState(""),[O,I]=te.useState("all"),[Qe,rt]=te.useState(!1),[Ve,ve]=te.useState(!1),[Z,ge]=te.useState(""),[ae,L]=te.useState({isLoggedIn:!1,provider:"",email:null});te.useEffect(()=>{(async()=>{q(!0),console.log(`Loading data for category: ${t}, subcategory: ${r}`);try{const we=n.map((Te,He)=>({...Te,id:He,difficulty:void 0,dueDate:void 0,interval:void 0,easeFactor:2.5,repetitions:0})),Ee=await VM(t,r,we);N(Ee.cards),console.log(`Loaded current index: ${Ee.currentIndex} for ${t}/${r}`),Ee.currentIndex<Ee.cards.length?a(Ee.currentIndex):a(0)}catch(we){console.error("Error loading SRS data:",we),N(n.map((Ee,Te)=>({...Ee,id:Te,difficulty:void 0,dueDate:void 0,interval:void 0,easeFactor:2.5,repetitions:0}))),a(0)}finally{q(!1)}})()},[t,r,n]),te.useEffect(()=>{const we=window.location.pathname.split("/").pop()||"";ge(we)},[]),te.useEffect(()=>((async()=>{if(G&&C.length>0)try{console.log(`Saving cards and index ${i} for ${t}/${r}`),await xw(t,r,C,i)}catch(we){console.error("Error saving SRS data:",we)}})(),()=>{if(G&&C.length>0){console.log(`Unmounting - saving final state for ${t}/${r}, currentIndex: ${i}`);try{const we=`${t}_${r}`;localStorage.setItem(`flashcard_progress_${we}`,i.toString())}catch(we){console.error("Failed to save to localStorage:",we)}xw(t,r,C,i).catch(we=>console.error("Error saving SRS data on unmount:",we))}}),[C,t,r,G,i]),te.useEffect(()=>{const we=setTimeout(async()=>{if(G&&C.length>0&&Ye.currentUser)try{const Te=Ye.currentUser.uid,He=`${t}_${r}`;console.log(`Syncing currentIndex (${i}) for ${He} to user ${Te}`),localStorage.setItem(`flashcard_progress_${He}`,i.toString()),localStorage.setItem(`flashcard_last_updated_${He}`,new Date().toISOString());const Ut=`${Te}_${He}`;localStorage.setItem(`user_progress_${Ut}`,i.toString());const yo=Pa(es,"users",Te,"srsData",He);await Gd(yo,{currentIndex:i,lastUpdated:new Date().toISOString(),userId:Te,userEmail:Ye.currentUser.email||"unknown",categoryId:t,subcategoryId:r},{merge:!0}),console.log(`Successfully saved progress to Firestore for ${Te}`)}catch(Te){console.error("Error in index sync:",Te);const He=`${t}_${r}`;localStorage.setItem(`flashcard_progress_${He}`,i.toString())}else if(C.length>0){const Te=`${t}_${r}`;localStorage.setItem(`flashcard_progress_${Te}`,i.toString()),console.log(`Saved progress to localStorage only: ${i} for ${Te}`)}},300);return()=>clearTimeout(we)},[i,t,r,Ye.currentUser,G,C.length]),te.useEffect(()=>{const ce=()=>{if(G&&C.length>0&&Ye.currentUser)try{console.log(`Page unloading - trying to save index: ${i}`);const we=Ye.currentUser.uid,Ee=`${t}_${r}`,Te=Pa(es,"users",we,"srsData",Ee);localStorage.setItem(`flashcard_progress_${Ee}`,i.toString()),Gd(Te,{currentIndex:i,lastUpdated:new Date().toISOString()},{merge:!0})}catch(we){console.error("Error saving before unload:",we)}};return window.addEventListener("beforeunload",ce),()=>{window.removeEventListener("beforeunload",ce)}},[i,t,r,G,C.length,Ye.currentUser]);const $=C.filter(ce=>{const we=A===""||ce.front.toLowerCase().includes(A.toLowerCase())||ce.back.toLowerCase().includes(A.toLowerCase()),Ee=O==="all"||O==="favorites"&&ce.favorite||O==="due"&&ce.dueDate&&new Date(ce.dueDate)<=new Date||O===ce.difficulty;return we&&Ee}),me=C.filter(ce=>ce.difficulty==="hard"),Ne=RM(C),ze={total:C.length,reviewed:C.filter(ce=>ce.difficulty).length,easy:C.filter(ce=>ce.difficulty==="easy").length,medium:C.filter(ce=>ce.difficulty==="medium").length,hard:C.filter(ce=>ce.difficulty==="hard").length,favorites:C.filter(ce=>ce.favorite).length};te.useEffect(()=>{const ce=we=>{if(!Qe&&!Ve)switch(we.code){case"Space":we.preventDefault(),c(Ee=>!Ee);break;case"ArrowLeft":we.preventDefault(),Be(),c(!1);break;case"ArrowRight":we.preventDefault(),Me(),c(!1);break}};return window.addEventListener("keydown",ce),()=>window.removeEventListener("keydown",ce)},[Qe,Ve]);const Me=()=>{if(re&&$.length<=1)return;const ce=i+1;if(ce>=$.length&&!re&&me.length>0&&O==="all"&&!A.trim())rt(!0);else{if(ce>=$.length)return;a(ce),c(!1)}},Be=()=>{$.length!==0&&(a(ce=>(ce-1+$.length)%$.length),c(!1))},We=()=>{const ce=C.filter(Te=>Te.difficulty),we=ce.length,Ee=C.length;we===Ee&&Ee>0&&(ce.some(He=>He.difficulty==="hard")||k(!0))},tt=ce=>{if(re){const we=$[i];j(Te=>({...Te,[ce]:Te[ce]+1})),P(Te=>{const He=new Set(Te);return He.add(we.id),He}),N(G?Te=>Te.map(He=>He.id===we.id?Sw(He,ce):He):Te=>Te.map(He=>He.id===we.id?{...He,difficulty:ce}:He));const Ee=me.filter(Te=>!se.has(Te.id)&&Te.id!==we.id);Ee.length===0?ve(!0):(i>=Ee.length&&a(0),c(!1))}else{N(G?Ee=>Ee.map(Te=>Te.id===$[i].id?Sw(Te,ce):Te):Ee=>Ee.map(Te=>Te.id===$[i].id?{...Te,difficulty:ce}:Te)),setTimeout(()=>{We()},0);const we=(i+1)%$.length;we===0&&me.length>0&&O==="all"&&!A.trim()?rt(!0):(a(we),c(!1))}},Tt=()=>{$.length!==0&&N(ce=>ce.map(we=>we.id===$[i].id?{...we,favorite:!we.favorite}:we))},Nn=async()=>{if(!Ye.currentUser){console.log("User not logged in, cannot save study session");return}const ce=C.filter(Ut=>Ut.difficulty==="easy").length,we=C.filter(Ut=>Ut.difficulty==="medium").length,Ee=C.filter(Ut=>Ut.difficulty==="hard").length,Te=ce+we+Ee;if(Te===0)return;const He={date:new Date().toISOString(),cardsReviewed:Te,performance:{easy:ce,medium:we,hard:Ee},category:Z||"General",userId:Ye.currentUser.uid};try{const Ut=QT(es,"studySessions");await ZC(Ut,He)}catch(Ut){console.error("Error saving study session:",Ut)}},Dn=()=>{ze.reviewed>0&&Nn(),ee(!1),a(0),rt(!1),ve(!1),c(!1),P(new Set),j({easy:0,medium:0,hard:0}),N(C.map(ce=>({...ce,difficulty:void 0}))),V(""),I("all")},yr=()=>{Nn(),rt(!1),a(0),c(!1),V(""),I("all")},Lr=()=>{ee(!0),rt(!1),a(0),c(!1),P(new Set),j({easy:0,medium:0,hard:0}),V(""),I("all")};te.useEffect(()=>{const ce=()=>{const Ee=Ye.currentUser;if(Ee){const Te=Ee.providerData.length>0?Ee.providerData[0].providerId:"anonymous";L({isLoggedIn:!0,provider:Te,email:Ee.email}),console.log(`User is authenticated: ${Ee.uid}, Provider: ${Te}, Email: ${Ee.email||"none"}`)}else L({isLoggedIn:!1,provider:"",email:null}),console.log("User is not authenticated")};ce();const we=Ye.onAuthStateChanged(()=>{ce()});return()=>we()},[]);const vo=()=>{if(G&&C.length>0)try{const ce=`${t}_${r}`;if(localStorage.setItem(`flashcard_progress_${ce}`,i.toString()),Ye.currentUser){const we=Ye.currentUser.uid,Ee=Pa(es,"users",we,"srsData",ce);Gd(Ee,{currentIndex:i,lastUpdated:new Date().toISOString()},{merge:!0})}}catch(ce){console.error("Error saving before navigating back:",ce)}window.history.length>1?window.history.back():window.location.href="/"},go=()=>{p(!h)};if(Ve){const ce=C.filter(Ee=>se.has(Ee.id)&&Ee.difficulty!=="hard"),we=C.filter(Ee=>Ee.difficulty==="hard"&&!se.has(Ee.id));return E.jsxs("div",{className:"flex flex-col items-center gap-8 p-8",children:[E.jsxs("div",{className:`text-2xl font-bold ${e?"text-white bg-gray-800":"text-gray-700 bg-white"} px-8 py-6 rounded-xl shadow-sm text-center`,children:[E.jsx("p",{children:"Review Complete! "}),E.jsxs("div",{className:"mt-6 space-y-4",children:[E.jsx("p",{className:"text-lg",children:"Your Review Results:"}),E.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[E.jsxs("div",{className:`${e?"bg-green-900":"bg-green-100"} p-4 rounded-lg`,children:[E.jsx("p",{className:`${e?"text-green-300":"text-green-800"} font-semibold`,children:"Easy"}),E.jsx("p",{className:"text-2xl",children:z.easy})]}),E.jsxs("div",{className:`${e?"bg-yellow-900":"bg-yellow-100"} p-4 rounded-lg`,children:[E.jsx("p",{className:`${e?"text-yellow-300":"text-yellow-800"} font-semibold`,children:"Medium"}),E.jsx("p",{className:"text-2xl",children:z.medium})]}),E.jsxs("div",{className:`${e?"bg-red-900":"bg-red-100"} p-4 rounded-lg`,children:[E.jsx("p",{className:`${e?"text-red-300":"text-red-800"} font-semibold`,children:"Hard"}),E.jsx("p",{className:"text-2xl",children:z.hard})]})]}),E.jsxs("p",{className:"text-lg mt-4",children:["You improved ",z.easy+z.medium," out of ",me.length," cards!"]}),ce.length>0&&E.jsxs("div",{className:"mt-6",children:[E.jsx("p",{className:"text-lg font-semibold mb-2",children:"Cards You Improved:"}),E.jsx("div",{className:"max-h-48 overflow-y-auto",children:ce.map(Ee=>E.jsxs("div",{className:`p-3 mb-2 rounded-lg ${e?Ee.difficulty==="easy"?"bg-green-900 text-green-300":"bg-yellow-900 text-yellow-300":Ee.difficulty==="easy"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:[E.jsx("p",{className:"font-medium",children:Ee.front}),E.jsx("p",{className:"text-sm opacity-75",children:Ee.back})]},Ee.id))})]}),we.length>0&&E.jsxs("div",{className:"mt-6",children:[E.jsxs("p",{className:"text-lg font-semibold mb-2",children:["You marked ",we.length," new cards as hard during this review."]}),E.jsx("p",{className:"text-lg mb-4",children:"Would you like to review these new hard cards now?"}),E.jsxs("div",{className:"flex gap-4",children:[E.jsx("button",{onClick:()=>{ee(!0),ve(!1),a(0),c(!1),P(new Set),j({easy:0,medium:0,hard:0})},className:`px-6 py-3 ${e?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white rounded-lg transition-colors duration-200 font-medium shadow-sm`,children:"Review New Hard Cards"}),E.jsx("button",{onClick:Dn,className:`px-6 py-3 ${e?"bg-gray-700 hover:bg-gray-600":"bg-gray-500 hover:bg-gray-600"} text-white rounded-lg transition-colors duration-200 font-medium shadow-sm`,children:"Start New Session"})]})]})]})]}),we.length===0&&E.jsx("button",{onClick:Dn,className:`px-6 py-3 ${e?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white rounded-lg transition-colors duration-200 font-medium shadow-sm`,children:"Start New Session"})]})}return Qe?E.jsxs("div",{className:"flex flex-col items-center gap-8 p-8",children:[E.jsxs("div",{className:`text-2xl font-bold ${e?"text-white bg-gray-800":"text-gray-700 bg-white"} px-8 py-6 rounded-xl shadow-sm text-center`,children:[E.jsx("p",{children:"You've completed the deck! "}),E.jsxs("p",{className:"text-lg mt-2",children:["You marked ",me.length," cards as hard."]}),E.jsx("p",{className:"text-lg mt-2",children:"Would you like to review them?"})]}),E.jsxs("div",{className:"flex gap-4",children:[E.jsx("button",{onClick:Lr,className:`px-6 py-3 ${e?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white rounded-lg transition-colors duration-200 font-medium shadow-sm`,children:"Review Hard Cards"}),E.jsx("button",{onClick:yr,className:`px-6 py-3 ${e?"bg-gray-700 hover:bg-gray-600":"bg-gray-500 hover:bg-gray-600"} text-white rounded-lg transition-colors duration-200 font-medium shadow-sm`,children:"Skip Review"})]}),E.jsx("button",{onClick:Dn,className:`${e?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-800"} transition-colors duration-200`,children:"Start New Session"})]}):$.length===0?E.jsxs("div",{className:"flex flex-col items-center gap-8 p-8",children:[E.jsx("div",{className:`text-2xl font-bold ${e?"text-white bg-gray-800":"text-gray-700 bg-white"} px-8 py-6 rounded-xl shadow-sm text-center`,children:E.jsx("p",{children:re?"No hard cards to review!":O!=="all"||A?"No cards match your filters or search":"No cards in this deck!"})}),E.jsxs("div",{className:"flex gap-4",children:[(O!=="all"||A)&&E.jsx("button",{onClick:()=>{I("all"),V("")},className:`px-6 py-3 ${e?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white rounded-lg transition-colors duration-200 font-medium shadow-sm`,children:"Clear Filters"}),E.jsx("button",{onClick:Dn,className:`px-6 py-3 ${e?"bg-gray-700 hover:bg-gray-600":"bg-gray-500 hover:bg-gray-600"} text-white rounded-lg transition-colors duration-200 font-medium shadow-sm`,children:"Start New Session"})]})]}):M?E.jsx("div",{className:"flex justify-center items-center h-screen",children:E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-gray-900 dark:border-white mx-auto mb-4"}),E.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Loading flashcards..."}),ae.isLoggedIn&&E.jsxs("p",{className:"text-md text-gray-600 dark:text-gray-300 mt-2",children:["Syncing data for ",ae.email||"your account",ae.provider==="google.com"&&" (Google)"]})]})}):E.jsxs("div",{className:`flex flex-col min-h-screen ${e?"bg-gray-900 text-white":"bg-white text-gray-800"}`,children:[E.jsxs("div",{className:"px-2 sm:px-4 py-2 flex justify-between items-center border-b",children:[E.jsxs("div",{className:"flex items-center",children:[E.jsx("button",{onClick:vo,className:`mr-2 py-1 px-2 rounded ${e?"hover:bg-gray-700":"hover:bg-gray-200"}`,children:" Back"}),E.jsx("h2",{className:"text-lg sm:text-xl font-bold truncate max-w-[150px] sm:max-w-[300px]",children:r||t})]}),E.jsxs("div",{className:"flex items-center",children:[ae.isLoggedIn?E.jsxs("div",{className:"flex items-center text-xs sm:text-sm mr-2 sm:mr-3",children:[E.jsx("span",{className:"h-2 w-2 bg-green-500 rounded-full mr-1"}),E.jsx("span",{title:`Logged in as ${ae.email||"authenticated user"}`,className:"hidden sm:inline",children:ae.provider==="google.com"?"Google Sync":"Sync Active"})]}):E.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-yellow-600 dark:text-yellow-400 mr-2 sm:mr-3",children:[E.jsx("span",{className:"h-2 w-2 bg-yellow-500 rounded-full mr-1"}),E.jsx("span",{className:"hidden sm:inline",children:"Local Only"})]}),E.jsx("button",{onClick:go,className:`py-1 px-2 sm:px-3 rounded ${e?"hover:bg-gray-700":"hover:bg-gray-200"}`,children:"Stats"})]})]}),E.jsx("div",{className:"flex-grow overflow-x-hidden",children:_&&ff[t]&&ff[t][r]?E.jsx(PM,{slides:ff[t][r],onComplete:()=>S(!1),darkMode:e}):E.jsx("div",{className:"space-y-4 p-2 sm:p-6 md:p-8 lg:p-10",children:E.jsxs("div",{className:"flex flex-col items-center gap-4 sm:gap-6 md:gap-8 mx-auto container",children:[E.jsxs("div",{className:"w-full max-w-[95vw] sm:max-w-full flex flex-col sm:flex-row justify-between items-center gap-4",children:[E.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[re?E.jsxs("div",{className:`text-base sm:text-lg font-medium ${e?"text-red-300 bg-red-900":"text-red-600 bg-red-50"} px-3 sm:px-4 py-1 sm:py-2 rounded-full`,children:["Reviewing Hard Cards (",$.length," remaining)"]}):G&&O==="due"?E.jsxs("div",{className:`text-base sm:text-lg font-medium ${e?"text-blue-300 bg-blue-900":"text-blue-600 bg-blue-50"} px-3 sm:px-4 py-1 sm:py-2 rounded-full`,children:["Due Cards: ",Ne.length]}):null,E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:`text-xs sm:text-sm ${e?"text-gray-300":"text-gray-700"}`,children:"SRS"}),E.jsx("button",{onClick:()=>Q(ce=>!ce),className:`relative inline-flex h-5 w-10 sm:h-6 sm:w-11 items-center rounded-full transition-colors ${G?e?"bg-blue-600":"bg-blue-500":e?"bg-gray-700":"bg-gray-300"}`,children:E.jsx("span",{className:`inline-block h-3 w-3 sm:h-4 sm:w-4 transform rounded-full bg-white transition-transform ${G?"translate-x-5 sm:translate-x-6":"translate-x-1"}`})})]})]}),E.jsxs("button",{onClick:()=>p(!0),className:`flex items-center gap-2 px-3 sm:px-4 py-2 rounded-lg ${e?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white transition-colors duration-200`,children:[E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",viewBox:"0 0 20 20",fill:"currentColor",children:E.jsx("path",{d:"M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"})}),E.jsx("span",{className:"hidden sm:inline",children:"Study Stats"})]})]}),!re&&E.jsxs("div",{className:"w-full max-w-[95vw] sm:max-w-full",children:[E.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[E.jsxs("div",{className:"flex-grow",children:[E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:"text",placeholder:"Vyhledat...",value:A,onChange:ce=>{V(ce.target.value),a(0)},className:`w-full px-2 sm:px-4 py-2 border text-sm sm:text-base ${e?"bg-gray-800 text-white border-gray-700 focus:ring-blue-600":"bg-white text-gray-900 border-gray-300 focus:ring-blue-500"} rounded-lg focus:outline-none focus:ring-2`}),A.trim()&&E.jsx("button",{onClick:()=>{V(""),a(0)},className:`absolute right-2 top-1/2 -translate-y-1/2 p-1 rounded-full hover:bg-opacity-20 ${e?"text-gray-400 hover:bg-gray-700":"text-gray-500 hover:bg-gray-200"}`,children:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:E.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})]}),E.jsx("p",{className:`mt-1 text-[10px] sm:text-xs ${e?"text-gray-400":"text-gray-500"}`,children:"Vyhledejte podle: obsahu, obtnosti (hard/medium/easy), termnu, intervalu"})]}),E.jsx("div",{className:"flex w-full",children:E.jsxs("select",{value:O,onChange:ce=>{I(ce.target.value),a(0)},className:`w-full px-2 sm:px-4 py-2 text-sm sm:text-base border rounded-lg ${e?"bg-gray-800 text-white border-gray-700 focus:ring-blue-600":"bg-white text-gray-700 border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2`,children:[E.jsx("option",{value:"all",children:"All Cards"}),E.jsx("option",{value:"favorites",children:"Favorites"}),G&&E.jsx("option",{value:"due",children:"Due for Review"}),E.jsx("option",{value:"easy",children:"Easy"}),E.jsx("option",{value:"medium",children:"Medium"}),E.jsx("option",{value:"hard",children:"Hard"})]})})]}),(O!=="all"||A)&&E.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[E.jsxs("p",{className:`text-xs sm:text-sm ${e?"text-gray-400":"text-gray-600"}`,children:["Showing: ",$.length," of ",C.length," cards",O!=="all"&&` (${O})`,A&&` matching "${A}"`]}),E.jsx("button",{onClick:()=>{I("all"),V("")},className:`text-xs sm:text-sm ${e?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-800"}`,children:"Clear filters"})]}),G&&$.length>0&&$[i].dueDate&&E.jsx("div",{className:`mt-2 mb-4 text-xs sm:text-sm ${e?"text-gray-400":"text-gray-600"}`,children:E.jsxs("p",{children:["Due: ",$[i].dueDate.toLocaleDateString(),$[i].interval&&` (Interval: ${$[i].interval} days)`]})})]}),E.jsxs("div",{className:"w-full max-w-[95vw] sm:max-w-full",children:[E.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-2 mb-2",children:[E.jsxs("span",{className:`text-xs sm:text-sm font-medium ${e?"text-gray-300":"text-gray-700"}`,children:["Progress: ",re?`${se.size} / ${me.length}`:`${ze.reviewed} / ${ze.total}`," cards reviewed"]}),E.jsxs("span",{className:`text-xs sm:text-sm font-medium ${e?"text-gray-300":"text-gray-700"}`,children:[Math.round((re?se.size/me.length:ze.reviewed/ze.total)*100),"%"]})]}),E.jsx("div",{className:`h-1.5 sm:h-2 ${e?"bg-gray-700":"bg-gray-200"} rounded-full overflow-hidden`,children:E.jsxs("div",{className:"flex h-full",children:[E.jsx("div",{className:"bg-green-500 h-full transition-all duration-300",style:{width:`${(re?z.easy/me.length:ze.easy/ze.total)*100}%`}}),E.jsx("div",{className:"bg-yellow-500 h-full transition-all duration-300",style:{width:`${(re?z.medium/me.length:ze.medium/ze.total)*100}%`}}),E.jsx("div",{className:"bg-red-500 h-full transition-all duration-300",style:{width:`${(re?z.hard/me.length:ze.hard/ze.total)*100}%`}})]})}),E.jsxs("div",{className:`flex flex-wrap justify-between gap-2 mt-1 text-xs ${e?"text-gray-400":"text-gray-600"}`,children:[E.jsxs("span",{children:["Easy: ",re?z.easy:ze.easy]}),E.jsxs("span",{children:["Medium: ",re?z.medium:ze.medium]}),E.jsxs("span",{children:["Hard: ",re?z.hard:ze.hard]}),E.jsxs("span",{children:["Favorites: ",ze.favorites]})]})]}),E.jsxs("div",{className:`text-lg sm:text-2xl font-bold ${e?"text-white bg-gray-800":"text-gray-700 bg-white"} px-4 sm:px-6 py-2 rounded-full shadow-sm`,children:["Card ",i+1," of ",$.length]}),E.jsx("div",{className:"perspective-1000 w-full max-w-[95vw] sm:max-w-full md:max-w-xl lg:max-w-2xl",children:E.jsx(Nj,{front:$[i].front,back:$[i].back,onDifficultySelect:tt,isFlipped:l,onFlip:()=>c(ce=>!ce),isFavorite:$[i].favorite,onToggleFavorite:Tt,darkMode:e})}),E.jsxs("div",{className:"flex gap-4",children:[E.jsx("button",{onClick:Be,className:`px-4 sm:px-6 py-2 sm:py-3 ${e?"bg-gray-700 hover:bg-gray-600":"bg-gray-500 hover:bg-gray-600"} text-white rounded-lg transition-colors duration-200 font-medium shadow-sm`,children:"Previous"}),E.jsx("button",{onClick:Me,className:`px-4 sm:px-6 py-2 sm:py-3 ${e?"bg-gray-700 hover:bg-gray-600":"bg-gray-500 hover:bg-gray-600"} text-white rounded-lg transition-colors duration-200 font-medium shadow-sm`,children:"Next"})]}),E.jsxs("div",{className:`text-xs sm:text-sm ${e?"text-gray-400":"text-gray-500"} mt-4 text-center`,children:["Keyboard shortcuts:",E.jsx("span",{className:`mx-1 sm:mx-2 px-2 py-1 ${e?"bg-gray-700":"bg-gray-100"} rounded`,children:"Space"})," to flip card,",E.jsx("span",{className:`mx-1 sm:mx-2 px-2 py-1 ${e?"bg-gray-700":"bg-gray-100"} rounded`,children:""})," previous card,",E.jsx("span",{className:`mx-1 sm:mx-2 px-2 py-1 ${e?"bg-gray-700":"bg-gray-100"} rounded`,children:""})," next card"]}),E.jsx("button",{onClick:Dn,className:`px-4 sm:px-6 py-2 sm:py-3 ${e?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white rounded-lg transition-colors duration-200 font-medium shadow-sm`,children:"Restart Session"})]})})}),y&&E.jsx(XV,{totalCards:C.length,onClose:()=>k(!1),darkMode:e}),h&&E.jsx(Kz,{onClose:go,darkMode:e})]})},th=[{id:"general",name:"lovk a spolenost",subcategories:[{id:"filosofie",name:"Filosofie",cards:[{front:"Od kdy do kdy mluvme o stedovk filosofii?",back:"Od rozpadu Zpadomsk e do potku humanismu"},{front:"Kdo byl nejdleitjm pedstavitelem patristiky?",back:"Sv. Augustn"},{front:'Co znamen "creatio ex nihilo"?',back:"Stvoen z nieho"},{front:"Kdo uznal svbytnost filosofie vi teologii?",back:"Tom Akvinsk"},{front:"Jak proud tvrd, e univerzlie jsou pouze jazykov nstroj?",back:"Nominalismus"},{front:'Kdo z nsledujcch filosof napsal dlo "O obci bo"?',back:"Sv. Augustn"},{front:"Co bylo clem apologet?",back:"Obhajoba kesanstv"},{front:"Jak nazvme filosofii inspirovanou Tomem Akvinskm?",back:"Tomismus"},{front:"Kdo byl muslimskm filosofem z doby mezidob, kter komentoval Aristotela?",back:"Averroes"},{front:"Kter smr zdrazuje, e zkladnm zdrojem poznn je rozum?",back:"Racionalismus"},{front:"Kdo je nejvznamnjm pedstavitelem Kantovskho kriticismu?",back:"Immanuel Kant"},{front:"Jak smr tvrd, e vechno poznn vychz ze zkuenosti?",back:"Empirismus"},{front:"Kter smr kladl draz na rozum a kritizoval crkevn dogmata?",back:"Osvcenstv"},{front:"Kter smr tvrd, e Bh stvoil svt, ale do nj dle nezasahuje?",back:"Deismus"},{front:"Kter smr je znm kategorilnm imperativem a spojenm racionalismu a empirismu?",back:"Kantovsk kriticismus"},{front:"Kdo je nejvznamnjm pedstavitelem materialismu?",back:"Karl Marx"},{front:"Kter smr tvrd, e hmota je odvozen od idej?",back:"Idealismus"},{front:"Kter smr m morln hodnotu inu podle jeho dsledk?",back:"Utilitarismus"},{front:"Kter smr zdrazuje, e rozum nen hlavnm nstrojem poznn?",back:"Iracionalismus"},{front:"Kdo je pedstavitelem voluntarismu?",back:"Friedrich Nietzsche"},{front:"Kter smr odmt metafyzick spekulace a zamuje se na empirick fakta?",back:"Pozitivismus"},{front:"Jak smr tvrd, e djiny jsou pohnny tdnm bojem?",back:"Marxismus"},{front:"Kter smr tvrd, e tradin hodnoty a smysl ivota jsou iluz?",back:"Nihilismus"},{front:"Jak pojem pouv Henri Bergson k popisu ivho asu?",back:"Trvn"},{front:"Kter smr povauje pravdu za to, co funguje v praxi?",back:"Pragmatismus"},{front:"Kdo je zakladatelem fenomenologie?",back:"Edmund Husserl"},{front:"Kter smr zdrazuje individuln svobodu a smysl existence?",back:"Existencialismus"},{front:"Co zkoum hermeneutika?",back:"Teorii interpretace text"},{front:'Kdo je autorem vroku "O em nelze mluvit, o tom se mus mlet"?',back:"Ludwig Wittgenstein"},{front:"Co je klovm kritriem vdeckosti podle Karla Poppera?",back:"Falsifikace"},{front:"Jak je hlavn mylenka stoicismus?",back:"Dosaen vnitnho klidu a harmonickho ivota skrze ovldn emoc"},{front:"Jak je hlavn mylenka epikureismu?",back:'Nejvym clem je dosaen "atarxie" a poten, kter je dosaiteln skrze rozumn uspokojovn poteb'},{front:"Jak je hlavn mylenka skepticizmu?",back:"Skeptici tvrd, e lovk neme doshnout definitivn jistoty a ml by se vyhbat absolutnm tvrzenm"},{front:"Jak je hlavn mylenka novoplatonismu?",back:'Ve ve svt je propojeno skrze "Jedno", a lovk me doshnout osvcen a sjednocen s tmto absolutnm principem'},{front:"Jak je hlavn mylenka novopthagoreismu?",back:"Vesmr je zen matematickmi zkony, kter ovlivuj produ i dui lovka"},{front:"Jak byla hlavn mylenka Sokratovy filosofie?",back:"Etika a sebepoznn skrze dialektiku"},{front:"Jak je hlavn mylenka platnismu?",back:"Existuje dokonal svt idej"},{front:"Co je hlavn mylenka Aristotelismu?",back:"Ve m svj el (telos) a clem ivota je eudaimonie"},{front:"Jak je Platnv pohled na univerzlie?",back:"Jsou nezvisl na konkrtnch vcech a existuj jako ideje ve svt idej"},{front:"Jak je Aristotelv pohled na univerzlie?",back:"Existuj pouze ve vcech samotnch"},{front:"Jak zkladn princip (arch) hledali myslitel Mletsk koly?",back:"Voda"},{front:"Co je hlavn mylenkou Pythagorejsk koly?",back:"Vesmr je uspodn podle matematickch zkon"},{front:"Co zdraznil Herakleitos o svt?",back:"Svt je v neustlm pohybu a zmn"},{front:"Co tvrdili pedstavitel Eljsk koly o realit?",back:"Realita je nemnn a nehybn"},{front:"Co vili Sofist o pravd?",back:"Pravda je relativn a zvis na nzoru jednotlivce"},{front:"Jak nzor mli atomist na svt?",back:"Ve se skld z malch, nedlitelnch stic - atom"}],stats:{totalCards:40,cardsStudied:0,averageSuccessRate:0,totalStudyTime:0,masteryLevel:"beginner",streak:0,weeklyProgress:[],difficultyDistribution:{easy:0,medium:0,hard:0},lastWeekProgress:{cardsStudied:0,averageSuccessRate:0,timeSpent:0},achievements:[],learningPath:{currentStage:1,stages:[{level:1,requiredCards:40,requiredSuccessRate:70,completed:!1}]},reviewSchedule:{nextReviewDate:new Date,reviewHistory:[],spacedRepetitionLevel:1},analytics:{bestTimeOfDay:"",averageSessionLength:0,mostChallengingCards:[],improvementRate:0,studyPatterns:[]}}},{id:"psychologie",name:"Psychologie",cards:[{front:'Kdo piel s termnem "introspekce"?',back:"Wilhelm Wundt"},{front:"Co zkoum gnoseologie?",back:"Vztah mezi vdomm a objekty, kter jsou poznvny"},{front:"Co je clem introspekce?",back:"Analyzovat vnitn proitky a mentln stavy"},{front:'Kdo piel s termnem "kolektivn nevdom"?',back:"Carl Gustav Jung"},{front:"Co je kolektivn nevdom?",back:"Soubor nevdomch obsah, kter jsou sdlen mezi jednotlivci"},{front:'Kdo piel s termnem "psychika"?',back:"Sigmund Freud"},{front:"Co zahrnuje psychika podle Freuda?",back:"Vdom, pedvdom a nevdom"},{front:'Kdo piel s termnem "chovn a provn"?',back:"B.F. Skinner"},{front:'Co zahrnuje termn "chovn a provn"?',back:"Extern jednn a vnitn proitky, kter nelze pozorovat"}],stats:{totalCards:9,cardsStudied:0,averageSuccessRate:0,totalStudyTime:0,masteryLevel:"beginner",streak:0,weeklyProgress:[],difficultyDistribution:{easy:0,medium:0,hard:0},lastWeekProgress:{cardsStudied:0,averageSuccessRate:0,timeSpent:0},achievements:[],learningPath:{currentStage:1,stages:[{level:1,requiredCards:9,requiredSuccessRate:70,completed:!1}]},reviewSchedule:{nextReviewDate:new Date,reviewHistory:[],spacedRepetitionLevel:1},analytics:{bestTimeOfDay:"",averageSessionLength:0,mostChallengingCards:[],improvementRate:0,studyPatterns:[]}}},{id:"sociologie",name:"Sociologie",cards:[{front:`Kdo je povaovn za zakladatele pozitivismu?
a) Karl Marx
b) Herbert Spencer
c) Auguste Comte
d) mile Durkheim`,back:"c) Auguste Comte"},{front:`Jak filozofick smr byl spojen s Herbertem Spencerem?
a) Pozitivismus
b) Elitismus
c) Sociln darwinismus
d) Feminismus`,back:"c) Sociln darwinismus"},{front:`Kter filozof tvrdil, e historie je djinami tdnho boje?
a) Karl Marx
b) Auguste Comte
c) mile Durkheim
d) Max Weber`,back:"a) Karl Marx"},{front:`Kdo je povaovn za jednoho z hlavnch zakladatel modern sociologie?
a) Karl Marx
b) mile Durkheim
c) Herbert Spencer
d) Auguste Comte`,back:"b) mile Durkheim"},{front:`Co je hlavn mylenkou socilnho darwinismu?
a) Tdy by mly spolupracovat pro spolen prospch.
b) Stt by ml regulovat trhy a zsahy do ekonomiky.
c) Vykoisovn dlnk je nezbytn pro rozvoj spolenosti.
d) Spolenost se vyvj pirozenm vbrem, stejn jako proda.`,back:"d) Spolenost se vyvj pirozenm vbrem, stejn jako proda."},{front:`Jak smr je spojen s Paretovm pravidlem 80/20?
a) Marxismus
b) Sociln darwinismus
c) Elitismus
d) Kapitalismus`,back:"c) Elitismus"},{front:`Kdo spojil protestantskou etiku s rozvojem kapitalismu?
a) Max Weber
b) Auguste Comte
c) mile Durkheim
d) Herbert Spencer`,back:"a) Max Weber"},{front:`Co bylo hlavnm zamenm Georga Simmela v sociologii?
a) Studovn makro-socilnch zmn.
b) Analza mikro-socilnch interakc.
c) Zkoumn politickch systm.
d) Rozvoj teorie spoleenskho pokroku.`,back:"b) Analza mikro-socilnch interakc."},{front:`Jakou metodu vyvinul Jacob L. Moreno pro studium socilnch vztah?
a) Sociometrie
b) Etologii
c) Psychoanalzu
d) Behaviorismus`,back:"a) Sociometrie"},{front:`Jak je vznam Paretova pravidla 80/20?
a) 80 % bohatstv je rozdleno mezi 80 % lid.
b) 20 % lid vlastn 80 % bohatstv.
c) 80 % lid je bez prce.
d) 20 % populace ovld 80 % rozhodnut.`,back:"b) 20 % lid vlastn 80 % bohatstv."},{front:`Kdo byl jednm z hlavnch pedstavitel Chicagsk koly sociologie?
a) Karl Marx
b) Jacob L. Moreno
c) Robert Park
d) Tom Garrigue Masaryk`,back:"c) Robert Park"},{front:`Kdo byl zastncem pozitivismu a vil, e veker poznn mus bt vdeck?
a) Karl Marx
b) Auguste Comte
c) Max Weber
d) mile Durkheim`,back:"b) Auguste Comte"},{front:`Kdo vyvinul sociometrick metody pro studium vztah ve skupinch?
a) Karl Marx
b) Max Weber
c) Jacob L. Moreno
d) mile Durkheim`,back:"c) Jacob L. Moreno"},{front:`Jak smr se zamoval na analzu vlivu mstskho ivota na jednotlivce?
a) Sociln darwinismus
b) Sociologie
c) Marxismus
d) Elitismus`,back:"b) Sociologie"},{front:`Kter filozof je spojen s teori o "beztdn spolenosti"?
a) Karl Marx
b) Auguste Comte
c) Max Weber
d) Herbert Spencer`,back:"a) Karl Marx"},{front:`Kdo se zamil na analzu vlivu nboenstv na rozvoj kapitalismu?
a) mile Durkheim
b) Max Weber
c) Auguste Comte
d) Herbert Spencer`,back:"b) Max Weber"},{front:`Kdo povaoval vdeck metody za klov pro zlepen lidsk spolenosti?
a) Karl Marx
b) Herbert Spencer
c) Auguste Comte
d) mile Durkheim`,back:"c) Auguste Comte"},{front:`Kdo byl znm svou teori o tom, e v kad spolenosti existuje mal skupina elit?
a) Herbert Spencer
b) Karl Marx
c) Vilfredo Pareto
d) Max Weber`,back:"c) Vilfredo Pareto"},{front:`Co byl hlavn cl Durkheimova vzkumu o sebevradch?
a) Analza pin vlek.
b) Zkoumn vlivu rodiny na jednotlivce.
c) Studium vlivu socilnch faktor na jednotlivce.
d) Porozumn nboenskm ritulm.`,back:"c) Studium vlivu socilnch faktor na jednotlivce."},{front:`Kdo tvrdil, e lidsk vztahy jsou urovny pirozenmi zkony evoluce?
a) Max Weber
b) Auguste Comte
c) Herbert Spencer
d) mile Durkheim`,back:"c) Herbert Spencer"},{front:`Jak sociln smr je spojen s Durkheimovou studi nboenstv?
a) Pozitivismus
b) Sociln darwinismus
c) Funkcionalismus
d) Marxismus`,back:"c) Funkcionalismus"},{front:`Kdo je spojen s mylenkou, e neexistuje dn jednotn pravda o spolenosti, ale pouze rzn interpretace?
a) Max Weber
b) mile Durkheim
c) Robert Park
d) Auguste Comte`,back:"a) Max Weber"},{front:`Kdo vil, e ekonomick nerovnost ve spolenosti je nezbytn pro pokrok?
a) Karl Marx
b) Vilfredo Pareto
c) mile Durkheim
d) Tom Garrigue Masaryk`,back:"b) Vilfredo Pareto"},{front:`Kter filozof kritizoval stt za plin zasahovn do ekonomiky?
a) Herbert Spencer
b) Auguste Comte
c) Karl Marx
d) Max Weber`,back:"a) Herbert Spencer"},{front:`Kdo vnmal sociln vdy jako nstroj pro zlepen spolenosti?
a) Vilfredo Pareto
b) Herbert Spencer
c) Auguste Comte
d) Robert Park`,back:"c) Auguste Comte"},{front:`Kdo ve svch studich socilnch vztah v mstskm prosted poukazoval na roli anonymity a odlouen?
a) Karl Marx
b) Max Weber
c) Robert Park
d) Georg Simmel`,back:"d) Georg Simmel"},{front:`Kdo zkoumal vztah mezi ekonomikou a nboenstvm v kontextu protestantsk etiky?
a) mile Durkheim
b) Max Weber
c) Auguste Comte
d) Karl Marx`,back:"b) Max Weber"},{front:`Kdo tvrdil, e stt a spolenost mus vychzet z vdeckho poznn pro svou organizaci?
a) Karl Marx
b) Auguste Comte
c) mile Durkheim
d) Max Weber`,back:"b) Auguste Comte"},{front:`Kdo byl znm svou teori o spoleenskch elitch a jejich vlivu na politiku?
a) Karl Marx
b) Herbert Spencer
c) Vilfredo Pareto
d) Max Weber`,back:"c) Vilfredo Pareto"},{front:`Kdo povaoval sociln vdy za nezbytn pro praktick zlepen ivota jednotlivc?
a) Auguste Comte
b) Karl Marx
c) Max Weber
d) Vilfredo Pareto`,back:"a) Auguste Comte"}],stats:{totalCards:30,cardsStudied:0,averageSuccessRate:0,totalStudyTime:0,masteryLevel:"beginner",streak:0,weeklyProgress:[],difficultyDistribution:{easy:0,medium:0,hard:0},lastWeekProgress:{cardsStudied:0,averageSuccessRate:0,timeSpent:0},achievements:[],learningPath:{currentStage:1,stages:[{level:1,requiredCards:30,requiredSuccessRate:70,completed:!1}]},reviewSchedule:{nextReviewDate:new Date,reviewHistory:[],spacedRepetitionLevel:1},analytics:{bestTimeOfDay:"",averageSessionLength:0,mostChallengingCards:[],improvementRate:0,studyPatterns:[]}}}]},{id:"pravo-politologie",name:"Prvo a politologie",subcategories:[{id:"pravo",name:"Prvo",cards:[{front:`Jak jsou zkladn principy stavnho prva?
a) Rozdlen moci, prvn jistota, suverenita sttu
b) Vytven zkon, vkon soudn moci
c) Suverenita jednotlivc, volebn prvo
d) Prva menin, rovnost prv`,back:"a) Rozdlen moci, prvn jistota, suverenita sttu"},{front:`Kdo je hlavnm pedstavitelem vkonn moci v R?
a) Prezident
b) Parlament
c) Soudy
d) Poslanci`,back:"a) Prezident"},{front:`Co znamen princip dlby moci v stavnm prvu?
a) Rozdlen pravomoc mezi prezidenta, parlament a soudy
b) Nezvislost soud na zkonodrn moci
c) Pedn moci pouze jednomu subjektu
d) Ovldn sttu vojenskou moc`,back:"a) Rozdlen pravomoc mezi prezidenta, parlament a soudy"},{front:`Jak jsou podmnky pro uzaven manelstv v R?
a) Plnoletost, svobodn vle, souhlas obou stran
b) Ddinost, souhlas rodi, plnoletost
c) Svoboda, ddictv, ptomnost svdka
d) Svdeck ptomnost, plnoletost, ciz souhlas`,back:"a) Plnoletost, svobodn vle, souhlas obou stran"},{front:`Co je to prvo obanskho soudnho zen?
a) Zkony upravujc civiln spory
b) Zkony o prvu na nboenskou svobodu
c) Zkony o pracovnch podmnkch
d) Zkony o prvu na ochranu ivotnho prosted`,back:"a) Zkony upravujc civiln spory"},{front:`Co je to zkonn zstupce?
a) Osoba, kter me prvn jednat za jinho
b) Osoba, kter zastupuje stt v soudnch sporech
c) Osoba volen do parlamentu
d) Osoba vykonvajc veejnou funkci`,back:"a) Osoba, kter me prvn jednat za jinho"},{front:`Co je prvn prava ddictv?
a) Uren prv a povinnost ddic
b) prava prv k nemovitostem
c) Zkony upravujc rodinn vztahy
d) Uren ve dan z pjmu`,back:"a) Uren prv a povinnost ddic"},{front:`Kdy je smlouva povaovna za platn uzavenou?
a) Pokud byly splnny podmnky zkona a ob strany se dohodly
b) Pokud je podepsna jednou stranou
c) Pokud je schvlena sttem
d) Pokud je potvrzena stn`,back:"a) Pokud byly splnny podmnky zkona a ob strany se dohodly"},{front:`Co znamen nullum crimen sine lege"?
a) Neexistuje zloin bez zkona
b) Neexistuje trest bez vinka
c) Neexistuje obhjce bez obvinn
d) Neexistuje trest bez dkazu`,back:"a) Neexistuje zloin bez zkona"},{front:`Co je prvn odpovdnost?
a) Povinnost odpovdt za jednn, kter poruuje zkon
b) Povinnost hlsit vechny zkony
c) Prvo jednat bez omezen
d) Povinnost podat o pomoc prvnka`,back:"a) Povinnost odpovdt za jednn, kter poruuje zkon"},{front:`Co je to nutn obrana?
a) Ochrana sebe nebo jinch ped tokem
b) Pouit sly v reakci na poruen zkona
c) Poruen zkona za elem zisku
d) Poruen prva k ochran soukrom`,back:"a) Ochrana sebe nebo jinch ped tokem"},{front:`Co je krajn nouze?
a) Ochrana sebe nebo jinch, kdy nen jin monost
b) tok na nevinnho lovka
c) Poruen zkona pro vlastn zisk
d) Ochrana soukrom ped vldnmi zsahy`,back:"a) Ochrana sebe nebo jinch, kdy nen jin monost"},{front:`Co znamen zsada legality v trestnm prvu?
a) Trestn pouze za iny definovan zkonem
b) Trestn za iny podle individulnch rozhodnut soud
c) Trestn pouze za poruen etickch norem
d) Trestn pouze pro zvan trestn iny`,back:"a) Trestn pouze za iny definovan zkonem"},{front:`Kdy je pouit sly v nutn obran povaovno za pimen?
a) Pokud je sla odpovdajc toku
b) Pokud je sla nadmrn
c) Pokud je sla nelegln
d) Pokud je sla podporovna svdky`,back:"a) Pokud je sla odpovdajc toku"},{front:`Co je to retroaktivita v trestnm prvu?
a) Pouit zkon na iny spchan ped jejich innost
b) Pouit novch trest na vechny zloince
c) Pouit zkon na zklad rozhodnut soud
d) Zmna trest na zklad politickch rozhodnut`,back:"a) Pouit zkon na iny spchan ped jejich innost"},{front:`Co je zkaz retroaktivity v trestnm prvu?
a) Zkony nemohou bt pouity zptn na iny spchan ped jejich innost
b) Zkony mohou bt aplikovny na minulost, ale pouze po schvlen soudem
c) Zkony jsou zptn aplikovny na vechny spchan zloiny
d) Zkony nemohou bt zmnny po spchn inu`,back:"a) Zkony nemohou bt pouity zptn na iny spchan ped jejich innost"},{front:`Co znamen princip "lex mitior"?
a) Pouit mrnjch trest v ppad zmny zkona
b) Pouit tvrdch trest na zvan trestn iny
c) Odloen trestnho zen a do zmny zkona
d) Monost vyut trest pouze v ppad poruen zkona`,back:"a) Pouit mrnjch trest v ppad zmny zkona"},{front:`Co je to prvn zstupce?
a) Osoba, kter jedn za jinho v prvnch zleitostech
b) Osoba, kter poskytuje poradenstv v trestnch vcech
c) Osoba, kter je volena do veejn funkce
d) Osoba, kter d soudn proces`,back:"a) Osoba, kter jedn za jinho v prvnch zleitostech"},{front:`Co je to prvn moc rozhodnut soudu?
a) Rozhodnut, kter se stalo zvaznm pro vechny strany
b) Rozhodnut, kter je provizorn
c) Rozhodnut, kter me bt pozdji zrueno
d) Rozhodnut, kter nen povinn pro strany`,back:"a) Rozhodnut, kter se stalo zvaznm pro vechny strany"},{front:`Jak je el obanskho prva?
a) Upravuje vztahy mezi jednotlivci a jejich majetkov a osobn vztahy
b) Upravuje vztahy mezi sttem a jednotlivci
c) Upravuje vztahy mezi stty a jejich zemmi
d) Upravuje vztahy mezi nrody a kulturami`,back:"a) Upravuje vztahy mezi jednotlivci a jejich majetkov a osobn vztahy"},{front:`Co je to prvn norma?
a) Pravidlo chovn stanoven sttem
b) Doporuen pro obany, kter nen zvazn
c) Rozhodnut soudu v konkrtn vci
d) Doporuen pro podniky, jak postupovat`,back:"a) Pravidlo chovn stanoven sttem"},{front:`Co znamen zsada "nullum crimen sine lege"?
a) Neexistuje zloin bez zkona
b) Neexistuje trest bez dkazu
c) Neexistuje zloin bez vinka
d) Neexistuje obhjce bez obvinn`,back:"a) Neexistuje zloin bez zkona"},{front:`Co je to prvn stt?
a) Stt, kde jsou prvn normy nadazeny nad ostatnmi pravidly
b) Stt, kde je prvo podzeno vld
c) Stt, kde oban nemaj prvo na ochranu prv
d) Stt, kter neuznv dn prvn normy`,back:"a) Stt, kde jsou prvn normy nadazeny nad ostatnmi pravidly"},{front:`Co je to prvn jistota?
a) Zruka, e prvn pedpisy budou jasn, stabiln a aplikovny spravedliv
b) Jistota, e soudn rozhodnut budou respektovna
c) Jistota, e kad oban m prvo na prvn poradenstv
d) Jistota, e vechny prvn zleitosti budou vyeeny do jednoho roku`,back:"a) Zruka, e prvn pedpisy budou jasn, stabiln a aplikovny spravedliv"},{front:`Co je to smlouva podle obanskho prva?
a) Dohoda mezi dvma nebo vce stranami, kter zakld, mn nebo ru prvn vztahy
b) Prvn norma vydan sttem, kter upravuje chovn oban
c) Rozhodnut soudu ve sporech mezi jednotlivci
d) Zkon, kter upravuje pracovn vztahy mezi zamstnavatelem a zamstnancem`,back:"a) Dohoda mezi dvma nebo vce stranami, kter zakld, mn nebo ru prvn vztahy"},{front:`Jak jsou zkladn podmnky pro platnost smlouvy?
a) Svobodn vle stran, plnoletost, zpsobilost k prvnm konm
b) Povolen sttu, psemn forma, souhlas tet strany
c) Psemn forma, registrace u soudu, svdeck ptomnost
d) Kmenov tradice, souhlas zstupce sttu, stanoven ve pokuty`,back:"a) Svobodn vle stran, plnoletost, zpsobilost k prvnm konm"},{front:`Co je to prvn jednn?
a) Kad projev vle, kter m za nsledek vznik, zmnu nebo znik prvnch vztah
b) Jakkoliv projev, kter neovlivuje prvn vztahy mezi osobami
c) Projev, kter je v rozporu s prvem
d) Projev vle, kter nevede k dnm prvnm nsledkm`,back:"a) Kad projev vle, kter m za nsledek vznik, zmnu nebo znik prvnch vztah"},{front:`Co znamen zpsobilost k prvnm konm?
a) Schopnost osoby vykonvat prvn jednn a bt za n odpovdn
b) Povinnost osoby dodrovat vechny prvn pedpisy
c) Prvo na obranu proti sttnmu zsahu
d) Monost obdret ddictv nebo dary`,back:"a) Schopnost osoby vykonvat prvn jednn a bt za n odpovdn"},{front:`Co je to prvn osoba?
a) Subjekt, kter me mt prvn povinnosti a prva, napklad spolenost nebo stt
b) Osoba, kter se astn obanskho soudnho zen
c) Osoba, kter vykonv veejnou funkci
d) Osoba, kter vykonv profesn innost`,back:"a) Subjekt, kter me mt prvn povinnosti a prva, napklad spolenost nebo stt"},{front:`Co je odpovdnost za kodu?
a) Povinnost nahradit kodu, kterou nkdo zpsobil jinmu
b) Povinnost platit dan sttu
c) Prvo na odkodnn v ppad nezkonnho jednn
d) Povinnost vrtit pjen penze`,back:"a) Povinnost nahradit kodu, kterou nkdo zpsobil jinmu"},{front:`Co je to ddick smlouva?
a) Smlouva, kter upravuje ddictv mezi jednotlivci
b) Smlouva mezi podniky o podmnkch spoluprce
c) Smlouva o pevodu nemovitosti
d) Smlouva o koupi zbo`,back:"a) Smlouva, kter upravuje ddictv mezi jednotlivci"},{front:`Co je to zv?
a) Prvn kon, kterm lovk uruje, jak nalo se svm majetkem po smrti
b) Psemn souhlas pro uzaven smlouvy
c) Dohoda o dlen majetku mezi ddici
d) Prvn dokument potvrzujc majetkov prvo`,back:"a) Prvn kon, kterm lovk uruje, jak nalo se svm majetkem po smrti"},{front:`Co znamen nrok na vrcen vci?
a) Prvo poadovat vrcen vci, kter byla nkomu neoprvnn odevzdna
b) Prvo na odkodnn za ztrtu vci
c) Prvo na prodej vci, kterou vlastnm
d) Prvo na znien vci, kter je ve vlastnictv jinho`,back:"a) Prvo poadovat vrcen vci, kter byla nkomu neoprvnn odevzdna"},{front:`Co je to vpov ze smlouvy?
a) Jednostrann zruen smlouvy ze strany jedn strany
b) Dohoda obou stran o ukonen smlouvy
c) Prohlen o plnn smlouvy
d) Ukonen smlouvy z rozhodnut soudu`,back:"a) Jednostrann zruen smlouvy ze strany jedn strany"},{front:`Co je to veejn nabdka?
a) Projev vle, kterm jedna strana nabz plnn urit smlouvy veejn
b) Nabdka na vmnu zbo mezi podniky
c) Nabdka na uzaven smlouvy v soukrom
d) Nabdka, kterou je mon uzavt pouze s prvnm zstupcem`,back:"a) Projev vle, kterm jedna strana nabz plnn urit smlouvy veejn"},{front:`Co je to konkludentn jednn?
a) Jednn, kter vyjaduje vli osoby, i kdy nen vslovn vyjdeno slovy
b) Jednn, kter je povoleno pouze soudem
c) Jednn, kter mus bt provdno psemn
d) Jednn, kter se vztahuje pouze na prvnick osoby`,back:"a) Jednn, kter vyjaduje vli osoby, i kdy nen vslovn vyjdeno slovy"},{front:`Co znamen koup" podle obanskho prva?
a) Smlouva, kterou se prodvajc zavazuje pevst vlastnick prvo k vci kupujcmu
b) Smlouva, kterou se pevd njemn prvo k nemovitosti
c) Smlouva, kterou se podnik zavazuje k prodeji zbo na spltky
d) Smlouva, kter se vztahuje pouze na movit vci`,back:"a) Smlouva, kterou se prodvajc zavazuje pevst vlastnick prvo k vci kupujcmu"},{front:`Co je to vcn prva"?
a) Prva, kter se vztahuj k urit vci, jako je vlastnictv nebo zstavn prvo
b) Prva tkajc se prce a zamstnn
c) Prva k nehmotnm vcem, jako jsou patenty a autorsk prva
d) Prva tkajc se ochrany soukrom`,back:"a) Prva, kter se vztahuj k urit vci, jako je vlastnictv nebo zstavn prvo"},{front:`Co znamen nemovitost" podle obanskho prva?
a) Vci, kter jsou pevn spojeny s pozemkem, jako jsou budovy a stavby
b) Vci, kter mohou bt pohybovny z msta na msto
c) Zbo, kter je ureno k prodeji
d) Zvata, kter jsou ve vlastnictv lovka`,back:"a) Vci, kter jsou pevn spojeny s pozemkem, jako jsou budovy a stavby"},{front:`Co je to zruka za jakost?
a) Odpovdnost prodvajcho za vady, kter se projev u prodanho zbo
b) Zruka, e zbo bude dorueno vas
c) Zruka, e zbo bude prodno za nzkou cenu
d) Zruka, e zbo bude odpovdat pn kupujcho`,back:"a) Odpovdnost prodvajcho za vady, kter se projev u prodanho zbo"},{front:`Co znamen spolen a nerozdln odpovdnost"?
a) Kdy vce lid odpovd za jednu povinnost, kad z nich me bt povoln k plnn cel povinnosti
b) Kdy vce lid odpovd za rzn povinnosti
c) Kdy kad z astnk smlouvy je odpovdn pouze za svoji st povinnosti
d) Kdy zodpovdaj pouze ti, kte podepsali smlouvu`,back:"a) Kdy vce lid odpovd za jednu povinnost, kad z nich me bt povoln k plnn cel povinnosti"},{front:`Co je to vlastnick prvo?
a) Prvo osoby nakldat s vc podle sv vle, vetn jejho prodeje, darovn i znien
b) Prvo na uvn vci bez omezen
c) Prvo na nhradu kody zpsoben jinou osobou
d) Prvo uvat vc pouze po dobu njmu`,back:"a) Prvo osoby nakldat s vc podle sv vle, vetn jejho prodeje, darovn i znien"},{front:`Co je to stava esk republiky?
a) Nejvy prvn pedpis, kter uruje sttn zzen, prva a svobody oban
b) Prvn pedpis, kter upravuje obchodn vztahy
c) Smlouva mezi eskou republikou a jinmi stty
d) Zkon, kter upravuje volebn prvo`,back:"a) Nejvy prvn pedpis, kter uruje sttn zzen, prva a svobody oban"},{front:`Co znamen princip dlby moci v stavnm prvu?
a) Rozdlen pravomoc mezi rzn orgny sttn moci, aby se zabrnilo koncentraci moci
b) Prvo prezidenta urovat zkony
c) Prvo oban volit zkonodrce
d) Prvo vldy vydvat rozhodnut bez souhlasu parlamentu`,back:"a) Rozdlen pravomoc mezi rzn orgny sttn moci, aby se zabrnilo koncentraci moci"},{front:`Jak jsou hlavn sloky sttn moci v esk republice?
a) Legislativa, exekutiva a judikativa
b) Prezident, sent a poslaneck snmovna
c) Vlda, politick strany a parlament
d) Soudy, sttn zstupci a ombudsman`,back:"a) Legislativa, exekutiva a judikativa"},{front:`Co je to legislativa?
a) Orgny, kter vytvej a schvaluj prvn normy, jako je parlament
b) Orgn, kter vykonv rozhodnut soudu
c) Prvo jednotlivc vyjadovat sv nzory
d) Organizan sloky vldy`,back:"a) Orgny, kter vytvej a schvaluj prvn normy, jako je parlament"},{front:`Jak je role prezidenta esk republiky podle stavy?
a) Zastupuje stt navenek a vykonv nkter pravomoci v rmci exekutivy
b) Vydv zkony a rozhoduje o legislativnch zmnch
c) d soudn procesy a zajiuje spravedlnost
d) Uruje sloen vldy a pijm rozhodnut o zahranin politice`,back:"a) Zastupuje stt navenek a vykonv nkter pravomoci v rmci exekutivy"},{front:`Kdo je oprvnn vyhlaovat zkony v esk republice?
a) Parlament, konkrtn Poslaneck snmovna a Sent
b) Prezident a vlda
c) Oban na zklad referenda
d) Soudci a sttn zstupci`,back:"a) Parlament, konkrtn Poslaneck snmovna a Sent"},{front:`Co je to referendum podle stavy esk republiky?
a) Pmo rozhodnut oban o uritm sttnm nebo politickm otzce
b) Psemn rozhodnut soud o stavn otzce
c) Zpsob volby prezidenta
d) Forma rozhodovn vldy o politickch otzkch`,back:"a) Pmo rozhodnut oban o uritm sttnm nebo politickm otzce"},{front:`Kdo zajiuje stavn soudnictv v esk republice?
a) stavn soud esk republiky
b) Nejvy soud
c) Nejvy sprvn soud
d) Obvodn soudy`,back:"a) stavn soud esk republiky"},{front:`Co je to stavn soud?
a) Orgn, kter rozhoduje o souladu prvnch pedpis s stavou
b) Orgn, kter uruje meze pravomoc jednotlivch vldnch sloek
c) Orgn, kter je zodpovdn za implementaci zkon
d) Orgn, kter schvaluje volby a vsledky voleb`,back:"a) Orgn, kter rozhoduje o souladu prvnch pedpis s stavou"},{front:`Co znamen pojem "nestavnost"?
a) Protiprvn stav, kdy prvn pedpisy nebo rozhodnut odporuj stav
b) Stav, kdy prvn pedpisy nejsou v souladu s mezinrodnmi smlouvami
c) Stav, kdy vlda vydv zkony bez parlamentnho schvlen
d) Kdy prvn normy nejsou dostaten chrnny ped zmnami`,back:"a) Protiprvn stav, kdy prvn pedpisy nebo rozhodnut odporuj stav"},{front:`Jak jsou hlavn zruky zkladnch prv a svobod podle stavy?
a) Dsledn ochrana prv jednotlivc ped neleglnmi zsahy sttu
b) Zajitn volnho pohybu osob v rmci Evropsk unie
c) Zaruen prva na prci a platby z dan
d) Zajitn sttnho financovn vzdlvacch instituc`,back:"a) Dsledn ochrana prv jednotlivc ped neleglnmi zsahy sttu"},{front:`Co znamen princip "suverenity lidu"?
a) Vlda je odvozena z vle a moci oban, kte maj prvo rozhodovat o svm stt
b) Politick strana uruje, kdo bude vldnout
c) Prezident m pravomoc rozhodovat o vech klovch otzkch
d) Soudy jsou nezvisl a nemohou bt ovlivnny vldou`,back:"a) Vlda je odvozena z vle a moci oban, kte maj prvo rozhodovat o svm stt"},{front:`Jak je postaven vldy podle stavy?
a) Je orgnem, kter vykonv vkonnou moc a je odpovdn parlamentu
b) Je nezvisl a neme bt kontrolovna parlamentem
c) Je zodpovdn pouze prezidentovi
d) Je volena pmo obany`,back:"a) Je orgnem, kter vykonv vkonnou moc a je odpovdn parlamentu"},{front:`Co je to "parlamentn kontrola"?
a) Sledovn a ovovn innosti vldy a dalch orgn vkonn moci parlamentem
b) Schvalovn rozhodnut prezidenta
c) Oprvnn vldy vydvat pedpisy bez schvlen parlamentem
d) Prvo oban zasahovat do rozhodovn vldy`,back:"a) Sledovn a ovovn innosti vldy a dalch orgn vkonn moci parlamentem"},{front:`Co znamen pojem "neodvolatelnost soudc"?
a) Soudci jsou chrnni ped odvolnm z funkce, pokud neporu zkony
b) Soudci mohou bt odvolni na dost vldy
c) Soudci mus bt voleni obany
d) Soudci mohou bt odvolni pouze rozhodnutm prezidenta`,back:"a) Soudci jsou chrnni ped odvolnm z funkce, pokud neporu zkony"},{front:`Co je to "politick odpovdnost" vldy podle stavy?
a) Vlda je odpovdn parlamentu a me bt odvolna v ppad nedvry
b) Vlda mus kad msc podvat zprvy prezidentovi
c) Vlda je odpovdn pouze za plnn rozpotu
d) Vlda me bt odvolna na zklad vsledk referenda`,back:"a) Vlda je odpovdn parlamentu a me bt odvolna v ppad nedvry"},{front:`Co znamen pojem "zsada legality"?
a) Veker jednn sttn moci mus bt v souladu s prvnmi pedpisy a stavou
b) Soudci maj prvo rozhodovat na zklad sv osobn morlky
c) Stt me jednat bez ohledu na prvn rmec
d) Legislativa me mnit stavu podle aktuln politick situace`,back:"a) Veker jednn sttn moci mus bt v souladu s prvnmi pedpisy a stavou"},{front:`Co znamen "nerozluitelnost stavnho podku"?
a) stava je zkladnm a nemnnm prvnm dokumentem, kter nelze mnit bez irok shody
b) stava me bt zmnna jednoduchm hlasovnm parlamentu
c) stava je zodpovdn pouze za obansk prvo
d) stava je pouze rmcov dokument a me bt asto mnna`,back:"a) stava je zkladnm a nemnnm prvnm dokumentem, kter nelze mnit bez irok shody"},{front:`Co znamen pojem "prvo na ivot" podle stavy?
a) Zkladn prvo kadho jednotlivce na ochranu ivota a tlesn integrity
b) Prvo na ochranu soukrom v domcnosti
c) Prvo na svobodu slova
d) Prvo na pstup k informacm`,back:"a) Zkladn prvo kadho jednotlivce na ochranu ivota a tlesn integrity"}],stats:{totalCards:50,cardsStudied:0,averageSuccessRate:0,totalStudyTime:0,masteryLevel:"beginner",streak:0,weeklyProgress:[],difficultyDistribution:{easy:0,medium:0,hard:0},lastWeekProgress:{cardsStudied:0,averageSuccessRate:0,timeSpent:0},achievements:[],learningPath:{currentStage:1,stages:[{level:1,requiredCards:50,requiredSuccessRate:70,completed:!1}]},reviewSchedule:{nextReviewDate:new Date,reviewHistory:[],spacedRepetitionLevel:1},analytics:{bestTimeOfDay:"",averageSessionLength:0,mostChallengingCards:[],improvementRate:0,studyPatterns:[]}}},{id:"politologie",name:"Politologie",cards:[{front:'Co je to "dlba moci"?',back:"Rozdlen sttn moci na zkonodrnou, vkonnou a soudn"},{front:'Co je to "demokracie"?',back:"Forma vldy, kde moc vychz z lidu"},{front:'Co je to "stava"?',back:"Zkladn zkon sttu, kter uruje jeho uspodn"},{front:`Jak volebn systm se pouv v esk republice pro volby do Poslaneck snmovny?
a) Dvoukolov vtinov
b) Proporn systm
c) Kombinovan systm
d) Smen vtinov`,back:"b) Proporn systm"},{front:`Kter z nsledujcch instituc v esk republice vykonv zkonodrnou moc?
a) Prezident
b) Poslaneck snmovna
c) stavn soud
d) Vlda`,back:"b) Poslaneck snmovna"},{front:`Kdo je hlavou sttn moci v esk republice?
a) Premir
b) Prezident
c) Pedseda stavnho soudu
d) Pedseda vldy`,back:"b) Prezident"},{front:`Co je podle stavy R hlavnm kolem Poslaneck snmovny?
a) Vytvet legislativu
b) Vykonvat soudn moc
c) Zajiovat ekonomick plnovn
d) Udrovat bezpenostn politiku`,back:"a) Vytvet legislativu"},{front:`Kdo v esk republice jmenuje vldu?
a) Parlament
b) Prezident
c) Sent
d) Soudy`,back:"b) Prezident"},{front:`Jak je rozdl mezi stavou, zkonem a vyhlkou v esk republice?
a) stava je nejvy prvn normou, zkon je ni a vyhlka je podzkonn prvn pedpis
b) Vyhlka je nad zkonem a stava je podzkonn prvn pedpis
c) Zkon je nejvy prvn normou
d) Neexistuj dn rozdly`,back:"a) stava je nejvy prvn normou, zkon je ni a vyhlka je podzkonn prvn pedpis"},{front:`Kdo me v esk republice navrhovat zkony?
a) Pouze prezident
b) Pouze lenov vldy
c) Poslanci, vlda a Sent
d) Pouze oban`,back:"c) Poslanci, vlda a Sent"},{front:`Co je to "smen volebn systm"?
a) Volebn systm, kter kombinuje vtinov a pomrn systm
b) Volebn systm, kde jsou vechny hlasy setny stejn
c) Volebn systm pouvan pouze ve volbch do Evropskho parlamentu
d) Volebn systm, kter je pouvn pouze v sentnch volbch`,back:"a) Volebn systm, kter kombinuje vtinov a pomrn systm"},{front:`Jak typ vldy je v esk republice?
a) Prezidentsk demokracie
b) Poloprezidentsk demokracie
c) Parlamentn demokracie
d) Monarchie`,back:"c) Parlamentn demokracie"},{front:`Kter orgn v esk republice vykonv vkonnou moc?
a) Prezident
b) Parlament
c) Vlda
d) stavn soud`,back:"c) Vlda"},{front:`Jak jsou zkladn pravomoci prezidenta esk republiky?
a) Vydvat zkony
b) Mt pravomoc v oblasti armdy, jmenovn soudc a vyhlaovn voleb
c) Ovldat vldu
d) dit parlament`,back:"b) Mt pravomoc v oblasti armdy, jmenovn soudc a vyhlaovn voleb"},{front:`Kdo schvaluje zkony v esk republice?
a) Prezident
b) Sent a Poslaneck snmovna
c) Vlda
d) stavn soud`,back:"b) Sent a Poslaneck snmovna"},{front:`Jak typ politickho systmu je v esk republice?
a) Totalitarismus
b) Parlamentn demokracie
c) Monarchie
d) Teokracie`,back:"b) Parlamentn demokracie"},{front:`Co znamen pojem "proporn volebn systm"?
a) Kad voli m jednu hlasovac monost, a to pro jednu politickou stranu
b) Poet mandt se pidluje podle procenta hlas, kter strany zskaj
c) Poet mandt je uren pouze na zklad geografickch oblast
d) Volebn systm, kde se hlasy staj pouze na zem hlavnho msta`,back:"b) Poet mandt se pidluje podle procenta hlas, kter strany zskaj"},{front:`Kdo m prvo odvolat prezidenta v esk republice?
a) Vlda
b) Parlament
c) stavn soud
d) Oban prostednictvm referenda`,back:"c) stavn soud"},{front:`Kter forma vldy je charakteristick pro eskou republiku?
a) Poloprezidentsk demokracie
b) Parlamentn demokracie
c) Prezidentsk demokracie
d) Diktatura`,back:"b) Parlamentn demokracie"},{front:`Co je to "konsensuln demokracie"?
a) Demokracie, kde vlda funguje na zklad souhlasu vech politickch stran
b) Demokracie, kde vtina strany v parlamentu me rozhodovat bez ohledu na opozici
c) Demokracie, kde vlda rozhoduje bez jakhokoli souhlasu s opozic
d) Demokracie s jedinou politickou stranou`,back:"a) Demokracie, kde vlda funguje na zklad souhlasu vech politickch stran"},{front:`Co je charakteristick pro "prezidentskou demokracii"?
a) Prezident m absolutn moc ve vech oblastech vldy
b) Prezident je hlavou vldy a me vldnout bez parlamentu
c) Prezident je volen pmo a vykonv vkonnou moc
d) Prezident je volen parlamentem`,back:"c) Prezident je volen pmo a vykonv vkonnou moc"},{front:`Co charakterizuje "totalitn reim"?
a) Omezen politick svobody a siln kontrola sttem
b) Siln parlament a demokratick volby
c) Minimln vldn zsahy do osobnch prv
d) Neptomnost voleb a politickch stran`,back:"a) Omezen politick svobody a siln kontrola sttem"},{front:`Kter z tchto politickch smr usiluje o zruen sttu a jeho nahrazen svobodnmi komunitami?
a) Anarchismus
b) Liberalismus
c) Socialismus
d) Konservatismus`,back:"a) Anarchismus"},{front:`Co je hlavnm clem komunismu?
a) Vytvoen spolenosti bez tdnch rozdl a sttnho vlastnictv vrobnch prostedk
b) Zajitn individulnch prv a svobod
c) Vytvoen silnho trnho hospodstv
d) Podpora tradinch hodnot`,back:"a) Vytvoen spolenosti bez tdnch rozdl a sttnho vlastnictv vrobnch prostedk"},{front:`Co charakterizuje liberalismus?
a) Podporu rovnosti a zsah sttu do ekonomiky
b) Ochranu osobnch svobod a minimln zsahy sttu do ekonomiky
c) Plnou kontrolu nad hospodskm sektorem
d) Zamen na idely nrodn tradice`,back:"b) Ochranu osobnch svobod a minimln zsahy sttu do ekonomiky"},{front:`Kter ideologie usiluje o rovnost, zajitn minimlnch prv a sttn podporu pro kadho obana?
a) Liberalismus
b) Komunismus
c) Sociln demokracie
d) Faismus`,back:"c) Sociln demokracie"},{front:`Co charakterizuje faismus?
a) Nrodn hrdost, siln autoritsk vlda a potlaovn opozice
b) Rovnost mezi obany a podpora osobn svobody
c) Ochranu prody a udritelnost
d) Minimln zsahy sttu do ekonomiky`,back:"a) Nrodn hrdost, siln autoritsk vlda a potlaovn opozice"},{front:`Co je charakteristick pro teokracii?
a) Vlda, kterou tvo nboent vdci
b) Vlda, kde je nboensk vyznn oddleno od politickch rozhodnut
c) Ovldn sttu prostednictvm vojensk sly
d) Pm demokracie, kde vichni oban maj prvo hlasovat`,back:"a) Vlda, kterou tvo nboent vdci"},{front:`Co znamen "syndikalismus"?
a) Politick ideologie, kter usiluje o zajitn moci prostednictvm odbor
b) Politick systm, kter podporuje sttn kontrolu ekonomiky
c) Soubor idej zamen na absolutn individuln svobodu
d) Systm vldy zaloen na nboenskch principech`,back:"a) Politick ideologie, kter usiluje o zajitn moci prostednictvm odbor"},{front:`Co je hlavn mylenkou marxismu?
a) Rovnost pro vechny prostednictvm sttnho vlastnictv vrobnch prostedk
b) Individuln svoboda a minimln stt
c) Siln nrodn stt, kter m kontrolu nad vemi oblastmi ivota
d) Pm demokracie bez jakchkoliv politickch stran`,back:"a) Rovnost pro vechny prostednictvm sttnho vlastnictv vrobnch prostedk"},{front:`Co je clem politickho smru nacionalismus?
a) Zavst plnou rovnost mezi vemi nrody
b) Poslit nrodn stt a jeho kulturn identitu
c) Podpoit globalizaci a mezinrodn spoluprci
d) Usilovat o zruen stt a pechod k anarchii`,back:"b) Poslit nrodn stt a jeho kulturn identitu"},{front:`Co charakterizuje politick smr konzervatismus?
a) Usiluje o revoluci a rychl zmny ve spolenosti
b) Podporuje tradin hodnoty a postupn zmny
c) Zamuje se na individualismus a minimalizaci sttn moci
d) Podporuje plnou kontrolu sttu nad ekonomikou`,back:"b) Podporuje tradin hodnoty a postupn zmny"},{front:`Kdo jsou hlavn pedstavitel anarchismu?
a) Karl Marx a Friedrich Engels
b) Thomas Hobbes a John Locke
c) Pierre-Joseph Proudhon a Mikhail Bakunin
d) John Stuart Mill a Adam Smith`,back:"c) Pierre-Joseph Proudhon a Mikhail Bakunin"},{front:`Jak je hlavn zamen pragmatismu v politick teorii?
a) Draz na ideologick istoty a teoretick principy
b) een problm podle jejich praktickch dsledk a innosti
c) Posilovn sttn kontroly nad kadou oblast ivota
d) Snaha o utopick zmny v spolenosti`,back:"b) een problm podle jejich praktickch dsledk a innosti"},{front:`Kter zem byla pkladem komunistickho reimu v 20. stolet?
a) USA
b) Sovtsk svaz
c) Spojen krlovstv
d) vdsko`,back:"b) Sovtsk svaz"},{front:`Jak je hlavn princip socialismus?
a) Voln trh bez sttn regulace
b) Sttn kontrola nad vemi aspekty ekonomiky
c) Rovnost ve spolenosti a redistribuce bohatstv
d) Siln moc jednotlivch stt bez vlivu na ostatn`,back:"c) Rovnost ve spolenosti a redistribuce bohatstv"},{front:`Co je zkladnm principem liberalismu?
a) Poslen nrodnch stt a jejich nezvislosti
b) Ochrana osobnch svobod a prv jednotlivc
c) pln sttn kontrola nad ekonomikou a vrobnmi prostedky
d) Zajitn rovnosti skrze zsahy vldy`,back:"b) Ochrana osobnch svobod a prv jednotlivc"},{front:`Kter politick smr je zamen na maximln rovnost mezi jednotlivci, bez tdnch rozdl?
a) Anarchismus
b) Socialismus
c) Konzervatismus
d) Liberalismus`,back:"b) Socialismus"},{front:`Jak jsou hlavn charakteristiky teokracie?
a) Oddlen nboenstv od sttu
b) Vlda je vykonvna podle nboenskch zsad a veden nboenskch pedstavitel
c) Moc je v rukou armdy
d) Vlda je zaloena na demokratickch volbch`,back:"b) Vlda je vykonvna podle nboenskch zsad a veden nboenskch pedstavitel"},{front:`Jak politick smr podporuje voln trh, osobn svobody a minimln stt?
a) Marxismus
b) Anarchismus
c) Liberalismus
d) Totalitarismus`,back:"c) Liberalismus"},{front:`Co znamen "diktatura" v politologii?
a) Forma vldy, kde je moci soustedna do rukou jednoho nebo nkolika jednotlivc
b) Forma vldy, kde vldne parlament
c) Vlda zaloen na volbch a pluralit politickch stran
d) Vlda, kde maj oban prvo pmo hlasovat o vech rozhodnutch`,back:"a) Forma vldy, kde je moci soustedna do rukou jednoho nebo nkolika jednotlivc"},{front:`Kter politick smr se zamuje na siln centralizovan stt a nacionalismus?
a) Faismus
b) Liberalismus
c) Socialismus
d) Anarchismus`,back:"a) Faismus"},{front:`Jak politick smr usiluje o zruen sttnch instituc a vytvoen spolenosti zaloen na svobodnch komunitch?
a) Socialismus
b) Liberalismus
c) Anarchismus
d) Faismus`,back:"c) Anarchismus"},{front:`Co je to "demokratick centralismus"?
a) Politick systm, ve kterm je centralizovna moc v jednom centru, ale zaruena svoboda projevu
b) Systm, ve kterm je zen strany zcela centralizovno, ale s otevenm diskurzem v rmci stranickch sbor
c) Forma vldy, kde oban pmo vol vechny zkony
d) Demokracie, kter zajiuje centralizovanou kontrolu mdi a politiky`,back:"b) Systm, ve kterm je zen strany zcela centralizovno, ale s otevenm diskurzem v rmci stranickch sbor"},{front:`Kdo byl hlavnm pedstavitelem komunistick ideologie?
a) Karl Marx
b) Winston Churchill
c) Friedrich Hayek
d) John Stuart Mill`,back:"a) Karl Marx"},{front:`Jak je hlavn princip faismu?
a) Rovnost a zajitn prv menin
b) Siln nrodn identita a autoritsk moc
c) Ochrana osobnch svobod a prv
d) Odmtnut vech nboenstv a jejich vlivu na politiku`,back:"b) Siln nrodn identita a autoritsk moc"},{front:`Kter smr podporuje individuln prva a minimln zsahy sttu do osobnho ivota?
a) Socialismus
b) Faismus
c) Liberalismus
d) Totalitarismus`,back:"c) Liberalismus"},{front:`Co znamen pojem "proporcionalita" ve volebnch systmech?
a) Poet mandt je udlovn podle velikosti volebnch obvod
b) Poet mandt je rozdlovn mezi politick strany na zklad procenta zskanch hlas
c) Poet mandt je rozdlovn mezi strany rovnomrn
d) Poet mandt se pidluje podle ve volebn asti`,back:"b) Poet mandt je rozdlovn mezi politick strany na zklad procenta zskanch hlas"},{front:`Co charakterizuje politickou ideologii libertarianismu?
a) Zajitn rovnosti prostednictvm sttn intervence
b) Podpora minimlnho sttu a maximlnch osobnch svobod
c) Zajitn politick stability prostednictvm centralizovan moci
d) Podpora kolektivismu a spoleensk rovnosti`,back:"b) Podpora minimlnho sttu a maximlnch osobnch svobod"},{front:`Co je hlavn mylenkou ekologismu?
a) Zajitn rovnosti prostednictvm zsah vldy do ekonomiky
b) Ochrana prody a udritelnost ivotnho prosted
c) Siln stt, kter reguluje trhy a pracovn vztahy
d) Zven spoteby pro zajitn hospodskho rstu`,back:"b) Ochrana prody a udritelnost ivotnho prosted"},{front:`Kter ideologie usiluje o vytvoen spolenosti bez jakchkoli tdnch rozdl a sttnho vlastnictv vrobnch prostedk?
a) Anarchismus
b) Konservatismus
c) Komunismus
d) Liberalismus`,back:"c) Komunismus"},{front:`Kter smr prosazuje idel spoleensk rovnosti prostednictvm demokratickch prostedk?
a) Faismus
b) Socialismus
c) Liberalismus
d) Anarchismus`,back:"b) Socialismus"},{front:`Kter politick smr je spojen s ideologi "silnho sttu" a kontrolou oban?
a) Anarchismus
b) Totalitarismus
c) Liberalismus
d) Socialismus`,back:"b) Totalitarismus"},{front:`Jak je hlavn rozdl mezi demokratickm a autokratickm reimem?
a) Demokracie je zaloena na vld jednoho jednotlivce, zatmco autokracie zajiuje svobodu projevu.
b) Demokracie vyaduje pravideln volby a pluralismus, autokracie m centralizovanou moc v rukou jedin osoby nebo mal skupiny.
c) Demokracie zajiuje absolutn kontrolu nad ekonomikou, autokracie podporuje trn ekonomiku.
d) Neexistuje dn rozdl mezi demokratickm a autokratickm reimem.`,back:"b) Demokracie vyaduje pravideln volby a pluralismus, autokracie m centralizovanou moc v rukou jedin osoby nebo mal skupiny."},{front:`Kdo je povaovn za hlavnho pedstavitele klasickho liberalismu?
a) Friedrich Engels
b) John Locke
c) Thomas Hobbes
d) Karl Marx`,back:"b) John Locke"},{front:`Kter z nsledujcch reim je pkladem prezidentsk demokracie?
a) Spojen stty americk
b) Francie
c) vcarsko
d) Velk Britnie`,back:"a) Spojen stty americk"},{front:`Co je charakteristick pro politickou ideologii neokonzervatismu?
a) Podpora minimlnho sttu a maximlnch osobnch svobod.
b) Podpora siln role sttu v oblasti socilnch a ekonomickch zleitost.
c) Draz na vojenskou intervenci a ochranu tradinch hodnot.
d) Usilovn o rovnost mezi rznmi skupinami ve spolenosti.`,back:"c) Draz na vojenskou intervenci a ochranu tradinch hodnot."},{front:`Kter politick smr odmt vechny formy vldy a usiluje o zruen sttu?
a) Libertarianismus
b) Anarchismus
c) Socialismus
d) Liberalismus`,back:"b) Anarchismus"},{front:`Jak je hlavn zamen politick ideologie feminizmu?
a) Podpora rovnosti mezi pohlavmi a prv en.
b) Zajitn rovnosti mezi nrody a rasami.
c) Poslen mocensk struktury sttu a jeho autority.
d) Zajitn maximln svobody jednotlivce bez zsah sttu.`,back:"a) Podpora rovnosti mezi pohlavmi a prv en."},{front:`Co je hlavnm zamenm politick ideologie populismu?
a) Ochrana elit a zaveden psnch pravidel pro politick strany.
b) Poslen role politiky ve vdeckm vzkumu a inovacch.
c) Obhajoba zjm "obyejnch lid" proti elitm a establishmentu.
d) Podpora vldy v rukou mal skupiny odbornk.`,back:'c) Obhajoba zjm "obyejnch lid" proti elitm a establishmentu.'},{front:`Co znamen termn "demokratick centralizace"?
a) Demokracie bez jakkoliv centralizovan moci.
b) Centralizace moci v jednom politickm centru, piem se zachovv kontrola skrze demokratick volby.
c) Spoleensk systm, kter neumouje dnou formu veejnho hlasovn.
d) Systm, kde jsou vechny politick strany stejnho vznamu a moci.`,back:"b) Centralizace moci v jednom politickm centru, piem se zachovv kontrola skrze demokratick volby."},{front:`Co je charakteristick pro politickou ideologii liberalismu?
a) Draz na zajitn rovnosti mezi jednotlivci a sociln spravedlnost.
b) Podpora osobnch svobod a minimlnho zsahu sttu do ivota jednotlivc.
c) Zaveden psn sttn kontroly nad ekonomikou.
d) Siln podpora centralizovan moci ve sttn sfe.`,back:"b) Podpora osobnch svobod a minimlnho zsahu sttu do ivota jednotlivc."},{front:`Kter z nsledujcch politickch smr usiluje o plnou rovnost a bezsttn spolenost?
a) Komunismus
b) Socialismus
c) Anarchismus
d) Konzervatismus`,back:"c) Anarchismus"},{front:`Co je hlavn ideou teokracie?
a) Vlda je urena nboenskmi autoritami a nboenskmi zkony.
b) Vlda je vykonvna demokraci bez jakkoliv nboensk kontroly.
c) Vlda se zamuje na plnou rovnost mezi vemi obany bez ohledu na nboensk pesvden.
d) Vlda je zaloena na vojensk autorit a silnm sttnm apartu.`,back:"a) Vlda je urena nboenskmi autoritami a nboenskmi zkony."},{front:`Kter zem je pkladem konstitun monarchie?
a) Spojen stty americk
b) Velk Britnie
c) Kuba
d) na`,back:"b) Velk Britnie"},{front:`Co je typickm znakem faismu?
a) Podpora demokratickho pluralismu a ochrany osobnch svobod.
b) Siln centralizovan moc, agresivn nacionalismus a autoritsk tendence.
c) Zajitn rovnosti prostednictvm redistribuce bohatstv.
d) Ochrana pracovnch prv a zjm menin.`,back:"b) Siln centralizovan moc, agresivn nacionalismus a autoritsk tendence."},{front:`Kdo z nsledujcch je pkladem politickho smlen marxismu?
a) Adam Smith
b) Karl Marx
c) John Locke
d) John Stuart Mill`,back:"b) Karl Marx"},{front:`Kter politick smr se zamuje na plnou rovnost a kolektivistick uspodn spolenosti?
a) Kapitalismus
b) Anarchismus
c) Komunismus
d) Liberalismus`,back:"c) Komunismus"},{front:`Kter z tchto politickch smr usiluje o minimalizaci vldn moci a maximln svobodu jednotlivce?
a) Anarchismus
b) Komunismus
c) Konzervatismus
d) Liberalismus`,back:"d) Liberalismus"},{front:`Kdo je povaovn za zakladatele modernho liberalismu?
a) Friedrich Engels
b) Thomas Hobbes
c) John Locke
d) Karl Marx`,back:"c) John Locke"}],stats:{totalCards:50,cardsStudied:0,averageSuccessRate:0,totalStudyTime:0,masteryLevel:"beginner",streak:0,weeklyProgress:[],difficultyDistribution:{easy:0,medium:0,hard:0},lastWeekProgress:{cardsStudied:0,averageSuccessRate:0,timeSpent:0},achievements:[],learningPath:{currentStage:1,stages:[{level:1,requiredCards:50,requiredSuccessRate:70,completed:!1}]},reviewSchedule:{nextReviewDate:new Date,reviewHistory:[],spacedRepetitionLevel:1},analytics:{bestTimeOfDay:"",averageSessionLength:0,mostChallengingCards:[],improvementRate:0,studyPatterns:[]}}}]},{id:"historie-ekonomie",name:"Modern historie a ekonomie",subcategories:[{id:"ekonomie",name:"Ekonomie",cards:[{front:`Co zdrazuje klasick ekonomie?
a) Vznam vldy v regulaci trh
b) Minimalizaci zsahu sttu do ekonomiky
c) Draz na centralizovanou ekonomiku
d) Pm ovldn ekonomiky vldou`,back:"b) Minimalizaci zsahu sttu do ekonomiky"},{front:`Kdo je hlavnm pedstavitelem monetarismu?
a) John Maynard Keynes
b) Friedrich Hayek
c) Milton Friedman
d) Karl Marx`,back:"c) Milton Friedman"},{front:`Co je klovm prvkem keynesinstv?
a) Minimalizace vldnch vdaj
b) Vldn zsahy na podporu poptvky v recesi
c) Zven nabdky na trhu
d) Neomezen trh bez regulace`,back:"b) Vldn zsahy na podporu poptvky v recesi"},{front:`Co tvrd rakousk kola ekonomie?
a) Ekonomika je zena centrlnmi plny
b) Trhy se vdy automaticky stabilizuj bez vldn pomoci
c) Ekonomika je zena vysokou inflac
d) Vznamn je zsah sttu do ekonomiky`,back:"b) Trhy se vdy automaticky stabilizuj bez vldn pomoci"},{front:`Co zdrazuje neoliberalismus?
a) Zven dan pro bohat
b) Stt by ml vrazn zasahovat do ekonomiky
c) Minimalizace role sttu v ekonomice a voln trh
d) Redistribuci bohatstv prostednictvm dan`,back:"c) Minimalizace role sttu v ekonomice a voln trh"},{front:`Jak je hlavn tma marxismu?
a) Ekonomick zisky z efektivnho vyuvn trh
b) Tdn boj mezi buroazi a proletaritem
c) Vldn zsahy k zajitn rovnosti
d) Rst prostednictvm inovac`,back:"b) Tdn boj mezi buroazi a proletaritem"},{front:`Co je hlavnm zamenm postkeynesinstv?
a) Omezovn vldnch vdaj
b) Stabilizace trh bez vldnch zsah
c) Racionalizace ekonomiky za pomoci trnho zen
d) Oekvn a nejistota jako klov faktory pro ekonomiku`,back:"d) Oekvn a nejistota jako klov faktory pro ekonomiku"},{front:`Co se zamuje na psychologick faktory ovlivujc ekonomick rozhodnut?
a) Behavioraln ekonomie
b) Keynesinstv
c) Monetarismus
d) Rakousk kola`,back:"a) Behavioraln ekonomie"},{front:`Co je kladeno za zklad ekonomie nabdky?
a) Zven dan pro firmy
b) Minimalizace zsah sttu a stimulace podnikn
c) Zajistit rovnost pjm mezi bohatmi a chudmi
d) Zven vldn kontroly nad trhem`,back:"b) Minimalizace zsah sttu a stimulace podnikn"},{front:`Co se zamuje na analzu poptvky v ekonomice?
a) Ekonomie poptvky
b) Neoliberalismus
c) Fiskln politika
d) Behaviorln ekonomie`,back:"a) Ekonomie poptvky"},{front:`Jak je hlavn zamenm institucionln ekonomie?
a) Vznam instituc jako prvn systmy nebo politick struktury
b) Omezen vldy na regulaci ekonomiky
c) Minimalizace trnch vkyv
d) Rozvoj ekonomiky prostednictvm rozpotovch deficit`,back:"a) Vznam instituc jako prvn systmy nebo politick struktury"},{front:`Co tvrd evolun ekonomie?
a) Ekonomick systmy se neustle vyvjej a mn v ase
b) Vdy je poteba stabilizace ekonomiky prostednictvm vldy
c) Ekonomika by mla bt plnovna na centrln rovni
d) Ekonomick vsledky jsou zcela ureny trnmi silami`,back:"a) Ekonomick systmy se neustle vyvjej a mn v ase"},{front:`Co je hlavnm zjmem ekonomiky blahobytu?
a) Zajitn efektivity ekonomiky na kor spravedlnosti
b) Optimln alokace zdroj mezi jednotlivci
c) Rovnovha mezi efektivitou a spravedlivm rozdlenm bohatstv
d) Snen dan pro bohat vrstvy`,back:"c) Rovnovha mezi efektivitou a spravedlivm rozdlenm bohatstv"},{front:`Co je zkladem korporativismu?
a) Vlda by mla dit vechny ekonomick aktivity
b) Ekonomick a sociln zjmy by mly bt zastupovny organizacemi
c) Ekonomika by mla bt zcela trn a nezvisl na vldnch zsazch
d) Stt by ml pln privatizovat vechny sektorov aktivity`,back:"b) Ekonomick a sociln zjmy by mly bt zastupovny organizacemi"},{front:`Co charakterizuje teorii racionln volby?
a) Ekonomick rozhodnut jsou zaloena na emonch reakcch jednotlivc
b) Jednotlivci in rozhodnut na zklad racionln analzy a maximalizace uitku
c) Stt uruje ekonomick rozhodnut pro jednotlivce
d) Ekonomick rozhodnut jsou zaloena na nhodnch faktorech`,back:"b) Jednotlivci in rozhodnut na zklad racionln analzy a maximalizace uitku"},{front:`Co je clem feministick ekonomie?
a) Podpora trn ekonomiky pro vechny
b) Analyzovat, jak ekonomick systmy ovlivuj mue a eny rzn
c) Zajitn rovnosti mezi tdami
d) Snen vznamu instituc v ekonomice`,back:"b) Analyzovat, jak ekonomick systmy ovlivuj mue a eny rzn"},{front:`Co tvrd pstup lidskho kapitlu?
a) Lidsk prce je nezbytn pro zajitn rovnosti v ekonomice
b) Investice do vzdln a kolen zvyuj produktivitu a rst
c) Ekonomika by mla bt regulovna vldnmi zsahy
d) Trhy se stabilizuj bez jakhokoli zsahu`,back:"b) Investice do vzdln a kolen zvyuj produktivitu a rst"},{front:`Co zkoum ekonomika neleglnch trh?
a) Vliv vldnch regulac na ekonomiku
b) Studuje trhy, kter jsou nelegln, jako obchod s drogami
c) Jak funguj trhy v idelnm hospodstv
d) Zpsoby, jak zvit vrobu zbo a slueb`,back:"b) Studuje trhy, kter jsou nelegln, jako obchod s drogami"},{front:`Co je clem kreativn ekonomiky?
a) Snen sttn regulace v ekonomice
b) Podpora rstu prostednictvm technologickch inovac
c) Zven kreativity a kulturnho obsahu v ekonomice
d) Podpora rozvoje tkho prmyslu`,back:"c) Zven kreativity a kulturnho obsahu v ekonomice"},{front:`Co popisuje kruh chudoby?
a) Cyklus, kdy chudoba vede k nimu vzdln a nim pjmm
b) Rst ekonomiky dky inovacm a investicm
c) Stabiln rozvoj ekonomiky, kter nezahrnuje chud regiony
d) Sniovn chudoby prostednictvm rovnch pleitost`,back:"a) Cyklus, kdy chudoba vede k nimu vzdln a nim pjmm"},{front:`Co podporuje ekonomika poptvky?
a) Snen dan pro firmy
b) Zven vldn regulace trh
c) Zvyovn poptvky v ekonomice prostednictvm vldnch stimul
d) Zamen na nabdku a vrobu zbo`,back:"c) Zvyovn poptvky v ekonomice prostednictvm vldnch stimul"},{front:`Co doporuuje rakousk kola ekonomie?
a) Regulace trh a centrln zen ekonomiky
b) Trhy by mly bt zeny podle vldnch pln
c) Voln trhy s minimlnm vldnm zsahem
d) Zajitn rovnosti ve vech oblastech ekonomiky`,back:"c) Voln trhy s minimlnm vldnm zsahem"},{front:`Co je hlavnm clem monetrn politiky?
a) Zven vldnch vdaj
b) Snen rokovch sazeb pro stimulaci ekonomiky
c) Kontrola inflace prostednictvm zen penn zsoby
d) Regulace ceny zbo a slueb na trhu`,back:"c) Kontrola inflace prostednictvm zen penn zsoby"},{front:`Co znamen termn poptvka" v mikroekonomii?
a) Celkov objem vyrobench vrobk
b) Schopnost a ochota spotebitel nakupovat zbo a sluby za uritou cenu
c) Celkov objem penz v obhu
d) Mnostv zbo, kter je k dispozici na trhu`,back:"b) Schopnost a ochota spotebitel nakupovat zbo a sluby za uritou cenu"},{front:`Co je pkladem pozitivn externality?
a) Zneitn ovzdu automobilovmi emisemi
b) Vzdln, kter zvyuje produktivitu pracovnch sil
c) Ztrta pracovnch mst v dsledku automatizace
d) Zven ceny ropy na svtovch trzch`,back:"b) Vzdln, kter zvyuje produktivitu pracovnch sil"},{front:`Co zkoum mikroekonomie?
a) Vldn regulace trh
b) Chovn jednotlivc a firem na trzch
c) Makroekonomick faktory jako inflace a nezamstnanost
d) Role sttu v rozdlovn bohatstv`,back:"b) Chovn jednotlivc a firem na trzch"},{front:`Co je to trn selhn?
a) Ppad, kdy trhy automaticky vyrovnvaj nabdku a poptvku
b) Situace, kdy trhy neprodukuj efektivn nebo spravedliv vsledky
c) Situace, kdy vlda pln reguluje trhy
d) Proces, kdy ceny na trzch stoupaj, ale ekonomika zstv stabiln`,back:"b) Situace, kdy trhy neprodukuj efektivn nebo spravedliv vsledky"},{front:`Co je definovno jako inflace?
a) Pokles cen zbo a slueb
b) Stabiln rst ekonomiky bez vkyv
c) Rst cen zbo a slueb v ekonomice
d) Stabilita mnovho kurzu`,back:"c) Rst cen zbo a slueb v ekonomice"},{front:`Co znamen termn neelastick poptvka"?
a) Kdy poptvka na zmnu ceny reaguje siln
b) Kdy poptvka na zmnu ceny reaguje minimln
c) Kdy nabdka a poptvka jsou v rovnovze
d) Kdy cena zbo nen ovlivnna poptvkou`,back:"b) Kdy poptvka na zmnu ceny reaguje minimln"},{front:`Co je charakteristick pro monopol?
a) Trh je tvoen velkm potem malch firem
b) Jedna firma dominuje na trhu a kontroluje cenu
c) Trh je zcela voln a neexistuj dn regulace
d) Poptvka je zcela nezvisl na cench`,back:"b) Jedna firma dominuje na trhu a kontroluje cenu"},{front:`Co je to marginaln uitek"?
a) pln uitek z celkovho mnostv spotebovanho zbo
b) Uitek zskan z posledn jednotky spotebovanho zbo
c) Celkov uitek vech spotebovanch statk
d) Mnostv zbo, kter je poptvno na urit cenov rovni`,back:"b) Uitek zskan z posledn jednotky spotebovanho zbo"},{front:`Co je zkladnm clem fiskln politiky?
a) Zven rokovch sazeb
b) Snen vldnch vdaj
c) Stabilizace ekonomiky prostednictvm vldnch vdaj a dan
d) Kontrola penn zsoby v ekonomice`,back:"c) Stabilizace ekonomiky prostednictvm vldnch vdaj a dan"},{front:`Co je to cena elasticity" v ekonomii?
a) Mra citlivosti poptvky na zmnu ceny
b) Mra stability ceny na trhu
c) Rychlost rstu ceny zbo
d) Mra nabdky na trhu v reakci na zmnu ceny`,back:"a) Mra citlivosti poptvky na zmnu ceny"},{front:`Co se stane, pokud se zv nabdka na trhu?
a) Ceny na trhu obvykle vzrostou
b) Poptvka klesne, protoe cena stoupne
c) Ceny na trhu obvykle klesnou, pokud poptvka zstane stejn
d) Poptvka se vbec nezmn`,back:"c) Ceny na trhu obvykle klesnou, pokud poptvka zstane stejn"},{front:`Co je to ppadn zisk" v mikroekonomii?
a) Zisk, kter firma zsk bhem krtkodob recese
b) Zisk, kter firma zsk pouze tehdy, kdy pokryje vechny sv nklady
c) Zisk, kter firma dosahuje bez ohledu na konkurenci
d) Zisk, kter me firma zskat pouze po pokryt fixnch nklad`,back:"b) Zisk, kter firma zsk pouze tehdy, kdy pokryje vechny sv nklady"},{front:`Co je to trn rovnovha"?
a) Situace, kdy nabdka je vy ne poptvka
b) Situace, kdy poptvka je vy ne nabdka
c) Situace, kdy nabdka a poptvka jsou vyveny a cena se stabilizuje
d) Situace, kdy cena na trhu neustle roste`,back:"c) Situace, kdy nabdka a poptvka jsou vyveny a cena se stabilizuje"},{front:`Co je klovm prvkem teori o zen ekonomiky podle rakousk koly?
a) Draz na centrln plnovn
b) Voln trh, kter se stabilizuje sm
c) Zsah vldy pro zajitn rovnosti
d) Draz na zvyovn vdaj sttnho rozpotu`,back:"b) Voln trh, kter se stabilizuje sm"},{front:`Co je hlavn mylenkou teorie lidskho kapitlu?
a) Lid jsou jen pracovnm nstrojem pro vrobu zbo
b) Lid by nemli investovat do vlastnho vzdln
c) Investice do vzdln a kolen zvyuj produktivitu a ekonomick rst
d) Vzdln je irrelevantn pro ekonomick rst`,back:"c) Investice do vzdln a kolen zvyuj produktivitu a ekonomick rst"},{front:`Co je to neviditeln ruka" v ekonomii?
a) Pm zsah sttu do trnho mechanismu
b) Metafora pro nevysvtliteln trn fluktuace
c) Trn mechanismus, kter vede k rovnovze prostednictvm individulnch rozhodnut
d) Zkon, kter reguluje ceny na trhu`,back:"c) Trn mechanismus, kter vede k rovnovze prostednictvm individulnch rozhodnut"},{front:`Co znamen termn zkon nabdky"?
a) Sniovn nabdky zpsob rst cen
b) Zven nabdky vede k rstu cen
c) Zven nabdky vede ke snen cen
d) Cena nezvis na nabdce`,back:"c) Zven nabdky vede ke snen cen"},{front:`Co je cena elasticity" v nabdce?
a) Mra, jak se mn nabdka zbo v reakci na zmnu ceny
b) Mra, jak se mn poptvka na trhu
c) Snen nabdky pi poklesu ceny
d) Jak mnostv zbo je dostupn za stabiln cenu`,back:"a) Mra, jak se mn nabdka zbo v reakci na zmnu ceny"},{front:`Co je hlavn vhodou konkurence na trhu?
a) Zaruuje stabiln ceny pro vrobce
b) Zvyuje efektivitu a inovace, co vede ke zlepen slueb a cen
c) Umouje monopolm kontrolovat trh
d) Sniuje vbr pro spotebitele`,back:"b) Zvyuje efektivitu a inovace, co vede ke zlepen slueb a cen"},{front:`Co znamen pojem alternativn nklady"?
a) Nklady spojen s vrobou produktu pro konkurenci
b) Hodnota nejlep alternativy, kterou obtujeme pi rozhodovn
c) Skryt cena, kter nen vyjdena v penzch
d) Nklady na zajitn vru`,back:"b) Hodnota nejlep alternativy, kterou obtujeme pi rozhodovn"},{front:`Co je charakteristick pro oligopol?
a) Trh je dominovn mnoha malmi firmami
b) Existuje pouze jeden dominantn producent
c) Trh je tvoen malm potem velkch firem, kter maj znanou trn slu
d) Ceny na trhu jsou zcela nezvisl na nabdce a poptvce`,back:"c) Trh je tvoen malm potem velkch firem, kter maj znanou trn slu"},{front:`Co je to kivka nabdky"?
a) Graf zobrazujc vztah mezi cenou a mnostvm zbo, kter jsou spotebitel ochotni koupit
b) Graf zobrazujc vztah mezi cenou a mnostvm zbo, kter jsou vrobci ochotni nabdnout
c) Graf zobrazujc rst ekonomiky
d) Graf zobrazujc vdaje vldy`,back:"b) Graf zobrazujc vztah mezi cenou a mnostvm zbo, kter jsou vrobci ochotni nabdnout"},{front:`Co je opportunity cost"?
a) Pleitost, kterou ztratte pi investovn
b) Cena, kterou zaplatte za patn rozhodnut
c) Alternativn hodnota pleitosti, kterou muste obtovat
d) Vnosy z investice do nemovitosti`,back:"c) Alternativn hodnota pleitosti, kterou muste obtovat"}],stats:{totalCards:50,cardsStudied:0,averageSuccessRate:0,totalStudyTime:0,masteryLevel:"beginner",streak:0,weeklyProgress:[],difficultyDistribution:{easy:0,medium:0,hard:0},lastWeekProgress:{cardsStudied:0,averageSuccessRate:0,timeSpent:0},achievements:[],learningPath:{currentStage:1,stages:[{level:1,requiredCards:50,requiredSuccessRate:70,completed:!1}]},reviewSchedule:{nextReviewDate:new Date,reviewHistory:[],spacedRepetitionLevel:1},analytics:{bestTimeOfDay:"",averageSessionLength:0,mostChallengingCards:[],improvementRate:0,studyPatterns:[]}}},{id:"moderni-historie",name:"Modern historie",cards:[{front:`Kdo byl britskm premirem bhem prvn svtov vlky?
a) Neville Chamberlain
b) Winston Churchill
c) David Lloyd George
d) Clement Attlee`,back:"c) David Lloyd George"},{front:`Co znamenal Versailsk mr?
a) Ukonil druhou svtovou vlku
b) Stanovil podmnky mru mezi Nmeckem a jeho spojenci
c) Stanovil podmnky mru mezi Nmeckem a Spojenci po prvn svtov vlce
d) Uzavel pakt mezi USA a Sovtskm svazem`,back:"c) Stanovil podmnky mru mezi Nmeckem a Spojenci po prvn svtov vlce"},{front:`Kdo byl hlavnm pedstavitelem bolevik bhem rusk revoluce v roce 1917?
a) Lev Trockij
b) Josif Stalin
c) Vladimir Lenin
d) Nikita Chruov`,back:"c) Vladimir Lenin"},{front:`Kdy vypukla prvn svtov vlka?
a) 1912
b) 1914
c) 1916
d) 1918`,back:"b) 1914"},{front:`Co byla Sdruen nrod (SN)?
a) Mezinrodn organizace pro rozvoj ekonomickch vztah
b) Politick organizace pro udren mru a bezpenosti po prvn svtov vlce
c) Organizace pro pomoc uprchlkm po druh svtov vlce
d) Mezinrodn banka pro obnovu a rozvoj`,back:"b) Politick organizace pro udren mru a bezpenosti po prvn svtov vlce"},{front:`Kdo byl hlavnm autorem "Mein Kampf"?
a) Hermann Gring
b) Joseph Goebbels
c) Adolf Hitler
d) Rudolf Hess`,back:"c) Adolf Hitler"},{front:`Kdy byla podepsna Mnichovsk dohoda?
a) 1935
b) 1938
c) 1940
d) 1945`,back:"b) 1938"},{front:`Co zpsobilo vypuknut prvn svtov vlky?
a) Napoleonovy vojensk vpravy
b) Rozdlen Evropy mezi velmoci
c) Atentt na Frantika Ferdinanda d'Este
d) Vznik Sdruen nrod`,back:"c) Atentt na Frantika Ferdinanda d'Este"},{front:`Kdo byl pedsedou vldy bhem velk hospodsk krize ve Spojench sttech?
a) Harry S. Truman
b) Franklin D. Roosevelt
c) Herbert Hoover
d) Lyndon B. Johnson`,back:"b) Franklin D. Roosevelt"},{front:`Co znamen termn "New Deal"?
a) Nov hospodsk pakt mezi USA a Sovtskm svazem
b) Sada ekonomickch a socilnch reforem bhem velk hospodsk krize v USA
c) Pln pro obnovu Evropy po druh svtov vlce
d) Politika zpadnch stt vi n v 30. letech`,back:"b) Sada ekonomickch a socilnch reforem bhem velk hospodsk krize v USA"},{front:`Kdy byla podepsna Locarnsk dohoda?
a) 1919
b) 1925
c) 1932
d) 1939`,back:"b) 1925"},{front:`Co znamenal Pakt Molotov-Ribbentrop?
a) Spojenectv mezi Nmeckem a Itli
b) Pakt mezi Nmeckem a Sovtskm svazem o netoen a o rozdlen Polska
c) Dohoda o rozdlen Rakouska mezi Nmecko a Sovtsk svaz
d) Politick dohoda o podpoe Velk Britnie`,back:"b) Pakt mezi Nmeckem a Sovtskm svazem o netoen a o rozdlen Polska"},{front:`Kdo byl "mu v ernm" v prvn svtov vlce?
a) Ludendorff
b) Winston Churchill
c) Erwin Rommel
d) Paul von Hindenburg`,back:"d) Paul von Hindenburg"},{front:`Co byla "Velk erven" revoluce?
a) Obansk vlka v Rusku
b) Revoluce v Mexiku
c) Komunistick revoluce v n
d) Nmeck revoluce v roce 1918`,back:"a) Obansk vlka v Rusku"},{front:`Kdo byl francouzskm prezidentem bhem prvn svtov vlky?
a) Georges Clemenceau
b) Charles de Gaulle
c) Ren Coty
d) Franois Hollande`,back:"a) Georges Clemenceau"},{front:`Kdy byla podepsna Versaillesk mrov smlouva?
a) 1919
b) 1923
c) 1930
d) 1945`,back:"a) 1919"},{front:`Kter zem se pipojila k Trojitmu paktu v roce 1940?
a) eskoslovensko
b) Polsko
c) Maarsko
d) Rakousko`,back:"c) Maarsko"},{front:`Co byla hlavn pina vypuknut druh svtov vlky?
a) Nacistick expanze a invaze do Polska
b) Atentt na Frantika Ferdinanda
c) Pd Berlnsk zdi
d) Krize v Africe`,back:"a) Nacistick expanze a invaze do Polska"},{front:`Co bylo Mnichovskou dohodou?
a) Politick uspodn po prvn svtov vlce
b) Dohoda o rozdln eskoslovenska mezi Nmecko, Itlii a Francii
c) Dohoda, kter mla zachovat mr v Evrop, ale umonila Nmecku anektovat Sudety
d) Smlouva, kter vystila ve vznik Varavsk smlouvy`,back:"c) Dohoda, kter mla zachovat mr v Evrop, ale umonila Nmecku anektovat Sudety"},{front:`Kdy zaala druh svtov vlka?
a) 1938
b) 1939
c) 1940
d) 1941`,back:"b) 1939"},{front:`Kter organizace vznikla po prvn svtov vlce s clem udret mr v Evrop?
a) OSN
b) NATO
c) Sdruen nrod
d) WTO`,back:"c) Sdruen nrod"},{front:`Kdy se konal prvn "Zimn konflikt" mezi Sovtskm svazem a Finskem?
a) 1939-1940
b) 1941-1945
c) 1929-1931
d) 1914`,back:"a) 1939-1940"},{front:`Kdo byl autorem knihy "Mein Kampf"?
a) Heinrich Himmler
b) Adolf Hitler
c) Joseph Goebbels
d) Albert Speer`,back:"b) Adolf Hitler"},{front:`Kter zemi patil Mandt nad Palestinou?
a) Velk Britnie
b) Francie
c) Nmecko
d) Spojen stty`,back:"a) Velk Britnie"},{front:`Co bylo vsledkem Versaillesk smlouvy?
a) Potrestn Nmecka a rozdlen jeho zem
b) Vytvoen Evropsk unie
c) Spojen Nmecka a Rakouska
d) Vznik Nmeck e`,back:"a) Potrestn Nmecka a rozdlen jeho zem"},{front:`Co znamen "Mnchensk diktt"?
a) Diktt v roce 1939, kter zavedl Nacistickou vldu
b) Pakt, kter povolil Hitlerovi anektovat st eskoslovenska
c) Dohoda, kter vedla k ukonen prvn svtov vlky
d) Pkaz, kter vyhlsil druhou svtovou vlku`,back:"b) Pakt, kter povolil Hitlerovi anektovat st eskoslovenska"},{front:`Co znamen pojem "Velk hospodsk krize"?
a) Doba rychlho hospodskho rstu ve 30. letech
b) Krize zpsoben kolapsem akciovho trhu v roce 1929
c) Krize spojen s vbuchem evropsk ekonomiky
d) Obdob, kdy byla svtov ekonomika stabiln`,back:"b) Krize zpsoben kolapsem akciovho trhu v roce 1929"},{front:`Kdo byl hlavnm pedstavitelem "Novho dlu"?
a) Herbert Hoover
b) Franklin D. Roosevelt
c) Winston Churchill
d) George Marshall`,back:"b) Franklin D. Roosevelt"},{front:`Kdy dolo k vypuknut Korejsk vlky?
a) 1945
b) 1950
c) 1955
d) 1960`,back:"b) 1950"},{front:`Co bylo vsledkem Korejsk vlky?
a) Korejsk poloostrov byl sjednocen pod komunistickm reimem
b) Korejsk poloostrov byl sjednocen pod kapitalistickm reimem
c) Korejsk poloostrov zstal rozdlen na Severn a Jin Koreu
d) Korea byla rozdlen mezi USA a Sovtsk svaz`,back:"c) Korejsk poloostrov zstal rozdlen na Severn a Jin Koreu"},{front:`Kdy byla postavena Berlnsk ze?
a) 1949
b) 1955
c) 1961
d) 1975`,back:"c) 1961"},{front:`Co symbolizovala Berlnsk ze?
a) Rozdlen svta mezi kapitalismus a socialismus
b) Sjednocen Nmecka
c) Vznik Evropsk unie
d) Mr mezi vchodnm a zpadnm blokem`,back:"a) Rozdlen svta mezi kapitalismus a socialismus"},{front:`Kdy byla podepsna Helsinsk dohoda?
a) 1972
b) 1975
c) 1980
d) 1985`,back:"b) 1975"},{front:`Co znamenala Helsinsk dohoda?
a) Mrovou dohodu mezi USA a Sovtskm svazem
b) Dohodu o evropsk bezpenosti a spoluprci
c) Dohodu o rozdlen Evropy mezi vchodn a zpadn blok
d) Dohodu o vstupu Britnie do Evropsk unie`,back:"b) Dohodu o evropsk bezpenosti a spoluprci"},{front:`Kdo byl ldrem Sovtskho svazu bhem Kubnsk raketov krize?
a) Leonid Brenv
b) Nikita Chruov
c) Josef Stalin
d) Mikhail Gorbaov`,back:"b) Nikita Chruov"},{front:`Kdy dolo k kubnsk raketov krizi?
a) 1960
b) 1962
c) 1965
d) 1970`,back:"b) 1962"},{front:`Co bylo pinou kubnsk raketov krize?
a) Sovtsk svaz umstil jadern rakety na Kub
b) USA napadly Kubu
c) Kuba uzavela pakt s NATO
d) Sovtsk svaz anektoval Kubu`,back:"a) Sovtsk svaz umstil jadern rakety na Kub"},{front:`Kdy se k vietnamsk vlce pipojilo USA?
a) 1950
b) 1960
c) 1965
d) 1970`,back:"c) 1965"},{front:`Co bylo vsledkem vietnamsk vlky?
a) Vietnam zstal rozdlen mezi Severn a Jin Vietnam
b) Jin Vietnam padl a Vietnam se sjednotil pod komunistickou vldou
c) Jin Vietnam se stal americkm protektortem
d) Vietnam se pipojil k Sovtskmu svazu`,back:"b) Jin Vietnam padl a Vietnam se sjednotil pod komunistickou vldou"},{front:`Kdy skonila vietnamsk vlka?
a) 1973
b) 1975
c) 1980
d) 1985`,back:"b) 1975"},{front:`Co znamenal pd Berlnsk zdi v roce 1989?
a) Konec studen vlky a zatek sjednocen Nmecka
b) Zatek studen vlky
c) Zaloen Evropsk unie
d) Vytvoen Varavsk smlouvy`,back:"a) Konec studen vlky a zatek sjednocen Nmecka"},{front:`Co bylo clem Marshallova plnu?
a) Podpora rozvoje socialistickch stt
b) Obnova ekonomiky po druh svtov vlce v zpadn Evrop
c) Vytvoen nov vojensk aliance
d) Rozdlen Nmecka`,back:"b) Obnova ekonomiky po druh svtov vlce v zpadn Evrop"},{front:`Kdy byla podepsna Pask dohoda o Vietnamu?
a) 1965
b) 1970
c) 1973
d) 1975`,back:"c) 1973"},{front:`Kdo byl prvnm prezidentem Francie po druh svtov vlce?
a) Charles de Gaulle
b) Franois Mitterrand
c) Jacques Chirac
d) Georges Pompidou`,back:"a) Charles de Gaulle"},{front:`Kdy zaala studen vlka?
a) 1945
b) 1947
c) 1950
d) 1960`,back:"b) 1947"},{front:`Kdy byl zaloen NATO?
a) 1945
b) 1949
c) 1955
d) 1960`,back:"b) 1949"},{front:`Co bylo clem NATO?
a) Zajistit hospodsk rozvoj
b) Zajistit vojenskou ochranu zpadnch stt ped sovtskou hrozbou
c) Vytvoen jednotnho evropskho trhu
d) Sjednocen zpadn Evropy`,back:"b) Zajistit vojenskou ochranu zpadnch stt ped sovtskou hrozbou"},{front:`Kdy dolo k vypuknut vojensk intervence v Koreji?
a) 1950
b) 1953
c) 1955
d) 1960`,back:"a) 1950"},{front:`Co byla Kultura a politika Khrushchova?
a) Nastolen mrov politiky a uvolnn napt mezi Vchodem a Zpadem
b) Pprava na jadernou vlku
c) Zhoren vztah mezi USA a Sovtskm svazem
d) Uzaven hranic a totalitn reim`,back:"a) Nastolen mrov politiky a uvolnn napt mezi Vchodem a Zpadem"},{front:`Kdy byla podepsna Charta OSN?
a) 1945
b) 1950
c) 1955
d) 1960`,back:"a) 1945"},{front:`Kdy vznikla Evropsk hospodsk spoleenstv (EHS)?
a) 1947
b) 1957
c) 1961
d) 1967`,back:"b) 1957"},{front:`Co znamenala termn "perestrojka"?
a) Program pro rozvoj jadern energetiky v Sovtskm svazu
b) Ekonomick a politick reformy iniciovan Michalem Gorbaovem
c) Zmna nzvu pro Sovtsk svaz
d) Nov vojensk doktrna Sovtskho svazu`,back:"b) Ekonomick a politick reformy iniciovan Michalem Gorbaovem"},{front:`Co znamenala termn "glasnos"?
a) Zven vojensk vkonnosti Sovtskho svazu
b) Politika vtho oteven a svobody projevu v Sovtskm svazu
c) Zaveden nov hospodsk politiky v Sovtskm svazu
d) Zahranin politika Sovtskho svazu vi Zpadu`,back:"b) Politika vtho oteven a svobody projevu v Sovtskm svazu"},{front:`Co bylo zmrem Brenvovy doktrny?
a) Podpora komunistickch revoluc v zpadnch zemch
b) Osvobozen stt pod sovtskou nadvldou
c) Prvo Sovtskho svazu zasahovat v socialistickch zemch, pokud dojde k ohroen socialismu
d) Zabrnn en kapitalismu vchodn Evropou`,back:"c) Prvo Sovtskho svazu zasahovat v socialistickch zemch, pokud dojde k ohroen socialismu"},{front:`Co bylo pinou vlky ve Vietnamu?
a) Konflikt mezi komunistickm severem a antikomunistickm jihem Vietnamu
b) Nmeck tok na Vietnam
c) Boj o nezvislost mezi Vietnamem a Franci
d) Zsah USA proti nsk invazi`,back:"a) Konflikt mezi komunistickm severem a antikomunistickm jihem Vietnamu"},{front:`Kdy dolo k pdu Sovtskho svazu?
a) 1985
b) 1991
c) 1995
d) 2000`,back:"b) 1991"}],stats:{totalCards:50,cardsStudied:0,averageSuccessRate:0,totalStudyTime:0,masteryLevel:"beginner",streak:0,weeklyProgress:[],difficultyDistribution:{easy:0,medium:0,hard:0},lastWeekProgress:{cardsStudied:0,averageSuccessRate:0,timeSpent:0},achievements:[],learningPath:{currentStage:1,stages:[{level:1,requiredCards:50,requiredSuccessRate:70,completed:!1}]},reviewSchedule:{nextReviewDate:new Date,reviewHistory:[],spacedRepetitionLevel:1},analytics:{bestTimeOfDay:"",averageSessionLength:0,mostChallengingCards:[],improvementRate:0,studyPatterns:[]}}},{id:"evropska-integrace",name:"Evropsk integrace",cards:[{front:`Kdy byla zaloena Evropsk hospodsk spoleenstv (EHS)?
a) 1957
b) 1960
c) 1950
d) 1965`,back:"a) 1957"},{front:`Kdy byl podepsn Maastrichtsk smlouva?
a) 1992
b) 1990
c) 1995
d) 1989`,back:"a) 1992"},{front:`Kdy vstoupilo eskoslovensko do EU?
a) 2004
b) 2000
c) 2008
d) 2010`,back:"a) 2004"},{front:`Kdy byl zaveden euro?
a) 2002
b) 2000
c) 2005
d) 1999`,back:"a) 2002"},{front:`Kdy byla podepsna Lisabonsk smlouva?
a) 2007
b) 2005
c) 2010
d) 2009`,back:"a) 2007"},{front:`Kdy vstoupilo Chorvatsko do EU?
a) 2013
b) 2010
c) 2015
d) 2012`,back:"a) 2013"},{front:`Kdy Velk Britnie opustila EU?
a) 2020
b) 2019
c) 2021
d) 2018`,back:"a) 2020"},{front:`Kdy byla podepsna Schengensk dohoda?
a) 1985
b) 1990
c) 1980
d) 1995`,back:"a) 1985"},{front:`Kdy vstoupily Bulharsko a Rumunsko do EU?
a) 2007
b) 2005
c) 2010
d) 2009`,back:"a) 2007"},{front:`Kdy byla podepsna msk smlouva?
a) 1957
b) 1960
c) 1950
d) 1965`,back:"a) 1957"}],stats:{totalCards:10,cardsStudied:0,averageSuccessRate:0,totalStudyTime:0,masteryLevel:"beginner",streak:0,weeklyProgress:[],difficultyDistribution:{easy:0,medium:0,hard:0},lastWeekProgress:{cardsStudied:0,averageSuccessRate:0,timeSpent:0},achievements:[],learningPath:{currentStage:1,stages:[{level:1,requiredCards:10,requiredSuccessRate:70,completed:!1}]},reviewSchedule:{nextReviewDate:new Date,reviewHistory:[],spacedRepetitionLevel:1},analytics:{bestTimeOfDay:"",averageSessionLength:0,mostChallengingCards:[],improvementRate:0,studyPatterns:[]}}}]}],jw=({onCategorySelect:n,darkMode:e=!1,selectedCategory:t})=>{const[r,i]=te.useState(null);te.useEffect(()=>{const c=Iz(Ye,h=>{i(h)});return()=>c()},[]);const a=async()=>{try{const c=await Uz(Ye,Hz);console.log("Login successful:",c)}catch(c){console.error("Google login failed:",c),c.code&&(console.error("Error code:",c.code),console.error("Error message:",c.message)),c.customData&&console.error("Custom data:",c.customData)}},l=th.map(c=>({id:c.id,name:c.name,color:c.id==="general"?e?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600":c.id==="pravo-politologie"?e?"bg-green-600 hover:bg-green-700":"bg-green-500 hover:bg-green-600":e?"bg-purple-600 hover:bg-purple-700":"bg-purple-500 hover:bg-purple-600"}));return r?t?E.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-8rem)] p-4",children:[E.jsx("h2",{className:`text-2xl sm:text-4xl font-bold ${e?"text-white":"text-gray-800"} mb-4 sm:mb-8 text-center`,children:t.name}),E.jsx("p",{className:`text-lg sm:text-xl ${e?"text-gray-300":"text-gray-600"} mb-6 sm:mb-12 text-center`,children:"Vyberte si podkategorii pro studium"}),E.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 w-full max-w-6xl",children:t.subcategories.map(c=>E.jsxs("button",{onClick:()=>n(c.id),className:`
                group relative overflow-hidden
                rounded-xl p-4 sm:p-6 shadow-lg 
                transition-all duration-300 ease-out
                transform hover:scale-[1.02]
                ${e?"bg-gray-800 hover:bg-gray-700":"bg-white hover:bg-gray-50"}
              `,children:[E.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[E.jsx("h3",{className:`text-xl sm:text-2xl font-bold mb-2 sm:mb-3 ${e?"text-white":"text-gray-900"}`,children:c.name}),E.jsxs("div",{className:`flex items-center gap-2 mt-auto ${e?"text-blue-400":"text-blue-600"}`,children:[E.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),E.jsxs("span",{className:"text-base sm:text-lg font-medium",children:[c.cards.length," kartiek"]})]})]}),E.jsx("div",{className:`
                  absolute bottom-0 left-0 right-0 h-1 
                  transform origin-left transition-transform duration-300
                  ${e?"bg-blue-500":"bg-blue-600"}
                  scale-x-0 group-hover:scale-x-100
                `})]},c.id))})]}):E.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-8rem)]",children:[E.jsxs("h2",{className:`text-4xl font-bold ${e?"text-white":"text-gray-800"} mb-8`,children:["Vtejte, ",r.displayName,"!"]}),E.jsx("p",{className:`text-xl ${e?"text-gray-300":"text-gray-600"} mb-12`,children:"Vyberte si kategorii pro zatek uen"}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:l.map(c=>E.jsxs("button",{onClick:()=>n(c.id),className:`${c.color} text-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-all duration-200 transform hover:-translate-y-1`,children:[E.jsx("h3",{className:"text-2xl font-semibold mb-4",children:c.name}),E.jsxs("p",{className:"text-white/90",children:["Zat uen ",c.name.toLowerCase()]})]},c.id))})]}):E.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-8rem)]",children:[E.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[E.jsx("h2",{className:`text-4xl font-bold ${e?"text-white":"text-gray-800"}`,children:"Vtejte ve Flashcards!"}),E.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-yellow-500 text-white",children:"BETA"}),E.jsx("span",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"v1.17"})]}),E.jsx("p",{className:`text-xl ${e?"text-gray-300":"text-gray-600"} mb-12`,children:"Pihlaste se pro zatek uen"}),E.jsxs("button",{onClick:a,className:"flex items-center justify-center gap-3 bg-white text-gray-700 rounded-lg px-6 py-3 shadow-md hover:shadow-lg transition-all duration-200 border border-gray-300 hover:bg-gray-50",children:[E.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[E.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),E.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),E.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),E.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),E.jsx("span",{className:"font-medium",children:"Sign in with Google"})]})]})},DM=({onCorrectPassword:n,darkMode:e})=>{const[t,r]=te.useState(""),[i,a]=te.useState(!1),[l,c]=te.useState(!1),[h,p]=te.useState(!1),y=_=>{_.preventDefault(),console.log("Password submitted:",t),t==="fenomen"?(p(!0),localStorage.setItem("manualAuth","true"),k()):(console.log("Password incorrect"),a(!0),r(""))},k=async()=>{c(!0),console.log("Starting Google login process...");try{const _=await Uz(Ye,Hz);console.log("Google login successful:",_.user.uid),localStorage.setItem("currentUserId",_.user.uid),n()}catch(_){console.error("Google login failed:",_),a("Google login failed. Please try again.")}finally{c(!1)}};return E.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh] px-4 sm:px-6 lg:px-8",children:E.jsxs("div",{className:`p-6 sm:p-8 rounded-xl shadow-lg ${e?"bg-gray-800":"bg-white"} w-full max-w-sm mx-auto`,children:[E.jsx("h2",{className:`text-xl sm:text-2xl font-bold mb-6 text-center ${e?"text-white":"text-gray-900"}`,children:"Vtejte ve Flashcards"}),E.jsx("p",{className:`text-sm sm:text-base text-center mb-8 ${e?"text-gray-300":"text-gray-600"}`,children:"Pro pokraovn zadejte heslo"}),E.jsxs("form",{onSubmit:y,children:[E.jsxs("div",{children:[E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:"password",value:t,onChange:_=>{r(_.target.value),a(!1)},className:`w-full px-4 py-3 rounded-lg border text-base sm:text-lg ${i?"border-red-500":e?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200`,placeholder:"Zadejte heslo",autoComplete:"current-password",disabled:l||h}),i&&E.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:E.jsx("svg",{className:"h-5 w-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),i&&E.jsx("p",{className:"text-red-500 text-sm mt-2 text-center",children:"Nesprvn heslo nebo chyba pi pihlen. Zkuste to prosm znovu."})]}),h?E.jsxs("div",{className:"mt-6 text-center",children:[E.jsx("p",{className:`text-sm ${e?"text-gray-300":"text-gray-600"} mb-4`,children:"Heslo oveno. Pihlaovn pomoc Google..."}),E.jsx("div",{className:"animate-spin mx-auto h-8 w-8 border-t-2 border-b-2 border-blue-500 rounded-full"})]}):E.jsx("button",{type:"submit",disabled:l,className:`w-full mt-6 py-3 px-4 rounded-lg text-base sm:text-lg font-medium ${l?e?"bg-blue-800 cursor-not-allowed":"bg-blue-400 cursor-not-allowed":e?"bg-blue-600 hover:bg-blue-700 active:bg-blue-800":"bg-blue-500 hover:bg-blue-600 active:bg-blue-700"} text-white transition-colors duration-200 transform hover:scale-[1.02] active:scale-[0.98]`,children:l?"Pihlaovn...":"Vstoupit do aplikace"})]})]})})},OM=({darkMode:n,onClose:e})=>{const[t,r]=te.useState(1),i=3,a=[{title:"Vtejte ve Flashcards!",content:"Tato aplikace vm pome uit se a zapamatovat si informace pomoc kartiek. Pojme se podvat, jak to funguje.",icon:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},{title:"Vyberte si kategorii",content:"Zante vbrem kategorie kartiek, kterou chcete studovat. Kad kategorie obsahuje sadu kartiek zamench na konkrtn tma.",icon:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})},{title:"Studujte a ute se",content:"Kliknte na kartiky pro jejich pevrcen a zobrazen odpovdi. Pouijte navigan tlatka pro pohyb mezi kartikami. Pepnn tmavho reimu vm pome pohodln studovat za jakhokoliv osvtlen.",icon:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}],l=te.useCallback(()=>{t<i?r(t+1):e()},[t,i,e]),c=te.useCallback(()=>{t>1&&r(t-1)},[t]);return te.useEffect(()=>{const h=p=>{p.key==="ArrowRight"||p.key==="Enter"?l():p.key==="ArrowLeft"?c():p.key==="Escape"&&e()};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[l,c,e]),E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:h=>{h.target===h.currentTarget&&e()},children:E.jsx("div",{className:`
        ${n?"bg-gray-800 text-white":"bg-white text-gray-900"}
        max-w-md w-full rounded-xl shadow-2xl p-6 sm:p-8
        transform transition-all duration-300 ease-out
        translate-y-0 scale-100 opacity-100
      `,children:E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("h2",{className:"text-xl sm:text-2xl font-bold flex items-center gap-3",children:[E.jsx("span",{className:`${n?"text-blue-400":"text-blue-600"}`,children:a[t-1].icon}),a[t-1].title]}),E.jsx("button",{onClick:e,className:`p-2 rounded-full hover:bg-opacity-10 ${n?"hover:bg-white":"hover:bg-black"}`,children:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),E.jsx("p",{className:`text-base ${n?"text-gray-300":"text-gray-600"}`,children:a[t-1].content}),E.jsxs("div",{className:"flex flex-col gap-4",children:[E.jsx("div",{className:"flex justify-center gap-2",children:Array.from({length:i}).map((h,p)=>E.jsx("button",{onClick:()=>r(p+1),className:`
                    h-1.5 rounded-full transition-all duration-200
                    ${p+1===t?"w-8 bg-blue-500":"w-2 "+(n?"bg-gray-600":"bg-gray-300")}
                  `,"aria-label":`Pejt na krok ${p+1}`},p))}),E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsx("button",{onClick:c,className:`
                  px-4 py-2 rounded-lg text-sm
                  transition-colors duration-200
                  ${t===1?"invisible":"visible"}
                  ${n?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"}
                `,children:" Zpt"}),E.jsxs("span",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:["Krok ",t," z ",i]}),E.jsx("button",{onClick:l,className:`
                  px-6 py-2 rounded-lg text-sm font-medium
                  transition-all duration-200
                  transform hover:scale-[1.02] active:scale-[0.98]
                  ${n?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}
                `,children:t===i?"Zat ":"Dal "})]})]})]})})})},ya=({children:n,text:e,position:t="bottom",darkMode:r})=>{const i={top:"bottom-full mb-2",bottom:"top-full mt-2",left:"right-full mr-2",right:"left-full ml-2"};return E.jsxs("div",{className:"relative group",children:[n,E.jsx("div",{className:`
        absolute ${i[t]} z-50
        w-48 p-2 rounded-lg text-sm
        opacity-0 group-hover:opacity-100
        transition-opacity duration-300
        pointer-events-none
        ${r?"bg-gray-800 text-white":"bg-white text-gray-800"}
        shadow-lg border ${r?"border-gray-700":"border-gray-200"}
      `,children:E.jsxs("div",{className:"relative",children:[e,E.jsx("div",{className:`
            absolute w-2 h-2 transform rotate-45
            ${r?"bg-gray-800":"bg-white"}
            ${t==="top"?"bottom-[-4px] left-1/2 ml-[-4px] border-r border-b":""}
            ${t==="bottom"?"top-[-4px] left-1/2 ml-[-4px] border-l border-t":""}
            ${t==="left"?"right-[-4px] top-1/2 mt-[-4px] border-r border-t":""}
            ${t==="right"?"left-[-4px] top-1/2 mt-[-4px] border-l border-b":""}
            ${r?"border-gray-700":"border-gray-200"}
          `})]})})]})};function MM(){const[n,e]=te.useState(null),[t,r]=te.useState(null),[i,a]=te.useState(null),[l,c]=te.useState(!1),[h,p]=te.useState(!1),[y,k]=te.useState(!1),[_,S]=te.useState(!1),[C,N]=te.useState(!1),[M,q]=te.useState(!1),[G,Q]=te.useState(null),[re,ee]=te.useState(!1);te.useEffect(()=>{const Ve=Iz(Ye,ve=>{if(Q(ve),ve){console.log("User is already signed in:",ve.uid),console.log("Authentication method:",ve.providerId||"unknown"),localStorage.setItem("currentUserId",ve.uid),p(!0);const Z=localStorage.getItem("lastCategory"),ge=localStorage.getItem("lastSubcategory");if(Z){const ae=th.find(L=>L.id===Z);ae&&(e(Z),a(ae),ge&&ae.subcategories.some($=>$.id===ge)&&r(ge))}}else console.log("No user is signed in"),localStorage.getItem("manualAuth")==="true"?(console.log("Using manual authentication"),p(!0)):(p(!1),e(null),r(null),a(null));N(!0)});return()=>Ve()},[]),te.useEffect(()=>{n?(localStorage.setItem("lastCategory",n),t?localStorage.setItem("lastSubcategory",t):localStorage.removeItem("lastSubcategory")):(localStorage.removeItem("lastCategory"),localStorage.removeItem("lastSubcategory"))},[n,t]),te.useEffect(()=>{const Ve=localStorage.getItem("darkMode"),ve=localStorage.getItem("hasSeenGuide");if(Ve)c(Ve==="true");else{const Z=window.matchMedia("(prefers-color-scheme: dark)").matches;c(Z)}ve&&S(!0)},[]),te.useEffect(()=>{h&&!_&&k(!0)},[h,_]),te.useEffect(()=>{localStorage.setItem("darkMode",l.toString()),l?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[l]);const se=()=>{k(!1),S(!0),localStorage.setItem("hasSeenGuide","true")},P=()=>{k(!0)},z=Ve=>{console.log(`handleCategorySelect called with categoryId: ${Ve}`),console.log("Available categories:",th.map(Z=>Z.id)),e(Ve);const ve=th.find(Z=>Z.id===Ve);console.log("Selected set:",ve),a(ve||null),r(null)},j=Ve=>{if(console.log(`handleSubcategorySelect called with subcategoryId: ${Ve}`),i){console.log("Available subcategories:",i.subcategories.map(Z=>Z.id));const ve=i.subcategories.find(Z=>Z.id===Ve);console.log("Selected subcategory:",ve)}r(Ve)},A=()=>{n&&t&&(console.log(`Saving state before navigating back. Category: ${n}, Subcategory: ${t}`),console.log("Navigating back to categories - this should trigger FlashcardDeck unmount save")),e(null),r(null),a(null)},V=()=>{c(Ve=>!Ve)},O=async()=>{try{await BR(Ye),p(!1),q(!1),localStorage.removeItem("manualAuth"),localStorage.removeItem("currentUserId")}catch(Ve){console.error("Error signing out:",Ve)}},I=()=>{ee(!0),q(!1)},Qe=()=>{ee(!1)},rt=()=>E.jsx("header",{className:`${l?"bg-gray-800 shadow-gray-900":"bg-white shadow-sm"} transition-colors duration-200 sticky top-0 z-10`,children:E.jsx("div",{className:"max-w-7xl mx-auto py-4 sm:py-6 px-4 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 sm:gap-0",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx(ya,{text:"Vtejte v aplikaci flashcards! Zante vbrem kategorii ne.",darkMode:l,position:"bottom",children:E.jsxs("h1",{className:`text-2xl sm:text-3xl font-bold ${l?"text-white":"text-gray-900"} truncate flex items-center gap-2`,children:["Flashcards App",E.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-yellow-500 text-white",children:"BETA"}),E.jsx("span",{className:`text-sm font-normal ${l?"text-gray-400":"text-gray-500"}`,children:"v1.17"})]})}),E.jsxs("div",{className:"flex items-center gap-2 sm:hidden",children:[E.jsx(ya,{text:"Need help? Click to see the guide again",darkMode:l,position:"left",children:E.jsx("button",{onClick:P,className:`p-2 rounded-full ${l?"bg-gray-700 text-blue-400 hover:text-blue-300":"bg-gray-200 text-blue-600 hover:text-blue-700"}`,"aria-label":"Show help guide",children:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),E.jsx(ya,{text:"Toggle between light and dark mode for comfortable viewing",darkMode:l,position:"left",children:E.jsx("button",{onClick:V,className:`p-2 rounded-full ${l?"bg-gray-700 text-yellow-300":"bg-gray-200 text-gray-700"}`,"aria-label":"Toggle dark mode",children:l?E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})})]})]}),E.jsxs("div",{className:"flex items-center justify-end gap-4",children:[E.jsx(ya,{text:"Need help? Click to see the guide again",darkMode:l,position:"bottom",children:E.jsxs("button",{onClick:P,className:`hidden sm:flex items-center gap-2 px-4 py-2 rounded-lg transition-colors duration-200 ${l?"bg-gray-700 text-blue-400 hover:text-blue-300":"bg-gray-200 text-blue-600 hover:text-blue-700"}`,children:[E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),E.jsx("span",{className:"text-sm",children:"Help"})]})}),h&&G&&E.jsxs("div",{className:"relative",children:[E.jsxs("button",{onClick:()=>q(!M),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors duration-200 ${l?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),E.jsx("span",{className:"text-sm truncate max-w-[100px]",children:G.displayName||G.email})]}),M&&E.jsx("div",{className:`absolute right-0 mt-2 w-48 rounded-md shadow-lg ${l?"bg-gray-700":"bg-white"} ring-1 ring-black ring-opacity-5`,children:E.jsxs("div",{className:"py-1",children:[E.jsx("button",{onClick:I,className:`block w-full text-left px-4 py-2 text-sm ${l?"text-white hover:bg-gray-600 hover:text-white":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,children:E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Study Stats"]})}),E.jsx("button",{onClick:O,className:`block w-full text-left px-4 py-2 text-sm ${l?"text-red-400 hover:bg-gray-600 hover:text-red-300":"text-red-600 hover:bg-gray-100 hover:text-red-700"}`,children:E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})})]})})]}),E.jsx("div",{className:"hidden sm:block",children:E.jsx(ya,{text:"Toggle between light and dark mode for comfortable viewing",darkMode:l,position:"bottom",children:E.jsx("button",{onClick:V,className:`p-2 rounded-full ${l?"bg-gray-700 text-yellow-300":"bg-gray-200 text-gray-700"}`,"aria-label":"Toggle dark mode",children:l?E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})})}),n&&E.jsx(ya,{text:"Return to the category selection screen",darkMode:l,position:"bottom",children:E.jsx("button",{onClick:A,className:`w-full sm:w-auto px-4 py-2 ${l?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-500 text-white hover:bg-gray-600"} rounded-lg transition-colors duration-200 text-sm sm:text-base`,children:"Back to Categories"})})]})]})})});return C?h?E.jsxs("div",{className:`min-h-screen transition-colors duration-200 ${l?"dark bg-gray-900":"bg-gradient-to-b from-gray-50 to-gray-100"}`,children:[rt(),E.jsx("main",{className:"max-w-7xl mx-auto py-8 sm:py-12 px-4 sm:px-6 lg:px-8",children:n&&i?t?(()=>{var Ve;return console.log(`Rendering FlashcardDeck with categoryId=${n}, subcategoryId=${t}`),E.jsx(NM,{cards:((Ve=i.subcategories.find(ve=>ve.id===t))==null?void 0:Ve.cards)||[],darkMode:l,categoryId:n,subcategoryId:t})})():(console.log(`Rendering WelcomePage for subcategory selection within category=${n}`),E.jsx(jw,{onCategorySelect:j,darkMode:l,selectedCategory:i})):(console.log("Rendering WelcomePage for main category selection"),E.jsx(jw,{onCategorySelect:z,darkMode:l}))}),y&&E.jsx(OM,{darkMode:l,onClose:se}),re&&E.jsx(Kz,{darkMode:l,onClose:Qe})]}):E.jsxs("div",{className:`min-h-screen transition-colors duration-200 ${l?"dark bg-gray-900":"bg-gradient-to-b from-gray-50 to-gray-100"}`,children:[rt(),E.jsx("main",{className:"max-w-7xl mx-auto py-8 sm:py-12 px-4 sm:px-6 lg:px-8",children:E.jsx(DM,{onCorrectPassword:()=>p(!0),darkMode:l})})]}):E.jsx("div",{className:`min-h-screen flex items-center justify-center transition-colors duration-200 ${l?"dark bg-gray-900":"bg-gradient-to-b from-gray-50 to-gray-100"}`,children:E.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"})})}Vj.createRoot(document.getElementById("root")).render(E.jsx(xj.StrictMode,{children:E.jsx(MM,{})}));
